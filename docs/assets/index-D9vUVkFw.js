var vh=Object.defineProperty;var _h=(i,n,s)=>n in i?vh(i,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):i[n]=s;var Wo=(i,n,s)=>_h(i,typeof n!="symbol"?n+"":n,s);(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const h of document.querySelectorAll('link[rel="modulepreload"]'))a(h);new MutationObserver(h=>{for(const _ of h)if(_.type==="childList")for(const w of _.addedNodes)w.tagName==="LINK"&&w.rel==="modulepreload"&&a(w)}).observe(document,{childList:!0,subtree:!0});function s(h){const _={};return h.integrity&&(_.integrity=h.integrity),h.referrerPolicy&&(_.referrerPolicy=h.referrerPolicy),h.crossOrigin==="use-credentials"?_.credentials="include":h.crossOrigin==="anonymous"?_.credentials="omit":_.credentials="same-origin",_}function a(h){if(h.ep)return;h.ep=!0;const _=s(h);fetch(h.href,_)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}function getAugmentedNamespace(i){if(Object.prototype.hasOwnProperty.call(i,"__esModule"))return i;var n=i.default;if(typeof n=="function"){var s=function a(){return this instanceof a?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};s.prototype=n.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(i).forEach(function(a){var h=Object.getOwnPropertyDescriptor(i,a);Object.defineProperty(s,a,h.get?h:{enumerable:!0,get:function(){return i[a]}})}),s}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReact_production_min;function requireReact_production_min(){if(hasRequiredReact_production_min)return react_production_min;hasRequiredReact_production_min=1;var i=Symbol.for("react.element"),n=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),h=Symbol.for("react.profiler"),_=Symbol.for("react.provider"),w=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),p=Symbol.iterator;function C(B){return B===null||typeof B!="object"?null:(B=p&&B[p]||B["@@iterator"],typeof B=="function"?B:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,x={};function c(B,G,q){this.props=B,this.context=G,this.refs=x,this.updater=q||T}c.prototype.isReactComponent={},c.prototype.setState=function(B,G){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,G,"setState")},c.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function g(){}g.prototype=c.prototype;function d(B,G,q){this.props=B,this.context=G,this.refs=x,this.updater=q||T}var m=d.prototype=new g;m.constructor=d,E(m,c.prototype),m.isPureReactComponent=!0;var S=Array.isArray,b=Object.prototype.hasOwnProperty,P={current:null},L={key:!0,ref:!0,__self:!0,__source:!0};function D(B,G,q){var ie,le={},_e=null,V=null;if(G!=null)for(ie in G.ref!==void 0&&(V=G.ref),G.key!==void 0&&(_e=""+G.key),G)b.call(G,ie)&&!L.hasOwnProperty(ie)&&(le[ie]=G[ie]);var Z=arguments.length-2;if(Z===1)le.children=q;else if(1<Z){for(var se=Array(Z),te=0;te<Z;te++)se[te]=arguments[te+2];le.children=se}if(B&&B.defaultProps)for(ie in Z=B.defaultProps,Z)le[ie]===void 0&&(le[ie]=Z[ie]);return{$$typeof:i,type:B,key:_e,ref:V,props:le,_owner:P.current}}function N(B,G){return{$$typeof:i,type:B.type,key:G,ref:B.ref,props:B.props,_owner:B._owner}}function I(B){return typeof B=="object"&&B!==null&&B.$$typeof===i}function U(B){var G={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(q){return G[q]})}var F=/\/+/g;function $(B,G){return typeof B=="object"&&B!==null&&B.key!=null?U(""+B.key):G.toString(36)}function H(B,G,q,ie,le){var _e=typeof B;(_e==="undefined"||_e==="boolean")&&(B=null);var V=!1;if(B===null)V=!0;else switch(_e){case"string":case"number":V=!0;break;case"object":switch(B.$$typeof){case i:case n:V=!0}}if(V)return V=B,le=le(V),B=ie===""?"."+$(V,0):ie,S(le)?(q="",B!=null&&(q=B.replace(F,"$&/")+"/"),H(le,G,q,"",function(te){return te})):le!=null&&(I(le)&&(le=N(le,q+(!le.key||V&&V.key===le.key?"":(""+le.key).replace(F,"$&/")+"/")+B)),G.push(le)),1;if(V=0,ie=ie===""?".":ie+":",S(B))for(var Z=0;Z<B.length;Z++){_e=B[Z];var se=ie+$(_e,Z);V+=H(_e,G,q,se,le)}else if(se=C(B),typeof se=="function")for(B=se.call(B),Z=0;!(_e=B.next()).done;)_e=_e.value,se=ie+$(_e,Z++),V+=H(_e,G,q,se,le);else if(_e==="object")throw G=String(B),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.");return V}function z(B,G,q){if(B==null)return B;var ie=[],le=0;return H(B,ie,"","",function(_e){return G.call(q,_e,le++)}),ie}function Y(B){if(B._status===-1){var G=B._result;G=G(),G.then(function(q){(B._status===0||B._status===-1)&&(B._status=1,B._result=q)},function(q){(B._status===0||B._status===-1)&&(B._status=2,B._result=q)}),B._status===-1&&(B._status=0,B._result=G)}if(B._status===1)return B._result.default;throw B._result}var k={current:null},R={transition:null},A={ReactCurrentDispatcher:k,ReactCurrentBatchConfig:R,ReactCurrentOwner:P};function M(){throw Error("act(...) is not supported in production builds of React.")}return react_production_min.Children={map:z,forEach:function(B,G,q){z(B,function(){G.apply(this,arguments)},q)},count:function(B){var G=0;return z(B,function(){G++}),G},toArray:function(B){return z(B,function(G){return G})||[]},only:function(B){if(!I(B))throw Error("React.Children.only expected to receive a single React element child.");return B}},react_production_min.Component=c,react_production_min.Fragment=s,react_production_min.Profiler=h,react_production_min.PureComponent=d,react_production_min.StrictMode=a,react_production_min.Suspense=u,react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=A,react_production_min.act=M,react_production_min.cloneElement=function(B,G,q){if(B==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+B+".");var ie=E({},B.props),le=B.key,_e=B.ref,V=B._owner;if(G!=null){if(G.ref!==void 0&&(_e=G.ref,V=P.current),G.key!==void 0&&(le=""+G.key),B.type&&B.type.defaultProps)var Z=B.type.defaultProps;for(se in G)b.call(G,se)&&!L.hasOwnProperty(se)&&(ie[se]=G[se]===void 0&&Z!==void 0?Z[se]:G[se])}var se=arguments.length-2;if(se===1)ie.children=q;else if(1<se){Z=Array(se);for(var te=0;te<se;te++)Z[te]=arguments[te+2];ie.children=Z}return{$$typeof:i,type:B.type,key:le,ref:_e,props:ie,_owner:V}},react_production_min.createContext=function(B){return B={$$typeof:w,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},B.Provider={$$typeof:_,_context:B},B.Consumer=B},react_production_min.createElement=D,react_production_min.createFactory=function(B){var G=D.bind(null,B);return G.type=B,G},react_production_min.createRef=function(){return{current:null}},react_production_min.forwardRef=function(B){return{$$typeof:l,render:B}},react_production_min.isValidElement=I,react_production_min.lazy=function(B){return{$$typeof:y,_payload:{_status:-1,_result:B},_init:Y}},react_production_min.memo=function(B,G){return{$$typeof:f,type:B,compare:G===void 0?null:G}},react_production_min.startTransition=function(B){var G=R.transition;R.transition={};try{B()}finally{R.transition=G}},react_production_min.unstable_act=M,react_production_min.useCallback=function(B,G){return k.current.useCallback(B,G)},react_production_min.useContext=function(B){return k.current.useContext(B)},react_production_min.useDebugValue=function(){},react_production_min.useDeferredValue=function(B){return k.current.useDeferredValue(B)},react_production_min.useEffect=function(B,G){return k.current.useEffect(B,G)},react_production_min.useId=function(){return k.current.useId()},react_production_min.useImperativeHandle=function(B,G,q){return k.current.useImperativeHandle(B,G,q)},react_production_min.useInsertionEffect=function(B,G){return k.current.useInsertionEffect(B,G)},react_production_min.useLayoutEffect=function(B,G){return k.current.useLayoutEffect(B,G)},react_production_min.useMemo=function(B,G){return k.current.useMemo(B,G)},react_production_min.useReducer=function(B,G,q){return k.current.useReducer(B,G,q)},react_production_min.useRef=function(B){return k.current.useRef(B)},react_production_min.useState=function(B){return k.current.useState(B)},react_production_min.useSyncExternalStore=function(B,G,q){return k.current.useSyncExternalStore(B,G,q)},react_production_min.useTransition=function(){return k.current.useTransition()},react_production_min.version="18.3.1",react_production_min}var hasRequiredReact;function requireReact(){return hasRequiredReact||(hasRequiredReact=1,react.exports=requireReact_production_min()),react.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactJsxRuntime_production_min;function requireReactJsxRuntime_production_min(){if(hasRequiredReactJsxRuntime_production_min)return reactJsxRuntime_production_min;hasRequiredReactJsxRuntime_production_min=1;var i=requireReact(),n=Symbol.for("react.element"),s=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,h=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,_={key:!0,ref:!0,__self:!0,__source:!0};function w(l,u,f){var y,p={},C=null,T=null;f!==void 0&&(C=""+f),u.key!==void 0&&(C=""+u.key),u.ref!==void 0&&(T=u.ref);for(y in u)a.call(u,y)&&!_.hasOwnProperty(y)&&(p[y]=u[y]);if(l&&l.defaultProps)for(y in u=l.defaultProps,u)p[y]===void 0&&(p[y]=u[y]);return{$$typeof:n,type:l,key:C,ref:T,props:p,_owner:h.current}}return reactJsxRuntime_production_min.Fragment=s,reactJsxRuntime_production_min.jsx=w,reactJsxRuntime_production_min.jsxs=w,reactJsxRuntime_production_min}var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime.exports=requireReactJsxRuntime_production_min()),jsxRuntime.exports}var jsxRuntimeExports=requireJsxRuntime(),client={},reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredScheduler_production_min;function requireScheduler_production_min(){return hasRequiredScheduler_production_min||(hasRequiredScheduler_production_min=1,function(i){function n(R,A){var M=R.length;R.push(A);e:for(;0<M;){var B=M-1>>>1,G=R[B];if(0<h(G,A))R[B]=A,R[M]=G,M=B;else break e}}function s(R){return R.length===0?null:R[0]}function a(R){if(R.length===0)return null;var A=R[0],M=R.pop();if(M!==A){R[0]=M;e:for(var B=0,G=R.length,q=G>>>1;B<q;){var ie=2*(B+1)-1,le=R[ie],_e=ie+1,V=R[_e];if(0>h(le,M))_e<G&&0>h(V,le)?(R[B]=V,R[_e]=M,B=_e):(R[B]=le,R[ie]=M,B=ie);else if(_e<G&&0>h(V,M))R[B]=V,R[_e]=M,B=_e;else break e}}return A}function h(R,A){var M=R.sortIndex-A.sortIndex;return M!==0?M:R.id-A.id}if(typeof performance=="object"&&typeof performance.now=="function"){var _=performance;i.unstable_now=function(){return _.now()}}else{var w=Date,l=w.now();i.unstable_now=function(){return w.now()-l}}var u=[],f=[],y=1,p=null,C=3,T=!1,E=!1,x=!1,c=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,d=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function m(R){for(var A=s(f);A!==null;){if(A.callback===null)a(f);else if(A.startTime<=R)a(f),A.sortIndex=A.expirationTime,n(u,A);else break;A=s(f)}}function S(R){if(x=!1,m(R),!E)if(s(u)!==null)E=!0,Y(b);else{var A=s(f);A!==null&&k(S,A.startTime-R)}}function b(R,A){E=!1,x&&(x=!1,g(D),D=-1),T=!0;var M=C;try{for(m(A),p=s(u);p!==null&&(!(p.expirationTime>A)||R&&!U());){var B=p.callback;if(typeof B=="function"){p.callback=null,C=p.priorityLevel;var G=B(p.expirationTime<=A);A=i.unstable_now(),typeof G=="function"?p.callback=G:p===s(u)&&a(u),m(A)}else a(u);p=s(u)}if(p!==null)var q=!0;else{var ie=s(f);ie!==null&&k(S,ie.startTime-A),q=!1}return q}finally{p=null,C=M,T=!1}}var P=!1,L=null,D=-1,N=5,I=-1;function U(){return!(i.unstable_now()-I<N)}function F(){if(L!==null){var R=i.unstable_now();I=R;var A=!0;try{A=L(!0,R)}finally{A?$():(P=!1,L=null)}}else P=!1}var $;if(typeof d=="function")$=function(){d(F)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,z=H.port2;H.port1.onmessage=F,$=function(){z.postMessage(null)}}else $=function(){c(F,0)};function Y(R){L=R,P||(P=!0,$())}function k(R,A){D=c(function(){R(i.unstable_now())},A)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(R){R.callback=null},i.unstable_continueExecution=function(){E||T||(E=!0,Y(b))},i.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<R?Math.floor(1e3/R):5},i.unstable_getCurrentPriorityLevel=function(){return C},i.unstable_getFirstCallbackNode=function(){return s(u)},i.unstable_next=function(R){switch(C){case 1:case 2:case 3:var A=3;break;default:A=C}var M=C;C=A;try{return R()}finally{C=M}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(R,A){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var M=C;C=R;try{return A()}finally{C=M}},i.unstable_scheduleCallback=function(R,A,M){var B=i.unstable_now();switch(typeof M=="object"&&M!==null?(M=M.delay,M=typeof M=="number"&&0<M?B+M:B):M=B,R){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=M+G,R={id:y++,callback:A,priorityLevel:R,startTime:M,expirationTime:G,sortIndex:-1},M>B?(R.sortIndex=M,n(f,R),s(u)===null&&R===s(f)&&(x?(g(D),D=-1):x=!0,k(S,M-B))):(R.sortIndex=G,n(u,R),E||T||(E=!0,Y(b))),R},i.unstable_shouldYield=U,i.unstable_wrapCallback=function(R){var A=C;return function(){var M=C;C=A;try{return R.apply(this,arguments)}finally{C=M}}}}(scheduler_production_min)),scheduler_production_min}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production_min()),scheduler.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDom_production_min;function requireReactDom_production_min(){if(hasRequiredReactDom_production_min)return reactDom_production_min;hasRequiredReactDom_production_min=1;var i=requireReact(),n=requireScheduler();function s(e){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+e,o=1;o<arguments.length;o++)r+="&args[]="+encodeURIComponent(arguments[o]);return"Minified React error #"+e+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,h={};function _(e,r){w(e,r),w(e+"Capture",r)}function w(e,r){for(h[e]=r,e=0;e<r.length;e++)a.add(r[e])}var l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),u=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,y={},p={};function C(e){return u.call(p,e)?!0:u.call(y,e)?!1:f.test(e)?p[e]=!0:(y[e]=!0,!1)}function T(e,r,o,v){if(o!==null&&o.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return v?!1:o!==null?!o.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function E(e,r,o,v){if(r===null||typeof r>"u"||T(e,r,o,v))return!0;if(v)return!1;if(o!==null)switch(o.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function x(e,r,o,v,j,O,W){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=v,this.attributeNamespace=j,this.mustUseProperty=o,this.propertyName=e,this.type=r,this.sanitizeURL=O,this.removeEmptyString=W}var c={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){c[e]=new x(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var r=e[0];c[r]=new x(r,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){c[e]=new x(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){c[e]=new x(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){c[e]=new x(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){c[e]=new x(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){c[e]=new x(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){c[e]=new x(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){c[e]=new x(e,5,!1,e.toLowerCase(),null,!1,!1)});var g=/[\-:]([a-z])/g;function d(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var r=e.replace(g,d);c[r]=new x(r,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var r=e.replace(g,d);c[r]=new x(r,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var r=e.replace(g,d);c[r]=new x(r,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){c[e]=new x(e,1,!1,e.toLowerCase(),null,!1,!1)}),c.xlinkHref=new x("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){c[e]=new x(e,1,!1,e.toLowerCase(),null,!0,!0)});function m(e,r,o,v){var j=c.hasOwnProperty(r)?c[r]:null;(j!==null?j.type!==0:v||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(E(r,o,j,v)&&(o=null),v||j===null?C(r)&&(o===null?e.removeAttribute(r):e.setAttribute(r,""+o)):j.mustUseProperty?e[j.propertyName]=o===null?j.type===3?!1:"":o:(r=j.attributeName,v=j.attributeNamespace,o===null?e.removeAttribute(r):(j=j.type,o=j===3||j===4&&o===!0?"":""+o,v?e.setAttributeNS(v,r,o):e.setAttribute(r,o))))}var S=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,b=Symbol.for("react.element"),P=Symbol.for("react.portal"),L=Symbol.for("react.fragment"),D=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),I=Symbol.for("react.provider"),U=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),$=Symbol.for("react.suspense"),H=Symbol.for("react.suspense_list"),z=Symbol.for("react.memo"),Y=Symbol.for("react.lazy"),k=Symbol.for("react.offscreen"),R=Symbol.iterator;function A(e){return e===null||typeof e!="object"?null:(e=R&&e[R]||e["@@iterator"],typeof e=="function"?e:null)}var M=Object.assign,B;function G(e){if(B===void 0)try{throw Error()}catch(o){var r=o.stack.trim().match(/\n( *(at )?)/);B=r&&r[1]||""}return`
`+B+e}var q=!1;function ie(e,r){if(!e||q)return"";q=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(ae){var v=ae}Reflect.construct(e,[],r)}else{try{r.call()}catch(ae){v=ae}e.call(r.prototype)}else{try{throw Error()}catch(ae){v=ae}e()}}catch(ae){if(ae&&v&&typeof ae.stack=="string"){for(var j=ae.stack.split(`
`),O=v.stack.split(`
`),W=j.length-1,K=O.length-1;1<=W&&0<=K&&j[W]!==O[K];)K--;for(;1<=W&&0<=K;W--,K--)if(j[W]!==O[K]){if(W!==1||K!==1)do if(W--,K--,0>K||j[W]!==O[K]){var J=`
`+j[W].replace(" at new "," at ");return e.displayName&&J.includes("<anonymous>")&&(J=J.replace("<anonymous>",e.displayName)),J}while(1<=W&&0<=K);break}}}finally{q=!1,Error.prepareStackTrace=o}return(e=e?e.displayName||e.name:"")?G(e):""}function le(e){switch(e.tag){case 5:return G(e.type);case 16:return G("Lazy");case 13:return G("Suspense");case 19:return G("SuspenseList");case 0:case 2:case 15:return e=ie(e.type,!1),e;case 11:return e=ie(e.type.render,!1),e;case 1:return e=ie(e.type,!0),e;default:return""}}function _e(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case L:return"Fragment";case P:return"Portal";case N:return"Profiler";case D:return"StrictMode";case $:return"Suspense";case H:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case U:return(e.displayName||"Context")+".Consumer";case I:return(e._context.displayName||"Context")+".Provider";case F:var r=e.render;return e=e.displayName,e||(e=r.displayName||r.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case z:return r=e.displayName||null,r!==null?r:_e(e.type)||"Memo";case Y:r=e._payload,e=e._init;try{return _e(e(r))}catch{}}return null}function V(e){var r=e.type;switch(e.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=r.render,e=e.displayName||e.name||"",r.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return _e(r);case 8:return r===D?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function Z(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function se(e){var r=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function te(e){var r=se(e)?"checked":"value",o=Object.getOwnPropertyDescriptor(e.constructor.prototype,r),v=""+e[r];if(!e.hasOwnProperty(r)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var j=o.get,O=o.set;return Object.defineProperty(e,r,{configurable:!0,get:function(){return j.call(this)},set:function(W){v=""+W,O.call(this,W)}}),Object.defineProperty(e,r,{enumerable:o.enumerable}),{getValue:function(){return v},setValue:function(W){v=""+W},stopTracking:function(){e._valueTracker=null,delete e[r]}}}}function ce(e){e._valueTracker||(e._valueTracker=te(e))}function he(e){if(!e)return!1;var r=e._valueTracker;if(!r)return!0;var o=r.getValue(),v="";return e&&(v=se(e)?e.checked?"true":"false":e.value),e=v,e!==o?(r.setValue(e),!0):!1}function ke(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ie(e,r){var o=r.checked;return M({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:o??e._wrapperState.initialChecked})}function He(e,r){var o=r.defaultValue==null?"":r.defaultValue,v=r.checked!=null?r.checked:r.defaultChecked;o=Z(r.value!=null?r.value:o),e._wrapperState={initialChecked:v,initialValue:o,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function tt(e,r){r=r.checked,r!=null&&m(e,"checked",r,!1)}function Ae(e,r){tt(e,r);var o=Z(r.value),v=r.type;if(o!=null)v==="number"?(o===0&&e.value===""||e.value!=o)&&(e.value=""+o):e.value!==""+o&&(e.value=""+o);else if(v==="submit"||v==="reset"){e.removeAttribute("value");return}r.hasOwnProperty("value")?It(e,r.type,o):r.hasOwnProperty("defaultValue")&&It(e,r.type,Z(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(e.defaultChecked=!!r.defaultChecked)}function bt(e,r,o){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var v=r.type;if(!(v!=="submit"&&v!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+e._wrapperState.initialValue,o||r===e.value||(e.value=r),e.defaultValue=r}o=e.name,o!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,o!==""&&(e.name=o)}function It(e,r,o){(r!=="number"||ke(e.ownerDocument)!==e)&&(o==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+o&&(e.defaultValue=""+o))}var xt=Array.isArray;function gt(e,r,o,v){if(e=e.options,r){r={};for(var j=0;j<o.length;j++)r["$"+o[j]]=!0;for(o=0;o<e.length;o++)j=r.hasOwnProperty("$"+e[o].value),e[o].selected!==j&&(e[o].selected=j),j&&v&&(e[o].defaultSelected=!0)}else{for(o=""+Z(o),r=null,j=0;j<e.length;j++){if(e[j].value===o){e[j].selected=!0,v&&(e[j].defaultSelected=!0);return}r!==null||e[j].disabled||(r=e[j])}r!==null&&(r.selected=!0)}}function kt(e,r){if(r.dangerouslySetInnerHTML!=null)throw Error(s(91));return M({},r,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Ze(e,r){var o=r.value;if(o==null){if(o=r.children,r=r.defaultValue,o!=null){if(r!=null)throw Error(s(92));if(xt(o)){if(1<o.length)throw Error(s(93));o=o[0]}r=o}r==null&&(r=""),o=r}e._wrapperState={initialValue:Z(o)}}function Tt(e,r){var o=Z(r.value),v=Z(r.defaultValue);o!=null&&(o=""+o,o!==e.value&&(e.value=o),r.defaultValue==null&&e.defaultValue!==o&&(e.defaultValue=o)),v!=null&&(e.defaultValue=""+v)}function Ye(e){var r=e.textContent;r===e._wrapperState.initialValue&&r!==""&&r!==null&&(e.value=r)}function jt(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Nt(e,r){return e==null||e==="http://www.w3.org/1999/xhtml"?jt(r):e==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var it,Dt=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,o,v,j){MSApp.execUnsafeLocalFunction(function(){return e(r,o,v,j)})}:e}(function(e,r){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=r;else{for(it=it||document.createElement("div"),it.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=it.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;r.firstChild;)e.appendChild(r.firstChild)}});function rt(e,r){if(r){var o=e.firstChild;if(o&&o===e.lastChild&&o.nodeType===3){o.nodeValue=r;return}}e.textContent=r}var Qe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ne=["Webkit","ms","Moz","O"];Object.keys(Qe).forEach(function(e){Ne.forEach(function(r){r=r+e.charAt(0).toUpperCase()+e.substring(1),Qe[r]=Qe[e]})});function Ge(e,r,o){return r==null||typeof r=="boolean"||r===""?"":o||typeof r!="number"||r===0||Qe.hasOwnProperty(e)&&Qe[e]?(""+r).trim():r+"px"}function Pt(e,r){e=e.style;for(var o in r)if(r.hasOwnProperty(o)){var v=o.indexOf("--")===0,j=Ge(o,r[o],v);o==="float"&&(o="cssFloat"),v?e.setProperty(o,j):e[o]=j}}var me=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ee(e,r){if(r){if(me[e]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(s(137,e));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(s(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(s(61))}if(r.style!=null&&typeof r.style!="object")throw Error(s(62))}}function ee(e,r){if(e.indexOf("-")===-1)return typeof r.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var re=null;function ue(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var xe=null,be=null,De=null;function Oe(e){if(e=Mn(e)){if(typeof xe!="function")throw Error(s(280));var r=e.stateNode;r&&(r=ys(r),xe(e.stateNode,e.type,r))}}function ct(e){be?De?De.push(e):De=[e]:be=e}function yt(){if(be){var e=be,r=De;if(De=be=null,Oe(e),r)for(e=0;e<r.length;e++)Oe(r[e])}}function Ke(e,r){return e(r)}function fn(){}var ii=!1;function zo(e,r,o){if(ii)return e(r,o);ii=!0;try{return Ke(e,r,o)}finally{ii=!1,(be!==null||De!==null)&&(fn(),yt())}}function pn(e,r){var o=e.stateNode;if(o===null)return null;var v=ys(o);if(v===null)return null;o=v[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(v=!v.disabled)||(e=e.type,v=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!v;break e;default:e=!1}if(e)return null;if(o&&typeof o!="function")throw Error(s(231,r,typeof o));return o}var oi=!1;if(l)try{var mn={};Object.defineProperty(mn,"passive",{get:function(){oi=!0}}),window.addEventListener("test",mn,mn),window.removeEventListener("test",mn,mn)}catch{oi=!1}function wc(e,r,o,v,j,O,W,K,J){var ae=Array.prototype.slice.call(arguments,3);try{r.apply(o,ae)}catch(pe){this.onError(pe)}}var gn=!1,Xn=null,Jn=!1,ai=null,Cc={onError:function(e){gn=!0,Xn=e}};function Rc(e,r,o,v,j,O,W,K,J){gn=!1,Xn=null,wc.apply(Cc,arguments)}function bc(e,r,o,v,j,O,W,K,J){if(Rc.apply(this,arguments),gn){if(gn){var ae=Xn;gn=!1,Xn=null}else throw Error(s(198));Jn||(Jn=!0,ai=ae)}}function Dr(e){var r=e,o=e;if(e.alternate)for(;r.return;)r=r.return;else{e=r;do r=e,(r.flags&4098)!==0&&(o=r.return),e=r.return;while(e)}return r.tag===3?o:null}function Vo(e){if(e.tag===13){var r=e.memoizedState;if(r===null&&(e=e.alternate,e!==null&&(r=e.memoizedState)),r!==null)return r.dehydrated}return null}function Yo(e){if(Dr(e)!==e)throw Error(s(188))}function kc(e){var r=e.alternate;if(!r){if(r=Dr(e),r===null)throw Error(s(188));return r!==e?null:e}for(var o=e,v=r;;){var j=o.return;if(j===null)break;var O=j.alternate;if(O===null){if(v=j.return,v!==null){o=v;continue}break}if(j.child===O.child){for(O=j.child;O;){if(O===o)return Yo(j),e;if(O===v)return Yo(j),r;O=O.sibling}throw Error(s(188))}if(o.return!==v.return)o=j,v=O;else{for(var W=!1,K=j.child;K;){if(K===o){W=!0,o=j,v=O;break}if(K===v){W=!0,v=j,o=O;break}K=K.sibling}if(!W){for(K=O.child;K;){if(K===o){W=!0,o=O,v=j;break}if(K===v){W=!0,v=O,o=j;break}K=K.sibling}if(!W)throw Error(s(189))}}if(o.alternate!==v)throw Error(s(190))}if(o.tag!==3)throw Error(s(188));return o.stateNode.current===o?e:r}function Go(e){return e=kc(e),e!==null?Ko(e):null}function Ko(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var r=Ko(e);if(r!==null)return r;e=e.sibling}return null}var qo=n.unstable_scheduleCallback,Xo=n.unstable_cancelCallback,Tc=n.unstable_shouldYield,jc=n.unstable_requestPaint,Xe=n.unstable_now,Dc=n.unstable_getCurrentPriorityLevel,li=n.unstable_ImmediatePriority,Jo=n.unstable_UserBlockingPriority,Zn=n.unstable_NormalPriority,Pc=n.unstable_LowPriority,Zo=n.unstable_IdlePriority,Qn=null,Jt=null;function Ac(e){if(Jt&&typeof Jt.onCommitFiberRoot=="function")try{Jt.onCommitFiberRoot(Qn,e,void 0,(e.current.flags&128)===128)}catch{}}var zt=Math.clz32?Math.clz32:Mc,Oc=Math.log,Lc=Math.LN2;function Mc(e){return e>>>=0,e===0?32:31-(Oc(e)/Lc|0)|0}var ts=64,rs=4194304;function vn(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ns(e,r){var o=e.pendingLanes;if(o===0)return 0;var v=0,j=e.suspendedLanes,O=e.pingedLanes,W=o&268435455;if(W!==0){var K=W&~j;K!==0?v=vn(K):(O&=W,O!==0&&(v=vn(O)))}else W=o&~j,W!==0?v=vn(W):O!==0&&(v=vn(O));if(v===0)return 0;if(r!==0&&r!==v&&(r&j)===0&&(j=v&-v,O=r&-r,j>=O||j===16&&(O&4194240)!==0))return r;if((v&4)!==0&&(v|=o&16),r=e.entangledLanes,r!==0)for(e=e.entanglements,r&=v;0<r;)o=31-zt(r),j=1<<o,v|=e[o],r&=~j;return v}function Ic(e,r){switch(e){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Nc(e,r){for(var o=e.suspendedLanes,v=e.pingedLanes,j=e.expirationTimes,O=e.pendingLanes;0<O;){var W=31-zt(O),K=1<<W,J=j[W];J===-1?((K&o)===0||(K&v)!==0)&&(j[W]=Ic(K,r)):J<=r&&(e.expiredLanes|=K),O&=~K}}function ci(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Qo(){var e=ts;return ts<<=1,(ts&4194240)===0&&(ts=64),e}function ui(e){for(var r=[],o=0;31>o;o++)r.push(e);return r}function _n(e,r,o){e.pendingLanes|=r,r!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,r=31-zt(r),e[r]=o}function Bc(e,r){var o=e.pendingLanes&~r;e.pendingLanes=r,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=r,e.mutableReadLanes&=r,e.entangledLanes&=r,r=e.entanglements;var v=e.eventTimes;for(e=e.expirationTimes;0<o;){var j=31-zt(o),O=1<<j;r[j]=0,v[j]=-1,e[j]=-1,o&=~O}}function hi(e,r){var o=e.entangledLanes|=r;for(e=e.entanglements;o;){var v=31-zt(o),j=1<<v;j&r|e[v]&r&&(e[v]|=r),o&=~j}}var Be=0;function ea(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var ta,di,ra,na,sa,fi=!1,ss=[],ur=null,hr=null,dr=null,xn=new Map,yn=new Map,pr=[],Fc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ia(e,r){switch(e){case"focusin":case"focusout":ur=null;break;case"dragenter":case"dragleave":hr=null;break;case"mouseover":case"mouseout":dr=null;break;case"pointerover":case"pointerout":xn.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":yn.delete(r.pointerId)}}function Sn(e,r,o,v,j,O){return e===null||e.nativeEvent!==O?(e={blockedOn:r,domEventName:o,eventSystemFlags:v,nativeEvent:O,targetContainers:[j]},r!==null&&(r=Mn(r),r!==null&&di(r)),e):(e.eventSystemFlags|=v,r=e.targetContainers,j!==null&&r.indexOf(j)===-1&&r.push(j),e)}function Uc(e,r,o,v,j){switch(r){case"focusin":return ur=Sn(ur,e,r,o,v,j),!0;case"dragenter":return hr=Sn(hr,e,r,o,v,j),!0;case"mouseover":return dr=Sn(dr,e,r,o,v,j),!0;case"pointerover":var O=j.pointerId;return xn.set(O,Sn(xn.get(O)||null,e,r,o,v,j)),!0;case"gotpointercapture":return O=j.pointerId,yn.set(O,Sn(yn.get(O)||null,e,r,o,v,j)),!0}return!1}function oa(e){var r=Pr(e.target);if(r!==null){var o=Dr(r);if(o!==null){if(r=o.tag,r===13){if(r=Vo(o),r!==null){e.blockedOn=r,sa(e.priority,function(){ra(o)});return}}else if(r===3&&o.stateNode.current.memoizedState.isDehydrated){e.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}e.blockedOn=null}function is(e){if(e.blockedOn!==null)return!1;for(var r=e.targetContainers;0<r.length;){var o=mi(e.domEventName,e.eventSystemFlags,r[0],e.nativeEvent);if(o===null){o=e.nativeEvent;var v=new o.constructor(o.type,o);re=v,o.target.dispatchEvent(v),re=null}else return r=Mn(o),r!==null&&di(r),e.blockedOn=o,!1;r.shift()}return!0}function aa(e,r,o){is(e)&&o.delete(r)}function $c(){fi=!1,ur!==null&&is(ur)&&(ur=null),hr!==null&&is(hr)&&(hr=null),dr!==null&&is(dr)&&(dr=null),xn.forEach(aa),yn.forEach(aa)}function En(e,r){e.blockedOn===r&&(e.blockedOn=null,fi||(fi=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,$c)))}function wn(e){function r(j){return En(j,e)}if(0<ss.length){En(ss[0],e);for(var o=1;o<ss.length;o++){var v=ss[o];v.blockedOn===e&&(v.blockedOn=null)}}for(ur!==null&&En(ur,e),hr!==null&&En(hr,e),dr!==null&&En(dr,e),xn.forEach(r),yn.forEach(r),o=0;o<pr.length;o++)v=pr[o],v.blockedOn===e&&(v.blockedOn=null);for(;0<pr.length&&(o=pr[0],o.blockedOn===null);)oa(o),o.blockedOn===null&&pr.shift()}var Wr=S.ReactCurrentBatchConfig,os=!0;function Hc(e,r,o,v){var j=Be,O=Wr.transition;Wr.transition=null;try{Be=1,pi(e,r,o,v)}finally{Be=j,Wr.transition=O}}function Wc(e,r,o,v){var j=Be,O=Wr.transition;Wr.transition=null;try{Be=4,pi(e,r,o,v)}finally{Be=j,Wr.transition=O}}function pi(e,r,o,v){if(os){var j=mi(e,r,o,v);if(j===null)Ai(e,r,v,as,o),ia(e,v);else if(Uc(j,e,r,o,v))v.stopPropagation();else if(ia(e,v),r&4&&-1<Fc.indexOf(e)){for(;j!==null;){var O=Mn(j);if(O!==null&&ta(O),O=mi(e,r,o,v),O===null&&Ai(e,r,v,as,o),O===j)break;j=O}j!==null&&v.stopPropagation()}else Ai(e,r,v,null,o)}}var as=null;function mi(e,r,o,v){if(as=null,e=ue(v),e=Pr(e),e!==null)if(r=Dr(e),r===null)e=null;else if(o=r.tag,o===13){if(e=Vo(r),e!==null)return e;e=null}else if(o===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;e=null}else r!==e&&(e=null);return as=e,null}function la(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Dc()){case li:return 1;case Jo:return 4;case Zn:case Pc:return 16;case Zo:return 536870912;default:return 16}default:return 16}}var mr=null,gi=null,ls=null;function ca(){if(ls)return ls;var e,r=gi,o=r.length,v,j="value"in mr?mr.value:mr.textContent,O=j.length;for(e=0;e<o&&r[e]===j[e];e++);var W=o-e;for(v=1;v<=W&&r[o-v]===j[O-v];v++);return ls=j.slice(e,1<v?1-v:void 0)}function cs(e){var r=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&r===13&&(e=13)):e=r,e===10&&(e=13),32<=e||e===13?e:0}function us(){return!0}function ua(){return!1}function At(e){function r(o,v,j,O,W){this._reactName=o,this._targetInst=j,this.type=v,this.nativeEvent=O,this.target=W,this.currentTarget=null;for(var K in e)e.hasOwnProperty(K)&&(o=e[K],this[K]=o?o(O):O[K]);return this.isDefaultPrevented=(O.defaultPrevented!=null?O.defaultPrevented:O.returnValue===!1)?us:ua,this.isPropagationStopped=ua,this}return M(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=us)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=us)},persist:function(){},isPersistent:us}),r}var zr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},vi=At(zr),Cn=M({},zr,{view:0,detail:0}),zc=At(Cn),_i,xi,Rn,hs=M({},Cn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Si,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Rn&&(Rn&&e.type==="mousemove"?(_i=e.screenX-Rn.screenX,xi=e.screenY-Rn.screenY):xi=_i=0,Rn=e),_i)},movementY:function(e){return"movementY"in e?e.movementY:xi}}),ha=At(hs),Vc=M({},hs,{dataTransfer:0}),Yc=At(Vc),Gc=M({},Cn,{relatedTarget:0}),yi=At(Gc),Kc=M({},zr,{animationName:0,elapsedTime:0,pseudoElement:0}),qc=At(Kc),Xc=M({},zr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Jc=At(Xc),Zc=M({},zr,{data:0}),da=At(Zc),Qc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},eu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},tu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ru(e){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(e):(e=tu[e])?!!r[e]:!1}function Si(){return ru}var nu=M({},Cn,{key:function(e){if(e.key){var r=Qc[e.key]||e.key;if(r!=="Unidentified")return r}return e.type==="keypress"?(e=cs(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?eu[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Si,charCode:function(e){return e.type==="keypress"?cs(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?cs(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),su=At(nu),iu=M({},hs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),fa=At(iu),ou=M({},Cn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Si}),au=At(ou),lu=M({},zr,{propertyName:0,elapsedTime:0,pseudoElement:0}),cu=At(lu),uu=M({},hs,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),hu=At(uu),du=[9,13,27,32],Ei=l&&"CompositionEvent"in window,bn=null;l&&"documentMode"in document&&(bn=document.documentMode);var fu=l&&"TextEvent"in window&&!bn,pa=l&&(!Ei||bn&&8<bn&&11>=bn),ma=" ",ga=!1;function va(e,r){switch(e){case"keyup":return du.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _a(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Vr=!1;function pu(e,r){switch(e){case"compositionend":return _a(r);case"keypress":return r.which!==32?null:(ga=!0,ma);case"textInput":return e=r.data,e===ma&&ga?null:e;default:return null}}function mu(e,r){if(Vr)return e==="compositionend"||!Ei&&va(e,r)?(e=ca(),ls=gi=mr=null,Vr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return pa&&r.locale!=="ko"?null:r.data;default:return null}}var gu={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xa(e){var r=e&&e.nodeName&&e.nodeName.toLowerCase();return r==="input"?!!gu[e.type]:r==="textarea"}function ya(e,r,o,v){ct(v),r=vs(r,"onChange"),0<r.length&&(o=new vi("onChange","change",null,o,v),e.push({event:o,listeners:r}))}var kn=null,Tn=null;function vu(e){Ba(e,0)}function ds(e){var r=Xr(e);if(he(r))return e}function _u(e,r){if(e==="change")return r}var Sa=!1;if(l){var wi;if(l){var Ci="oninput"in document;if(!Ci){var Ea=document.createElement("div");Ea.setAttribute("oninput","return;"),Ci=typeof Ea.oninput=="function"}wi=Ci}else wi=!1;Sa=wi&&(!document.documentMode||9<document.documentMode)}function wa(){kn&&(kn.detachEvent("onpropertychange",Ca),Tn=kn=null)}function Ca(e){if(e.propertyName==="value"&&ds(Tn)){var r=[];ya(r,Tn,e,ue(e)),zo(vu,r)}}function xu(e,r,o){e==="focusin"?(wa(),kn=r,Tn=o,kn.attachEvent("onpropertychange",Ca)):e==="focusout"&&wa()}function yu(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ds(Tn)}function Su(e,r){if(e==="click")return ds(r)}function Eu(e,r){if(e==="input"||e==="change")return ds(r)}function wu(e,r){return e===r&&(e!==0||1/e===1/r)||e!==e&&r!==r}var Vt=typeof Object.is=="function"?Object.is:wu;function jn(e,r){if(Vt(e,r))return!0;if(typeof e!="object"||e===null||typeof r!="object"||r===null)return!1;var o=Object.keys(e),v=Object.keys(r);if(o.length!==v.length)return!1;for(v=0;v<o.length;v++){var j=o[v];if(!u.call(r,j)||!Vt(e[j],r[j]))return!1}return!0}function Ra(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ba(e,r){var o=Ra(e);e=0;for(var v;o;){if(o.nodeType===3){if(v=e+o.textContent.length,e<=r&&v>=r)return{node:o,offset:r-e};e=v}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Ra(o)}}function ka(e,r){return e&&r?e===r?!0:e&&e.nodeType===3?!1:r&&r.nodeType===3?ka(e,r.parentNode):"contains"in e?e.contains(r):e.compareDocumentPosition?!!(e.compareDocumentPosition(r)&16):!1:!1}function Ta(){for(var e=window,r=ke();r instanceof e.HTMLIFrameElement;){try{var o=typeof r.contentWindow.location.href=="string"}catch{o=!1}if(o)e=r.contentWindow;else break;r=ke(e.document)}return r}function Ri(e){var r=e&&e.nodeName&&e.nodeName.toLowerCase();return r&&(r==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||r==="textarea"||e.contentEditable==="true")}function Cu(e){var r=Ta(),o=e.focusedElem,v=e.selectionRange;if(r!==o&&o&&o.ownerDocument&&ka(o.ownerDocument.documentElement,o)){if(v!==null&&Ri(o)){if(r=v.start,e=v.end,e===void 0&&(e=r),"selectionStart"in o)o.selectionStart=r,o.selectionEnd=Math.min(e,o.value.length);else if(e=(r=o.ownerDocument||document)&&r.defaultView||window,e.getSelection){e=e.getSelection();var j=o.textContent.length,O=Math.min(v.start,j);v=v.end===void 0?O:Math.min(v.end,j),!e.extend&&O>v&&(j=v,v=O,O=j),j=ba(o,O);var W=ba(o,v);j&&W&&(e.rangeCount!==1||e.anchorNode!==j.node||e.anchorOffset!==j.offset||e.focusNode!==W.node||e.focusOffset!==W.offset)&&(r=r.createRange(),r.setStart(j.node,j.offset),e.removeAllRanges(),O>v?(e.addRange(r),e.extend(W.node,W.offset)):(r.setEnd(W.node,W.offset),e.addRange(r)))}}for(r=[],e=o;e=e.parentNode;)e.nodeType===1&&r.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<r.length;o++)e=r[o],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Ru=l&&"documentMode"in document&&11>=document.documentMode,Yr=null,bi=null,Dn=null,ki=!1;function ja(e,r,o){var v=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;ki||Yr==null||Yr!==ke(v)||(v=Yr,"selectionStart"in v&&Ri(v)?v={start:v.selectionStart,end:v.selectionEnd}:(v=(v.ownerDocument&&v.ownerDocument.defaultView||window).getSelection(),v={anchorNode:v.anchorNode,anchorOffset:v.anchorOffset,focusNode:v.focusNode,focusOffset:v.focusOffset}),Dn&&jn(Dn,v)||(Dn=v,v=vs(bi,"onSelect"),0<v.length&&(r=new vi("onSelect","select",null,r,o),e.push({event:r,listeners:v}),r.target=Yr)))}function ps(e,r){var o={};return o[e.toLowerCase()]=r.toLowerCase(),o["Webkit"+e]="webkit"+r,o["Moz"+e]="moz"+r,o}var Gr={animationend:ps("Animation","AnimationEnd"),animationiteration:ps("Animation","AnimationIteration"),animationstart:ps("Animation","AnimationStart"),transitionend:ps("Transition","TransitionEnd")},Ti={},Da={};l&&(Da=document.createElement("div").style,"AnimationEvent"in window||(delete Gr.animationend.animation,delete Gr.animationiteration.animation,delete Gr.animationstart.animation),"TransitionEvent"in window||delete Gr.transitionend.transition);function ms(e){if(Ti[e])return Ti[e];if(!Gr[e])return e;var r=Gr[e],o;for(o in r)if(r.hasOwnProperty(o)&&o in Da)return Ti[e]=r[o];return e}var Pa=ms("animationend"),Aa=ms("animationiteration"),Oa=ms("animationstart"),La=ms("transitionend"),Ma=new Map,Ia="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function gr(e,r){Ma.set(e,r),_(r,[e])}for(var ji=0;ji<Ia.length;ji++){var Di=Ia[ji],bu=Di.toLowerCase(),ku=Di[0].toUpperCase()+Di.slice(1);gr(bu,"on"+ku)}gr(Pa,"onAnimationEnd"),gr(Aa,"onAnimationIteration"),gr(Oa,"onAnimationStart"),gr("dblclick","onDoubleClick"),gr("focusin","onFocus"),gr("focusout","onBlur"),gr(La,"onTransitionEnd"),w("onMouseEnter",["mouseout","mouseover"]),w("onMouseLeave",["mouseout","mouseover"]),w("onPointerEnter",["pointerout","pointerover"]),w("onPointerLeave",["pointerout","pointerover"]),_("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),_("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),_("onBeforeInput",["compositionend","keypress","textInput","paste"]),_("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),_("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),_("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Tu=new Set("cancel close invalid load scroll toggle".split(" ").concat(Pn));function Na(e,r,o){var v=e.type||"unknown-event";e.currentTarget=o,bc(v,r,void 0,e),e.currentTarget=null}function Ba(e,r){r=(r&4)!==0;for(var o=0;o<e.length;o++){var v=e[o],j=v.event;v=v.listeners;e:{var O=void 0;if(r)for(var W=v.length-1;0<=W;W--){var K=v[W],J=K.instance,ae=K.currentTarget;if(K=K.listener,J!==O&&j.isPropagationStopped())break e;Na(j,K,ae),O=J}else for(W=0;W<v.length;W++){if(K=v[W],J=K.instance,ae=K.currentTarget,K=K.listener,J!==O&&j.isPropagationStopped())break e;Na(j,K,ae),O=J}}}if(Jn)throw e=ai,Jn=!1,ai=null,e}function Ue(e,r){var o=r[Bi];o===void 0&&(o=r[Bi]=new Set);var v=e+"__bubble";o.has(v)||(Fa(r,e,2,!1),o.add(v))}function Pi(e,r,o){var v=0;r&&(v|=4),Fa(o,e,v,r)}var gs="_reactListening"+Math.random().toString(36).slice(2);function An(e){if(!e[gs]){e[gs]=!0,a.forEach(function(o){o!=="selectionchange"&&(Tu.has(o)||Pi(o,!1,e),Pi(o,!0,e))});var r=e.nodeType===9?e:e.ownerDocument;r===null||r[gs]||(r[gs]=!0,Pi("selectionchange",!1,r))}}function Fa(e,r,o,v){switch(la(r)){case 1:var j=Hc;break;case 4:j=Wc;break;default:j=pi}o=j.bind(null,r,o,e),j=void 0,!oi||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(j=!0),v?j!==void 0?e.addEventListener(r,o,{capture:!0,passive:j}):e.addEventListener(r,o,!0):j!==void 0?e.addEventListener(r,o,{passive:j}):e.addEventListener(r,o,!1)}function Ai(e,r,o,v,j){var O=v;if((r&1)===0&&(r&2)===0&&v!==null)e:for(;;){if(v===null)return;var W=v.tag;if(W===3||W===4){var K=v.stateNode.containerInfo;if(K===j||K.nodeType===8&&K.parentNode===j)break;if(W===4)for(W=v.return;W!==null;){var J=W.tag;if((J===3||J===4)&&(J=W.stateNode.containerInfo,J===j||J.nodeType===8&&J.parentNode===j))return;W=W.return}for(;K!==null;){if(W=Pr(K),W===null)return;if(J=W.tag,J===5||J===6){v=O=W;continue e}K=K.parentNode}}v=v.return}zo(function(){var ae=O,pe=ue(o),ge=[];e:{var fe=Ma.get(e);if(fe!==void 0){var ye=vi,we=e;switch(e){case"keypress":if(cs(o)===0)break e;case"keydown":case"keyup":ye=su;break;case"focusin":we="focus",ye=yi;break;case"focusout":we="blur",ye=yi;break;case"beforeblur":case"afterblur":ye=yi;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ye=ha;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ye=Yc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ye=au;break;case Pa:case Aa:case Oa:ye=qc;break;case La:ye=cu;break;case"scroll":ye=zc;break;case"wheel":ye=hu;break;case"copy":case"cut":case"paste":ye=Jc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ye=fa}var Ce=(r&4)!==0,Je=!Ce&&e==="scroll",ne=Ce?fe!==null?fe+"Capture":null:fe;Ce=[];for(var Q=ae,oe;Q!==null;){oe=Q;var ve=oe.stateNode;if(oe.tag===5&&ve!==null&&(oe=ve,ne!==null&&(ve=pn(Q,ne),ve!=null&&Ce.push(On(Q,ve,oe)))),Je)break;Q=Q.return}0<Ce.length&&(fe=new ye(fe,we,null,o,pe),ge.push({event:fe,listeners:Ce}))}}if((r&7)===0){e:{if(fe=e==="mouseover"||e==="pointerover",ye=e==="mouseout"||e==="pointerout",fe&&o!==re&&(we=o.relatedTarget||o.fromElement)&&(Pr(we)||we[rr]))break e;if((ye||fe)&&(fe=pe.window===pe?pe:(fe=pe.ownerDocument)?fe.defaultView||fe.parentWindow:window,ye?(we=o.relatedTarget||o.toElement,ye=ae,we=we?Pr(we):null,we!==null&&(Je=Dr(we),we!==Je||we.tag!==5&&we.tag!==6)&&(we=null)):(ye=null,we=ae),ye!==we)){if(Ce=ha,ve="onMouseLeave",ne="onMouseEnter",Q="mouse",(e==="pointerout"||e==="pointerover")&&(Ce=fa,ve="onPointerLeave",ne="onPointerEnter",Q="pointer"),Je=ye==null?fe:Xr(ye),oe=we==null?fe:Xr(we),fe=new Ce(ve,Q+"leave",ye,o,pe),fe.target=Je,fe.relatedTarget=oe,ve=null,Pr(pe)===ae&&(Ce=new Ce(ne,Q+"enter",we,o,pe),Ce.target=oe,Ce.relatedTarget=Je,ve=Ce),Je=ve,ye&&we)t:{for(Ce=ye,ne=we,Q=0,oe=Ce;oe;oe=Kr(oe))Q++;for(oe=0,ve=ne;ve;ve=Kr(ve))oe++;for(;0<Q-oe;)Ce=Kr(Ce),Q--;for(;0<oe-Q;)ne=Kr(ne),oe--;for(;Q--;){if(Ce===ne||ne!==null&&Ce===ne.alternate)break t;Ce=Kr(Ce),ne=Kr(ne)}Ce=null}else Ce=null;ye!==null&&Ua(ge,fe,ye,Ce,!1),we!==null&&Je!==null&&Ua(ge,Je,we,Ce,!0)}}e:{if(fe=ae?Xr(ae):window,ye=fe.nodeName&&fe.nodeName.toLowerCase(),ye==="select"||ye==="input"&&fe.type==="file")var Re=_u;else if(xa(fe))if(Sa)Re=Eu;else{Re=yu;var Te=xu}else(ye=fe.nodeName)&&ye.toLowerCase()==="input"&&(fe.type==="checkbox"||fe.type==="radio")&&(Re=Su);if(Re&&(Re=Re(e,ae))){ya(ge,Re,o,pe);break e}Te&&Te(e,fe,ae),e==="focusout"&&(Te=fe._wrapperState)&&Te.controlled&&fe.type==="number"&&It(fe,"number",fe.value)}switch(Te=ae?Xr(ae):window,e){case"focusin":(xa(Te)||Te.contentEditable==="true")&&(Yr=Te,bi=ae,Dn=null);break;case"focusout":Dn=bi=Yr=null;break;case"mousedown":ki=!0;break;case"contextmenu":case"mouseup":case"dragend":ki=!1,ja(ge,o,pe);break;case"selectionchange":if(Ru)break;case"keydown":case"keyup":ja(ge,o,pe)}var je;if(Ei)e:{switch(e){case"compositionstart":var Pe="onCompositionStart";break e;case"compositionend":Pe="onCompositionEnd";break e;case"compositionupdate":Pe="onCompositionUpdate";break e}Pe=void 0}else Vr?va(e,o)&&(Pe="onCompositionEnd"):e==="keydown"&&o.keyCode===229&&(Pe="onCompositionStart");Pe&&(pa&&o.locale!=="ko"&&(Vr||Pe!=="onCompositionStart"?Pe==="onCompositionEnd"&&Vr&&(je=ca()):(mr=pe,gi="value"in mr?mr.value:mr.textContent,Vr=!0)),Te=vs(ae,Pe),0<Te.length&&(Pe=new da(Pe,e,null,o,pe),ge.push({event:Pe,listeners:Te}),je?Pe.data=je:(je=_a(o),je!==null&&(Pe.data=je)))),(je=fu?pu(e,o):mu(e,o))&&(ae=vs(ae,"onBeforeInput"),0<ae.length&&(pe=new da("onBeforeInput","beforeinput",null,o,pe),ge.push({event:pe,listeners:ae}),pe.data=je))}Ba(ge,r)})}function On(e,r,o){return{instance:e,listener:r,currentTarget:o}}function vs(e,r){for(var o=r+"Capture",v=[];e!==null;){var j=e,O=j.stateNode;j.tag===5&&O!==null&&(j=O,O=pn(e,o),O!=null&&v.unshift(On(e,O,j)),O=pn(e,r),O!=null&&v.push(On(e,O,j))),e=e.return}return v}function Kr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Ua(e,r,o,v,j){for(var O=r._reactName,W=[];o!==null&&o!==v;){var K=o,J=K.alternate,ae=K.stateNode;if(J!==null&&J===v)break;K.tag===5&&ae!==null&&(K=ae,j?(J=pn(o,O),J!=null&&W.unshift(On(o,J,K))):j||(J=pn(o,O),J!=null&&W.push(On(o,J,K)))),o=o.return}W.length!==0&&e.push({event:r,listeners:W})}var ju=/\r\n?/g,Du=/\u0000|\uFFFD/g;function $a(e){return(typeof e=="string"?e:""+e).replace(ju,`
`).replace(Du,"")}function _s(e,r,o){if(r=$a(r),$a(e)!==r&&o)throw Error(s(425))}function xs(){}var Oi=null,Li=null;function Mi(e,r){return e==="textarea"||e==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Ii=typeof setTimeout=="function"?setTimeout:void 0,Pu=typeof clearTimeout=="function"?clearTimeout:void 0,Ha=typeof Promise=="function"?Promise:void 0,Au=typeof queueMicrotask=="function"?queueMicrotask:typeof Ha<"u"?function(e){return Ha.resolve(null).then(e).catch(Ou)}:Ii;function Ou(e){setTimeout(function(){throw e})}function Ni(e,r){var o=r,v=0;do{var j=o.nextSibling;if(e.removeChild(o),j&&j.nodeType===8)if(o=j.data,o==="/$"){if(v===0){e.removeChild(j),wn(r);return}v--}else o!=="$"&&o!=="$?"&&o!=="$!"||v++;o=j}while(o);wn(r)}function vr(e){for(;e!=null;e=e.nextSibling){var r=e.nodeType;if(r===1||r===3)break;if(r===8){if(r=e.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return e}function Wa(e){e=e.previousSibling;for(var r=0;e;){if(e.nodeType===8){var o=e.data;if(o==="$"||o==="$!"||o==="$?"){if(r===0)return e;r--}else o==="/$"&&r++}e=e.previousSibling}return null}var qr=Math.random().toString(36).slice(2),Zt="__reactFiber$"+qr,Ln="__reactProps$"+qr,rr="__reactContainer$"+qr,Bi="__reactEvents$"+qr,Lu="__reactListeners$"+qr,Mu="__reactHandles$"+qr;function Pr(e){var r=e[Zt];if(r)return r;for(var o=e.parentNode;o;){if(r=o[rr]||o[Zt]){if(o=r.alternate,r.child!==null||o!==null&&o.child!==null)for(e=Wa(e);e!==null;){if(o=e[Zt])return o;e=Wa(e)}return r}e=o,o=e.parentNode}return null}function Mn(e){return e=e[Zt]||e[rr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Xr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(s(33))}function ys(e){return e[Ln]||null}var Fi=[],Jr=-1;function _r(e){return{current:e}}function $e(e){0>Jr||(e.current=Fi[Jr],Fi[Jr]=null,Jr--)}function Fe(e,r){Jr++,Fi[Jr]=e.current,e.current=r}var xr={},dt=_r(xr),St=_r(!1),Ar=xr;function Zr(e,r){var o=e.type.contextTypes;if(!o)return xr;var v=e.stateNode;if(v&&v.__reactInternalMemoizedUnmaskedChildContext===r)return v.__reactInternalMemoizedMaskedChildContext;var j={},O;for(O in o)j[O]=r[O];return v&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=j),j}function Et(e){return e=e.childContextTypes,e!=null}function Ss(){$e(St),$e(dt)}function za(e,r,o){if(dt.current!==xr)throw Error(s(168));Fe(dt,r),Fe(St,o)}function Va(e,r,o){var v=e.stateNode;if(r=r.childContextTypes,typeof v.getChildContext!="function")return o;v=v.getChildContext();for(var j in v)if(!(j in r))throw Error(s(108,V(e)||"Unknown",j));return M({},o,v)}function Es(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||xr,Ar=dt.current,Fe(dt,e),Fe(St,St.current),!0}function Ya(e,r,o){var v=e.stateNode;if(!v)throw Error(s(169));o?(e=Va(e,r,Ar),v.__reactInternalMemoizedMergedChildContext=e,$e(St),$e(dt),Fe(dt,e)):$e(St),Fe(St,o)}var nr=null,ws=!1,Ui=!1;function Ga(e){nr===null?nr=[e]:nr.push(e)}function Iu(e){ws=!0,Ga(e)}function yr(){if(!Ui&&nr!==null){Ui=!0;var e=0,r=Be;try{var o=nr;for(Be=1;e<o.length;e++){var v=o[e];do v=v(!0);while(v!==null)}nr=null,ws=!1}catch(j){throw nr!==null&&(nr=nr.slice(e+1)),qo(li,yr),j}finally{Be=r,Ui=!1}}return null}var Qr=[],tn=0,Cs=null,Rs=0,Bt=[],Ft=0,Or=null,sr=1,ir="";function Lr(e,r){Qr[tn++]=Rs,Qr[tn++]=Cs,Cs=e,Rs=r}function Ka(e,r,o){Bt[Ft++]=sr,Bt[Ft++]=ir,Bt[Ft++]=Or,Or=e;var v=sr;e=ir;var j=32-zt(v)-1;v&=~(1<<j),o+=1;var O=32-zt(r)+j;if(30<O){var W=j-j%5;O=(v&(1<<W)-1).toString(32),v>>=W,j-=W,sr=1<<32-zt(r)+j|o<<j|v,ir=O+e}else sr=1<<O|o<<j|v,ir=e}function $i(e){e.return!==null&&(Lr(e,1),Ka(e,1,0))}function Hi(e){for(;e===Cs;)Cs=Qr[--tn],Qr[tn]=null,Rs=Qr[--tn],Qr[tn]=null;for(;e===Or;)Or=Bt[--Ft],Bt[Ft]=null,ir=Bt[--Ft],Bt[Ft]=null,sr=Bt[--Ft],Bt[Ft]=null}var Ot=null,Lt=null,We=!1,Yt=null;function qa(e,r){var o=Wt(5,null,null,0);o.elementType="DELETED",o.stateNode=r,o.return=e,r=e.deletions,r===null?(e.deletions=[o],e.flags|=16):r.push(o)}function Xa(e,r){switch(e.tag){case 5:var o=e.type;return r=r.nodeType!==1||o.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(e.stateNode=r,Ot=e,Lt=vr(r.firstChild),!0):!1;case 6:return r=e.pendingProps===""||r.nodeType!==3?null:r,r!==null?(e.stateNode=r,Ot=e,Lt=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(o=Or!==null?{id:sr,overflow:ir}:null,e.memoizedState={dehydrated:r,treeContext:o,retryLane:1073741824},o=Wt(18,null,null,0),o.stateNode=r,o.return=e,e.child=o,Ot=e,Lt=null,!0):!1;default:return!1}}function Wi(e){return(e.mode&1)!==0&&(e.flags&128)===0}function zi(e){if(We){var r=Lt;if(r){var o=r;if(!Xa(e,r)){if(Wi(e))throw Error(s(418));r=vr(o.nextSibling);var v=Ot;r&&Xa(e,r)?qa(v,o):(e.flags=e.flags&-4097|2,We=!1,Ot=e)}}else{if(Wi(e))throw Error(s(418));e.flags=e.flags&-4097|2,We=!1,Ot=e}}}function Ja(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ot=e}function bs(e){if(e!==Ot)return!1;if(!We)return Ja(e),We=!0,!1;var r;if((r=e.tag!==3)&&!(r=e.tag!==5)&&(r=e.type,r=r!=="head"&&r!=="body"&&!Mi(e.type,e.memoizedProps)),r&&(r=Lt)){if(Wi(e))throw Za(),Error(s(418));for(;r;)qa(e,r),r=vr(r.nextSibling)}if(Ja(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));e:{for(e=e.nextSibling,r=0;e;){if(e.nodeType===8){var o=e.data;if(o==="/$"){if(r===0){Lt=vr(e.nextSibling);break e}r--}else o!=="$"&&o!=="$!"&&o!=="$?"||r++}e=e.nextSibling}Lt=null}}else Lt=Ot?vr(e.stateNode.nextSibling):null;return!0}function Za(){for(var e=Lt;e;)e=vr(e.nextSibling)}function rn(){Lt=Ot=null,We=!1}function Vi(e){Yt===null?Yt=[e]:Yt.push(e)}var Nu=S.ReactCurrentBatchConfig;function In(e,r,o){if(e=o.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(o._owner){if(o=o._owner,o){if(o.tag!==1)throw Error(s(309));var v=o.stateNode}if(!v)throw Error(s(147,e));var j=v,O=""+e;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===O?r.ref:(r=function(W){var K=j.refs;W===null?delete K[O]:K[O]=W},r._stringRef=O,r)}if(typeof e!="string")throw Error(s(284));if(!o._owner)throw Error(s(290,e))}return e}function ks(e,r){throw e=Object.prototype.toString.call(r),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":e))}function Qa(e){var r=e._init;return r(e._payload)}function el(e){function r(ne,Q){if(e){var oe=ne.deletions;oe===null?(ne.deletions=[Q],ne.flags|=16):oe.push(Q)}}function o(ne,Q){if(!e)return null;for(;Q!==null;)r(ne,Q),Q=Q.sibling;return null}function v(ne,Q){for(ne=new Map;Q!==null;)Q.key!==null?ne.set(Q.key,Q):ne.set(Q.index,Q),Q=Q.sibling;return ne}function j(ne,Q){return ne=Tr(ne,Q),ne.index=0,ne.sibling=null,ne}function O(ne,Q,oe){return ne.index=oe,e?(oe=ne.alternate,oe!==null?(oe=oe.index,oe<Q?(ne.flags|=2,Q):oe):(ne.flags|=2,Q)):(ne.flags|=1048576,Q)}function W(ne){return e&&ne.alternate===null&&(ne.flags|=2),ne}function K(ne,Q,oe,ve){return Q===null||Q.tag!==6?(Q=No(oe,ne.mode,ve),Q.return=ne,Q):(Q=j(Q,oe),Q.return=ne,Q)}function J(ne,Q,oe,ve){var Re=oe.type;return Re===L?pe(ne,Q,oe.props.children,ve,oe.key):Q!==null&&(Q.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===Y&&Qa(Re)===Q.type)?(ve=j(Q,oe.props),ve.ref=In(ne,Q,oe),ve.return=ne,ve):(ve=Js(oe.type,oe.key,oe.props,null,ne.mode,ve),ve.ref=In(ne,Q,oe),ve.return=ne,ve)}function ae(ne,Q,oe,ve){return Q===null||Q.tag!==4||Q.stateNode.containerInfo!==oe.containerInfo||Q.stateNode.implementation!==oe.implementation?(Q=Bo(oe,ne.mode,ve),Q.return=ne,Q):(Q=j(Q,oe.children||[]),Q.return=ne,Q)}function pe(ne,Q,oe,ve,Re){return Q===null||Q.tag!==7?(Q=Hr(oe,ne.mode,ve,Re),Q.return=ne,Q):(Q=j(Q,oe),Q.return=ne,Q)}function ge(ne,Q,oe){if(typeof Q=="string"&&Q!==""||typeof Q=="number")return Q=No(""+Q,ne.mode,oe),Q.return=ne,Q;if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case b:return oe=Js(Q.type,Q.key,Q.props,null,ne.mode,oe),oe.ref=In(ne,null,Q),oe.return=ne,oe;case P:return Q=Bo(Q,ne.mode,oe),Q.return=ne,Q;case Y:var ve=Q._init;return ge(ne,ve(Q._payload),oe)}if(xt(Q)||A(Q))return Q=Hr(Q,ne.mode,oe,null),Q.return=ne,Q;ks(ne,Q)}return null}function fe(ne,Q,oe,ve){var Re=Q!==null?Q.key:null;if(typeof oe=="string"&&oe!==""||typeof oe=="number")return Re!==null?null:K(ne,Q,""+oe,ve);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case b:return oe.key===Re?J(ne,Q,oe,ve):null;case P:return oe.key===Re?ae(ne,Q,oe,ve):null;case Y:return Re=oe._init,fe(ne,Q,Re(oe._payload),ve)}if(xt(oe)||A(oe))return Re!==null?null:pe(ne,Q,oe,ve,null);ks(ne,oe)}return null}function ye(ne,Q,oe,ve,Re){if(typeof ve=="string"&&ve!==""||typeof ve=="number")return ne=ne.get(oe)||null,K(Q,ne,""+ve,Re);if(typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case b:return ne=ne.get(ve.key===null?oe:ve.key)||null,J(Q,ne,ve,Re);case P:return ne=ne.get(ve.key===null?oe:ve.key)||null,ae(Q,ne,ve,Re);case Y:var Te=ve._init;return ye(ne,Q,oe,Te(ve._payload),Re)}if(xt(ve)||A(ve))return ne=ne.get(oe)||null,pe(Q,ne,ve,Re,null);ks(Q,ve)}return null}function we(ne,Q,oe,ve){for(var Re=null,Te=null,je=Q,Pe=Q=0,lt=null;je!==null&&Pe<oe.length;Pe++){je.index>Pe?(lt=je,je=null):lt=je.sibling;var Me=fe(ne,je,oe[Pe],ve);if(Me===null){je===null&&(je=lt);break}e&&je&&Me.alternate===null&&r(ne,je),Q=O(Me,Q,Pe),Te===null?Re=Me:Te.sibling=Me,Te=Me,je=lt}if(Pe===oe.length)return o(ne,je),We&&Lr(ne,Pe),Re;if(je===null){for(;Pe<oe.length;Pe++)je=ge(ne,oe[Pe],ve),je!==null&&(Q=O(je,Q,Pe),Te===null?Re=je:Te.sibling=je,Te=je);return We&&Lr(ne,Pe),Re}for(je=v(ne,je);Pe<oe.length;Pe++)lt=ye(je,ne,Pe,oe[Pe],ve),lt!==null&&(e&&lt.alternate!==null&&je.delete(lt.key===null?Pe:lt.key),Q=O(lt,Q,Pe),Te===null?Re=lt:Te.sibling=lt,Te=lt);return e&&je.forEach(function(jr){return r(ne,jr)}),We&&Lr(ne,Pe),Re}function Ce(ne,Q,oe,ve){var Re=A(oe);if(typeof Re!="function")throw Error(s(150));if(oe=Re.call(oe),oe==null)throw Error(s(151));for(var Te=Re=null,je=Q,Pe=Q=0,lt=null,Me=oe.next();je!==null&&!Me.done;Pe++,Me=oe.next()){je.index>Pe?(lt=je,je=null):lt=je.sibling;var jr=fe(ne,je,Me.value,ve);if(jr===null){je===null&&(je=lt);break}e&&je&&jr.alternate===null&&r(ne,je),Q=O(jr,Q,Pe),Te===null?Re=jr:Te.sibling=jr,Te=jr,je=lt}if(Me.done)return o(ne,je),We&&Lr(ne,Pe),Re;if(je===null){for(;!Me.done;Pe++,Me=oe.next())Me=ge(ne,Me.value,ve),Me!==null&&(Q=O(Me,Q,Pe),Te===null?Re=Me:Te.sibling=Me,Te=Me);return We&&Lr(ne,Pe),Re}for(je=v(ne,je);!Me.done;Pe++,Me=oe.next())Me=ye(je,ne,Pe,Me.value,ve),Me!==null&&(e&&Me.alternate!==null&&je.delete(Me.key===null?Pe:Me.key),Q=O(Me,Q,Pe),Te===null?Re=Me:Te.sibling=Me,Te=Me);return e&&je.forEach(function(gh){return r(ne,gh)}),We&&Lr(ne,Pe),Re}function Je(ne,Q,oe,ve){if(typeof oe=="object"&&oe!==null&&oe.type===L&&oe.key===null&&(oe=oe.props.children),typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case b:e:{for(var Re=oe.key,Te=Q;Te!==null;){if(Te.key===Re){if(Re=oe.type,Re===L){if(Te.tag===7){o(ne,Te.sibling),Q=j(Te,oe.props.children),Q.return=ne,ne=Q;break e}}else if(Te.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===Y&&Qa(Re)===Te.type){o(ne,Te.sibling),Q=j(Te,oe.props),Q.ref=In(ne,Te,oe),Q.return=ne,ne=Q;break e}o(ne,Te);break}else r(ne,Te);Te=Te.sibling}oe.type===L?(Q=Hr(oe.props.children,ne.mode,ve,oe.key),Q.return=ne,ne=Q):(ve=Js(oe.type,oe.key,oe.props,null,ne.mode,ve),ve.ref=In(ne,Q,oe),ve.return=ne,ne=ve)}return W(ne);case P:e:{for(Te=oe.key;Q!==null;){if(Q.key===Te)if(Q.tag===4&&Q.stateNode.containerInfo===oe.containerInfo&&Q.stateNode.implementation===oe.implementation){o(ne,Q.sibling),Q=j(Q,oe.children||[]),Q.return=ne,ne=Q;break e}else{o(ne,Q);break}else r(ne,Q);Q=Q.sibling}Q=Bo(oe,ne.mode,ve),Q.return=ne,ne=Q}return W(ne);case Y:return Te=oe._init,Je(ne,Q,Te(oe._payload),ve)}if(xt(oe))return we(ne,Q,oe,ve);if(A(oe))return Ce(ne,Q,oe,ve);ks(ne,oe)}return typeof oe=="string"&&oe!==""||typeof oe=="number"?(oe=""+oe,Q!==null&&Q.tag===6?(o(ne,Q.sibling),Q=j(Q,oe),Q.return=ne,ne=Q):(o(ne,Q),Q=No(oe,ne.mode,ve),Q.return=ne,ne=Q),W(ne)):o(ne,Q)}return Je}var nn=el(!0),tl=el(!1),Ts=_r(null),js=null,sn=null,Yi=null;function Gi(){Yi=sn=js=null}function Ki(e){var r=Ts.current;$e(Ts),e._currentValue=r}function qi(e,r,o){for(;e!==null;){var v=e.alternate;if((e.childLanes&r)!==r?(e.childLanes|=r,v!==null&&(v.childLanes|=r)):v!==null&&(v.childLanes&r)!==r&&(v.childLanes|=r),e===o)break;e=e.return}}function on(e,r){js=e,Yi=sn=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&r)!==0&&(wt=!0),e.firstContext=null)}function Ut(e){var r=e._currentValue;if(Yi!==e)if(e={context:e,memoizedValue:r,next:null},sn===null){if(js===null)throw Error(s(308));sn=e,js.dependencies={lanes:0,firstContext:e}}else sn=sn.next=e;return r}var Mr=null;function Xi(e){Mr===null?Mr=[e]:Mr.push(e)}function rl(e,r,o,v){var j=r.interleaved;return j===null?(o.next=o,Xi(r)):(o.next=j.next,j.next=o),r.interleaved=o,or(e,v)}function or(e,r){e.lanes|=r;var o=e.alternate;for(o!==null&&(o.lanes|=r),o=e,e=e.return;e!==null;)e.childLanes|=r,o=e.alternate,o!==null&&(o.childLanes|=r),o=e,e=e.return;return o.tag===3?o.stateNode:null}var Sr=!1;function Ji(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function nl(e,r){e=e.updateQueue,r.updateQueue===e&&(r.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ar(e,r){return{eventTime:e,lane:r,tag:0,payload:null,callback:null,next:null}}function Er(e,r,o){var v=e.updateQueue;if(v===null)return null;if(v=v.shared,(Le&2)!==0){var j=v.pending;return j===null?r.next=r:(r.next=j.next,j.next=r),v.pending=r,or(e,o)}return j=v.interleaved,j===null?(r.next=r,Xi(v)):(r.next=j.next,j.next=r),v.interleaved=r,or(e,o)}function Ds(e,r,o){if(r=r.updateQueue,r!==null&&(r=r.shared,(o&4194240)!==0)){var v=r.lanes;v&=e.pendingLanes,o|=v,r.lanes=o,hi(e,o)}}function sl(e,r){var o=e.updateQueue,v=e.alternate;if(v!==null&&(v=v.updateQueue,o===v)){var j=null,O=null;if(o=o.firstBaseUpdate,o!==null){do{var W={eventTime:o.eventTime,lane:o.lane,tag:o.tag,payload:o.payload,callback:o.callback,next:null};O===null?j=O=W:O=O.next=W,o=o.next}while(o!==null);O===null?j=O=r:O=O.next=r}else j=O=r;o={baseState:v.baseState,firstBaseUpdate:j,lastBaseUpdate:O,shared:v.shared,effects:v.effects},e.updateQueue=o;return}e=o.lastBaseUpdate,e===null?o.firstBaseUpdate=r:e.next=r,o.lastBaseUpdate=r}function Ps(e,r,o,v){var j=e.updateQueue;Sr=!1;var O=j.firstBaseUpdate,W=j.lastBaseUpdate,K=j.shared.pending;if(K!==null){j.shared.pending=null;var J=K,ae=J.next;J.next=null,W===null?O=ae:W.next=ae,W=J;var pe=e.alternate;pe!==null&&(pe=pe.updateQueue,K=pe.lastBaseUpdate,K!==W&&(K===null?pe.firstBaseUpdate=ae:K.next=ae,pe.lastBaseUpdate=J))}if(O!==null){var ge=j.baseState;W=0,pe=ae=J=null,K=O;do{var fe=K.lane,ye=K.eventTime;if((v&fe)===fe){pe!==null&&(pe=pe.next={eventTime:ye,lane:0,tag:K.tag,payload:K.payload,callback:K.callback,next:null});e:{var we=e,Ce=K;switch(fe=r,ye=o,Ce.tag){case 1:if(we=Ce.payload,typeof we=="function"){ge=we.call(ye,ge,fe);break e}ge=we;break e;case 3:we.flags=we.flags&-65537|128;case 0:if(we=Ce.payload,fe=typeof we=="function"?we.call(ye,ge,fe):we,fe==null)break e;ge=M({},ge,fe);break e;case 2:Sr=!0}}K.callback!==null&&K.lane!==0&&(e.flags|=64,fe=j.effects,fe===null?j.effects=[K]:fe.push(K))}else ye={eventTime:ye,lane:fe,tag:K.tag,payload:K.payload,callback:K.callback,next:null},pe===null?(ae=pe=ye,J=ge):pe=pe.next=ye,W|=fe;if(K=K.next,K===null){if(K=j.shared.pending,K===null)break;fe=K,K=fe.next,fe.next=null,j.lastBaseUpdate=fe,j.shared.pending=null}}while(!0);if(pe===null&&(J=ge),j.baseState=J,j.firstBaseUpdate=ae,j.lastBaseUpdate=pe,r=j.shared.interleaved,r!==null){j=r;do W|=j.lane,j=j.next;while(j!==r)}else O===null&&(j.shared.lanes=0);Br|=W,e.lanes=W,e.memoizedState=ge}}function il(e,r,o){if(e=r.effects,r.effects=null,e!==null)for(r=0;r<e.length;r++){var v=e[r],j=v.callback;if(j!==null){if(v.callback=null,v=o,typeof j!="function")throw Error(s(191,j));j.call(v)}}}var Nn={},Qt=_r(Nn),Bn=_r(Nn),Fn=_r(Nn);function Ir(e){if(e===Nn)throw Error(s(174));return e}function Zi(e,r){switch(Fe(Fn,r),Fe(Bn,e),Fe(Qt,Nn),e=r.nodeType,e){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:Nt(null,"");break;default:e=e===8?r.parentNode:r,r=e.namespaceURI||null,e=e.tagName,r=Nt(r,e)}$e(Qt),Fe(Qt,r)}function an(){$e(Qt),$e(Bn),$e(Fn)}function ol(e){Ir(Fn.current);var r=Ir(Qt.current),o=Nt(r,e.type);r!==o&&(Fe(Bn,e),Fe(Qt,o))}function Qi(e){Bn.current===e&&($e(Qt),$e(Bn))}var ze=_r(0);function As(e){for(var r=e;r!==null;){if(r.tag===13){var o=r.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var eo=[];function to(){for(var e=0;e<eo.length;e++)eo[e]._workInProgressVersionPrimary=null;eo.length=0}var Os=S.ReactCurrentDispatcher,ro=S.ReactCurrentBatchConfig,Nr=0,Ve=null,nt=null,ot=null,Ls=!1,Un=!1,$n=0,Bu=0;function ft(){throw Error(s(321))}function no(e,r){if(r===null)return!1;for(var o=0;o<r.length&&o<e.length;o++)if(!Vt(e[o],r[o]))return!1;return!0}function so(e,r,o,v,j,O){if(Nr=O,Ve=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,Os.current=e===null||e.memoizedState===null?Hu:Wu,e=o(v,j),Un){O=0;do{if(Un=!1,$n=0,25<=O)throw Error(s(301));O+=1,ot=nt=null,r.updateQueue=null,Os.current=zu,e=o(v,j)}while(Un)}if(Os.current=Ns,r=nt!==null&&nt.next!==null,Nr=0,ot=nt=Ve=null,Ls=!1,r)throw Error(s(300));return e}function io(){var e=$n!==0;return $n=0,e}function er(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ot===null?Ve.memoizedState=ot=e:ot=ot.next=e,ot}function $t(){if(nt===null){var e=Ve.alternate;e=e!==null?e.memoizedState:null}else e=nt.next;var r=ot===null?Ve.memoizedState:ot.next;if(r!==null)ot=r,nt=e;else{if(e===null)throw Error(s(310));nt=e,e={memoizedState:nt.memoizedState,baseState:nt.baseState,baseQueue:nt.baseQueue,queue:nt.queue,next:null},ot===null?Ve.memoizedState=ot=e:ot=ot.next=e}return ot}function Hn(e,r){return typeof r=="function"?r(e):r}function oo(e){var r=$t(),o=r.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=e;var v=nt,j=v.baseQueue,O=o.pending;if(O!==null){if(j!==null){var W=j.next;j.next=O.next,O.next=W}v.baseQueue=j=O,o.pending=null}if(j!==null){O=j.next,v=v.baseState;var K=W=null,J=null,ae=O;do{var pe=ae.lane;if((Nr&pe)===pe)J!==null&&(J=J.next={lane:0,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null}),v=ae.hasEagerState?ae.eagerState:e(v,ae.action);else{var ge={lane:pe,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null};J===null?(K=J=ge,W=v):J=J.next=ge,Ve.lanes|=pe,Br|=pe}ae=ae.next}while(ae!==null&&ae!==O);J===null?W=v:J.next=K,Vt(v,r.memoizedState)||(wt=!0),r.memoizedState=v,r.baseState=W,r.baseQueue=J,o.lastRenderedState=v}if(e=o.interleaved,e!==null){j=e;do O=j.lane,Ve.lanes|=O,Br|=O,j=j.next;while(j!==e)}else j===null&&(o.lanes=0);return[r.memoizedState,o.dispatch]}function ao(e){var r=$t(),o=r.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=e;var v=o.dispatch,j=o.pending,O=r.memoizedState;if(j!==null){o.pending=null;var W=j=j.next;do O=e(O,W.action),W=W.next;while(W!==j);Vt(O,r.memoizedState)||(wt=!0),r.memoizedState=O,r.baseQueue===null&&(r.baseState=O),o.lastRenderedState=O}return[O,v]}function al(){}function ll(e,r){var o=Ve,v=$t(),j=r(),O=!Vt(v.memoizedState,j);if(O&&(v.memoizedState=j,wt=!0),v=v.queue,lo(hl.bind(null,o,v,e),[e]),v.getSnapshot!==r||O||ot!==null&&ot.memoizedState.tag&1){if(o.flags|=2048,Wn(9,ul.bind(null,o,v,j,r),void 0,null),at===null)throw Error(s(349));(Nr&30)!==0||cl(o,r,j)}return j}function cl(e,r,o){e.flags|=16384,e={getSnapshot:r,value:o},r=Ve.updateQueue,r===null?(r={lastEffect:null,stores:null},Ve.updateQueue=r,r.stores=[e]):(o=r.stores,o===null?r.stores=[e]:o.push(e))}function ul(e,r,o,v){r.value=o,r.getSnapshot=v,dl(r)&&fl(e)}function hl(e,r,o){return o(function(){dl(r)&&fl(e)})}function dl(e){var r=e.getSnapshot;e=e.value;try{var o=r();return!Vt(e,o)}catch{return!0}}function fl(e){var r=or(e,1);r!==null&&Xt(r,e,1,-1)}function pl(e){var r=er();return typeof e=="function"&&(e=e()),r.memoizedState=r.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Hn,lastRenderedState:e},r.queue=e,e=e.dispatch=$u.bind(null,Ve,e),[r.memoizedState,e]}function Wn(e,r,o,v){return e={tag:e,create:r,destroy:o,deps:v,next:null},r=Ve.updateQueue,r===null?(r={lastEffect:null,stores:null},Ve.updateQueue=r,r.lastEffect=e.next=e):(o=r.lastEffect,o===null?r.lastEffect=e.next=e:(v=o.next,o.next=e,e.next=v,r.lastEffect=e)),e}function ml(){return $t().memoizedState}function Ms(e,r,o,v){var j=er();Ve.flags|=e,j.memoizedState=Wn(1|r,o,void 0,v===void 0?null:v)}function Is(e,r,o,v){var j=$t();v=v===void 0?null:v;var O=void 0;if(nt!==null){var W=nt.memoizedState;if(O=W.destroy,v!==null&&no(v,W.deps)){j.memoizedState=Wn(r,o,O,v);return}}Ve.flags|=e,j.memoizedState=Wn(1|r,o,O,v)}function gl(e,r){return Ms(8390656,8,e,r)}function lo(e,r){return Is(2048,8,e,r)}function vl(e,r){return Is(4,2,e,r)}function _l(e,r){return Is(4,4,e,r)}function xl(e,r){if(typeof r=="function")return e=e(),r(e),function(){r(null)};if(r!=null)return e=e(),r.current=e,function(){r.current=null}}function yl(e,r,o){return o=o!=null?o.concat([e]):null,Is(4,4,xl.bind(null,r,e),o)}function co(){}function Sl(e,r){var o=$t();r=r===void 0?null:r;var v=o.memoizedState;return v!==null&&r!==null&&no(r,v[1])?v[0]:(o.memoizedState=[e,r],e)}function El(e,r){var o=$t();r=r===void 0?null:r;var v=o.memoizedState;return v!==null&&r!==null&&no(r,v[1])?v[0]:(e=e(),o.memoizedState=[e,r],e)}function wl(e,r,o){return(Nr&21)===0?(e.baseState&&(e.baseState=!1,wt=!0),e.memoizedState=o):(Vt(o,r)||(o=Qo(),Ve.lanes|=o,Br|=o,e.baseState=!0),r)}function Fu(e,r){var o=Be;Be=o!==0&&4>o?o:4,e(!0);var v=ro.transition;ro.transition={};try{e(!1),r()}finally{Be=o,ro.transition=v}}function Cl(){return $t().memoizedState}function Uu(e,r,o){var v=br(e);if(o={lane:v,action:o,hasEagerState:!1,eagerState:null,next:null},Rl(e))bl(r,o);else if(o=rl(e,r,o,v),o!==null){var j=_t();Xt(o,e,v,j),kl(o,r,v)}}function $u(e,r,o){var v=br(e),j={lane:v,action:o,hasEagerState:!1,eagerState:null,next:null};if(Rl(e))bl(r,j);else{var O=e.alternate;if(e.lanes===0&&(O===null||O.lanes===0)&&(O=r.lastRenderedReducer,O!==null))try{var W=r.lastRenderedState,K=O(W,o);if(j.hasEagerState=!0,j.eagerState=K,Vt(K,W)){var J=r.interleaved;J===null?(j.next=j,Xi(r)):(j.next=J.next,J.next=j),r.interleaved=j;return}}catch{}finally{}o=rl(e,r,j,v),o!==null&&(j=_t(),Xt(o,e,v,j),kl(o,r,v))}}function Rl(e){var r=e.alternate;return e===Ve||r!==null&&r===Ve}function bl(e,r){Un=Ls=!0;var o=e.pending;o===null?r.next=r:(r.next=o.next,o.next=r),e.pending=r}function kl(e,r,o){if((o&4194240)!==0){var v=r.lanes;v&=e.pendingLanes,o|=v,r.lanes=o,hi(e,o)}}var Ns={readContext:Ut,useCallback:ft,useContext:ft,useEffect:ft,useImperativeHandle:ft,useInsertionEffect:ft,useLayoutEffect:ft,useMemo:ft,useReducer:ft,useRef:ft,useState:ft,useDebugValue:ft,useDeferredValue:ft,useTransition:ft,useMutableSource:ft,useSyncExternalStore:ft,useId:ft,unstable_isNewReconciler:!1},Hu={readContext:Ut,useCallback:function(e,r){return er().memoizedState=[e,r===void 0?null:r],e},useContext:Ut,useEffect:gl,useImperativeHandle:function(e,r,o){return o=o!=null?o.concat([e]):null,Ms(4194308,4,xl.bind(null,r,e),o)},useLayoutEffect:function(e,r){return Ms(4194308,4,e,r)},useInsertionEffect:function(e,r){return Ms(4,2,e,r)},useMemo:function(e,r){var o=er();return r=r===void 0?null:r,e=e(),o.memoizedState=[e,r],e},useReducer:function(e,r,o){var v=er();return r=o!==void 0?o(r):r,v.memoizedState=v.baseState=r,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:r},v.queue=e,e=e.dispatch=Uu.bind(null,Ve,e),[v.memoizedState,e]},useRef:function(e){var r=er();return e={current:e},r.memoizedState=e},useState:pl,useDebugValue:co,useDeferredValue:function(e){return er().memoizedState=e},useTransition:function(){var e=pl(!1),r=e[0];return e=Fu.bind(null,e[1]),er().memoizedState=e,[r,e]},useMutableSource:function(){},useSyncExternalStore:function(e,r,o){var v=Ve,j=er();if(We){if(o===void 0)throw Error(s(407));o=o()}else{if(o=r(),at===null)throw Error(s(349));(Nr&30)!==0||cl(v,r,o)}j.memoizedState=o;var O={value:o,getSnapshot:r};return j.queue=O,gl(hl.bind(null,v,O,e),[e]),v.flags|=2048,Wn(9,ul.bind(null,v,O,o,r),void 0,null),o},useId:function(){var e=er(),r=at.identifierPrefix;if(We){var o=ir,v=sr;o=(v&~(1<<32-zt(v)-1)).toString(32)+o,r=":"+r+"R"+o,o=$n++,0<o&&(r+="H"+o.toString(32)),r+=":"}else o=Bu++,r=":"+r+"r"+o.toString(32)+":";return e.memoizedState=r},unstable_isNewReconciler:!1},Wu={readContext:Ut,useCallback:Sl,useContext:Ut,useEffect:lo,useImperativeHandle:yl,useInsertionEffect:vl,useLayoutEffect:_l,useMemo:El,useReducer:oo,useRef:ml,useState:function(){return oo(Hn)},useDebugValue:co,useDeferredValue:function(e){var r=$t();return wl(r,nt.memoizedState,e)},useTransition:function(){var e=oo(Hn)[0],r=$t().memoizedState;return[e,r]},useMutableSource:al,useSyncExternalStore:ll,useId:Cl,unstable_isNewReconciler:!1},zu={readContext:Ut,useCallback:Sl,useContext:Ut,useEffect:lo,useImperativeHandle:yl,useInsertionEffect:vl,useLayoutEffect:_l,useMemo:El,useReducer:ao,useRef:ml,useState:function(){return ao(Hn)},useDebugValue:co,useDeferredValue:function(e){var r=$t();return nt===null?r.memoizedState=e:wl(r,nt.memoizedState,e)},useTransition:function(){var e=ao(Hn)[0],r=$t().memoizedState;return[e,r]},useMutableSource:al,useSyncExternalStore:ll,useId:Cl,unstable_isNewReconciler:!1};function Gt(e,r){if(e&&e.defaultProps){r=M({},r),e=e.defaultProps;for(var o in e)r[o]===void 0&&(r[o]=e[o]);return r}return r}function uo(e,r,o,v){r=e.memoizedState,o=o(v,r),o=o==null?r:M({},r,o),e.memoizedState=o,e.lanes===0&&(e.updateQueue.baseState=o)}var Bs={isMounted:function(e){return(e=e._reactInternals)?Dr(e)===e:!1},enqueueSetState:function(e,r,o){e=e._reactInternals;var v=_t(),j=br(e),O=ar(v,j);O.payload=r,o!=null&&(O.callback=o),r=Er(e,O,j),r!==null&&(Xt(r,e,j,v),Ds(r,e,j))},enqueueReplaceState:function(e,r,o){e=e._reactInternals;var v=_t(),j=br(e),O=ar(v,j);O.tag=1,O.payload=r,o!=null&&(O.callback=o),r=Er(e,O,j),r!==null&&(Xt(r,e,j,v),Ds(r,e,j))},enqueueForceUpdate:function(e,r){e=e._reactInternals;var o=_t(),v=br(e),j=ar(o,v);j.tag=2,r!=null&&(j.callback=r),r=Er(e,j,v),r!==null&&(Xt(r,e,v,o),Ds(r,e,v))}};function Tl(e,r,o,v,j,O,W){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(v,O,W):r.prototype&&r.prototype.isPureReactComponent?!jn(o,v)||!jn(j,O):!0}function jl(e,r,o){var v=!1,j=xr,O=r.contextType;return typeof O=="object"&&O!==null?O=Ut(O):(j=Et(r)?Ar:dt.current,v=r.contextTypes,O=(v=v!=null)?Zr(e,j):xr),r=new r(o,O),e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=Bs,e.stateNode=r,r._reactInternals=e,v&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=j,e.__reactInternalMemoizedMaskedChildContext=O),r}function Dl(e,r,o,v){e=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(o,v),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(o,v),r.state!==e&&Bs.enqueueReplaceState(r,r.state,null)}function ho(e,r,o,v){var j=e.stateNode;j.props=o,j.state=e.memoizedState,j.refs={},Ji(e);var O=r.contextType;typeof O=="object"&&O!==null?j.context=Ut(O):(O=Et(r)?Ar:dt.current,j.context=Zr(e,O)),j.state=e.memoizedState,O=r.getDerivedStateFromProps,typeof O=="function"&&(uo(e,r,O,o),j.state=e.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof j.getSnapshotBeforeUpdate=="function"||typeof j.UNSAFE_componentWillMount!="function"&&typeof j.componentWillMount!="function"||(r=j.state,typeof j.componentWillMount=="function"&&j.componentWillMount(),typeof j.UNSAFE_componentWillMount=="function"&&j.UNSAFE_componentWillMount(),r!==j.state&&Bs.enqueueReplaceState(j,j.state,null),Ps(e,o,j,v),j.state=e.memoizedState),typeof j.componentDidMount=="function"&&(e.flags|=4194308)}function ln(e,r){try{var o="",v=r;do o+=le(v),v=v.return;while(v);var j=o}catch(O){j=`
Error generating stack: `+O.message+`
`+O.stack}return{value:e,source:r,stack:j,digest:null}}function fo(e,r,o){return{value:e,source:null,stack:o??null,digest:r??null}}function po(e,r){try{console.error(r.value)}catch(o){setTimeout(function(){throw o})}}var Vu=typeof WeakMap=="function"?WeakMap:Map;function Pl(e,r,o){o=ar(-1,o),o.tag=3,o.payload={element:null};var v=r.value;return o.callback=function(){Vs||(Vs=!0,jo=v),po(e,r)},o}function Al(e,r,o){o=ar(-1,o),o.tag=3;var v=e.type.getDerivedStateFromError;if(typeof v=="function"){var j=r.value;o.payload=function(){return v(j)},o.callback=function(){po(e,r)}}var O=e.stateNode;return O!==null&&typeof O.componentDidCatch=="function"&&(o.callback=function(){po(e,r),typeof v!="function"&&(Cr===null?Cr=new Set([this]):Cr.add(this));var W=r.stack;this.componentDidCatch(r.value,{componentStack:W!==null?W:""})}),o}function Ol(e,r,o){var v=e.pingCache;if(v===null){v=e.pingCache=new Vu;var j=new Set;v.set(r,j)}else j=v.get(r),j===void 0&&(j=new Set,v.set(r,j));j.has(o)||(j.add(o),e=ih.bind(null,e,r,o),r.then(e,e))}function Ll(e){do{var r;if((r=e.tag===13)&&(r=e.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return e;e=e.return}while(e!==null);return null}function Ml(e,r,o,v,j){return(e.mode&1)===0?(e===r?e.flags|=65536:(e.flags|=128,o.flags|=131072,o.flags&=-52805,o.tag===1&&(o.alternate===null?o.tag=17:(r=ar(-1,1),r.tag=2,Er(o,r,1))),o.lanes|=1),e):(e.flags|=65536,e.lanes=j,e)}var Yu=S.ReactCurrentOwner,wt=!1;function vt(e,r,o,v){r.child=e===null?tl(r,null,o,v):nn(r,e.child,o,v)}function Il(e,r,o,v,j){o=o.render;var O=r.ref;return on(r,j),v=so(e,r,o,v,O,j),o=io(),e!==null&&!wt?(r.updateQueue=e.updateQueue,r.flags&=-2053,e.lanes&=~j,lr(e,r,j)):(We&&o&&$i(r),r.flags|=1,vt(e,r,v,j),r.child)}function Nl(e,r,o,v,j){if(e===null){var O=o.type;return typeof O=="function"&&!Io(O)&&O.defaultProps===void 0&&o.compare===null&&o.defaultProps===void 0?(r.tag=15,r.type=O,Bl(e,r,O,v,j)):(e=Js(o.type,null,v,r,r.mode,j),e.ref=r.ref,e.return=r,r.child=e)}if(O=e.child,(e.lanes&j)===0){var W=O.memoizedProps;if(o=o.compare,o=o!==null?o:jn,o(W,v)&&e.ref===r.ref)return lr(e,r,j)}return r.flags|=1,e=Tr(O,v),e.ref=r.ref,e.return=r,r.child=e}function Bl(e,r,o,v,j){if(e!==null){var O=e.memoizedProps;if(jn(O,v)&&e.ref===r.ref)if(wt=!1,r.pendingProps=v=O,(e.lanes&j)!==0)(e.flags&131072)!==0&&(wt=!0);else return r.lanes=e.lanes,lr(e,r,j)}return mo(e,r,o,v,j)}function Fl(e,r,o){var v=r.pendingProps,j=v.children,O=e!==null?e.memoizedState:null;if(v.mode==="hidden")if((r.mode&1)===0)r.memoizedState={baseLanes:0,cachePool:null,transitions:null},Fe(un,Mt),Mt|=o;else{if((o&1073741824)===0)return e=O!==null?O.baseLanes|o:o,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:e,cachePool:null,transitions:null},r.updateQueue=null,Fe(un,Mt),Mt|=e,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},v=O!==null?O.baseLanes:o,Fe(un,Mt),Mt|=v}else O!==null?(v=O.baseLanes|o,r.memoizedState=null):v=o,Fe(un,Mt),Mt|=v;return vt(e,r,j,o),r.child}function Ul(e,r){var o=r.ref;(e===null&&o!==null||e!==null&&e.ref!==o)&&(r.flags|=512,r.flags|=2097152)}function mo(e,r,o,v,j){var O=Et(o)?Ar:dt.current;return O=Zr(r,O),on(r,j),o=so(e,r,o,v,O,j),v=io(),e!==null&&!wt?(r.updateQueue=e.updateQueue,r.flags&=-2053,e.lanes&=~j,lr(e,r,j)):(We&&v&&$i(r),r.flags|=1,vt(e,r,o,j),r.child)}function $l(e,r,o,v,j){if(Et(o)){var O=!0;Es(r)}else O=!1;if(on(r,j),r.stateNode===null)Us(e,r),jl(r,o,v),ho(r,o,v,j),v=!0;else if(e===null){var W=r.stateNode,K=r.memoizedProps;W.props=K;var J=W.context,ae=o.contextType;typeof ae=="object"&&ae!==null?ae=Ut(ae):(ae=Et(o)?Ar:dt.current,ae=Zr(r,ae));var pe=o.getDerivedStateFromProps,ge=typeof pe=="function"||typeof W.getSnapshotBeforeUpdate=="function";ge||typeof W.UNSAFE_componentWillReceiveProps!="function"&&typeof W.componentWillReceiveProps!="function"||(K!==v||J!==ae)&&Dl(r,W,v,ae),Sr=!1;var fe=r.memoizedState;W.state=fe,Ps(r,v,W,j),J=r.memoizedState,K!==v||fe!==J||St.current||Sr?(typeof pe=="function"&&(uo(r,o,pe,v),J=r.memoizedState),(K=Sr||Tl(r,o,K,v,fe,J,ae))?(ge||typeof W.UNSAFE_componentWillMount!="function"&&typeof W.componentWillMount!="function"||(typeof W.componentWillMount=="function"&&W.componentWillMount(),typeof W.UNSAFE_componentWillMount=="function"&&W.UNSAFE_componentWillMount()),typeof W.componentDidMount=="function"&&(r.flags|=4194308)):(typeof W.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=v,r.memoizedState=J),W.props=v,W.state=J,W.context=ae,v=K):(typeof W.componentDidMount=="function"&&(r.flags|=4194308),v=!1)}else{W=r.stateNode,nl(e,r),K=r.memoizedProps,ae=r.type===r.elementType?K:Gt(r.type,K),W.props=ae,ge=r.pendingProps,fe=W.context,J=o.contextType,typeof J=="object"&&J!==null?J=Ut(J):(J=Et(o)?Ar:dt.current,J=Zr(r,J));var ye=o.getDerivedStateFromProps;(pe=typeof ye=="function"||typeof W.getSnapshotBeforeUpdate=="function")||typeof W.UNSAFE_componentWillReceiveProps!="function"&&typeof W.componentWillReceiveProps!="function"||(K!==ge||fe!==J)&&Dl(r,W,v,J),Sr=!1,fe=r.memoizedState,W.state=fe,Ps(r,v,W,j);var we=r.memoizedState;K!==ge||fe!==we||St.current||Sr?(typeof ye=="function"&&(uo(r,o,ye,v),we=r.memoizedState),(ae=Sr||Tl(r,o,ae,v,fe,we,J)||!1)?(pe||typeof W.UNSAFE_componentWillUpdate!="function"&&typeof W.componentWillUpdate!="function"||(typeof W.componentWillUpdate=="function"&&W.componentWillUpdate(v,we,J),typeof W.UNSAFE_componentWillUpdate=="function"&&W.UNSAFE_componentWillUpdate(v,we,J)),typeof W.componentDidUpdate=="function"&&(r.flags|=4),typeof W.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof W.componentDidUpdate!="function"||K===e.memoizedProps&&fe===e.memoizedState||(r.flags|=4),typeof W.getSnapshotBeforeUpdate!="function"||K===e.memoizedProps&&fe===e.memoizedState||(r.flags|=1024),r.memoizedProps=v,r.memoizedState=we),W.props=v,W.state=we,W.context=J,v=ae):(typeof W.componentDidUpdate!="function"||K===e.memoizedProps&&fe===e.memoizedState||(r.flags|=4),typeof W.getSnapshotBeforeUpdate!="function"||K===e.memoizedProps&&fe===e.memoizedState||(r.flags|=1024),v=!1)}return go(e,r,o,v,O,j)}function go(e,r,o,v,j,O){Ul(e,r);var W=(r.flags&128)!==0;if(!v&&!W)return j&&Ya(r,o,!1),lr(e,r,O);v=r.stateNode,Yu.current=r;var K=W&&typeof o.getDerivedStateFromError!="function"?null:v.render();return r.flags|=1,e!==null&&W?(r.child=nn(r,e.child,null,O),r.child=nn(r,null,K,O)):vt(e,r,K,O),r.memoizedState=v.state,j&&Ya(r,o,!0),r.child}function Hl(e){var r=e.stateNode;r.pendingContext?za(e,r.pendingContext,r.pendingContext!==r.context):r.context&&za(e,r.context,!1),Zi(e,r.containerInfo)}function Wl(e,r,o,v,j){return rn(),Vi(j),r.flags|=256,vt(e,r,o,v),r.child}var vo={dehydrated:null,treeContext:null,retryLane:0};function _o(e){return{baseLanes:e,cachePool:null,transitions:null}}function zl(e,r,o){var v=r.pendingProps,j=ze.current,O=!1,W=(r.flags&128)!==0,K;if((K=W)||(K=e!==null&&e.memoizedState===null?!1:(j&2)!==0),K?(O=!0,r.flags&=-129):(e===null||e.memoizedState!==null)&&(j|=1),Fe(ze,j&1),e===null)return zi(r),e=r.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((r.mode&1)===0?r.lanes=1:e.data==="$!"?r.lanes=8:r.lanes=1073741824,null):(W=v.children,e=v.fallback,O?(v=r.mode,O=r.child,W={mode:"hidden",children:W},(v&1)===0&&O!==null?(O.childLanes=0,O.pendingProps=W):O=Zs(W,v,0,null),e=Hr(e,v,o,null),O.return=r,e.return=r,O.sibling=e,r.child=O,r.child.memoizedState=_o(o),r.memoizedState=vo,e):xo(r,W));if(j=e.memoizedState,j!==null&&(K=j.dehydrated,K!==null))return Gu(e,r,W,v,K,j,o);if(O){O=v.fallback,W=r.mode,j=e.child,K=j.sibling;var J={mode:"hidden",children:v.children};return(W&1)===0&&r.child!==j?(v=r.child,v.childLanes=0,v.pendingProps=J,r.deletions=null):(v=Tr(j,J),v.subtreeFlags=j.subtreeFlags&14680064),K!==null?O=Tr(K,O):(O=Hr(O,W,o,null),O.flags|=2),O.return=r,v.return=r,v.sibling=O,r.child=v,v=O,O=r.child,W=e.child.memoizedState,W=W===null?_o(o):{baseLanes:W.baseLanes|o,cachePool:null,transitions:W.transitions},O.memoizedState=W,O.childLanes=e.childLanes&~o,r.memoizedState=vo,v}return O=e.child,e=O.sibling,v=Tr(O,{mode:"visible",children:v.children}),(r.mode&1)===0&&(v.lanes=o),v.return=r,v.sibling=null,e!==null&&(o=r.deletions,o===null?(r.deletions=[e],r.flags|=16):o.push(e)),r.child=v,r.memoizedState=null,v}function xo(e,r){return r=Zs({mode:"visible",children:r},e.mode,0,null),r.return=e,e.child=r}function Fs(e,r,o,v){return v!==null&&Vi(v),nn(r,e.child,null,o),e=xo(r,r.pendingProps.children),e.flags|=2,r.memoizedState=null,e}function Gu(e,r,o,v,j,O,W){if(o)return r.flags&256?(r.flags&=-257,v=fo(Error(s(422))),Fs(e,r,W,v)):r.memoizedState!==null?(r.child=e.child,r.flags|=128,null):(O=v.fallback,j=r.mode,v=Zs({mode:"visible",children:v.children},j,0,null),O=Hr(O,j,W,null),O.flags|=2,v.return=r,O.return=r,v.sibling=O,r.child=v,(r.mode&1)!==0&&nn(r,e.child,null,W),r.child.memoizedState=_o(W),r.memoizedState=vo,O);if((r.mode&1)===0)return Fs(e,r,W,null);if(j.data==="$!"){if(v=j.nextSibling&&j.nextSibling.dataset,v)var K=v.dgst;return v=K,O=Error(s(419)),v=fo(O,v,void 0),Fs(e,r,W,v)}if(K=(W&e.childLanes)!==0,wt||K){if(v=at,v!==null){switch(W&-W){case 4:j=2;break;case 16:j=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:j=32;break;case 536870912:j=268435456;break;default:j=0}j=(j&(v.suspendedLanes|W))!==0?0:j,j!==0&&j!==O.retryLane&&(O.retryLane=j,or(e,j),Xt(v,e,j,-1))}return Mo(),v=fo(Error(s(421))),Fs(e,r,W,v)}return j.data==="$?"?(r.flags|=128,r.child=e.child,r=oh.bind(null,e),j._reactRetry=r,null):(e=O.treeContext,Lt=vr(j.nextSibling),Ot=r,We=!0,Yt=null,e!==null&&(Bt[Ft++]=sr,Bt[Ft++]=ir,Bt[Ft++]=Or,sr=e.id,ir=e.overflow,Or=r),r=xo(r,v.children),r.flags|=4096,r)}function Vl(e,r,o){e.lanes|=r;var v=e.alternate;v!==null&&(v.lanes|=r),qi(e.return,r,o)}function yo(e,r,o,v,j){var O=e.memoizedState;O===null?e.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:v,tail:o,tailMode:j}:(O.isBackwards=r,O.rendering=null,O.renderingStartTime=0,O.last=v,O.tail=o,O.tailMode=j)}function Yl(e,r,o){var v=r.pendingProps,j=v.revealOrder,O=v.tail;if(vt(e,r,v.children,o),v=ze.current,(v&2)!==0)v=v&1|2,r.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=r.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Vl(e,o,r);else if(e.tag===19)Vl(e,o,r);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===r)break e;for(;e.sibling===null;){if(e.return===null||e.return===r)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}v&=1}if(Fe(ze,v),(r.mode&1)===0)r.memoizedState=null;else switch(j){case"forwards":for(o=r.child,j=null;o!==null;)e=o.alternate,e!==null&&As(e)===null&&(j=o),o=o.sibling;o=j,o===null?(j=r.child,r.child=null):(j=o.sibling,o.sibling=null),yo(r,!1,j,o,O);break;case"backwards":for(o=null,j=r.child,r.child=null;j!==null;){if(e=j.alternate,e!==null&&As(e)===null){r.child=j;break}e=j.sibling,j.sibling=o,o=j,j=e}yo(r,!0,o,null,O);break;case"together":yo(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function Us(e,r){(r.mode&1)===0&&e!==null&&(e.alternate=null,r.alternate=null,r.flags|=2)}function lr(e,r,o){if(e!==null&&(r.dependencies=e.dependencies),Br|=r.lanes,(o&r.childLanes)===0)return null;if(e!==null&&r.child!==e.child)throw Error(s(153));if(r.child!==null){for(e=r.child,o=Tr(e,e.pendingProps),r.child=o,o.return=r;e.sibling!==null;)e=e.sibling,o=o.sibling=Tr(e,e.pendingProps),o.return=r;o.sibling=null}return r.child}function Ku(e,r,o){switch(r.tag){case 3:Hl(r),rn();break;case 5:ol(r);break;case 1:Et(r.type)&&Es(r);break;case 4:Zi(r,r.stateNode.containerInfo);break;case 10:var v=r.type._context,j=r.memoizedProps.value;Fe(Ts,v._currentValue),v._currentValue=j;break;case 13:if(v=r.memoizedState,v!==null)return v.dehydrated!==null?(Fe(ze,ze.current&1),r.flags|=128,null):(o&r.child.childLanes)!==0?zl(e,r,o):(Fe(ze,ze.current&1),e=lr(e,r,o),e!==null?e.sibling:null);Fe(ze,ze.current&1);break;case 19:if(v=(o&r.childLanes)!==0,(e.flags&128)!==0){if(v)return Yl(e,r,o);r.flags|=128}if(j=r.memoizedState,j!==null&&(j.rendering=null,j.tail=null,j.lastEffect=null),Fe(ze,ze.current),v)break;return null;case 22:case 23:return r.lanes=0,Fl(e,r,o)}return lr(e,r,o)}var Gl,So,Kl,ql;Gl=function(e,r){for(var o=r.child;o!==null;){if(o.tag===5||o.tag===6)e.appendChild(o.stateNode);else if(o.tag!==4&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return;o=o.return}o.sibling.return=o.return,o=o.sibling}},So=function(){},Kl=function(e,r,o,v){var j=e.memoizedProps;if(j!==v){e=r.stateNode,Ir(Qt.current);var O=null;switch(o){case"input":j=Ie(e,j),v=Ie(e,v),O=[];break;case"select":j=M({},j,{value:void 0}),v=M({},v,{value:void 0}),O=[];break;case"textarea":j=kt(e,j),v=kt(e,v),O=[];break;default:typeof j.onClick!="function"&&typeof v.onClick=="function"&&(e.onclick=xs)}Ee(o,v);var W;o=null;for(ae in j)if(!v.hasOwnProperty(ae)&&j.hasOwnProperty(ae)&&j[ae]!=null)if(ae==="style"){var K=j[ae];for(W in K)K.hasOwnProperty(W)&&(o||(o={}),o[W]="")}else ae!=="dangerouslySetInnerHTML"&&ae!=="children"&&ae!=="suppressContentEditableWarning"&&ae!=="suppressHydrationWarning"&&ae!=="autoFocus"&&(h.hasOwnProperty(ae)?O||(O=[]):(O=O||[]).push(ae,null));for(ae in v){var J=v[ae];if(K=j!=null?j[ae]:void 0,v.hasOwnProperty(ae)&&J!==K&&(J!=null||K!=null))if(ae==="style")if(K){for(W in K)!K.hasOwnProperty(W)||J&&J.hasOwnProperty(W)||(o||(o={}),o[W]="");for(W in J)J.hasOwnProperty(W)&&K[W]!==J[W]&&(o||(o={}),o[W]=J[W])}else o||(O||(O=[]),O.push(ae,o)),o=J;else ae==="dangerouslySetInnerHTML"?(J=J?J.__html:void 0,K=K?K.__html:void 0,J!=null&&K!==J&&(O=O||[]).push(ae,J)):ae==="children"?typeof J!="string"&&typeof J!="number"||(O=O||[]).push(ae,""+J):ae!=="suppressContentEditableWarning"&&ae!=="suppressHydrationWarning"&&(h.hasOwnProperty(ae)?(J!=null&&ae==="onScroll"&&Ue("scroll",e),O||K===J||(O=[])):(O=O||[]).push(ae,J))}o&&(O=O||[]).push("style",o);var ae=O;(r.updateQueue=ae)&&(r.flags|=4)}},ql=function(e,r,o,v){o!==v&&(r.flags|=4)};function zn(e,r){if(!We)switch(e.tailMode){case"hidden":r=e.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?e.tail=null:o.sibling=null;break;case"collapsed":o=e.tail;for(var v=null;o!==null;)o.alternate!==null&&(v=o),o=o.sibling;v===null?r||e.tail===null?e.tail=null:e.tail.sibling=null:v.sibling=null}}function pt(e){var r=e.alternate!==null&&e.alternate.child===e.child,o=0,v=0;if(r)for(var j=e.child;j!==null;)o|=j.lanes|j.childLanes,v|=j.subtreeFlags&14680064,v|=j.flags&14680064,j.return=e,j=j.sibling;else for(j=e.child;j!==null;)o|=j.lanes|j.childLanes,v|=j.subtreeFlags,v|=j.flags,j.return=e,j=j.sibling;return e.subtreeFlags|=v,e.childLanes=o,r}function qu(e,r,o){var v=r.pendingProps;switch(Hi(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pt(r),null;case 1:return Et(r.type)&&Ss(),pt(r),null;case 3:return v=r.stateNode,an(),$e(St),$e(dt),to(),v.pendingContext&&(v.context=v.pendingContext,v.pendingContext=null),(e===null||e.child===null)&&(bs(r)?r.flags|=4:e===null||e.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Yt!==null&&(Ao(Yt),Yt=null))),So(e,r),pt(r),null;case 5:Qi(r);var j=Ir(Fn.current);if(o=r.type,e!==null&&r.stateNode!=null)Kl(e,r,o,v,j),e.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!v){if(r.stateNode===null)throw Error(s(166));return pt(r),null}if(e=Ir(Qt.current),bs(r)){v=r.stateNode,o=r.type;var O=r.memoizedProps;switch(v[Zt]=r,v[Ln]=O,e=(r.mode&1)!==0,o){case"dialog":Ue("cancel",v),Ue("close",v);break;case"iframe":case"object":case"embed":Ue("load",v);break;case"video":case"audio":for(j=0;j<Pn.length;j++)Ue(Pn[j],v);break;case"source":Ue("error",v);break;case"img":case"image":case"link":Ue("error",v),Ue("load",v);break;case"details":Ue("toggle",v);break;case"input":He(v,O),Ue("invalid",v);break;case"select":v._wrapperState={wasMultiple:!!O.multiple},Ue("invalid",v);break;case"textarea":Ze(v,O),Ue("invalid",v)}Ee(o,O),j=null;for(var W in O)if(O.hasOwnProperty(W)){var K=O[W];W==="children"?typeof K=="string"?v.textContent!==K&&(O.suppressHydrationWarning!==!0&&_s(v.textContent,K,e),j=["children",K]):typeof K=="number"&&v.textContent!==""+K&&(O.suppressHydrationWarning!==!0&&_s(v.textContent,K,e),j=["children",""+K]):h.hasOwnProperty(W)&&K!=null&&W==="onScroll"&&Ue("scroll",v)}switch(o){case"input":ce(v),bt(v,O,!0);break;case"textarea":ce(v),Ye(v);break;case"select":case"option":break;default:typeof O.onClick=="function"&&(v.onclick=xs)}v=j,r.updateQueue=v,v!==null&&(r.flags|=4)}else{W=j.nodeType===9?j:j.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=jt(o)),e==="http://www.w3.org/1999/xhtml"?o==="script"?(e=W.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof v.is=="string"?e=W.createElement(o,{is:v.is}):(e=W.createElement(o),o==="select"&&(W=e,v.multiple?W.multiple=!0:v.size&&(W.size=v.size))):e=W.createElementNS(e,o),e[Zt]=r,e[Ln]=v,Gl(e,r,!1,!1),r.stateNode=e;e:{switch(W=ee(o,v),o){case"dialog":Ue("cancel",e),Ue("close",e),j=v;break;case"iframe":case"object":case"embed":Ue("load",e),j=v;break;case"video":case"audio":for(j=0;j<Pn.length;j++)Ue(Pn[j],e);j=v;break;case"source":Ue("error",e),j=v;break;case"img":case"image":case"link":Ue("error",e),Ue("load",e),j=v;break;case"details":Ue("toggle",e),j=v;break;case"input":He(e,v),j=Ie(e,v),Ue("invalid",e);break;case"option":j=v;break;case"select":e._wrapperState={wasMultiple:!!v.multiple},j=M({},v,{value:void 0}),Ue("invalid",e);break;case"textarea":Ze(e,v),j=kt(e,v),Ue("invalid",e);break;default:j=v}Ee(o,j),K=j;for(O in K)if(K.hasOwnProperty(O)){var J=K[O];O==="style"?Pt(e,J):O==="dangerouslySetInnerHTML"?(J=J?J.__html:void 0,J!=null&&Dt(e,J)):O==="children"?typeof J=="string"?(o!=="textarea"||J!=="")&&rt(e,J):typeof J=="number"&&rt(e,""+J):O!=="suppressContentEditableWarning"&&O!=="suppressHydrationWarning"&&O!=="autoFocus"&&(h.hasOwnProperty(O)?J!=null&&O==="onScroll"&&Ue("scroll",e):J!=null&&m(e,O,J,W))}switch(o){case"input":ce(e),bt(e,v,!1);break;case"textarea":ce(e),Ye(e);break;case"option":v.value!=null&&e.setAttribute("value",""+Z(v.value));break;case"select":e.multiple=!!v.multiple,O=v.value,O!=null?gt(e,!!v.multiple,O,!1):v.defaultValue!=null&&gt(e,!!v.multiple,v.defaultValue,!0);break;default:typeof j.onClick=="function"&&(e.onclick=xs)}switch(o){case"button":case"input":case"select":case"textarea":v=!!v.autoFocus;break e;case"img":v=!0;break e;default:v=!1}}v&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return pt(r),null;case 6:if(e&&r.stateNode!=null)ql(e,r,e.memoizedProps,v);else{if(typeof v!="string"&&r.stateNode===null)throw Error(s(166));if(o=Ir(Fn.current),Ir(Qt.current),bs(r)){if(v=r.stateNode,o=r.memoizedProps,v[Zt]=r,(O=v.nodeValue!==o)&&(e=Ot,e!==null))switch(e.tag){case 3:_s(v.nodeValue,o,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&_s(v.nodeValue,o,(e.mode&1)!==0)}O&&(r.flags|=4)}else v=(o.nodeType===9?o:o.ownerDocument).createTextNode(v),v[Zt]=r,r.stateNode=v}return pt(r),null;case 13:if($e(ze),v=r.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(We&&Lt!==null&&(r.mode&1)!==0&&(r.flags&128)===0)Za(),rn(),r.flags|=98560,O=!1;else if(O=bs(r),v!==null&&v.dehydrated!==null){if(e===null){if(!O)throw Error(s(318));if(O=r.memoizedState,O=O!==null?O.dehydrated:null,!O)throw Error(s(317));O[Zt]=r}else rn(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;pt(r),O=!1}else Yt!==null&&(Ao(Yt),Yt=null),O=!0;if(!O)return r.flags&65536?r:null}return(r.flags&128)!==0?(r.lanes=o,r):(v=v!==null,v!==(e!==null&&e.memoizedState!==null)&&v&&(r.child.flags|=8192,(r.mode&1)!==0&&(e===null||(ze.current&1)!==0?st===0&&(st=3):Mo())),r.updateQueue!==null&&(r.flags|=4),pt(r),null);case 4:return an(),So(e,r),e===null&&An(r.stateNode.containerInfo),pt(r),null;case 10:return Ki(r.type._context),pt(r),null;case 17:return Et(r.type)&&Ss(),pt(r),null;case 19:if($e(ze),O=r.memoizedState,O===null)return pt(r),null;if(v=(r.flags&128)!==0,W=O.rendering,W===null)if(v)zn(O,!1);else{if(st!==0||e!==null&&(e.flags&128)!==0)for(e=r.child;e!==null;){if(W=As(e),W!==null){for(r.flags|=128,zn(O,!1),v=W.updateQueue,v!==null&&(r.updateQueue=v,r.flags|=4),r.subtreeFlags=0,v=o,o=r.child;o!==null;)O=o,e=v,O.flags&=14680066,W=O.alternate,W===null?(O.childLanes=0,O.lanes=e,O.child=null,O.subtreeFlags=0,O.memoizedProps=null,O.memoizedState=null,O.updateQueue=null,O.dependencies=null,O.stateNode=null):(O.childLanes=W.childLanes,O.lanes=W.lanes,O.child=W.child,O.subtreeFlags=0,O.deletions=null,O.memoizedProps=W.memoizedProps,O.memoizedState=W.memoizedState,O.updateQueue=W.updateQueue,O.type=W.type,e=W.dependencies,O.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),o=o.sibling;return Fe(ze,ze.current&1|2),r.child}e=e.sibling}O.tail!==null&&Xe()>hn&&(r.flags|=128,v=!0,zn(O,!1),r.lanes=4194304)}else{if(!v)if(e=As(W),e!==null){if(r.flags|=128,v=!0,o=e.updateQueue,o!==null&&(r.updateQueue=o,r.flags|=4),zn(O,!0),O.tail===null&&O.tailMode==="hidden"&&!W.alternate&&!We)return pt(r),null}else 2*Xe()-O.renderingStartTime>hn&&o!==1073741824&&(r.flags|=128,v=!0,zn(O,!1),r.lanes=4194304);O.isBackwards?(W.sibling=r.child,r.child=W):(o=O.last,o!==null?o.sibling=W:r.child=W,O.last=W)}return O.tail!==null?(r=O.tail,O.rendering=r,O.tail=r.sibling,O.renderingStartTime=Xe(),r.sibling=null,o=ze.current,Fe(ze,v?o&1|2:o&1),r):(pt(r),null);case 22:case 23:return Lo(),v=r.memoizedState!==null,e!==null&&e.memoizedState!==null!==v&&(r.flags|=8192),v&&(r.mode&1)!==0?(Mt&1073741824)!==0&&(pt(r),r.subtreeFlags&6&&(r.flags|=8192)):pt(r),null;case 24:return null;case 25:return null}throw Error(s(156,r.tag))}function Xu(e,r){switch(Hi(r),r.tag){case 1:return Et(r.type)&&Ss(),e=r.flags,e&65536?(r.flags=e&-65537|128,r):null;case 3:return an(),$e(St),$e(dt),to(),e=r.flags,(e&65536)!==0&&(e&128)===0?(r.flags=e&-65537|128,r):null;case 5:return Qi(r),null;case 13:if($e(ze),e=r.memoizedState,e!==null&&e.dehydrated!==null){if(r.alternate===null)throw Error(s(340));rn()}return e=r.flags,e&65536?(r.flags=e&-65537|128,r):null;case 19:return $e(ze),null;case 4:return an(),null;case 10:return Ki(r.type._context),null;case 22:case 23:return Lo(),null;case 24:return null;default:return null}}var $s=!1,mt=!1,Ju=typeof WeakSet=="function"?WeakSet:Set,Se=null;function cn(e,r){var o=e.ref;if(o!==null)if(typeof o=="function")try{o(null)}catch(v){qe(e,r,v)}else o.current=null}function Eo(e,r,o){try{o()}catch(v){qe(e,r,v)}}var Xl=!1;function Zu(e,r){if(Oi=os,e=Ta(),Ri(e)){if("selectionStart"in e)var o={start:e.selectionStart,end:e.selectionEnd};else e:{o=(o=e.ownerDocument)&&o.defaultView||window;var v=o.getSelection&&o.getSelection();if(v&&v.rangeCount!==0){o=v.anchorNode;var j=v.anchorOffset,O=v.focusNode;v=v.focusOffset;try{o.nodeType,O.nodeType}catch{o=null;break e}var W=0,K=-1,J=-1,ae=0,pe=0,ge=e,fe=null;t:for(;;){for(var ye;ge!==o||j!==0&&ge.nodeType!==3||(K=W+j),ge!==O||v!==0&&ge.nodeType!==3||(J=W+v),ge.nodeType===3&&(W+=ge.nodeValue.length),(ye=ge.firstChild)!==null;)fe=ge,ge=ye;for(;;){if(ge===e)break t;if(fe===o&&++ae===j&&(K=W),fe===O&&++pe===v&&(J=W),(ye=ge.nextSibling)!==null)break;ge=fe,fe=ge.parentNode}ge=ye}o=K===-1||J===-1?null:{start:K,end:J}}else o=null}o=o||{start:0,end:0}}else o=null;for(Li={focusedElem:e,selectionRange:o},os=!1,Se=r;Se!==null;)if(r=Se,e=r.child,(r.subtreeFlags&1028)!==0&&e!==null)e.return=r,Se=e;else for(;Se!==null;){r=Se;try{var we=r.alternate;if((r.flags&1024)!==0)switch(r.tag){case 0:case 11:case 15:break;case 1:if(we!==null){var Ce=we.memoizedProps,Je=we.memoizedState,ne=r.stateNode,Q=ne.getSnapshotBeforeUpdate(r.elementType===r.type?Ce:Gt(r.type,Ce),Je);ne.__reactInternalSnapshotBeforeUpdate=Q}break;case 3:var oe=r.stateNode.containerInfo;oe.nodeType===1?oe.textContent="":oe.nodeType===9&&oe.documentElement&&oe.removeChild(oe.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(s(163))}}catch(ve){qe(r,r.return,ve)}if(e=r.sibling,e!==null){e.return=r.return,Se=e;break}Se=r.return}return we=Xl,Xl=!1,we}function Vn(e,r,o){var v=r.updateQueue;if(v=v!==null?v.lastEffect:null,v!==null){var j=v=v.next;do{if((j.tag&e)===e){var O=j.destroy;j.destroy=void 0,O!==void 0&&Eo(r,o,O)}j=j.next}while(j!==v)}}function Hs(e,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&e)===e){var v=o.create;o.destroy=v()}o=o.next}while(o!==r)}}function wo(e){var r=e.ref;if(r!==null){var o=e.stateNode;switch(e.tag){case 5:e=o;break;default:e=o}typeof r=="function"?r(e):r.current=e}}function Jl(e){var r=e.alternate;r!==null&&(e.alternate=null,Jl(r)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(r=e.stateNode,r!==null&&(delete r[Zt],delete r[Ln],delete r[Bi],delete r[Lu],delete r[Mu])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Zl(e){return e.tag===5||e.tag===3||e.tag===4}function Ql(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Zl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Co(e,r,o){var v=e.tag;if(v===5||v===6)e=e.stateNode,r?o.nodeType===8?o.parentNode.insertBefore(e,r):o.insertBefore(e,r):(o.nodeType===8?(r=o.parentNode,r.insertBefore(e,o)):(r=o,r.appendChild(e)),o=o._reactRootContainer,o!=null||r.onclick!==null||(r.onclick=xs));else if(v!==4&&(e=e.child,e!==null))for(Co(e,r,o),e=e.sibling;e!==null;)Co(e,r,o),e=e.sibling}function Ro(e,r,o){var v=e.tag;if(v===5||v===6)e=e.stateNode,r?o.insertBefore(e,r):o.appendChild(e);else if(v!==4&&(e=e.child,e!==null))for(Ro(e,r,o),e=e.sibling;e!==null;)Ro(e,r,o),e=e.sibling}var ut=null,Kt=!1;function wr(e,r,o){for(o=o.child;o!==null;)ec(e,r,o),o=o.sibling}function ec(e,r,o){if(Jt&&typeof Jt.onCommitFiberUnmount=="function")try{Jt.onCommitFiberUnmount(Qn,o)}catch{}switch(o.tag){case 5:mt||cn(o,r);case 6:var v=ut,j=Kt;ut=null,wr(e,r,o),ut=v,Kt=j,ut!==null&&(Kt?(e=ut,o=o.stateNode,e.nodeType===8?e.parentNode.removeChild(o):e.removeChild(o)):ut.removeChild(o.stateNode));break;case 18:ut!==null&&(Kt?(e=ut,o=o.stateNode,e.nodeType===8?Ni(e.parentNode,o):e.nodeType===1&&Ni(e,o),wn(e)):Ni(ut,o.stateNode));break;case 4:v=ut,j=Kt,ut=o.stateNode.containerInfo,Kt=!0,wr(e,r,o),ut=v,Kt=j;break;case 0:case 11:case 14:case 15:if(!mt&&(v=o.updateQueue,v!==null&&(v=v.lastEffect,v!==null))){j=v=v.next;do{var O=j,W=O.destroy;O=O.tag,W!==void 0&&((O&2)!==0||(O&4)!==0)&&Eo(o,r,W),j=j.next}while(j!==v)}wr(e,r,o);break;case 1:if(!mt&&(cn(o,r),v=o.stateNode,typeof v.componentWillUnmount=="function"))try{v.props=o.memoizedProps,v.state=o.memoizedState,v.componentWillUnmount()}catch(K){qe(o,r,K)}wr(e,r,o);break;case 21:wr(e,r,o);break;case 22:o.mode&1?(mt=(v=mt)||o.memoizedState!==null,wr(e,r,o),mt=v):wr(e,r,o);break;default:wr(e,r,o)}}function tc(e){var r=e.updateQueue;if(r!==null){e.updateQueue=null;var o=e.stateNode;o===null&&(o=e.stateNode=new Ju),r.forEach(function(v){var j=ah.bind(null,e,v);o.has(v)||(o.add(v),v.then(j,j))})}}function qt(e,r){var o=r.deletions;if(o!==null)for(var v=0;v<o.length;v++){var j=o[v];try{var O=e,W=r,K=W;e:for(;K!==null;){switch(K.tag){case 5:ut=K.stateNode,Kt=!1;break e;case 3:ut=K.stateNode.containerInfo,Kt=!0;break e;case 4:ut=K.stateNode.containerInfo,Kt=!0;break e}K=K.return}if(ut===null)throw Error(s(160));ec(O,W,j),ut=null,Kt=!1;var J=j.alternate;J!==null&&(J.return=null),j.return=null}catch(ae){qe(j,r,ae)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)rc(r,e),r=r.sibling}function rc(e,r){var o=e.alternate,v=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(qt(r,e),tr(e),v&4){try{Vn(3,e,e.return),Hs(3,e)}catch(Ce){qe(e,e.return,Ce)}try{Vn(5,e,e.return)}catch(Ce){qe(e,e.return,Ce)}}break;case 1:qt(r,e),tr(e),v&512&&o!==null&&cn(o,o.return);break;case 5:if(qt(r,e),tr(e),v&512&&o!==null&&cn(o,o.return),e.flags&32){var j=e.stateNode;try{rt(j,"")}catch(Ce){qe(e,e.return,Ce)}}if(v&4&&(j=e.stateNode,j!=null)){var O=e.memoizedProps,W=o!==null?o.memoizedProps:O,K=e.type,J=e.updateQueue;if(e.updateQueue=null,J!==null)try{K==="input"&&O.type==="radio"&&O.name!=null&&tt(j,O),ee(K,W);var ae=ee(K,O);for(W=0;W<J.length;W+=2){var pe=J[W],ge=J[W+1];pe==="style"?Pt(j,ge):pe==="dangerouslySetInnerHTML"?Dt(j,ge):pe==="children"?rt(j,ge):m(j,pe,ge,ae)}switch(K){case"input":Ae(j,O);break;case"textarea":Tt(j,O);break;case"select":var fe=j._wrapperState.wasMultiple;j._wrapperState.wasMultiple=!!O.multiple;var ye=O.value;ye!=null?gt(j,!!O.multiple,ye,!1):fe!==!!O.multiple&&(O.defaultValue!=null?gt(j,!!O.multiple,O.defaultValue,!0):gt(j,!!O.multiple,O.multiple?[]:"",!1))}j[Ln]=O}catch(Ce){qe(e,e.return,Ce)}}break;case 6:if(qt(r,e),tr(e),v&4){if(e.stateNode===null)throw Error(s(162));j=e.stateNode,O=e.memoizedProps;try{j.nodeValue=O}catch(Ce){qe(e,e.return,Ce)}}break;case 3:if(qt(r,e),tr(e),v&4&&o!==null&&o.memoizedState.isDehydrated)try{wn(r.containerInfo)}catch(Ce){qe(e,e.return,Ce)}break;case 4:qt(r,e),tr(e);break;case 13:qt(r,e),tr(e),j=e.child,j.flags&8192&&(O=j.memoizedState!==null,j.stateNode.isHidden=O,!O||j.alternate!==null&&j.alternate.memoizedState!==null||(To=Xe())),v&4&&tc(e);break;case 22:if(pe=o!==null&&o.memoizedState!==null,e.mode&1?(mt=(ae=mt)||pe,qt(r,e),mt=ae):qt(r,e),tr(e),v&8192){if(ae=e.memoizedState!==null,(e.stateNode.isHidden=ae)&&!pe&&(e.mode&1)!==0)for(Se=e,pe=e.child;pe!==null;){for(ge=Se=pe;Se!==null;){switch(fe=Se,ye=fe.child,fe.tag){case 0:case 11:case 14:case 15:Vn(4,fe,fe.return);break;case 1:cn(fe,fe.return);var we=fe.stateNode;if(typeof we.componentWillUnmount=="function"){v=fe,o=fe.return;try{r=v,we.props=r.memoizedProps,we.state=r.memoizedState,we.componentWillUnmount()}catch(Ce){qe(v,o,Ce)}}break;case 5:cn(fe,fe.return);break;case 22:if(fe.memoizedState!==null){ic(ge);continue}}ye!==null?(ye.return=fe,Se=ye):ic(ge)}pe=pe.sibling}e:for(pe=null,ge=e;;){if(ge.tag===5){if(pe===null){pe=ge;try{j=ge.stateNode,ae?(O=j.style,typeof O.setProperty=="function"?O.setProperty("display","none","important"):O.display="none"):(K=ge.stateNode,J=ge.memoizedProps.style,W=J!=null&&J.hasOwnProperty("display")?J.display:null,K.style.display=Ge("display",W))}catch(Ce){qe(e,e.return,Ce)}}}else if(ge.tag===6){if(pe===null)try{ge.stateNode.nodeValue=ae?"":ge.memoizedProps}catch(Ce){qe(e,e.return,Ce)}}else if((ge.tag!==22&&ge.tag!==23||ge.memoizedState===null||ge===e)&&ge.child!==null){ge.child.return=ge,ge=ge.child;continue}if(ge===e)break e;for(;ge.sibling===null;){if(ge.return===null||ge.return===e)break e;pe===ge&&(pe=null),ge=ge.return}pe===ge&&(pe=null),ge.sibling.return=ge.return,ge=ge.sibling}}break;case 19:qt(r,e),tr(e),v&4&&tc(e);break;case 21:break;default:qt(r,e),tr(e)}}function tr(e){var r=e.flags;if(r&2){try{e:{for(var o=e.return;o!==null;){if(Zl(o)){var v=o;break e}o=o.return}throw Error(s(160))}switch(v.tag){case 5:var j=v.stateNode;v.flags&32&&(rt(j,""),v.flags&=-33);var O=Ql(e);Ro(e,O,j);break;case 3:case 4:var W=v.stateNode.containerInfo,K=Ql(e);Co(e,K,W);break;default:throw Error(s(161))}}catch(J){qe(e,e.return,J)}e.flags&=-3}r&4096&&(e.flags&=-4097)}function Qu(e,r,o){Se=e,nc(e)}function nc(e,r,o){for(var v=(e.mode&1)!==0;Se!==null;){var j=Se,O=j.child;if(j.tag===22&&v){var W=j.memoizedState!==null||$s;if(!W){var K=j.alternate,J=K!==null&&K.memoizedState!==null||mt;K=$s;var ae=mt;if($s=W,(mt=J)&&!ae)for(Se=j;Se!==null;)W=Se,J=W.child,W.tag===22&&W.memoizedState!==null?oc(j):J!==null?(J.return=W,Se=J):oc(j);for(;O!==null;)Se=O,nc(O),O=O.sibling;Se=j,$s=K,mt=ae}sc(e)}else(j.subtreeFlags&8772)!==0&&O!==null?(O.return=j,Se=O):sc(e)}}function sc(e){for(;Se!==null;){var r=Se;if((r.flags&8772)!==0){var o=r.alternate;try{if((r.flags&8772)!==0)switch(r.tag){case 0:case 11:case 15:mt||Hs(5,r);break;case 1:var v=r.stateNode;if(r.flags&4&&!mt)if(o===null)v.componentDidMount();else{var j=r.elementType===r.type?o.memoizedProps:Gt(r.type,o.memoizedProps);v.componentDidUpdate(j,o.memoizedState,v.__reactInternalSnapshotBeforeUpdate)}var O=r.updateQueue;O!==null&&il(r,O,v);break;case 3:var W=r.updateQueue;if(W!==null){if(o=null,r.child!==null)switch(r.child.tag){case 5:o=r.child.stateNode;break;case 1:o=r.child.stateNode}il(r,W,o)}break;case 5:var K=r.stateNode;if(o===null&&r.flags&4){o=K;var J=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":J.autoFocus&&o.focus();break;case"img":J.src&&(o.src=J.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var ae=r.alternate;if(ae!==null){var pe=ae.memoizedState;if(pe!==null){var ge=pe.dehydrated;ge!==null&&wn(ge)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(s(163))}mt||r.flags&512&&wo(r)}catch(fe){qe(r,r.return,fe)}}if(r===e){Se=null;break}if(o=r.sibling,o!==null){o.return=r.return,Se=o;break}Se=r.return}}function ic(e){for(;Se!==null;){var r=Se;if(r===e){Se=null;break}var o=r.sibling;if(o!==null){o.return=r.return,Se=o;break}Se=r.return}}function oc(e){for(;Se!==null;){var r=Se;try{switch(r.tag){case 0:case 11:case 15:var o=r.return;try{Hs(4,r)}catch(J){qe(r,o,J)}break;case 1:var v=r.stateNode;if(typeof v.componentDidMount=="function"){var j=r.return;try{v.componentDidMount()}catch(J){qe(r,j,J)}}var O=r.return;try{wo(r)}catch(J){qe(r,O,J)}break;case 5:var W=r.return;try{wo(r)}catch(J){qe(r,W,J)}}}catch(J){qe(r,r.return,J)}if(r===e){Se=null;break}var K=r.sibling;if(K!==null){K.return=r.return,Se=K;break}Se=r.return}}var eh=Math.ceil,Ws=S.ReactCurrentDispatcher,bo=S.ReactCurrentOwner,Ht=S.ReactCurrentBatchConfig,Le=0,at=null,et=null,ht=0,Mt=0,un=_r(0),st=0,Yn=null,Br=0,zs=0,ko=0,Gn=null,Ct=null,To=0,hn=1/0,cr=null,Vs=!1,jo=null,Cr=null,Ys=!1,Rr=null,Gs=0,Kn=0,Do=null,Ks=-1,qs=0;function _t(){return(Le&6)!==0?Xe():Ks!==-1?Ks:Ks=Xe()}function br(e){return(e.mode&1)===0?1:(Le&2)!==0&&ht!==0?ht&-ht:Nu.transition!==null?(qs===0&&(qs=Qo()),qs):(e=Be,e!==0||(e=window.event,e=e===void 0?16:la(e.type)),e)}function Xt(e,r,o,v){if(50<Kn)throw Kn=0,Do=null,Error(s(185));_n(e,o,v),((Le&2)===0||e!==at)&&(e===at&&((Le&2)===0&&(zs|=o),st===4&&kr(e,ht)),Rt(e,v),o===1&&Le===0&&(r.mode&1)===0&&(hn=Xe()+500,ws&&yr()))}function Rt(e,r){var o=e.callbackNode;Nc(e,r);var v=ns(e,e===at?ht:0);if(v===0)o!==null&&Xo(o),e.callbackNode=null,e.callbackPriority=0;else if(r=v&-v,e.callbackPriority!==r){if(o!=null&&Xo(o),r===1)e.tag===0?Iu(lc.bind(null,e)):Ga(lc.bind(null,e)),Au(function(){(Le&6)===0&&yr()}),o=null;else{switch(ea(v)){case 1:o=li;break;case 4:o=Jo;break;case 16:o=Zn;break;case 536870912:o=Zo;break;default:o=Zn}o=gc(o,ac.bind(null,e))}e.callbackPriority=r,e.callbackNode=o}}function ac(e,r){if(Ks=-1,qs=0,(Le&6)!==0)throw Error(s(327));var o=e.callbackNode;if(dn()&&e.callbackNode!==o)return null;var v=ns(e,e===at?ht:0);if(v===0)return null;if((v&30)!==0||(v&e.expiredLanes)!==0||r)r=Xs(e,v);else{r=v;var j=Le;Le|=2;var O=uc();(at!==e||ht!==r)&&(cr=null,hn=Xe()+500,Ur(e,r));do try{nh();break}catch(K){cc(e,K)}while(!0);Gi(),Ws.current=O,Le=j,et!==null?r=0:(at=null,ht=0,r=st)}if(r!==0){if(r===2&&(j=ci(e),j!==0&&(v=j,r=Po(e,j))),r===1)throw o=Yn,Ur(e,0),kr(e,v),Rt(e,Xe()),o;if(r===6)kr(e,v);else{if(j=e.current.alternate,(v&30)===0&&!th(j)&&(r=Xs(e,v),r===2&&(O=ci(e),O!==0&&(v=O,r=Po(e,O))),r===1))throw o=Yn,Ur(e,0),kr(e,v),Rt(e,Xe()),o;switch(e.finishedWork=j,e.finishedLanes=v,r){case 0:case 1:throw Error(s(345));case 2:$r(e,Ct,cr);break;case 3:if(kr(e,v),(v&130023424)===v&&(r=To+500-Xe(),10<r)){if(ns(e,0)!==0)break;if(j=e.suspendedLanes,(j&v)!==v){_t(),e.pingedLanes|=e.suspendedLanes&j;break}e.timeoutHandle=Ii($r.bind(null,e,Ct,cr),r);break}$r(e,Ct,cr);break;case 4:if(kr(e,v),(v&4194240)===v)break;for(r=e.eventTimes,j=-1;0<v;){var W=31-zt(v);O=1<<W,W=r[W],W>j&&(j=W),v&=~O}if(v=j,v=Xe()-v,v=(120>v?120:480>v?480:1080>v?1080:1920>v?1920:3e3>v?3e3:4320>v?4320:1960*eh(v/1960))-v,10<v){e.timeoutHandle=Ii($r.bind(null,e,Ct,cr),v);break}$r(e,Ct,cr);break;case 5:$r(e,Ct,cr);break;default:throw Error(s(329))}}}return Rt(e,Xe()),e.callbackNode===o?ac.bind(null,e):null}function Po(e,r){var o=Gn;return e.current.memoizedState.isDehydrated&&(Ur(e,r).flags|=256),e=Xs(e,r),e!==2&&(r=Ct,Ct=o,r!==null&&Ao(r)),e}function Ao(e){Ct===null?Ct=e:Ct.push.apply(Ct,e)}function th(e){for(var r=e;;){if(r.flags&16384){var o=r.updateQueue;if(o!==null&&(o=o.stores,o!==null))for(var v=0;v<o.length;v++){var j=o[v],O=j.getSnapshot;j=j.value;try{if(!Vt(O(),j))return!1}catch{return!1}}}if(o=r.child,r.subtreeFlags&16384&&o!==null)o.return=r,r=o;else{if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function kr(e,r){for(r&=~ko,r&=~zs,e.suspendedLanes|=r,e.pingedLanes&=~r,e=e.expirationTimes;0<r;){var o=31-zt(r),v=1<<o;e[o]=-1,r&=~v}}function lc(e){if((Le&6)!==0)throw Error(s(327));dn();var r=ns(e,0);if((r&1)===0)return Rt(e,Xe()),null;var o=Xs(e,r);if(e.tag!==0&&o===2){var v=ci(e);v!==0&&(r=v,o=Po(e,v))}if(o===1)throw o=Yn,Ur(e,0),kr(e,r),Rt(e,Xe()),o;if(o===6)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=r,$r(e,Ct,cr),Rt(e,Xe()),null}function Oo(e,r){var o=Le;Le|=1;try{return e(r)}finally{Le=o,Le===0&&(hn=Xe()+500,ws&&yr())}}function Fr(e){Rr!==null&&Rr.tag===0&&(Le&6)===0&&dn();var r=Le;Le|=1;var o=Ht.transition,v=Be;try{if(Ht.transition=null,Be=1,e)return e()}finally{Be=v,Ht.transition=o,Le=r,(Le&6)===0&&yr()}}function Lo(){Mt=un.current,$e(un)}function Ur(e,r){e.finishedWork=null,e.finishedLanes=0;var o=e.timeoutHandle;if(o!==-1&&(e.timeoutHandle=-1,Pu(o)),et!==null)for(o=et.return;o!==null;){var v=o;switch(Hi(v),v.tag){case 1:v=v.type.childContextTypes,v!=null&&Ss();break;case 3:an(),$e(St),$e(dt),to();break;case 5:Qi(v);break;case 4:an();break;case 13:$e(ze);break;case 19:$e(ze);break;case 10:Ki(v.type._context);break;case 22:case 23:Lo()}o=o.return}if(at=e,et=e=Tr(e.current,null),ht=Mt=r,st=0,Yn=null,ko=zs=Br=0,Ct=Gn=null,Mr!==null){for(r=0;r<Mr.length;r++)if(o=Mr[r],v=o.interleaved,v!==null){o.interleaved=null;var j=v.next,O=o.pending;if(O!==null){var W=O.next;O.next=j,v.next=W}o.pending=v}Mr=null}return e}function cc(e,r){do{var o=et;try{if(Gi(),Os.current=Ns,Ls){for(var v=Ve.memoizedState;v!==null;){var j=v.queue;j!==null&&(j.pending=null),v=v.next}Ls=!1}if(Nr=0,ot=nt=Ve=null,Un=!1,$n=0,bo.current=null,o===null||o.return===null){st=1,Yn=r,et=null;break}e:{var O=e,W=o.return,K=o,J=r;if(r=ht,K.flags|=32768,J!==null&&typeof J=="object"&&typeof J.then=="function"){var ae=J,pe=K,ge=pe.tag;if((pe.mode&1)===0&&(ge===0||ge===11||ge===15)){var fe=pe.alternate;fe?(pe.updateQueue=fe.updateQueue,pe.memoizedState=fe.memoizedState,pe.lanes=fe.lanes):(pe.updateQueue=null,pe.memoizedState=null)}var ye=Ll(W);if(ye!==null){ye.flags&=-257,Ml(ye,W,K,O,r),ye.mode&1&&Ol(O,ae,r),r=ye,J=ae;var we=r.updateQueue;if(we===null){var Ce=new Set;Ce.add(J),r.updateQueue=Ce}else we.add(J);break e}else{if((r&1)===0){Ol(O,ae,r),Mo();break e}J=Error(s(426))}}else if(We&&K.mode&1){var Je=Ll(W);if(Je!==null){(Je.flags&65536)===0&&(Je.flags|=256),Ml(Je,W,K,O,r),Vi(ln(J,K));break e}}O=J=ln(J,K),st!==4&&(st=2),Gn===null?Gn=[O]:Gn.push(O),O=W;do{switch(O.tag){case 3:O.flags|=65536,r&=-r,O.lanes|=r;var ne=Pl(O,J,r);sl(O,ne);break e;case 1:K=J;var Q=O.type,oe=O.stateNode;if((O.flags&128)===0&&(typeof Q.getDerivedStateFromError=="function"||oe!==null&&typeof oe.componentDidCatch=="function"&&(Cr===null||!Cr.has(oe)))){O.flags|=65536,r&=-r,O.lanes|=r;var ve=Al(O,K,r);sl(O,ve);break e}}O=O.return}while(O!==null)}dc(o)}catch(Re){r=Re,et===o&&o!==null&&(et=o=o.return);continue}break}while(!0)}function uc(){var e=Ws.current;return Ws.current=Ns,e===null?Ns:e}function Mo(){(st===0||st===3||st===2)&&(st=4),at===null||(Br&268435455)===0&&(zs&268435455)===0||kr(at,ht)}function Xs(e,r){var o=Le;Le|=2;var v=uc();(at!==e||ht!==r)&&(cr=null,Ur(e,r));do try{rh();break}catch(j){cc(e,j)}while(!0);if(Gi(),Le=o,Ws.current=v,et!==null)throw Error(s(261));return at=null,ht=0,st}function rh(){for(;et!==null;)hc(et)}function nh(){for(;et!==null&&!Tc();)hc(et)}function hc(e){var r=mc(e.alternate,e,Mt);e.memoizedProps=e.pendingProps,r===null?dc(e):et=r,bo.current=null}function dc(e){var r=e;do{var o=r.alternate;if(e=r.return,(r.flags&32768)===0){if(o=qu(o,r,Mt),o!==null){et=o;return}}else{if(o=Xu(o,r),o!==null){o.flags&=32767,et=o;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{st=6,et=null;return}}if(r=r.sibling,r!==null){et=r;return}et=r=e}while(r!==null);st===0&&(st=5)}function $r(e,r,o){var v=Be,j=Ht.transition;try{Ht.transition=null,Be=1,sh(e,r,o,v)}finally{Ht.transition=j,Be=v}return null}function sh(e,r,o,v){do dn();while(Rr!==null);if((Le&6)!==0)throw Error(s(327));o=e.finishedWork;var j=e.finishedLanes;if(o===null)return null;if(e.finishedWork=null,e.finishedLanes=0,o===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var O=o.lanes|o.childLanes;if(Bc(e,O),e===at&&(et=at=null,ht=0),(o.subtreeFlags&2064)===0&&(o.flags&2064)===0||Ys||(Ys=!0,gc(Zn,function(){return dn(),null})),O=(o.flags&15990)!==0,(o.subtreeFlags&15990)!==0||O){O=Ht.transition,Ht.transition=null;var W=Be;Be=1;var K=Le;Le|=4,bo.current=null,Zu(e,o),rc(o,e),Cu(Li),os=!!Oi,Li=Oi=null,e.current=o,Qu(o),jc(),Le=K,Be=W,Ht.transition=O}else e.current=o;if(Ys&&(Ys=!1,Rr=e,Gs=j),O=e.pendingLanes,O===0&&(Cr=null),Ac(o.stateNode),Rt(e,Xe()),r!==null)for(v=e.onRecoverableError,o=0;o<r.length;o++)j=r[o],v(j.value,{componentStack:j.stack,digest:j.digest});if(Vs)throw Vs=!1,e=jo,jo=null,e;return(Gs&1)!==0&&e.tag!==0&&dn(),O=e.pendingLanes,(O&1)!==0?e===Do?Kn++:(Kn=0,Do=e):Kn=0,yr(),null}function dn(){if(Rr!==null){var e=ea(Gs),r=Ht.transition,o=Be;try{if(Ht.transition=null,Be=16>e?16:e,Rr===null)var v=!1;else{if(e=Rr,Rr=null,Gs=0,(Le&6)!==0)throw Error(s(331));var j=Le;for(Le|=4,Se=e.current;Se!==null;){var O=Se,W=O.child;if((Se.flags&16)!==0){var K=O.deletions;if(K!==null){for(var J=0;J<K.length;J++){var ae=K[J];for(Se=ae;Se!==null;){var pe=Se;switch(pe.tag){case 0:case 11:case 15:Vn(8,pe,O)}var ge=pe.child;if(ge!==null)ge.return=pe,Se=ge;else for(;Se!==null;){pe=Se;var fe=pe.sibling,ye=pe.return;if(Jl(pe),pe===ae){Se=null;break}if(fe!==null){fe.return=ye,Se=fe;break}Se=ye}}}var we=O.alternate;if(we!==null){var Ce=we.child;if(Ce!==null){we.child=null;do{var Je=Ce.sibling;Ce.sibling=null,Ce=Je}while(Ce!==null)}}Se=O}}if((O.subtreeFlags&2064)!==0&&W!==null)W.return=O,Se=W;else e:for(;Se!==null;){if(O=Se,(O.flags&2048)!==0)switch(O.tag){case 0:case 11:case 15:Vn(9,O,O.return)}var ne=O.sibling;if(ne!==null){ne.return=O.return,Se=ne;break e}Se=O.return}}var Q=e.current;for(Se=Q;Se!==null;){W=Se;var oe=W.child;if((W.subtreeFlags&2064)!==0&&oe!==null)oe.return=W,Se=oe;else e:for(W=Q;Se!==null;){if(K=Se,(K.flags&2048)!==0)try{switch(K.tag){case 0:case 11:case 15:Hs(9,K)}}catch(Re){qe(K,K.return,Re)}if(K===W){Se=null;break e}var ve=K.sibling;if(ve!==null){ve.return=K.return,Se=ve;break e}Se=K.return}}if(Le=j,yr(),Jt&&typeof Jt.onPostCommitFiberRoot=="function")try{Jt.onPostCommitFiberRoot(Qn,e)}catch{}v=!0}return v}finally{Be=o,Ht.transition=r}}return!1}function fc(e,r,o){r=ln(o,r),r=Pl(e,r,1),e=Er(e,r,1),r=_t(),e!==null&&(_n(e,1,r),Rt(e,r))}function qe(e,r,o){if(e.tag===3)fc(e,e,o);else for(;r!==null;){if(r.tag===3){fc(r,e,o);break}else if(r.tag===1){var v=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof v.componentDidCatch=="function"&&(Cr===null||!Cr.has(v))){e=ln(o,e),e=Al(r,e,1),r=Er(r,e,1),e=_t(),r!==null&&(_n(r,1,e),Rt(r,e));break}}r=r.return}}function ih(e,r,o){var v=e.pingCache;v!==null&&v.delete(r),r=_t(),e.pingedLanes|=e.suspendedLanes&o,at===e&&(ht&o)===o&&(st===4||st===3&&(ht&130023424)===ht&&500>Xe()-To?Ur(e,0):ko|=o),Rt(e,r)}function pc(e,r){r===0&&((e.mode&1)===0?r=1:(r=rs,rs<<=1,(rs&130023424)===0&&(rs=4194304)));var o=_t();e=or(e,r),e!==null&&(_n(e,r,o),Rt(e,o))}function oh(e){var r=e.memoizedState,o=0;r!==null&&(o=r.retryLane),pc(e,o)}function ah(e,r){var o=0;switch(e.tag){case 13:var v=e.stateNode,j=e.memoizedState;j!==null&&(o=j.retryLane);break;case 19:v=e.stateNode;break;default:throw Error(s(314))}v!==null&&v.delete(r),pc(e,o)}var mc;mc=function(e,r,o){if(e!==null)if(e.memoizedProps!==r.pendingProps||St.current)wt=!0;else{if((e.lanes&o)===0&&(r.flags&128)===0)return wt=!1,Ku(e,r,o);wt=(e.flags&131072)!==0}else wt=!1,We&&(r.flags&1048576)!==0&&Ka(r,Rs,r.index);switch(r.lanes=0,r.tag){case 2:var v=r.type;Us(e,r),e=r.pendingProps;var j=Zr(r,dt.current);on(r,o),j=so(null,r,v,e,j,o);var O=io();return r.flags|=1,typeof j=="object"&&j!==null&&typeof j.render=="function"&&j.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,Et(v)?(O=!0,Es(r)):O=!1,r.memoizedState=j.state!==null&&j.state!==void 0?j.state:null,Ji(r),j.updater=Bs,r.stateNode=j,j._reactInternals=r,ho(r,v,e,o),r=go(null,r,v,!0,O,o)):(r.tag=0,We&&O&&$i(r),vt(null,r,j,o),r=r.child),r;case 16:v=r.elementType;e:{switch(Us(e,r),e=r.pendingProps,j=v._init,v=j(v._payload),r.type=v,j=r.tag=ch(v),e=Gt(v,e),j){case 0:r=mo(null,r,v,e,o);break e;case 1:r=$l(null,r,v,e,o);break e;case 11:r=Il(null,r,v,e,o);break e;case 14:r=Nl(null,r,v,Gt(v.type,e),o);break e}throw Error(s(306,v,""))}return r;case 0:return v=r.type,j=r.pendingProps,j=r.elementType===v?j:Gt(v,j),mo(e,r,v,j,o);case 1:return v=r.type,j=r.pendingProps,j=r.elementType===v?j:Gt(v,j),$l(e,r,v,j,o);case 3:e:{if(Hl(r),e===null)throw Error(s(387));v=r.pendingProps,O=r.memoizedState,j=O.element,nl(e,r),Ps(r,v,null,o);var W=r.memoizedState;if(v=W.element,O.isDehydrated)if(O={element:v,isDehydrated:!1,cache:W.cache,pendingSuspenseBoundaries:W.pendingSuspenseBoundaries,transitions:W.transitions},r.updateQueue.baseState=O,r.memoizedState=O,r.flags&256){j=ln(Error(s(423)),r),r=Wl(e,r,v,o,j);break e}else if(v!==j){j=ln(Error(s(424)),r),r=Wl(e,r,v,o,j);break e}else for(Lt=vr(r.stateNode.containerInfo.firstChild),Ot=r,We=!0,Yt=null,o=tl(r,null,v,o),r.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(rn(),v===j){r=lr(e,r,o);break e}vt(e,r,v,o)}r=r.child}return r;case 5:return ol(r),e===null&&zi(r),v=r.type,j=r.pendingProps,O=e!==null?e.memoizedProps:null,W=j.children,Mi(v,j)?W=null:O!==null&&Mi(v,O)&&(r.flags|=32),Ul(e,r),vt(e,r,W,o),r.child;case 6:return e===null&&zi(r),null;case 13:return zl(e,r,o);case 4:return Zi(r,r.stateNode.containerInfo),v=r.pendingProps,e===null?r.child=nn(r,null,v,o):vt(e,r,v,o),r.child;case 11:return v=r.type,j=r.pendingProps,j=r.elementType===v?j:Gt(v,j),Il(e,r,v,j,o);case 7:return vt(e,r,r.pendingProps,o),r.child;case 8:return vt(e,r,r.pendingProps.children,o),r.child;case 12:return vt(e,r,r.pendingProps.children,o),r.child;case 10:e:{if(v=r.type._context,j=r.pendingProps,O=r.memoizedProps,W=j.value,Fe(Ts,v._currentValue),v._currentValue=W,O!==null)if(Vt(O.value,W)){if(O.children===j.children&&!St.current){r=lr(e,r,o);break e}}else for(O=r.child,O!==null&&(O.return=r);O!==null;){var K=O.dependencies;if(K!==null){W=O.child;for(var J=K.firstContext;J!==null;){if(J.context===v){if(O.tag===1){J=ar(-1,o&-o),J.tag=2;var ae=O.updateQueue;if(ae!==null){ae=ae.shared;var pe=ae.pending;pe===null?J.next=J:(J.next=pe.next,pe.next=J),ae.pending=J}}O.lanes|=o,J=O.alternate,J!==null&&(J.lanes|=o),qi(O.return,o,r),K.lanes|=o;break}J=J.next}}else if(O.tag===10)W=O.type===r.type?null:O.child;else if(O.tag===18){if(W=O.return,W===null)throw Error(s(341));W.lanes|=o,K=W.alternate,K!==null&&(K.lanes|=o),qi(W,o,r),W=O.sibling}else W=O.child;if(W!==null)W.return=O;else for(W=O;W!==null;){if(W===r){W=null;break}if(O=W.sibling,O!==null){O.return=W.return,W=O;break}W=W.return}O=W}vt(e,r,j.children,o),r=r.child}return r;case 9:return j=r.type,v=r.pendingProps.children,on(r,o),j=Ut(j),v=v(j),r.flags|=1,vt(e,r,v,o),r.child;case 14:return v=r.type,j=Gt(v,r.pendingProps),j=Gt(v.type,j),Nl(e,r,v,j,o);case 15:return Bl(e,r,r.type,r.pendingProps,o);case 17:return v=r.type,j=r.pendingProps,j=r.elementType===v?j:Gt(v,j),Us(e,r),r.tag=1,Et(v)?(e=!0,Es(r)):e=!1,on(r,o),jl(r,v,j),ho(r,v,j,o),go(null,r,v,!0,e,o);case 19:return Yl(e,r,o);case 22:return Fl(e,r,o)}throw Error(s(156,r.tag))};function gc(e,r){return qo(e,r)}function lh(e,r,o,v){this.tag=e,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=v,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wt(e,r,o,v){return new lh(e,r,o,v)}function Io(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ch(e){if(typeof e=="function")return Io(e)?1:0;if(e!=null){if(e=e.$$typeof,e===F)return 11;if(e===z)return 14}return 2}function Tr(e,r){var o=e.alternate;return o===null?(o=Wt(e.tag,r,e.key,e.mode),o.elementType=e.elementType,o.type=e.type,o.stateNode=e.stateNode,o.alternate=e,e.alternate=o):(o.pendingProps=r,o.type=e.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=e.flags&14680064,o.childLanes=e.childLanes,o.lanes=e.lanes,o.child=e.child,o.memoizedProps=e.memoizedProps,o.memoizedState=e.memoizedState,o.updateQueue=e.updateQueue,r=e.dependencies,o.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},o.sibling=e.sibling,o.index=e.index,o.ref=e.ref,o}function Js(e,r,o,v,j,O){var W=2;if(v=e,typeof e=="function")Io(e)&&(W=1);else if(typeof e=="string")W=5;else e:switch(e){case L:return Hr(o.children,j,O,r);case D:W=8,j|=8;break;case N:return e=Wt(12,o,r,j|2),e.elementType=N,e.lanes=O,e;case $:return e=Wt(13,o,r,j),e.elementType=$,e.lanes=O,e;case H:return e=Wt(19,o,r,j),e.elementType=H,e.lanes=O,e;case k:return Zs(o,j,O,r);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case I:W=10;break e;case U:W=9;break e;case F:W=11;break e;case z:W=14;break e;case Y:W=16,v=null;break e}throw Error(s(130,e==null?e:typeof e,""))}return r=Wt(W,o,r,j),r.elementType=e,r.type=v,r.lanes=O,r}function Hr(e,r,o,v){return e=Wt(7,e,v,r),e.lanes=o,e}function Zs(e,r,o,v){return e=Wt(22,e,v,r),e.elementType=k,e.lanes=o,e.stateNode={isHidden:!1},e}function No(e,r,o){return e=Wt(6,e,null,r),e.lanes=o,e}function Bo(e,r,o){return r=Wt(4,e.children!==null?e.children:[],e.key,r),r.lanes=o,r.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},r}function uh(e,r,o,v,j){this.tag=r,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ui(0),this.expirationTimes=ui(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ui(0),this.identifierPrefix=v,this.onRecoverableError=j,this.mutableSourceEagerHydrationData=null}function Fo(e,r,o,v,j,O,W,K,J){return e=new uh(e,r,o,K,J),r===1?(r=1,O===!0&&(r|=8)):r=0,O=Wt(3,null,null,r),e.current=O,O.stateNode=e,O.memoizedState={element:v,isDehydrated:o,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ji(O),e}function hh(e,r,o){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:P,key:v==null?null:""+v,children:e,containerInfo:r,implementation:o}}function vc(e){if(!e)return xr;e=e._reactInternals;e:{if(Dr(e)!==e||e.tag!==1)throw Error(s(170));var r=e;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(Et(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(s(171))}if(e.tag===1){var o=e.type;if(Et(o))return Va(e,o,r)}return r}function _c(e,r,o,v,j,O,W,K,J){return e=Fo(o,v,!0,e,j,O,W,K,J),e.context=vc(null),o=e.current,v=_t(),j=br(o),O=ar(v,j),O.callback=r??null,Er(o,O,j),e.current.lanes=j,_n(e,j,v),Rt(e,v),e}function Qs(e,r,o,v){var j=r.current,O=_t(),W=br(j);return o=vc(o),r.context===null?r.context=o:r.pendingContext=o,r=ar(O,W),r.payload={element:e},v=v===void 0?null:v,v!==null&&(r.callback=v),e=Er(j,r,W),e!==null&&(Xt(e,j,W,O),Ds(e,j,W)),W}function ei(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function xc(e,r){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var o=e.retryLane;e.retryLane=o!==0&&o<r?o:r}}function Uo(e,r){xc(e,r),(e=e.alternate)&&xc(e,r)}function dh(){return null}var yc=typeof reportError=="function"?reportError:function(e){console.error(e)};function $o(e){this._internalRoot=e}ti.prototype.render=$o.prototype.render=function(e){var r=this._internalRoot;if(r===null)throw Error(s(409));Qs(e,r,null,null)},ti.prototype.unmount=$o.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var r=e.containerInfo;Fr(function(){Qs(null,e,null,null)}),r[rr]=null}};function ti(e){this._internalRoot=e}ti.prototype.unstable_scheduleHydration=function(e){if(e){var r=na();e={blockedOn:null,target:e,priority:r};for(var o=0;o<pr.length&&r!==0&&r<pr[o].priority;o++);pr.splice(o,0,e),o===0&&oa(e)}};function Ho(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ri(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Sc(){}function fh(e,r,o,v,j){if(j){if(typeof v=="function"){var O=v;v=function(){var ae=ei(W);O.call(ae)}}var W=_c(r,v,e,0,null,!1,!1,"",Sc);return e._reactRootContainer=W,e[rr]=W.current,An(e.nodeType===8?e.parentNode:e),Fr(),W}for(;j=e.lastChild;)e.removeChild(j);if(typeof v=="function"){var K=v;v=function(){var ae=ei(J);K.call(ae)}}var J=Fo(e,0,!1,null,null,!1,!1,"",Sc);return e._reactRootContainer=J,e[rr]=J.current,An(e.nodeType===8?e.parentNode:e),Fr(function(){Qs(r,J,o,v)}),J}function ni(e,r,o,v,j){var O=o._reactRootContainer;if(O){var W=O;if(typeof j=="function"){var K=j;j=function(){var J=ei(W);K.call(J)}}Qs(r,W,e,j)}else W=fh(o,r,e,j,v);return ei(W)}ta=function(e){switch(e.tag){case 3:var r=e.stateNode;if(r.current.memoizedState.isDehydrated){var o=vn(r.pendingLanes);o!==0&&(hi(r,o|1),Rt(r,Xe()),(Le&6)===0&&(hn=Xe()+500,yr()))}break;case 13:Fr(function(){var v=or(e,1);if(v!==null){var j=_t();Xt(v,e,1,j)}}),Uo(e,1)}},di=function(e){if(e.tag===13){var r=or(e,134217728);if(r!==null){var o=_t();Xt(r,e,134217728,o)}Uo(e,134217728)}},ra=function(e){if(e.tag===13){var r=br(e),o=or(e,r);if(o!==null){var v=_t();Xt(o,e,r,v)}Uo(e,r)}},na=function(){return Be},sa=function(e,r){var o=Be;try{return Be=e,r()}finally{Be=o}},xe=function(e,r,o){switch(r){case"input":if(Ae(e,o),r=o.name,o.type==="radio"&&r!=null){for(o=e;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<o.length;r++){var v=o[r];if(v!==e&&v.form===e.form){var j=ys(v);if(!j)throw Error(s(90));he(v),Ae(v,j)}}}break;case"textarea":Tt(e,o);break;case"select":r=o.value,r!=null&&gt(e,!!o.multiple,r,!1)}},Ke=Oo,fn=Fr;var ph={usingClientEntryPoint:!1,Events:[Mn,Xr,ys,ct,yt,Oo]},qn={findFiberByHostInstance:Pr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},mh={bundleType:qn.bundleType,version:qn.version,rendererPackageName:qn.rendererPackageName,rendererConfig:qn.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:S.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Go(e),e===null?null:e.stateNode},findFiberByHostInstance:qn.findFiberByHostInstance||dh,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var si=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!si.isDisabled&&si.supportsFiber)try{Qn=si.inject(mh),Jt=si}catch{}}return reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ph,reactDom_production_min.createPortal=function(e,r){var o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ho(r))throw Error(s(200));return hh(e,r,null,o)},reactDom_production_min.createRoot=function(e,r){if(!Ho(e))throw Error(s(299));var o=!1,v="",j=yc;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(v=r.identifierPrefix),r.onRecoverableError!==void 0&&(j=r.onRecoverableError)),r=Fo(e,1,!1,null,null,o,!1,v,j),e[rr]=r.current,An(e.nodeType===8?e.parentNode:e),new $o(r)},reactDom_production_min.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var r=e._reactInternals;if(r===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=Go(r),e=e===null?null:e.stateNode,e},reactDom_production_min.flushSync=function(e){return Fr(e)},reactDom_production_min.hydrate=function(e,r,o){if(!ri(r))throw Error(s(200));return ni(null,e,r,!0,o)},reactDom_production_min.hydrateRoot=function(e,r,o){if(!Ho(e))throw Error(s(405));var v=o!=null&&o.hydratedSources||null,j=!1,O="",W=yc;if(o!=null&&(o.unstable_strictMode===!0&&(j=!0),o.identifierPrefix!==void 0&&(O=o.identifierPrefix),o.onRecoverableError!==void 0&&(W=o.onRecoverableError)),r=_c(r,null,e,1,o??null,j,!1,O,W),e[rr]=r.current,An(e),v)for(e=0;e<v.length;e++)o=v[e],j=o._getVersion,j=j(o._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[o,j]:r.mutableSourceEagerHydrationData.push(o,j);return new ti(r)},reactDom_production_min.render=function(e,r,o){if(!ri(r))throw Error(s(200));return ni(null,e,r,!1,o)},reactDom_production_min.unmountComponentAtNode=function(e){if(!ri(e))throw Error(s(40));return e._reactRootContainer?(Fr(function(){ni(null,null,e,!1,function(){e._reactRootContainer=null,e[rr]=null})}),!0):!1},reactDom_production_min.unstable_batchedUpdates=Oo,reactDom_production_min.unstable_renderSubtreeIntoContainer=function(e,r,o,v){if(!ri(o))throw Error(s(200));if(e==null||e._reactInternals===void 0)throw Error(s(38));return ni(e,r,o,!1,v)},reactDom_production_min.version="18.3.1-next-f1338f8080-20240426",reactDom_production_min}var hasRequiredReactDom;function requireReactDom(){if(hasRequiredReactDom)return reactDom.exports;hasRequiredReactDom=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(n){console.error(n)}}return i(),reactDom.exports=requireReactDom_production_min(),reactDom.exports}var hasRequiredClient;function requireClient(){if(hasRequiredClient)return client;hasRequiredClient=1;var i=requireReactDom();return client.createRoot=i.createRoot,client.hydrateRoot=i.hydrateRoot,client}var clientExports=requireClient(),reactExports=requireReact();const React=getDefaultExportFromCjs(reactExports);var reactDomExports=requireReactDom();const StartMenuIcon="/INyxOS/assets/Start%20Menu-DghFIiTC.png",NexaAiIcon="/INyxOS/assets/Nexa%20AI-Fe0Q4TXf.ico",ModernContextMenu=({anchorRect:i,items:n,onClose:s,taskbar:a})=>{const h=reactExports.useRef(null),[_,w]=reactExports.useState({x:i.left,y:i.top}),[l,u]=reactExports.useState(!1);return reactExports.useEffect(()=>{setTimeout(()=>u(!0),10);function f(y){!h.current||!y.target||h.current.contains(y.target)||s()}return window.addEventListener("mousedown",f),()=>window.removeEventListener("mousedown",f)},[s]),reactExports.useEffect(()=>{if(!h.current)return;const f=h.current.getBoundingClientRect();let y=i.left+i.width/2-f.width/2,p=i.top-f.height-8;p<0&&(p=i.bottom+8),y=Math.max(8,Math.min(y,window.innerWidth-f.width-8)),p=Math.max(8,Math.min(p,window.innerHeight-f.height-8)),w({x:y,y:p})},[i]),reactExports.useEffect(()=>{let f;function y(C){f=setTimeout(()=>{s()},1200)}function p(){clearTimeout(f)}return window.addEventListener("touchstart",y),window.addEventListener("touchend",p),()=>{window.removeEventListener("touchstart",y),window.removeEventListener("touchend",p)}},[s]),jsxRuntimeExports.jsx("div",{ref:h,className:`modern-context-menu${l?" open":""}`,style:{left:_.x,top:_.y},tabIndex:0,role:"menu","aria-label":"Context menu",children:jsxRuntimeExports.jsx("ul",{className:"modern-menu-list",children:n.map((f,y)=>f.type==="divider"?jsxRuntimeExports.jsx("li",{className:"modern-menu-divider",role:"separator",style:{margin:"4px 0",borderBottom:"1px solid #3a3a4a"}},y):jsxRuntimeExports.jsxs("li",{className:`modern-menu-item${f.disabled?" disabled":""}${f.danger?" danger":""}`,tabIndex:-1,role:"menuitem","aria-disabled":f.disabled,onClick:()=>{!f.disabled&&f.onClick&&f.onClick(),f.submenu||s()},children:[f.icon&&jsxRuntimeExports.jsx("span",{className:"modern-menu-icon",children:f.icon}),jsxRuntimeExports.jsx("span",{className:"modern-menu-label",children:f.label}),f.shortcut&&jsxRuntimeExports.jsx("span",{className:"modern-menu-shortcut",children:f.shortcut}),f.submenu&&jsxRuntimeExports.jsx("span",{className:"modern-menu-arrow",children:"▶"})]},y))})})},SystemTray=({icons:i})=>{const[n,s]=React.useState(!1),a=n&&jsxRuntimeExports.jsxs("div",{className:"tray-popover tray-volume-popover",style:{position:"absolute",right:0,bottom:48,background:"rgba(30,34,43,0.95)",borderRadius:12,boxShadow:"0 2px 16px #000a",padding:18,minWidth:180,zIndex:1e3},children:[jsxRuntimeExports.jsx("div",{style:{fontWeight:600,marginBottom:8},children:"Volume Mixer"}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:10},children:[jsxRuntimeExports.jsx("span",{style:{marginRight:8},children:"System"}),jsxRuntimeExports.jsx("input",{type:"range",min:0,max:100,defaultValue:80,style:{flex:1}})]}),jsxRuntimeExports.jsx("div",{style:{fontSize:13,color:"#888"},children:"(Per-app volume coming soon)"})]});return jsxRuntimeExports.jsxs("div",{className:"system-tray-root",style:{position:"relative"},children:[jsxRuntimeExports.jsxs("span",{className:"tray-icon",title:"Volume Mixer",onClick:()=>s(h=>!h),tabIndex:0,style:{position:"relative"},children:[jsxRuntimeExports.jsx("svg",{width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:jsxRuntimeExports.jsx("path",{d:"M18.2451 7.99993C19.036 9.13376 19.4998 10.5127 19.4998 11.9999C19.4998 13.4872 19.036 14.8661 18.2451 15.9999M12.1343 4.36561L8.96863 7.5313C8.79568 7.70425 8.7092 7.79073 8.60828 7.85257C8.51881 7.9074 8.42127 7.9478 8.31923 7.9723C8.20414 7.99993 8.08185 7.99993 7.83726 7.99993H6.1C5.53995 7.99993 5.25992 7.99993 5.04601 8.10892C4.85785 8.20479 4.70487 8.35777 4.60899 8.54594C4.5 8.75985 4.5 9.03987 4.5 9.59993V14.3999C4.5 14.96 4.5 15.24 4.60899 15.4539C4.70487 15.6421 4.85785 15.7951 5.04601 15.8909C5.25992 15.9999 5.53995 15.9999 6.1 15.9999H7.83726C8.08185 15.9999 8.20414 15.9999 8.31923 16.0276C8.42127 16.0521 8.51881 16.0925 8.60828 16.1473C8.7092 16.2091 8.79568 16.2956 8.96863 16.4686L12.1343 19.6342C12.5627 20.0626 12.7769 20.2768 12.9608 20.2913C13.1203 20.3038 13.2763 20.2392 13.3802 20.1175C13.5 19.9773 13.5 19.6744 13.5 19.0686V4.9313C13.5 4.32548 13.5 4.02257 13.3802 3.88231C13.2763 3.76061 13.1203 3.69602 12.9608 3.70858C12.7769 3.72305 12.5627 3.93724 12.1343 4.36561Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})}),a]}),i.map(h=>jsxRuntimeExports.jsxs("span",{className:"tray-icon",onClick:h.onClick,tabIndex:0,children:[h.icon,h.popover]},h.id))]})},CalendarTray=()=>{const[i,n]=React.useState(!1),s=new Date;return jsxRuntimeExports.jsxs("span",{className:"tray-icon",title:"Calendar",onClick:()=>n(a=>!a),tabIndex:0,style:{position:"relative",top:"1px",left:"-2px"},children:[jsxRuntimeExports.jsx("svg",{width:"1.3em",height:"1.3em",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:jsxRuntimeExports.jsx("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 10h16m-8-3V4M7 7V4m10 3V4M5 20h14a1 1 0 0 0 1-1V7a1 1 0 0 0-1-1H5a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1Zm3-7h.01v.01H8V13Zm4 0h.01v.01H12V13Zm4 0h.01v.01H16V13Zm-8 4h.01v.01H8V17Zm4 0h.01v.01H12V17Zm4 0h.01v.01H16V17Z"})}),i&&jsxRuntimeExports.jsxs("div",{className:"tray-popover tray-calendar-popover",style:{position:"absolute",right:0,bottom:48,background:"rgba(30,34,43,0.97)",borderRadius:12,boxShadow:"0 2px 16px #000a",padding:18,minWidth:260,zIndex:1e3},children:[jsxRuntimeExports.jsx("div",{style:{fontWeight:600,marginBottom:8,fontSize:18},children:s.toLocaleString("default",{month:"long",year:"numeric"})}),jsxRuntimeExports.jsx(CalendarView,{date:s})]})]})},CalendarView=({date:i})=>{const n=i.getFullYear(),s=i.getMonth(),a=i.getDate(),h=new Date(n,s,1).getDay(),_=new Date(n,s+1,0).getDate();return Array.from({length:_},(w,l)=>l+1),jsxRuntimeExports.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",textAlign:"center",background:"none",color:"#fff"},children:[jsxRuntimeExports.jsx("thead",{children:jsxRuntimeExports.jsxs("tr",{style:{fontSize:14,color:"#9cf"},children:[jsxRuntimeExports.jsx("th",{children:"Su"}),jsxRuntimeExports.jsx("th",{children:"Mo"}),jsxRuntimeExports.jsx("th",{children:"Tu"}),jsxRuntimeExports.jsx("th",{children:"We"}),jsxRuntimeExports.jsx("th",{children:"Th"}),jsxRuntimeExports.jsx("th",{children:"Fr"}),jsxRuntimeExports.jsx("th",{children:"Sa"})]})}),jsxRuntimeExports.jsx("tbody",{children:Array.from({length:Math.ceil((h+_)/7)}).map((w,l)=>jsxRuntimeExports.jsx("tr",{children:Array.from({length:7}).map((u,f)=>{const y=l*7+f-h+1;return jsxRuntimeExports.jsx("td",{style:{padding:6,borderRadius:6,background:y===a?"#308aff":"none",color:y===a?"#fff":"#cce",fontWeight:y===a?700:400,opacity:y>0&&y<=_?1:.3},children:y>0&&y<=_?y:""},f)})},l))})]})},useBattery=()=>{const[i,n]=React.useState(null);return React.useEffect(()=>{let s=!0;return"getBattery"in navigator&&navigator.getBattery().then(a=>{function h(){s&&n({level:a.level,charging:a.charging,chargingTime:a.chargingTime,dischargingTime:a.dischargingTime})}return h(),a.addEventListener("levelchange",h),a.addEventListener("chargingchange",h),()=>{a.removeEventListener("levelchange",h),a.removeEventListener("chargingchange",h)}}),()=>{s=!1}},[]),i},isLaptop=()=>"getBattery"in navigator,BatteryTray=()=>{const i=useBattery();if(!isLaptop()||!i)return null;const n=Math.round((i.level||0)*100);return jsxRuntimeExports.jsxs("span",{className:"tray-icon",title:`Battery: ${n}%`+(i.charging?" (Charging)":""),children:[jsxRuntimeExports.jsx("span",{role:"img","aria-label":"Battery",children:i.charging?"🔌":"🔋"})," ",n,"%"]})};class FileSystem{constructor(){Wo(this,"nodes",[])}async init(){const n=localStorage.getItem("nyxos_fs");n?this.nodes=JSON.parse(n):(this.nodes=[{type:"folder",name:"home",path:"/home",mtime:Date.now()},{type:"folder",name:"user",path:"/home/user",mtime:Date.now()}],this.save())}save(){localStorage.setItem("nyxos_fs",JSON.stringify(this.nodes))}async list(n){const s=n==="/"?"/":n.endsWith("/")?n:n+"/";return this.nodes.filter(a=>!a.path.startsWith(s)||a.path===s?!1:!a.path.substring(s.length).includes("/"))}async stat(n){return this.nodes.find(a=>a.path===n)||null}async writeFile(n,s){const a=n.substring(n.lastIndexOf("/")+1),h=this.nodes.find(_=>_.path===n);h?(h.content=s,h.mtime=Date.now()):this.nodes.push({type:"file",name:a,path:n,mtime:Date.now(),content:s}),this.save()}async mkdir(n){if(this.nodes.some(a=>a.path===n))return;const s=n.substring(n.lastIndexOf("/")+1);this.nodes.push({type:"folder",name:s,path:n,mtime:Date.now()}),this.save()}async delete(n){this.nodes=this.nodes.filter(s=>s.path!==n&&!s.path.startsWith(n.endsWith("/")?n:n+"/")),this.save()}async rename(n,s){const a=this.nodes.find(h=>h.path===n);a&&(a.name=s.substring(s.lastIndexOf("/")+1),a.path=s,a.mtime=Date.now()),this.nodes.forEach(h=>{h.path.startsWith(n+"/")&&(h.path=s+h.path.substring(n.length))}),this.save()}async move(n,s){await this.rename(n,s)}async readFile(n){const s=this.nodes.find(a=>a.path===n);return s==null?void 0:s.content}}const NotificationContext=reactExports.createContext(void 0),NotificationProvider=({children:i})=>{const[n,s]=reactExports.useState([]),a=_=>{s(w=>[...w,{..._,id:Math.random().toString(36).slice(2),timestamp:Date.now()}])},h=_=>s(w=>w.filter(l=>l.id!==_));return jsxRuntimeExports.jsx(NotificationContext.Provider,{value:{notifications:n,push:a,remove:h},children:i})},useNotifications=()=>{const i=reactExports.useContext(NotificationContext);if(!i)throw new Error("useNotifications must be used within NotificationProvider");return i},ContextMenu=({x:i,y:n,items:s,onClose:a})=>{const[h,_]=React.useState([{items:s,activeIdx:0}]);React.useEffect(()=>{_([{items:s,activeIdx:0}])},[s]);const w=React.useRef(null);React.useEffect(()=>{var f;(f=w.current)==null||f.focus()},[]),React.useEffect(()=>{var y;const f=p=>{const{items:C,activeIdx:T}=h[h.length-1];if(p.key==="ArrowDown")_(E=>{const x={...E[E.length-1]};return x.activeIdx=(x.activeIdx+1)%x.items.length,[...E.slice(0,-1),x]}),p.preventDefault();else if(p.key==="ArrowUp")_(E=>{const x={...E[E.length-1]};return x.activeIdx=(x.activeIdx-1+x.items.length)%x.items.length,[...E.slice(0,-1),x]}),p.preventDefault();else if(p.key==="Enter"||p.key==="ArrowRight"&&C[T].submenu){const E=C[T];E.submenu?_(x=>[...x,{items:E.submenu,activeIdx:0}]):!E.disabled&&E.onClick&&(E.onClick(),a()),p.preventDefault()}else(p.key==="ArrowLeft"||p.key==="Escape")&&(h.length>1?_(E=>E.slice(0,-1)):a(),p.preventDefault())};return(y=w.current)==null||y.addEventListener("keydown",f),()=>{var p;return(p=w.current)==null?void 0:p.removeEventListener("keydown",f)}},[h,a]),React.useEffect(()=>{const f=()=>a();return window.addEventListener("mousedown",f),()=>window.removeEventListener("mousedown",f)},[a]);const l=React.useRef({}),u=(f,y=0)=>{var T;const p=y===h.length-1,C=((T=h[y])==null?void 0:T.activeIdx)??0;return jsxRuntimeExports.jsx("ul",{className:"list",role:"menu","aria-label":"Context menu",children:f.map((E,x)=>{var d,m;const c=p&&x===C,g=`${y}-${x}`;return jsxRuntimeExports.jsxs("li",{ref:S=>l.current[g]=S,className:`element${E.disabled?" delete":""}${c?" active":""}`,tabIndex:-1,role:"menuitem","aria-disabled":E.disabled,"aria-haspopup":!!E.submenu,"aria-expanded":c&&!!E.submenu,onMouseEnter:()=>{p&&_(S=>{const b=[...S];return b[y]={...b[y],activeIdx:x},b})},onClick:S=>{var b;E.disabled||(E.submenu?(S.stopPropagation(),h.length===y+1?_(P=>[...P,{items:E.submenu,activeIdx:0}]):_(P=>P.slice(0,y+1))):((b=E.onClick)==null||b.call(E),a()))},children:[E.icon&&jsxRuntimeExports.jsx("span",{className:"icon",children:E.icon}),jsxRuntimeExports.jsx("span",{className:"label",children:E.label}),E.shortcut&&jsxRuntimeExports.jsx("span",{className:"shortcut",children:E.shortcut}),E.submenu&&jsxRuntimeExports.jsx("span",{className:"submenu-arrow",children:"▶"}),c&&E.submenu&&jsxRuntimeExports.jsx("div",{className:"submenu",style:{position:"absolute",left:"calc(100% - 4px)",top:0,zIndex:2,minWidth:120,padding:"4px 0",marginTop:0,boxShadow:"0 2px 12px #0003",background:"rgba(36,40,50,0.98)",borderRadius:7,transform:((d=l.current[`${y}-${x}`])==null?void 0:d.offsetTop)!==void 0?`translateY(${(m=l.current[`${y}-${x}`])==null?void 0:m.offsetTop}px)`:void 0},children:u(E.submenu,y+1)})]},x)})})};return jsxRuntimeExports.jsx("div",{className:"card",style:{position:"fixed",top:n,left:i,zIndex:9999},tabIndex:0,ref:w,role:"menu","aria-label":"Context menu",children:u(h[0].items)})},FileExplorer=()=>{const i=React.useRef(),[n,s]=reactExports.useState(!1);reactExports.useEffect(()=>{i.current||(i.current=new FileSystem,i.current.init().then(()=>s(!0)))},[]);const a=i.current,[h,_]=reactExports.useState("/home/user"),[w,l]=reactExports.useState([]),[u,f]=reactExports.useState(null),[y,p]=reactExports.useState(""),[C,T]=reactExports.useState(""),[E,x]=reactExports.useState(0),{push:c}=useNotifications();reactExports.useEffect(()=>{!n||!a||(async()=>{if(!a)return;const ce=await a.list(h);React.startTransition?React.startTransition(()=>l(ce)):l(ce)})()},[h,E,n,a]);const g=()=>x(ce=>ce+1),d=ce=>{ce.type==="folder"?_(ce.path):c({title:`Open file: ${ce.name}`,message:ce.content||"",type:"info"})},[m,S]=reactExports.useState(null),[b,P]=reactExports.useState(null),[L,D]=reactExports.useState(""),N=reactExports.useRef(null);reactExports.useEffect(()=>()=>{N.current&&clearTimeout(N.current)},[]);const[I,U]=reactExports.useState(""),[F,$]=reactExports.useState([]),[H,z]=reactExports.useState({}),[Y,k]=reactExports.useState({}),R=[{id:"dropbox",name:"Dropbox",icon:"📦",sample:[{type:"folder",name:"Photos",path:"/Drives/Dropbox/Photos",children:[],mtime:Date.now()},{type:"file",name:"Resume.pdf",path:"/Drives/Dropbox/Resume.pdf",content:"",mtime:Date.now()}]},{id:"gdrive",name:"Google Drive",icon:"☁️",sample:[{type:"folder",name:"Projects",path:"/Drives/Google Drive/Projects",children:[],mtime:Date.now()},{type:"file",name:"Notes.txt",path:"/Drives/Google Drive/Notes.txt",content:"Cloud note",mtime:Date.now()}]}];reactExports.useEffect(()=>{!n||!a||(async()=>{if(!a)return;const ce=await a.list("/");React.startTransition?React.startTransition(()=>$(ce)):$(ce)})()},[E,n]);const A=async()=>{if(y)try{await a.writeFile(h+"/"+y,""),p(""),g(),c({title:"File created",message:`Created file: ${y}`,type:"success"})}catch{T("Failed to create file."),c({title:"Error",message:`Failed to create file: ${y}`,type:"error"})}},M=async()=>{if(y)try{await a.mkdir(h+"/"+y),p(""),g(),c({title:"Folder created",message:`Created folder: ${y}`,type:"success"})}catch{T("Failed to create folder."),c({title:"Error",message:`Failed to create folder: ${y}`,type:"error"})}},B=async()=>{if(u)try{await a.delete(u),c({title:"Deleted",message:`Deleted: ${u.split("/").pop()}`}),f(null),g()}catch{T("Failed to delete."),c({title:"Error",message:`Failed to delete: ${u.split("/").pop()}`,type:"error"})}},G=()=>{h!=="/"&&_(h.split("/").slice(0,-1).join("/")||"/")},[q,ie]=reactExports.useState(null),[le,_e]=reactExports.useState(null),[V,Z]=reactExports.useState(null),se=(ce,he)=>{ce.preventDefault();let ke=[];he?ke=[{label:"Open",icon:"📂",onClick:()=>d(he)},{label:"Open With...",icon:"🗂️",onClick:()=>{Z({node:he}),te()}},{label:"Open Terminal Here",icon:"⌨️",onClick:()=>{c({title:"Terminal",message:`Terminal opened at ${he.path}`}),te()}},{label:"Cut",icon:"✂️",onClick:()=>{ie({node:he,mode:"cut"}),te()}},{label:"Copy",icon:"📋",onClick:()=>{ie({node:he,mode:"copy"}),te()}},{label:"Paste",icon:"📋",disabled:!0},{label:"Delete",icon:"🗑️",onClick:()=>{B(),te()}},{label:"Rename",icon:"✏️",onClick:()=>{_e(he.path),te()}},{label:"Create Shortcut",icon:"🔗",disabled:!0},{label:"Add File(s)...",icon:"➕",disabled:!0},{label:"Map Directory...",icon:"🗂️",disabled:!0},{label:"Sort By",icon:"↕️",submenu:[{label:"Name",onClick:()=>{}},{label:"Date Modified",onClick:()=>{}},{label:"Type",onClick:()=>{}},{label:"Size",onClick:()=>{}}]}]:ke=[{label:"Paste",icon:"📋",disabled:!q,onClick:async()=>{if(q){try{q.mode==="copy"?q.node.type==="file"?await a.writeFile(h+"/"+q.node.name,q.node.content):await a.mkdir(h+"/"+q.node.name):q.mode==="cut"&&(await a.move(q.node.path,h+"/"+q.node.name),ie(null)),g()}catch{T("Paste failed")}te()}}},{label:"Open Terminal Here",icon:"⌨️",onClick:()=>{c({title:"Terminal",message:`Terminal opened at ${h}`}),te()}},{label:"Sort By",icon:"↕️",submenu:[{label:"Name",onClick:()=>{}},{label:"Date Modified",onClick:()=>{}},{label:"Type",onClick:()=>{}},{label:"Size",onClick:()=>{}}]},{label:"New Folder",icon:"📁",onClick:()=>{M(),te()}},{label:"New Text Document",icon:"📄",onClick:()=>{A(),te()}},{label:"Add File(s)...",icon:"➕",disabled:!0},{label:"Map Directory...",icon:"🗂️",disabled:!0},{label:"Open Terminal Here",icon:"⌨️",disabled:!0}],S({x:ce.clientX,y:ce.clientY,items:ke})},te=()=>S(null);return jsxRuntimeExports.jsxs("div",{className:"file-explorer-root",onContextMenu:ce=>se(ce,void 0),children:[m&&jsxRuntimeExports.jsx(ContextMenu,{x:m.x,y:m.y,items:m.items,onClose:te}),jsxRuntimeExports.jsxs("div",{className:"fe-toolbar-modern",children:[jsxRuntimeExports.jsx("button",{className:"fe-btn",onClick:G,title:"Go up one folder",children:jsxRuntimeExports.jsx("span",{className:"fe-btn-icon",children:"⬆️"})}),jsxRuntimeExports.jsx("input",{className:"fe-path",value:h,onChange:ce=>_(ce.target.value),placeholder:"Current folder"}),jsxRuntimeExports.jsx("button",{className:"fe-btn",onClick:A,title:"Create file",children:jsxRuntimeExports.jsx("span",{className:"fe-btn-icon",children:"📄"})}),jsxRuntimeExports.jsx("button",{className:"fe-btn",onClick:M,title:"Create folder",children:jsxRuntimeExports.jsx("span",{className:"fe-btn-icon",children:"📁"})})]}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",flex:1,minHeight:0},children:[jsxRuntimeExports.jsxs("div",{style:{width:160,background:"rgba(24,28,37,0.93)",borderRight:"1.5px solid var(--primary)",overflowY:"auto"},children:[jsxRuntimeExports.jsx("div",{style:{padding:10,fontWeight:600,color:"#c9e5ff"},children:"Folders"}),F.map(ce=>jsxRuntimeExports.jsx("div",{style:{padding:"7px 14px",cursor:"pointer",color:h===ce.path?"#308aff":"#c9e5ff",fontWeight:h===ce.path?700:400},onClick:()=>_(ce.path),children:ce.name||"/"},ce.path)),jsxRuntimeExports.jsxs("div",{style:{padding:"8px 0 0 0",borderTop:"1px solid #35405a",marginTop:10},children:[jsxRuntimeExports.jsx("div",{style:{padding:"7px 14px",color:"#7ecfff",fontWeight:600},children:"Drives"}),R.map(ce=>jsxRuntimeExports.jsxs("div",{style:{padding:"7px 14px",display:"flex",alignItems:"center",gap:6},children:[jsxRuntimeExports.jsx("span",{style:{fontSize:"1.2em"},children:ce.icon}),jsxRuntimeExports.jsx("span",{style:{flex:1,cursor:"pointer",color:h===`/Drives/${ce.name}`?"#308aff":"#c9e5ff",fontWeight:h===`/Drives/${ce.name}`?700:400},onClick:()=>{H[ce.id]&&_(`/Drives/${ce.name}`)},children:ce.name}),H[ce.id]?jsxRuntimeExports.jsx("span",{style:{color:"#7ecfff",fontSize:12},children:"●"}):jsxRuntimeExports.jsx("button",{className:"fe-btn",style:{fontSize:12,padding:"2px 7px",marginLeft:2},onClick:()=>{z(he=>({...he,[ce.id]:!0})),k(he=>({...he,[ce.name]:ce.sample}))},children:"Connect"})]},ce.id))]})]}),jsxRuntimeExports.jsx("div",{className:"fe-list-modern",style:{flex:1,minWidth:0},onContextMenu:ce=>se(ce,void 0),children:R.some(ce=>h===`/Drives/${ce.name}`&&H[ce.id])?R.map(ce=>h===`/Drives/${ce.name}`&&H[ce.id]?(Y[ce.name]||[]).map(he=>jsxRuntimeExports.jsxs("div",{className:"fe-item-modern"+(u===he.path?" selected":""),tabIndex:0,onClick:()=>f(he.path),draggable:!0,onDragStart:()=>P(he.path),onDragEnd:()=>P(null),onContextMenu:ke=>se(ke,he),children:[jsxRuntimeExports.jsx("span",{className:"fe-icon-modern",children:he.type==="folder"?"📁":"📄"}),jsxRuntimeExports.jsx("span",{className:"fe-name-modern",children:he.name})]},he.path)):null):w.filter(ce=>{if(!L)return!0;const he=L.toLowerCase();return ce.name.toLowerCase().includes(he)}).map(ce=>jsxRuntimeExports.jsxs("div",{className:"fe-item-modern"+(u===ce.path?" selected":""),tabIndex:0,onClick:()=>f(ce.path),onDoubleClick:()=>d(ce),draggable:!0,onDragStart:()=>P(ce.path),onDragEnd:()=>P(null),onDrop:async he=>{if(he.preventDefault(),b&&ce.type==="folder"&&b!==ce.path){const ke=w.find(tt=>tt.path===b);if(!ke)return;const Ie=ce.path+"/"+b.split("/").pop(),He=w.filter(tt=>tt.path!==b).concat([{...ke,path:Ie}]);l(He),P(null);try{await a.move(b,Ie),g()}catch{g(),T("Move failed"),c({title:"Move failed",message:"Could not move item.",type:"error"})}}},onDragOver:he=>he.preventDefault(),children:[jsxRuntimeExports.jsx("span",{className:"fe-icon-modern",children:ce.type==="folder"?"📁":"📄"}),jsxRuntimeExports.jsx("span",{className:"fe-name-modern",children:ce.name})]},ce.path))}),jsxRuntimeExports.jsxs("div",{style:{width:230,background:"rgba(24,28,37,0.96)",borderLeft:"1.5px solid var(--primary)",padding:18,overflowY:"auto"},children:[jsxRuntimeExports.jsx("div",{style:{fontWeight:600,color:"#c9e5ff",marginBottom:10},children:"Preview"}),u?(()=>{const ce=w.find(he=>he.path===u);return ce?ce.type==="file"&&ce.content&&(ce.name.endsWith(".txt")||ce.name.endsWith(".md"))?jsxRuntimeExports.jsx("pre",{style:{color:"#fff",background:"#181c25",borderRadius:6,padding:10,maxWidth:180,maxHeight:120,overflow:"auto"},children:ce.content.slice(0,500)}):jsxRuntimeExports.jsx("span",{style:{color:"#aaa"},children:"No preview available"}):null})():jsxRuntimeExports.jsx("span",{style:{color:"#aaa"},children:"No file selected"})]})]})]})},fs$2=new FileSystem,TextEditor=()=>{const[i,n]=reactExports.useState("/home/user"),[s,a]=reactExports.useState(""),[h,_]=reactExports.useState(""),[w,l]=reactExports.useState(""),[u,f]=reactExports.useState([]);reactExports.useEffect(()=>{(async()=>(await fs$2.init(),f((await fs$2.list(i)).filter(E=>E.type==="file").map(E=>E.name))))()},[i]);const y=async E=>{a(E),_(await fs$2.readFile(`${i}/${E}`)||""),l("")},p=async()=>{s&&(await fs$2.writeFile(`${i}/${s}`,h),l("Saved!"))},C=async()=>{const E=prompt("Enter new file name:");if(E){const x=`${i}/${E}`;try{await fs$2.readFile(x),alert(`File "${E}" already exists.`);return}catch{}try{await fs$2.writeFile(x,""),a(E),_(""),l("New file created."),f((await fs$2.list(i)).filter(c=>c.type==="file").map(c=>c.name))}catch(c){l("Error creating file."),console.error("Error creating file:",c)}}},T=E=>{_(E.target.value),l("")};return jsxRuntimeExports.jsxs("div",{className:"text-editor-root-modern",children:[jsxRuntimeExports.jsxs("div",{className:"te-toolbar-modern",children:[jsxRuntimeExports.jsxs("select",{className:"te-select",value:s,onChange:E=>y(E.target.value),children:[jsxRuntimeExports.jsx("option",{value:"",children:"Open file..."}),u.map(E=>jsxRuntimeExports.jsx("option",{value:E,children:E},E))]}),jsxRuntimeExports.jsx("button",{className:"te-btn",onClick:C,children:"📄 New"}),jsxRuntimeExports.jsx("button",{className:"te-btn",onClick:p,disabled:!s,children:"💾 Save"}),jsxRuntimeExports.jsx("input",{className:"te-path",id:"text-editor-path",name:"editorPath",value:i,onChange:E=>n(E.target.value),placeholder:"Working folder"}),jsxRuntimeExports.jsx("span",{className:"te-status-modern",children:w})]}),jsxRuntimeExports.jsxs("div",{className:"te-editor-area-container",children:[jsxRuntimeExports.jsx("div",{className:"te-line-numbers",children:h.split(`
`).map((E,x)=>jsxRuntimeExports.jsx("div",{children:x+1},x))}),jsxRuntimeExports.jsx("textarea",{className:"te-area-modern",value:h,onChange:T,onScroll:E=>{const x=E.currentTarget.previousElementSibling;x&&(x.scrollTop=E.currentTarget.scrollTop)}})]})]})},fs$1=new FileSystem;function parseCmd(i){const n=/"([^"]*)"|'([^']*)'|([^\s]+)/g,s=[];let a;for(;a=n.exec(i);)s.push(a[1]||a[2]||a[3]);return s}const Terminal=()=>{const[i,n]=reactExports.useState(["NyxOS Shell v0.1","Type `help` for commands."]),[s,a]=reactExports.useState(""),[h,_]=reactExports.useState("/home/user"),w=reactExports.useRef(null);reactExports.useEffect(()=>{var p;(p=w.current)==null||p.focus()},[]);const l=p=>n(C=>[...C,p]),u=()=>`${h} $ `,f=async p=>{var E;if(!p.trim())return;l(u()+p);const[C,...T]=parseCmd(p);try{switch(C){case"help":l("Commands: ls, cd, cat, echo, touch, mkdir, rm, clear, pwd, edit, save, exit, js"),l("Use `js <code>` to run JavaScript.");break;case"ls":{const x=await fs$1.list(h);l(x.map(c=>c.name+(c.type==="folder"?"/":"")).join("  "));break}case"cd":{if(!T[0]){l("Usage: cd <dir>");break}let x=T[0];x.startsWith("/")||(x=h+"/"+x),await fs$1.exists(x)&&((E=await fs$1.stat(x))==null?void 0:E.type)==="folder"?_(x):l("No such directory: "+T[0]);break}case"pwd":l(h);break;case"cat":{if(!T[0]){l("Usage: cat <file>");break}let x=T[0];x.startsWith("/")||(x=h+"/"+x),await fs$1.exists(x)?l(await fs$1.readFile(x)||""):l("No such file: "+T[0]);break}case"echo":l(T.join(" "));break;case"touch":{if(!T[0]){l("Usage: touch <file>");break}let x=T[0];x.startsWith("/")||(x=h+"/"+x),await fs$1.writeFile(x,""),l("Created "+x);break}case"mkdir":{if(!T[0]){l("Usage: mkdir <dir>");break}let x=T[0];x.startsWith("/")||(x=h+"/"+x),await fs$1.mkdir(x),l("Created "+x);break}case"rm":{if(!T[0]){l("Usage: rm <file/dir>");break}let x=T[0];x.startsWith("/")||(x=h+"/"+x),await fs$1.delete(x),l("Deleted "+x);break}case"edit":{if(!T[0]){l("Usage: edit <file>");break}let x=T[0];x.startsWith("/")||(x=h+"/"+x);let c=await fs$1.readFile(x)||"";l("--- Editing (type and then `save` to write) ---"),l(c);break}case"save":l("Use the Text Editor app to save files.");break;case"clear":n([]);break;case"exit":l("exit (not implemented)");break;case"js":{if(!T.length){l("Usage: js <JavaScript code>");break}try{const x=Function(`"use strict";return (${T.join(" ")})`)();l("Result: "+String(x))}catch(x){l("JS Error: "+x.message)}break}default:l("Unknown command: "+C)}}catch(x){l("Error: "+x.message)}},y=p=>{p.preventDefault(),f(s),a("")};return jsxRuntimeExports.jsx("div",{className:"terminal-root",onClick:()=>{var p;return(p=w.current)==null?void 0:p.focus()},children:jsxRuntimeExports.jsxs("div",{className:"term-lines",children:[i.map((p,C)=>jsxRuntimeExports.jsx("div",{className:"term-line",children:p},C)),jsxRuntimeExports.jsxs("form",{onSubmit:y,className:"term-form",children:[jsxRuntimeExports.jsx("span",{className:"term-prompt",children:u()}),jsxRuntimeExports.jsx("input",{ref:w,className:"term-input",value:s,onChange:p=>a(p.target.value),autoFocus:!0,spellCheck:!1,autoComplete:"off"})]})]})})},__vite_glob_0_0="/INyxOS/assets/IntelOneMono-Light-CsBqrZZR.otf",__vite_glob_0_1="/INyxOS/assets/IntelOneMono-Regular-BgDt8-1s.otf",__vite_glob_0_2="/INyxOS/assets/JetBrainsMonoNL-Light-DE-U1lSH.ttf",__vite_glob_0_3="/INyxOS/assets/JetBrainsMonoNL-Regular-uIWl5vC6.ttf",__vite_glob_0_4="/INyxOS/assets/SFMonoLight-CaMC1gg-.otf",__vite_glob_0_5="/INyxOS/assets/SFMonoRegular-77Uh1IPk.otf",warn=(i,n,s,a)=>{var _,w,l,u;const h=[s,{code:n,...a||{}}];if((w=(_=i==null?void 0:i.services)==null?void 0:_.logger)!=null&&w.forward)return i.services.logger.forward(h,"warn","react-i18next::",!0);isString$1(h[0])&&(h[0]=`react-i18next:: ${h[0]}`),(u=(l=i==null?void 0:i.services)==null?void 0:l.logger)!=null&&u.warn?i.services.logger.warn(...h):console!=null&&console.warn&&console.warn(...h)},alreadyWarned={},warnOnce=(i,n,s,a)=>{isString$1(s)&&alreadyWarned[s]||(isString$1(s)&&(alreadyWarned[s]=new Date),warn(i,n,s,a))},loadedClb=(i,n)=>()=>{if(i.isInitialized)n();else{const s=()=>{setTimeout(()=>{i.off("initialized",s)},0),n()};i.on("initialized",s)}},loadNamespaces=(i,n,s)=>{i.loadNamespaces(n,loadedClb(i,s))},loadLanguages=(i,n,s,a)=>{if(isString$1(s)&&(s=[s]),i.options.preload&&i.options.preload.indexOf(n)>-1)return loadNamespaces(i,s,a);s.forEach(h=>{i.options.ns.indexOf(h)<0&&i.options.ns.push(h)}),i.loadLanguages(n,loadedClb(i,a))},hasLoadedNamespace=(i,n,s={})=>!n.languages||!n.languages.length?(warnOnce(n,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:n.languages}),!0):n.hasLoadedNamespace(i,{lng:s.lng,precheck:(a,h)=>{var _;if(((_=s.bindI18n)==null?void 0:_.indexOf("languageChanging"))>-1&&a.services.backendConnector.backend&&a.isLanguageChangingTo&&!h(a.isLanguageChangingTo,i))return!1}}),isString$1=i=>typeof i=="string",isObject=i=>typeof i=="object"&&i!==null,matchHtmlEntity=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,htmlEntities={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"©","&#169;":"©","&reg;":"®","&#174;":"®","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},unescapeHtmlEntity=i=>htmlEntities[i],unescape=i=>i.replace(matchHtmlEntity,unescapeHtmlEntity);let defaultOptions={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape};const setDefaults=(i={})=>{defaultOptions={...defaultOptions,...i}},getDefaults=()=>defaultOptions;let i18nInstance;const setI18n=i=>{i18nInstance=i},getI18n=()=>i18nInstance,initReactI18next={type:"3rdParty",init(i){setDefaults(i.options.react),setI18n(i)}},I18nContext=reactExports.createContext();class ReportNamespaces{constructor(){this.usedNamespaces={}}addUsedNamespaces(n){n.forEach(s=>{this.usedNamespaces[s]||(this.usedNamespaces[s]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const usePrevious=(i,n)=>{const s=reactExports.useRef();return reactExports.useEffect(()=>{s.current=i},[i,n]),s.current},alwaysNewT=(i,n,s,a)=>i.getFixedT(n,s,a),useMemoizedT=(i,n,s,a)=>reactExports.useCallback(alwaysNewT(i,n,s,a),[i,n,s,a]),useTranslation=(i,n={})=>{var S,b,P,L;const{i18n:s}=n,{i18n:a,defaultNS:h}=reactExports.useContext(I18nContext)||{},_=s||a||getI18n();if(_&&!_.reportNamespaces&&(_.reportNamespaces=new ReportNamespaces),!_){warnOnce(_,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const D=(I,U)=>isString$1(U)?U:isObject(U)&&isString$1(U.defaultValue)?U.defaultValue:Array.isArray(I)?I[I.length-1]:I,N=[D,{},!1];return N.t=D,N.i18n={},N.ready=!1,N}(S=_.options.react)!=null&&S.wait&&warnOnce(_,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const w={...getDefaults(),..._.options.react,...n},{useSuspense:l,keyPrefix:u}=w;let f=h||((b=_.options)==null?void 0:b.defaultNS);f=isString$1(f)?[f]:f||["translation"],(L=(P=_.reportNamespaces).addUsedNamespaces)==null||L.call(P,f);const y=(_.isInitialized||_.initializedStoreOnce)&&f.every(D=>hasLoadedNamespace(D,_,w)),p=useMemoizedT(_,n.lng||null,w.nsMode==="fallback"?f:f[0],u),C=()=>p,T=()=>alwaysNewT(_,n.lng||null,w.nsMode==="fallback"?f:f[0],u),[E,x]=reactExports.useState(C);let c=f.join();n.lng&&(c=`${n.lng}${c}`);const g=usePrevious(c),d=reactExports.useRef(!0);reactExports.useEffect(()=>{const{bindI18n:D,bindI18nStore:N}=w;d.current=!0,!y&&!l&&(n.lng?loadLanguages(_,n.lng,f,()=>{d.current&&x(T)}):loadNamespaces(_,f,()=>{d.current&&x(T)})),y&&g&&g!==c&&d.current&&x(T);const I=()=>{d.current&&x(T)};return D&&(_==null||_.on(D,I)),N&&(_==null||_.store.on(N,I)),()=>{d.current=!1,_&&(D==null||D.split(" ").forEach(U=>_.off(U,I))),N&&_&&N.split(" ").forEach(U=>_.store.off(U,I))}},[_,c]),reactExports.useEffect(()=>{d.current&&y&&x(C)},[_,u,y]);const m=[E,_,y];if(m.t=E,m.i18n=_,m.ready=y,y||!y&&!l)return m;throw new Promise(D=>{n.lng?loadLanguages(_,n.lng,f,()=>D()):loadNamespaces(_,f,()=>D())})},FontDropdown=({value:i,options:n,onChange:s,className:a})=>{const[h,_]=reactExports.useState(!1),w=reactExports.useRef(null);reactExports.useEffect(()=>{const u=f=>{w.current&&!w.current.contains(f.target)&&_(!1)};return document.addEventListener("mousedown",u),()=>document.removeEventListener("mousedown",u)},[]);const l=n.find(u=>u.value===i);return jsxRuntimeExports.jsxs("div",{className:`font-dropdown${h?" open":""}${a?" "+a:""}`,ref:w,children:[jsxRuntimeExports.jsxs("button",{className:"font-dropdown-toggle",onClick:()=>_(u=>!u),type:"button","aria-haspopup":"listbox","aria-expanded":h,children:[l?l.label:"Select...",jsxRuntimeExports.jsx("span",{className:"font-dropdown-arrow",children:"▼"})]}),h&&jsxRuntimeExports.jsx("ul",{className:"font-dropdown-list",role:"listbox",children:n.map(u=>jsxRuntimeExports.jsx("li",{className:u.value===i?"selected":"",onClick:()=>{s(u.value),_(!1)},role:"option","aria-selected":u.value===i,children:u.label},u.value))})]})},STOCKS=[{name:"Apple",symbol:"AAPL",price:"207.66",change:"+1.50%"},{name:"Tesla",symbol:"TSLA",price:"255.81",change:"+2.02%"},{name:"Nvidia",symbol:"NVDA",price:"105.82",change:"+3.02%"}],NEWS=[{title:"Constance Marten tells retrial: We did everything we could to protect baby",source:"BBC News"},{title:"Reform UK criticised for candidates’ offensive posts",source:"BBC News"},{title:"UK edges towards post-Brexit youth visa deal with EU",source:"BBC News"}],LockScreenCompactWidgets=()=>jsxRuntimeExports.jsxs("div",{className:"lock-compact-widget-bar",children:[jsxRuntimeExports.jsx("div",{className:"lock-compact-widget lock-compact-stocks",children:STOCKS.slice(0,3).map(i=>jsxRuntimeExports.jsxs("div",{className:"lock-stock-row",children:[jsxRuntimeExports.jsx("span",{className:"lock-stock-name",children:i.name}),jsxRuntimeExports.jsx("span",{className:"lock-stock-price",children:i.price}),jsxRuntimeExports.jsx("span",{className:"lock-stock-change",children:i.change})]},i.symbol))}),jsxRuntimeExports.jsx("div",{className:"lock-compact-widget lock-compact-news",children:NEWS.slice(0,3).map((i,n)=>jsxRuntimeExports.jsxs("div",{className:"lock-news-row",children:[jsxRuntimeExports.jsx("span",{className:"lock-news-title",children:i.title}),jsxRuntimeExports.jsx("span",{className:"lock-news-source",children:i.source})]},n))})]}),LockScreen=({show:i,onUnlock:n,wallpaperUrl:s,showNotifications:a,showMedia:h})=>{const[_,w]=React.useState(""),[l,u]=React.useState(""),f=new Date;return i?jsxRuntimeExports.jsxs("div",{className:"lock-screen-root",children:[jsxRuntimeExports.jsx("div",{className:"lock-screen-bg",style:{position:"absolute",inset:0,zIndex:0,background:s?`url(${s}) center/cover no-repeat`:"#181c25",opacity:1,filter:"blur(18px) saturate(1.12)",transition:"background 0.5s"}}),jsxRuntimeExports.jsxs("div",{style:{position:"relative",zIndex:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minWidth:360,minHeight:260,padding:"42px 32px",borderRadius:24,background:"rgba(30,24,48,0.49)",boxShadow:"0 8px 36px 0 rgba(24,28,37,0.13)",backdropFilter:"blur(18px) saturate(1.12)",WebkitBackdropFilter:"blur(18px) saturate(1.12)",border:"1.5px solid rgba(80,100,120,0.10)",textAlign:"center"},children:[jsxRuntimeExports.jsx("div",{style:{fontSize:44,fontWeight:700,marginBottom:10,color:"#fff"},children:f.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),jsxRuntimeExports.jsx("div",{style:{fontSize:20,marginBottom:24,color:"#eaeaff",fontWeight:600},children:f.toLocaleDateString([],{weekday:"long",day:"numeric",month:"long",year:"numeric"})}),jsxRuntimeExports.jsxs("form",{onSubmit:y=>{y.preventDefault(),!_||_==="unlock"?(n(),w(""),u("")):u("Incorrect password")},style:{display:"flex",flexDirection:"column",alignItems:"center",gap:12,width:"100%"},children:[jsxRuntimeExports.jsx("input",{type:"password",id:"lock-screen-password",name:"lockPassword",placeholder:"Enter password (default: un)",value:_,onChange:y=>w(y.target.value),style:{fontSize:16,padding:"8px 18px",borderRadius:8,border:"none",outline:"none",background:"#232a39cc",color:"#fff",marginBottom:6,width:"88%",maxWidth:260,textAlign:"center",boxShadow:"0 2px 10px 0 #0002"}}),jsxRuntimeExports.jsx("button",{type:"submit",style:{fontSize:16,padding:"7px 28px",borderRadius:8,background:"#308aff",color:"#fff",border:"none",fontWeight:700,cursor:"pointer",boxShadow:"0 2px 10px 0 #308aff33",transition:"background 0.18s"},children:"Unlock"}),l&&jsxRuntimeExports.jsx("div",{style:{color:"#ff5252",fontWeight:600},children:l})]})]}),jsxRuntimeExports.jsx(LockScreenCompactWidgets,{})]}):null},fs=new FileSystem,themes=[{name:"default",label:"Default",accent:"#308aff",background:"#181c25"},{name:"light",label:"Light",accent:"#4fc3f7",background:"#f8f9fa"},{name:"dark",label:"Dark",accent:"#232a39",background:"#11131a"}],DEFAULT_MODEL_ID$1="meta-llama/llama-4-maverick:free",customFontModules=Object.assign({"../../assets/fonts/IntelOneMono-Light.otf":__vite_glob_0_0,"../../assets/fonts/IntelOneMono-Regular.otf":__vite_glob_0_1,"../../assets/fonts/JetBrainsMonoNL-Light.ttf":__vite_glob_0_2,"../../assets/fonts/JetBrainsMonoNL-Regular.ttf":__vite_glob_0_3,"../../assets/fonts/SFMonoLight.otf":__vite_glob_0_4,"../../assets/fonts/SFMonoRegular.otf":__vite_glob_0_5}),customFonts=Object.entries(customFontModules).map(([i,n])=>{var a;return{name:((a=i.split("/").pop())==null?void 0:a.replace(/\.(ttf|otf)$/,""))||"",url:n}}),Settings=()=>{const{t:i,i18n:n}=useTranslation(),[s,a]=reactExports.useState("default"),[h,_]=reactExports.useState(localStorage.getItem("nyxos_accent")||""),[w,l]=reactExports.useState(!1),[u,f]=reactExports.useState(!1),{push:y}=useNotifications(),[p,C]=reactExports.useState(!1);reactExports.useEffect(()=>{(async()=>{await fs.init();const Ee=(await fs.readFile("/config/theme.ini")||"").match(/name=(\w+)/);Ee&&a(Ee[1]),l(localStorage.getItem("nyxos_high_contrast")==="1"),f(localStorage.getItem("nyxos_screen_reader")==="1");const ee=localStorage.getItem("nyxos_accent");ee&&_(ee)})()},[]);const T=async me=>{await fs.writeFile("/config/theme.ini",`[theme]
name=${me}
`),a(me);const Ee=themes.find(ee=>ee.name===me);Ee&&(document.documentElement.style.setProperty("--primary",Ee.accent),document.documentElement.style.setProperty("--background",Ee.background),h||document.documentElement.style.setProperty("--accent",Ee.accent),y({title:"Theme",message:`Theme set to ${Ee.label}`,type:"success"}))},E=()=>{const me=!w;l(me),localStorage.setItem("nyxos_high_contrast",me?"1":"0"),document.documentElement.classList.toggle("high-contrast",me)},x=()=>{const me=!u;f(me),localStorage.setItem("nyxos_screen_reader",me?"1":"0"),y({title:"Accessibility",message:me?"Screen reader enabled":"Screen reader disabled",type:me?"success":"info"})},[c,g]=reactExports.useState(localStorage.getItem("nyxos_autoupdate")!=="0"),[d,m]=reactExports.useState(localStorage.getItem("nyxos_location")==="1"),[S,b]=reactExports.useState(localStorage.getItem("nyxos_telemetry")!=="0"),[P,L]=reactExports.useState(localStorage.getItem("nyxos_animations")==="1"),[D,N]=reactExports.useState(localStorage.getItem("nyxos_sounds")==="1"),[I,U]=reactExports.useState(localStorage.getItem("nyxos_night_light")==="1"),[F,$]=reactExports.useState(localStorage.getItem("nyxos_dnd")==="1"),[H,z]=reactExports.useState([]),[Y,k]=reactExports.useState(localStorage.getItem("nexa_model")||DEFAULT_MODEL_ID$1),[R,A]=reactExports.useState("idle"),[M,B]=reactExports.useState(""),[G,q]=reactExports.useState(Number(localStorage.getItem("nexa_gpu_workers")||"1")),[ie,le]=reactExports.useState(()=>JSON.parse(localStorage.getItem("nexa_usage")||JSON.stringify({totalCalls:0,totalTokens:0,lastLatency:0,costEstimate:0})));reactExports.useEffect(()=>{localStorage.setItem("nexa_gpu_workers",G.toString())},[G]),reactExports.useEffect(()=>{localStorage.setItem("nexa_usage",JSON.stringify(ie))},[ie]),reactExports.useEffect(()=>{z(["meta-llama/Llama-4-Scout-17B-16E-Instruct","gemini-1.5-pro"])},[]),reactExports.useEffect(()=>{if(!Y)return;A("testing");const me="What model are you?";Y.startsWith("meta-llama")?fetch(`https://api-inference.huggingface.co/models/${Y}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("nexa_hf_token")||""}`},body:JSON.stringify({inputs:me})}).then(Ee=>Ee.json()).then(Ee=>{var re;let ee=Array.isArray(Ee)&&((re=Ee[0])!=null&&re.generated_text)?Ee[0].generated_text:typeof Ee=="object"&&Ee.generated_text?Ee.generated_text:JSON.stringify(Ee);B(ee),A("success")}).catch(Ee=>{B(Ee.message||"Error"),A("error")}):Y.startsWith("gemini")&&fetch(`https://generativelanguage.googleapis.com/v1beta/models/${Y}:generateContent?key=${localStorage.getItem("nexa_gemini_key")||""}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:me}]}]})}).then(Ee=>Ee.json()).then(Ee=>{var re,ue,xe,be,De;let ee=((De=(be=(xe=(ue=(re=Ee.candidates)==null?void 0:re[0])==null?void 0:ue.content)==null?void 0:xe.parts)==null?void 0:be[0])==null?void 0:De.text)||JSON.stringify(Ee);B(ee),A("success")}).catch(Ee=>{B(Ee.message||"Error"),A("error")})},[Y]);const[_e,V]=reactExports.useState(localStorage.getItem("nyxos_font_family")||"system-ui"),[Z,se]=reactExports.useState(Number(localStorage.getItem("nyxos_font_size")||"14")),[te,ce]=reactExports.useState(Number(localStorage.getItem("nyxos_cursor_accel"))||1),[he,ke]=reactExports.useState(localStorage.getItem("nyxos_touch_swipe")==="1"),[Ie,He]=reactExports.useState(localStorage.getItem("nyxos_touch_pinch")==="1"),[tt,Ae]=reactExports.useState(localStorage.getItem("nyxos_vsync")!=="0"),[bt,It]=reactExports.useState(localStorage.getItem("nyxos_window_magnifier")==="1"),[xt,gt]=reactExports.useState(localStorage.getItem("nyxos_color_blind")==="1"),[kt,Ze]=reactExports.useState(localStorage.getItem("nyxos_reduce_motion")==="1"),Tt=[{code:"en",label:"English",flag:"🇬🇧"},{code:"es",label:"Español",flag:"🇪🇸"},{code:"fr",label:"Français",flag:"🇫🇷"},{code:"de",label:"Deutsch",flag:"🇩🇪"},{code:"uk",label:"Українська",flag:"🇺🇦"}],[Ye,jt]=reactExports.useState(localStorage.getItem("nyxos_language")||"en"),[Nt,it]=reactExports.useState(localStorage.getItem("nyxos_keymap")||"qwerty"),[Dt,rt]=reactExports.useState(localStorage.getItem("nyxos_date_format")||"MM/DD/YYYY"),[Qe,Ne]=reactExports.useState(localStorage.getItem("nyxos_time_zone")||Intl.DateTimeFormat().resolvedOptions().timeZone);reactExports.useEffect(()=>{n.changeLanguage(Ye),document.documentElement.lang=Ye,localStorage.setItem("nyxos_language",Ye)},[Ye,n]),reactExports.useEffect(()=>{localStorage.setItem("nyxos_date_format",Dt)},[Dt]),reactExports.useEffect(()=>{localStorage.setItem("nyxos_time_zone",Qe)},[Qe]);const[Ge,Pt]=reactExports.useState("appearance");return jsxRuntimeExports.jsx("div",{className:"settings-overlay",children:jsxRuntimeExports.jsxs("div",{className:"settings-modal",children:[jsxRuntimeExports.jsxs("div",{className:"settings-header",children:[jsxRuntimeExports.jsx("h2",{children:i("settings.title")}),jsxRuntimeExports.jsx("button",{className:"settings-close",onClick:()=>window.dispatchEvent(new CustomEvent("os-close-app",{detail:"settings"})),children:jsxRuntimeExports.jsx("svg",{width:"100%",height:"100%",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:jsxRuntimeExports.jsx("path",{d:"M18 6L6 18M6 6L18 18",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})})})]}),jsxRuntimeExports.jsxs("div",{className:"settings-layout",children:[jsxRuntimeExports.jsx("aside",{className:"settings-sidebar",children:jsxRuntimeExports.jsxs("ul",{children:[jsxRuntimeExports.jsx("li",{className:Ge==="appearance"?"active":"",onClick:()=>Pt("appearance"),children:i("settings.tabs.appearance")}),jsxRuntimeExports.jsx("li",{className:Ge==="accessibility"?"active":"",onClick:()=>Pt("accessibility"),children:i("settings.tabs.accessibility")}),jsxRuntimeExports.jsx("li",{className:Ge==="privacy"?"active":"",onClick:()=>Pt("privacy"),children:i("settings.tabs.privacy")}),jsxRuntimeExports.jsx("li",{className:Ge==="updates"?"active":"",onClick:()=>Pt("updates"),children:i("settings.tabs.updates")}),jsxRuntimeExports.jsx("li",{className:Ge==="nexa"?"active":"",onClick:()=>Pt("nexa"),children:i("settings.tabs.nexa")}),jsxRuntimeExports.jsx("li",{className:Ge==="language"?"active":"",onClick:()=>Pt("language"),children:i("settings.tabs.language")}),jsxRuntimeExports.jsx("li",{className:Ge==="about"?"active":"",onClick:()=>Pt("about"),children:i("settings.tabs.about")})]})}),jsxRuntimeExports.jsxs("main",{className:"settings-content",children:[Ge==="appearance"&&jsxRuntimeExports.jsxs("section",{className:"section",children:[jsxRuntimeExports.jsx("h3",{children:i("settings.tabs.appearance")}),themes.map(me=>jsxRuntimeExports.jsxs("label",{children:[jsxRuntimeExports.jsx("input",{type:"radio",name:"theme",value:me.name,checked:s===me.name,onChange:()=>T(me.name)}),me.label]},me.name)),jsxRuntimeExports.jsxs("div",{className:"font-settings",children:[jsxRuntimeExports.jsxs("label",{children:[i("settings.appearance.fontFamily"),jsxRuntimeExports.jsx(FontDropdown,{value:_e,options:[{value:"system-ui",label:i("settings.appearance.systemUi")},{value:"Arial",label:"Arial"},{value:"Roboto",label:"Roboto"},{value:"Custom",label:i("settings.appearance.custom")},...customFonts.map(me=>({value:me.name,label:me.name}))],onChange:me=>{V(me),localStorage.setItem("nyxos_font_family",me);const Ee=customFonts.find(ee=>ee.name===me);if(Ee){let ee=document.getElementById(`font-face-${me}`);ee||(ee=document.createElement("style"),ee.id=`font-face-${me}`),ee.innerHTML=`@font-face { font-family: '${me}'; src: url('${Ee.url}'); font-display: swap; }`,document.head.appendChild(ee),document.documentElement.style.setProperty("--font-family",`'${me}'`)}else document.documentElement.style.setProperty("--font-family",me)}})]}),jsxRuntimeExports.jsxs("label",{children:[i("settings.appearance.fontSize"),jsxRuntimeExports.jsx(FontDropdown,{value:Z.toString(),options:[12,14,16,18,20,24,28,32].map(me=>({value:me.toString(),label:`${me}px`})),onChange:me=>{const Ee=Number(me);se(Ee),localStorage.setItem("nyxos_font_size",Ee.toString()),document.documentElement.style.setProperty("--font-size",`${Ee}px`)}})]}),jsxRuntimeExports.jsx("p",{children:i("settings.appearance.customFontsInfo")})]}),jsxRuntimeExports.jsx("div",{className:"cursor-settings",children:jsxRuntimeExports.jsxs("label",{children:[i("settings.appearance.cursorAcceleration"),": ",jsxRuntimeExports.jsx("input",{type:"range",min:"0.1",max:"5",step:"0.1",value:te,onChange:me=>{const Ee=Number(me.target.value);ce(Ee),localStorage.setItem("nyxos_cursor_accel",Ee.toString())}})]})}),jsxRuntimeExports.jsxs("div",{className:"touch-settings",children:[jsxRuntimeExports.jsxs("label",{children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:he,onChange:me=>{const Ee=me.target.checked;ke(Ee),localStorage.setItem("nyxos_touch_swipe",Ee?"1":"0")}})," ",i("settings.appearance.touchSwipe")]}),jsxRuntimeExports.jsxs("label",{children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:Ie,onChange:me=>{const Ee=me.target.checked;He(Ee),localStorage.setItem("nyxos_touch_pinch",Ee?"1":"0")}})," ",i("settings.appearance.touchPinch")]})]}),jsxRuntimeExports.jsxs("label",{children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:tt,onChange:me=>{const Ee=me.target.checked;Ae(Ee),localStorage.setItem("nyxos_vsync",Ee?"1":"0")}})," ",i("settings.appearance.vsync")]})]}),Ge==="accessibility"&&jsxRuntimeExports.jsxs("section",{className:"section",children:[jsxRuntimeExports.jsx("h3",{children:i("settings.tabs.accessibility")}),jsxRuntimeExports.jsxs("label",{children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:w,onChange:E})," ",i("settings.accessibility.highContrast")]}),jsxRuntimeExports.jsxs("label",{children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:u,onChange:x})," ",i("settings.accessibility.screenReader")]}),jsxRuntimeExports.jsxs("label",{children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:bt,onChange:me=>{const Ee=me.target.checked;It(Ee),localStorage.setItem("nyxos_window_magnifier",Ee?"1":"0")}})," ",i("settings.accessibility.windowMagnifier")]}),jsxRuntimeExports.jsxs("label",{children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:xt,onChange:me=>{const Ee=me.target.checked;gt(Ee),localStorage.setItem("nyxos_color_blind",Ee?"1":"0"),document.documentElement.classList.toggle("color-blind",Ee)}})," ",i("settings.accessibility.colorBlind")]}),jsxRuntimeExports.jsxs("label",{children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:kt,onChange:me=>{const Ee=me.target.checked;Ze(Ee),localStorage.setItem("nyxos_reduce_motion",Ee?"1":"0"),document.documentElement.classList.toggle("reduce-motion",Ee)}})," ",i("settings.accessibility.reduceMotion")]})]}),Ge==="privacy"&&jsxRuntimeExports.jsxs("section",{className:"section",children:[jsxRuntimeExports.jsx("h3",{children:i("settings.tabs.privacy")}),jsxRuntimeExports.jsxs("label",{children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:d,onChange:()=>{m(!d),localStorage.setItem("nyxos_location",d?"0":"1")}})," ",i("settings.privacy.location")]}),jsxRuntimeExports.jsxs("label",{children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:S,onChange:()=>{b(!S),localStorage.setItem("nyxos_telemetry",S?"0":"1")}})," ",i("settings.privacy.telemetry")]}),jsxRuntimeExports.jsxs("label",{children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:P,onChange:()=>{const me=!P;L(me),localStorage.setItem("nyxos_animations",me?"1":"0")}})," ",i("settings.privacy.animations")]}),jsxRuntimeExports.jsxs("label",{children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:D,onChange:()=>{const me=!D;N(me),localStorage.setItem("nyxos_sounds",me?"1":"0")}})," ",i("settings.privacy.sounds")]}),jsxRuntimeExports.jsxs("label",{children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:I,onChange:()=>{const me=!I;U(me),localStorage.setItem("nyxos_night_light",me?"1":"0"),document.documentElement.classList.toggle("night-light",me)}})," ",i("settings.privacy.nightLight")]}),jsxRuntimeExports.jsxs("label",{children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:F,onChange:()=>{const me=!F;$(me),localStorage.setItem("nyxos_dnd",me?"1":"0"),y({title:"Notifications",message:me?"Do Not Disturb enabled":"Do Not Disturb disabled",type:"info"})}})," ",i("settings.privacy.dnd")]})]}),Ge==="updates"&&jsxRuntimeExports.jsxs("section",{className:"section",children:[jsxRuntimeExports.jsx("h3",{children:i("settings.tabs.updates")}),jsxRuntimeExports.jsxs("label",{children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:c,onChange:()=>{g(!c),localStorage.setItem("nyxos_autoupdate",c?"0":"1")}})," ",i("settings.updates.autoUpdate")]}),jsxRuntimeExports.jsx("button",{onClick:()=>y({title:"Updater",message:"Checking for updates...",type:"info"}),children:i("settings.updates.checkNow")})]}),Ge==="nexa"&&jsxRuntimeExports.jsxs("section",{className:"section",children:[jsxRuntimeExports.jsx("h3",{children:i("settings.tabs.nexa")}),jsxRuntimeExports.jsxs("div",{className:"section-item",children:[jsxRuntimeExports.jsx(FontDropdown,{value:Y,options:[{value:"",label:i("settings.nexa.selectModel")},{value:"meta-llama/Llama-4-Scout-17B-16E-Instruct",label:"Llama 4 Scout 17B (Default, Hugging Face)"},...H.map(me=>({value:me,label:me}))],onChange:me=>{me?(k(me),localStorage.setItem("nexa_model",me)):(k("meta-llama/Llama-4-Scout-17B-16E-Instruct"),localStorage.setItem("nexa_model","meta-llama/Llama-4-Scout-17B-16E-Instruct"),localStorage.setItem("nexa_model",DEFAULT_MODEL_ID$1))}}),R==="testing"&&jsxRuntimeExports.jsx("p",{className:"small",children:i("settings.nexa.testingModel")}),R==="success"&&jsxRuntimeExports.jsxs("p",{className:"small",children:[i("settings.nexa.testSuccessful")," ",M]}),R==="error"&&jsxRuntimeExports.jsxs("p",{className:"small",children:[i("settings.nexa.testFailed")," ",M]}),jsxRuntimeExports.jsxs("p",{children:[i("settings.nexa.currentModel")," ",Y]})]}),jsxRuntimeExports.jsxs("div",{className:"section-item",children:[jsxRuntimeExports.jsx("h4",{children:i("settings.nexa.gpuWorkers")}),jsxRuntimeExports.jsx("input",{type:"range",min:1,max:8,value:G,onChange:me=>q(Number(me.target.value))})," ",jsxRuntimeExports.jsx("span",{children:G})]}),jsxRuntimeExports.jsxs("div",{className:"usage-dashboard",children:[jsxRuntimeExports.jsx("h4",{children:i("settings.nexa.usageDashboard")}),jsxRuntimeExports.jsxs("p",{children:[i("settings.nexa.totalCalls")," ",ie.totalCalls]}),jsxRuntimeExports.jsxs("p",{children:[i("settings.nexa.totalTokens")," ",ie.totalTokens]}),jsxRuntimeExports.jsxs("p",{children:[i("settings.nexa.lastLatency")," ",ie.lastLatency," ms"]}),jsxRuntimeExports.jsxs("p",{children:[i("settings.nexa.estimatedCost")," $",ie.costEstimate.toFixed(4)]})]})]}),Ge==="language"&&jsxRuntimeExports.jsxs("section",{className:"section",children:[jsxRuntimeExports.jsx("h3",{children:i("settings.tabs.language")}),jsxRuntimeExports.jsxs("label",{children:[i("settings.language.language"),":",jsxRuntimeExports.jsx(FontDropdown,{className:"font-dropdown",value:Ye,options:Tt.map(me=>({value:me.code,label:me.code==="en"?me.label:`${me.flag} ${me.label}`})),onChange:jt})]}),jsxRuntimeExports.jsxs("label",{children:[i("settings.language.keymap"),":",jsxRuntimeExports.jsx(FontDropdown,{className:"font-dropdown",value:Nt,options:[{value:"qwerty",label:i("settings.language.qwerty")},{value:"colemak",label:i("settings.language.colemak")},{value:"dvorak",label:i("settings.language.dvorak")}],onChange:me=>{it(me),localStorage.setItem("nyxos_keymap",me)}})]}),jsxRuntimeExports.jsxs("label",{children:[i("settings.language.dateFormat"),":",jsxRuntimeExports.jsx(FontDropdown,{className:"font-dropdown",value:Dt,options:[{value:"MM/DD/YYYY",label:i("settings.language.mmddyyyy")},{value:"DD/MM/YYYY",label:i("settings.language.ddmmyyyy")},{value:"YYYY-MM-DD",label:i("settings.language.yyyymmdd")}],onChange:me=>{rt(me),localStorage.setItem("nyxos_date_format",me)}})]}),jsxRuntimeExports.jsxs("label",{children:[i("settings.language.timeZone"),":",jsxRuntimeExports.jsx(FontDropdown,{className:"font-dropdown",value:Qe,options:Intl.supportedValuesOf?Intl.supportedValuesOf("timeZone").map(me=>({value:me,label:me})):[{value:Qe,label:Qe}],onChange:me=>{Ne(me),localStorage.setItem("nyxos_time_zone",me)}})]})]}),Ge==="about"&&jsxRuntimeExports.jsxs("section",{className:"section about-section",children:[jsxRuntimeExports.jsx("div",{className:"about-neofetch",children:jsxRuntimeExports.jsx("pre",{className:"neofetch",children:`
   /  /   / / / ____ /_/    _
NyxOS 1.0.0
CPU: ${navigator.hardwareConcurrency} cores
Resolution: ${window.screen.width}x${window.screen.height}
Browser: ${navigator.userAgent}
`})}),jsxRuntimeExports.jsx("p",{className:"about-text",children:i("settings.about.text")})]}),jsxRuntimeExports.jsx(LockScreen,{show:p,onUnlock:()=>C(!1)})]})]})]})})},NyxIcon="/INyxOS/assets/Nyxlogo--r2acald.png",ArrowBackIcon="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='20'%20height='20'%20fill='none'%20viewBox='0%200%2020%2020'%3e%3cpath%20d='M11%2015l-5-5%205-5'%20stroke='%23fff'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M6%2010h8'%20stroke='%23fff'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",ArrowForwardIcon="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='20'%20height='20'%20fill='none'%20viewBox='0%200%2020%2020'%3e%3cpath%20d='M9%205l5%205-5%205'%20stroke='%23fff'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M14%2010H6'%20stroke='%23fff'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",ReloadIcon="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='20'%20height='20'%20fill='none'%20viewBox='0%200%2020%2020'%3e%3cpath%20d='M17%204v4h-4'%20stroke='%23fff'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M3.51%209A7%207%200%200%201%2017%208m0%200V4'%20stroke='%23fff'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",HomeIcon="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='20'%20height='20'%20fill='none'%20viewBox='0%200%2020%2020'%3e%3cpath%20d='M3%209.5L10%204l7%205.5'%20stroke='%23fff'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M5%2017V9.5m10%207.5V9.5M5%2017h10'%20stroke='%23fff'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",BookmarkIcon="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20fill='none'%20stroke='currentColor'%20stroke-width='1.8'%20stroke-linecap='round'%20stroke-linejoin='round'%3e%3cpath%20d='M6%204a2%202%200%200%201%202-2h8a2%202%200%200%201%202%202v16l-7-4-7%204V4z'%20fill='%23fff'%20stroke='%23308aff'/%3e%3c/svg%3e",DEFAULT_HOME="https://andisearch.com/",PROXIES={none:{label:"No Proxy (Direct)",url:i=>i},allOrigins:{label:"allOrigins",url:i=>`https://api.allorigins.win/raw?url=${encodeURIComponent(i)}`},chainflare:{label:"Chainflare",url:i=>`https://chainflare.sytes.net/raw?url=${encodeURIComponent(i)}`},corsflix:{label:"Corsflix",url:i=>`https://proxy.corsfix.com/?${encodeURIComponent(i)}`},corsAnywhere:{label:"CORS Anywhere",url:i=>`https://cors-anywhere.herokuapp.com/${i}`},corsproxy:{label:"CORS Proxy (corsproxy.io)",url:i=>`https://corsproxy.io/${encodeURIComponent(i)}`}};function proxiedUrl(i,n){return PROXIES[n].url(i)}const BrowserApp=()=>{var S,b,P,L,D,N;const[i,n]=reactExports.useState(()=>{try{const I=localStorage.getItem("os_browser_proxy");if(I){const U=JSON.parse(I);if(U in PROXIES)return U}}catch{}return"allOrigins"});React.useEffect(()=>{i in PROXIES||n("none")},[i]);const[s,a]=reactExports.useState(()=>{try{const I=localStorage.getItem("os_browser_tabs");if(I)return JSON.parse(I)}catch{}return[{id:Math.random().toString(36).slice(2),url:DEFAULT_HOME,title:"New Tab",input:DEFAULT_HOME,history:[DEFAULT_HOME],historyIndex:0}]}),[h,_]=reactExports.useState(()=>{try{const I=localStorage.getItem("os_browser_active");if(I)return JSON.parse(I)}catch{}return 0}),[w,l]=reactExports.useState(()=>{try{const I=localStorage.getItem("os_browser_bookmarks");if(I)return JSON.parse(I)}catch{}return[]});React.useEffect(()=>{localStorage.setItem("os_browser_tabs",JSON.stringify(s))},[s]),React.useEffect(()=>{localStorage.setItem("os_browser_active",JSON.stringify(h))},[h]),React.useEffect(()=>{localStorage.setItem("os_browser_bookmarks",JSON.stringify(w))},[w]),React.useEffect(()=>{localStorage.setItem("os_browser_proxy",JSON.stringify(i))},[i]);const u=reactExports.useRef([]),f=(I,U,F=!0,$)=>{a(H=>{const z=[...H];let Y=U||z[I].input;!/^https?:\/\//.test(Y)&&!/^ftp:\/\//.test(Y)&&(Y="https://"+Y);const k=z[I];let R=k.history,A=k.historyIndex;return F&&(R=k.history.slice(0,k.historyIndex+1).concat([Y]),A=R.length-1),z[I]={...k,url:Y,input:Y,error:void 0,history:R,historyIndex:A},z}),$&&$!==i&&n($)},y=I=>{i==="none"?(n("allOrigins"),setTimeout(()=>{var U;f(I,(U=s[I])==null?void 0:U.url,!1,"allOrigins")},100)):a(U=>{const F=[...U];return F[I]={...F[I],error:"Failed to load page. (Possible CORS or network error.)"},F})},p=()=>{a(I=>{const U=[...I],F=U[h];if(F.historyIndex>0){const $=F.historyIndex-1;U[h]={...F,url:F.history[$],input:F.history[$],error:void 0,historyIndex:$}}return U})},C=()=>{a(I=>{const U=[...I],F=U[h];if(F.historyIndex<F.history.length-1){const $=F.historyIndex+1;U[h]={...F,url:F.history[$],input:F.history[$],error:void 0,historyIndex:$}}return U})},T=()=>{a(I=>{const U=[...I];return U[h]={...U[h],url:U[h].url,error:void 0},U})},E=()=>{a(I=>{const U=[...I];return U[h]={...U[h],url:DEFAULT_HOME,input:DEFAULT_HOME,error:void 0},U})},x=()=>{a(I=>[...I,{id:Math.random().toString(36).slice(2),url:DEFAULT_HOME,title:"New Tab",input:DEFAULT_HOME,history:[DEFAULT_HOME],historyIndex:0}]),_(s.length)},c=I=>{a(U=>{const F=U.filter(($,H)=>H!==I);return F.length?F:[{id:Math.random().toString(36).slice(2),url:DEFAULT_HOME,title:"New Tab",input:DEFAULT_HOME,history:[DEFAULT_HOME],historyIndex:0}]}),_(U=>U===I?0:U>I?U-1:U)},g=()=>{const I=s[h];l(U=>U.some(F=>F.url===I.url)?U:[...U,{title:I.title||I.url,url:I.url}])},d=I=>{l(U=>U.filter(F=>F.url!==I))},m=I=>{a(U=>{const F=[...U];return F[h]={...F[h],url:I,input:I,error:void 0},F})};return React.useEffect(()=>{function I(U){s[h]&&typeof U.data=="string"&&U.data.startsWith("TITLE:")&&a(F=>{const $=[...F];return $[h]={...$[h],title:U.data.slice(6)},$})}return window.addEventListener("message",I),()=>window.removeEventListener("message",I)},[h,s]),jsxRuntimeExports.jsxs("div",{className:"browser-app-root",children:[jsxRuntimeExports.jsxs("div",{className:"browser-tabbar",children:[s.map((I,U)=>jsxRuntimeExports.jsxs("div",{className:`browser-tab${U===h?" active":""}${I.pinned?" pinned":""}`,draggable:!0,onDragStart:F=>{F.dataTransfer.setData("tab-index",U.toString()),F.dataTransfer.effectAllowed="move"},onDragOver:F=>F.preventDefault(),onDrop:F=>{F.preventDefault();const $=Number(F.dataTransfer.getData("tab-index"));$!==U&&(a(H=>{const z=[...H],[Y]=z.splice($,1);return z.splice(U,0,Y),z}),_(H=>H===$?U:H===U?$:H))},onClick:()=>_(U),title:I.url,children:[jsxRuntimeExports.jsx("img",{src:NyxIcon,alt:"icon",style:{width:16,height:16,verticalAlign:"middle",marginRight:6,borderRadius:3}}),jsxRuntimeExports.jsx("span",{className:`browser-tab-title${I.title==="New Tab"?" browser-tab-title--new":""}`,children:I.title||I.url}),s.length>1&&jsxRuntimeExports.jsx("button",{className:"browser-tab-close",onClick:F=>{F.stopPropagation(),c(U)},title:"Close Tab",children:"×"}),I.pinned&&jsxRuntimeExports.jsx("span",{className:"browser-tab-pin",title:"Pinned",children:"📌"})]},I.id)),jsxRuntimeExports.jsx("button",{className:"browser-tab-add",onClick:x,title:"New Tab",children:"+"})]}),jsxRuntimeExports.jsxs("div",{className:"browser-toolbar",children:[jsxRuntimeExports.jsxs("div",{className:"browser-toolbar-left",children:[jsxRuntimeExports.jsx("button",{onClick:p,title:"Back","aria-label":"Back",disabled:((S=s[h])==null?void 0:S.historyIndex)===0,children:jsxRuntimeExports.jsx("img",{src:ArrowBackIcon,alt:"Back",style:{width:20,height:20,opacity:((b=s[h])==null?void 0:b.historyIndex)===0?.4:1}})}),jsxRuntimeExports.jsx("button",{onClick:C,title:"Forward","aria-label":"Forward",disabled:((P=s[h])==null?void 0:P.historyIndex)===((L=s[h])==null?void 0:L.history.length)-1,children:jsxRuntimeExports.jsx("img",{src:ArrowForwardIcon,alt:"Forward",style:{width:20,height:20,opacity:((D=s[h])==null?void 0:D.historyIndex)===((N=s[h])==null?void 0:N.history.length)-1?.4:1}})}),jsxRuntimeExports.jsx("button",{onClick:T,title:"Reload","aria-label":"Reload",children:jsxRuntimeExports.jsx("img",{src:ReloadIcon,alt:"Reload",style:{width:20,height:20}})}),jsxRuntimeExports.jsx("button",{onClick:E,title:"Home","aria-label":"Home",children:jsxRuntimeExports.jsx("img",{src:HomeIcon,alt:"Home",style:{width:20,height:20}})})]}),jsxRuntimeExports.jsx("form",{className:"browser-toolbar-center",onSubmit:I=>{I.preventDefault(),f(h)},children:jsxRuntimeExports.jsx("input",{className:"browser-url-input",value:s[h]?s[h].input:"",onChange:I=>a(U=>{if(!U[h])return U;const F=[...U];return F[h]={...F[h],input:I.target.value},F}),spellCheck:!1,autoComplete:"off","aria-label":"URL bar"})}),jsxRuntimeExports.jsxs("div",{className:"browser-toolbar-right",children:[jsxRuntimeExports.jsx("button",{onClick:()=>{w.some(U=>{var F;return U.url===((F=s[h])==null?void 0:F.url)})?d(s[h].url):g()},title:w.some(I=>{var U;return I.url===((U=s[h])==null?void 0:U.url)})?"Remove bookmark":"Bookmark this page","aria-label":"Bookmark",style:{background:"none",border:"none",padding:0,marginRight:8},children:jsxRuntimeExports.jsx("img",{src:BookmarkIcon,alt:"Bookmark",style:{width:22,height:22,filter:w.some(I=>{var U;return I.url===((U=s[h])==null?void 0:U.url)})?"drop-shadow(0 0 2px #308aff)":"none",color:w.some(I=>{var U;return I.url===((U=s[h])==null?void 0:U.url)})?"#308aff":"#fff",opacity:w.some(I=>{var U;return I.url===((U=s[h])==null?void 0:U.url)})?1:.7,transition:"filter 0.15s, color 0.15s, opacity 0.15s"}})}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[jsxRuntimeExports.jsxs("select",{value:"",onChange:I=>{const U=I.target.value;U&&m(U)},title:"Bookmarks",className:"browser-proxy-selector",style:{marginRight:8},children:[jsxRuntimeExports.jsx("option",{value:"",disabled:!0,selected:!0,children:w.length?"Bookmarks":"No bookmarks"}),w.map(I=>jsxRuntimeExports.jsx("option",{value:I.url,children:I.title},I.url))]}),jsxRuntimeExports.jsx("select",{value:i,onChange:I=>n(I.target.value),title:"Proxy selector",className:"browser-proxy-selector",children:Object.entries(PROXIES).map(([I,{label:U}])=>jsxRuntimeExports.jsx("option",{value:I,children:U},I))})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"browser-content",children:[s.some(I=>I.error)?s.map((I,U)=>I.error&&h===U?jsxRuntimeExports.jsxs("div",{className:"browser-error",children:[jsxRuntimeExports.jsx("div",{children:I.error}),jsxRuntimeExports.jsx("div",{style:{marginTop:10,color:"#fa0",fontSize:"0.98em"},children:"If this site fails to load, try switching the proxy using the dropdown in the toolbar above. Some sites block certain proxies or require special headers."}),jsxRuntimeExports.jsxs("div",{style:{fontSize:"0.95em",marginTop:8,color:"#555"},children:[jsxRuntimeExports.jsx("strong",{children:"URL:"})," ",I.url,jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("strong",{children:"Proxy:"})," ",i,jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("strong",{children:"Proxied URL:"})," ",proxiedUrl(I.url,i)]})]},I.id):null):null,s.map((I,U)=>jsxRuntimeExports.jsx("iframe",{ref:F=>u.current[U]=F,className:"browser-iframe",src:proxiedUrl(I.url,i),title:I.url,sandbox:"allow-scripts allow-same-origin allow-forms allow-popups allow-modals allow-downloads allow-popups-to-escape-sandbox",allow:"clipboard-read; clipboard-write; encrypted-media; fullscreen; geolocation; microphone; camera; display-capture; autoplay; picture-in-picture;",style:{flex:1,width:"100%",border:"none",background:"#fff",display:h===U?"block":"none"},onError:()=>y(U)},I.id))]})]})},PWAInstallButton=({app:i})=>{const[n,s]=reactExports.useState(null),[a,h]=reactExports.useState(!1);return reactExports.useEffect(()=>{const _=w=>{w.prompt&&i.url.startsWith(window.location.origin)&&(s(w),h(!0))};return window.addEventListener("beforeinstallprompt",_),()=>window.removeEventListener("beforeinstallprompt",_)},[i.url]),!a||!n?null:jsxRuntimeExports.jsx("button",{className:"pm-btn pm-btn-install",onClick:async()=>{n.prompt(),await n.userChoice,h(!1)},style:{marginLeft:8},children:"Install as App"})},registryUrl="/INyxOS/registry.json",PackageManagerComponent=()=>{const[i,n]=reactExports.useState([]),[s,a]=reactExports.useState(()=>{const $=localStorage.getItem("os_installed_apps");return $?JSON.parse($):{}}),[h,_]=reactExports.useState("all"),[w,l]=reactExports.useState(!1),[u,f]=reactExports.useState(null),[y,p]=reactExports.useState(()=>{try{return JSON.parse(localStorage.getItem("os_custom_apps")||"[]")}catch{return[]}}),[C,T]=reactExports.useState(()=>{const $=localStorage.getItem("os_removed_apps");return $?JSON.parse($):[]}),[E,x]=reactExports.useState(""),[c,g]=reactExports.useState(""),[d,m]=reactExports.useState("");reactExports.useEffect(()=>{(async()=>{try{let H=await fetch(registryUrl);if(!H.ok)throw new Error("Could not load registry.json");const z=await H.json();n(z.filter(Y=>Y.type==="pwa"))}catch{f("Failed to load app registry. Please check registry.json path.")}})()},[]);const S=$=>{a(H=>{const z={...H,[$.id]:$};return localStorage.setItem("os_installed_apps",JSON.stringify(z)),z})},b=$=>{_("all"),l(!1),m(""),a(H=>{const z={...H};return delete z[$.id],localStorage.setItem("os_installed_apps",JSON.stringify(z)),z})},P=()=>{if(E&&c){const $=E.toLowerCase().replace(/\s+/g,"-"),H=c.replace(/\/+$/,"")+"/favicon.ico",z={id:$,name:E,description:"",icon:H,category:"Custom",url:c,type:"pwa",sandbox:"allow-scripts allow-same-origin"},Y=[...y,z];p(Y),localStorage.setItem("os_custom_apps",JSON.stringify(Y)),x(""),g("")}},L=$=>{const H=[...C,$.id];T(H),localStorage.setItem("os_removed_apps",JSON.stringify(H))},D=$=>{_("all"),l(!1),m("");const H=new CustomEvent("os-open-pwa",{detail:$});window.dispatchEvent(H)},I=[...i,...y].filter($=>!C.includes($.id)),U=[...I].sort(($,H)=>$.id==="minecraft"?-1:H.id==="minecraft"?1:0),F=["Games",...Array.from(new Set(I.map($=>$.category))).filter($=>$!=="Games")];return jsxRuntimeExports.jsxs("div",{className:"package-manager-root",children:[jsxRuntimeExports.jsx("h1",{children:"Package Manager"}),jsxRuntimeExports.jsxs("div",{className:"pm-controls",children:[jsxRuntimeExports.jsx("input",{className:"pm-search",placeholder:"Search apps...",value:d,onChange:$=>m($.target.value)}),jsxRuntimeExports.jsx("button",{type:"button",className:w?"active":"",onClick:()=>{l(!0),_("all")},children:"Featured"}),jsxRuntimeExports.jsx("button",{type:"button",className:w?"":"active",onClick:()=>{l(!1),_("all")},children:"All Apps"}),jsxRuntimeExports.jsxs("select",{value:h,onChange:$=>{_($.target.value),l(!1)},children:[jsxRuntimeExports.jsx("option",{value:"all",children:"All Categories"}),F.map($=>jsxRuntimeExports.jsx("option",{value:$,children:$},$))]})]}),jsxRuntimeExports.jsxs("div",{className:"pm-add-custom",children:[jsxRuntimeExports.jsx("input",{placeholder:"Name",value:E,onChange:$=>x($.target.value)}),jsxRuntimeExports.jsx("input",{placeholder:"URL",value:c,onChange:$=>g($.target.value)}),jsxRuntimeExports.jsx("button",{type:"button",className:"pm-btn pm-btn-install",onClick:P,children:"Add Custom PWA"})]}),u&&jsxRuntimeExports.jsx("div",{className:"pm-error",children:u}),jsxRuntimeExports.jsx("div",{className:"pm-app-list",children:U.filter($=>w?$.featured:!0).filter($=>h==="all"||$.category===h).filter($=>!d||$.name.toLowerCase().includes(d.toLowerCase())||$.description.toLowerCase().includes(d.toLowerCase())).map($=>jsxRuntimeExports.jsxs("div",{className:"pm-app-card",children:[jsxRuntimeExports.jsx("img",{src:$.icon,alt:$.name,className:"pm-app-icon"}),jsxRuntimeExports.jsxs("div",{className:"pm-app-info",children:[jsxRuntimeExports.jsx("div",{className:"pm-app-title",children:$.name}),jsxRuntimeExports.jsx("div",{className:"pm-app-desc",children:$.description}),jsxRuntimeExports.jsx("div",{className:"pm-app-category",children:$.category})]}),jsxRuntimeExports.jsxs("div",{className:"pm-app-actions",children:[s[$.id]?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("button",{type:"button",className:"pm-btn pm-btn-launch",onClick:()=>D($),children:"Launch"}),jsxRuntimeExports.jsx("button",{type:"button",className:"pm-btn pm-btn-uninstall",onClick:()=>b($),children:"Uninstall"})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("button",{type:"button",className:"pm-btn pm-btn-install",onClick:()=>S($),children:"Install"}),jsxRuntimeExports.jsx(PWAInstallButton,{app:$})]}),jsxRuntimeExports.jsx("button",{type:"button",className:"pm-btn pm-btn-delete",onClick:()=>L($),children:"Delete"})]})]},$.id))})]})},PackageManager=reactExports.memo(PackageManagerComponent),LibreOfficeApp=()=>{const i=reactExports.useRef(null);return reactExports.useEffect(()=>{const n=document.createElement("script");return n.src="/libreoffice-wasm/loader.js",n.async=!0,document.body.appendChild(n),n.onload=()=>{const s=window.LibreOfficeWasm;s&&i.current&&s.init({container:i.current,wasmBinaryUrl:"/libreoffice-wasm/libreoffice.wasm"})},()=>{document.body.removeChild(n)}},[]),jsxRuntimeExports.jsx("div",{ref:i,style:{width:"100%",height:"100%",background:"#1e222b"}})},appStubs=[{id:"explorer",title:"File Explorer",icon:"🗂️",component:FileExplorer,width:700,height:520,top:120,left:420,zIndex:10},{id:"nxyium",title:"Nxyium",icon:"🌐",component:BrowserApp,width:900,height:600,top:80,left:80,zIndex:10},{id:"terminal",title:"Terminal",icon:"🖥️",component:Terminal,width:420,height:260,top:170,left:320,zIndex:10},{id:"textedit",title:"Text Editor",icon:"📝",component:TextEditor,width:700,height:520,top:120,left:420,zIndex:10},{id:"settings",title:"Settings",icon:"⚙️",component:Settings,width:700,height:620,top:150,left:260,zIndex:10},{id:"package-manager",title:"Package Manager",icon:"📦",component:PackageManager,width:700,height:520,top:120,left:420,zIndex:10},{id:"libreoffice",title:"LibreOffice",icon:"📄",component:LibreOfficeApp,width:1024,height:768,top:120,left:420,zIndex:10},{id:"winxp",title:"Windows XP",icon:"https://winxp.vercel.app/favicon.ico",component:function(){return jsxRuntimeExports.jsx("iframe",{src:"https://winxp.vercel.app/",sandbox:"allow-scripts allow-same-origin allow-popups allow-pointer-lock",allow:"fullscreen; pointer-lock",style:{width:"100%",height:"100%",border:"none",background:"#000"},title:"Windows XP"})},width:1024,height:768,top:100,left:200,zIndex:10}],defaultWindows=[],getAudioApps=()=>Array.from(document.querySelectorAll("audio, video")).map((i,n)=>{const s=i;return{id:`media-app-${n}`,name:s.dataset.appname||`App ${n+1}`,element:s,volume:s.volume}}),OptionsCenter=({show:i,onClose:n})=>{const s=reactExports.useRef(null),[a,h]=reactExports.useState(i),[_,w]=reactExports.useState(!1),[l,u]=reactExports.useState(getAudioApps());reactExports.useEffect(()=>{i&&h(!0)},[i]),reactExports.useEffect(()=>{u(getAudioApps())},[]);const f=p=>{i||h(!1)};if(reactExports.useEffect(()=>(_?document.body.style.filter="brightness(0.7) sepia(0.6) hue-rotate(-12deg) contrast(0.95)":document.body.style.filter="",()=>{document.body.style.filter=""}),[_]),!a)return null;const y=(p,C)=>{u(T=>T.map(E=>E.id===p?(E.element.volume=C,{...E,volume:C}):E))};return jsxRuntimeExports.jsxs("div",{className:`options-center-glass ${i?"options-center-open":"options-center-close"}`,ref:s,tabIndex:0,onAnimationEnd:f,children:[jsxRuntimeExports.jsx("button",{className:"options-center-close",onClick:n,children:"×"}),jsxRuntimeExports.jsx(CustomActionTiles,{nightLight:_,setNightLight:w}),jsxRuntimeExports.jsxs("div",{className:"options-center-grid",children:[jsxRuntimeExports.jsxs("div",{className:"options-card night-light",children:[jsxRuntimeExports.jsx("div",{className:"options-card-title",children:"Night Light"}),jsxRuntimeExports.jsx("div",{className:"options-card-status",children:_?"On":"Off"}),jsxRuntimeExports.jsxs("label",{className:"switch",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:_,onChange:()=>w(p=>!p)}),jsxRuntimeExports.jsx("span",{className:"slider"})]})]}),jsxRuntimeExports.jsx(MediaControls,{}),l.length>0?jsxRuntimeExports.jsxs("div",{className:"options-card per-app-volume",children:[jsxRuntimeExports.jsx("div",{className:"options-card-title",children:"Per-app Volume"}),jsxRuntimeExports.jsx("div",{className:"options-card-apps",children:l.map(p=>jsxRuntimeExports.jsxs("div",{className:"app-volume-row",children:[jsxRuntimeExports.jsx("span",{children:p.name}),jsxRuntimeExports.jsx("input",{type:"range",min:0,max:1,step:.01,value:p.volume,onChange:C=>y(p.id,Number(C.target.value))})]},p.id))})]}):jsxRuntimeExports.jsxs("div",{className:"options-card per-app-volume",children:[jsxRuntimeExports.jsx("div",{className:"options-card-title",children:"Per-app Volume"}),jsxRuntimeExports.jsx("div",{className:"options-card-apps",children:jsxRuntimeExports.jsx("div",{children:"No audio or video apps running"})})]})]})]})},MediaControls=()=>{const[i,n]=reactExports.useState(null),[s,a]=reactExports.useState(!1),[h,_]=reactExports.useState(0),[w,l]=reactExports.useState(0),[u,f]=reactExports.useState(1),[y,p]=reactExports.useState(""),[C,T]=reactExports.useState(null);reactExports.useEffect(()=>{const m=Array.from(document.querySelectorAll("audio, video"));let S=null;S=m.find(b=>!b.paused&&!b.ended)||m[0]||null,n(S||null)},[]),reactExports.useEffect(()=>{if(!i)return;const m=()=>{var S,b,P;a(!i.paused&&!i.ended),_(i.currentTime),l(i.duration||0),f(i.volume),p(((S=i.dataset)==null?void 0:S.title)||i.getAttribute("title")||((b=i.currentSrc)==null?void 0:b.split("/").pop())||"Unknown Media"),i instanceof HTMLVideoElement&&i.poster?T(i.poster):(P=i.dataset)!=null&&P.cover?T(i.dataset.cover):T(null)};return m(),i.addEventListener("timeupdate",m),i.addEventListener("play",m),i.addEventListener("pause",m),i.addEventListener("volumechange",m),i.addEventListener("loadedmetadata",m),()=>{i.removeEventListener("timeupdate",m),i.removeEventListener("play",m),i.removeEventListener("pause",m),i.removeEventListener("volumechange",m),i.removeEventListener("loadedmetadata",m)}},[i]);const E=()=>{i&&(i.paused?i.play():i.pause())},x=()=>{i&&(i.currentTime=Math.max(0,i.currentTime-10))},c=()=>{i&&(i.currentTime=Math.min(i.duration,i.currentTime+10))},g=m=>{i&&(i.currentTime=Number(m.target.value))},d=m=>{i&&(i.volume=Number(m.target.value))};return i?jsxRuntimeExports.jsx("div",{className:"options-card media-controls",children:jsxRuntimeExports.jsxs("div",{className:"media-controls-row",children:[jsxRuntimeExports.jsx("div",{className:"media-cover",children:C?jsxRuntimeExports.jsx("img",{src:C,alt:"cover"}):jsxRuntimeExports.jsx("div",{className:"media-cover-placeholder"})}),jsxRuntimeExports.jsxs("div",{className:"media-meta",children:[jsxRuntimeExports.jsx("div",{className:"media-title",children:y}),jsxRuntimeExports.jsxs("div",{className:"media-seek-row",children:[jsxRuntimeExports.jsx("span",{className:"media-time",children:formatTime(h)}),jsxRuntimeExports.jsx("input",{type:"range",min:0,max:w||1,step:.1,value:h,onChange:g,className:"media-seek-bar"}),jsxRuntimeExports.jsx("span",{className:"media-time",children:formatTime(w)})]}),jsxRuntimeExports.jsxs("div",{className:"media-controls-buttons",children:[jsxRuntimeExports.jsx("button",{onClick:x,title:"Back 10s",children:"⏮"}),jsxRuntimeExports.jsx("button",{onClick:E,title:s?"Pause":"Play",children:s?"⏸":"▶️"}),jsxRuntimeExports.jsx("button",{onClick:c,title:"Forward 10s",children:"⏭"}),jsxRuntimeExports.jsx("input",{type:"range",min:0,max:1,step:.01,value:u,onChange:d,className:"media-volume-bar"})]})]})]})}):jsxRuntimeExports.jsx("div",{className:"options-card media-controls",children:jsxRuntimeExports.jsxs("div",{className:"media-controls-empty",children:[jsxRuntimeExports.jsx("div",{className:"media-cover-placeholder"}),jsxRuntimeExports.jsx("div",{className:"media-title",children:"No media playing"})]})})};function formatTime(i){if(!isFinite(i))return"0:00";const n=Math.floor(i/60),s=Math.floor(i%60).toString().padStart(2,"0");return`${n}:${s}`}const ACTION_TILES_KEY="os_custom_action_tiles_v1",defaultTiles=[],CustomActionTiles=({nightLight,setNightLight})=>{const[tiles,setTiles]=reactExports.useState(()=>{try{return JSON.parse(localStorage.getItem(ACTION_TILES_KEY)||"[]")}catch{return defaultTiles}}),[showAdd,setShowAdd]=reactExports.useState(!1),[addType,setAddType]=reactExports.useState("website"),[input,setInput]=reactExports.useState({});reactExports.useEffect(()=>{localStorage.setItem(ACTION_TILES_KEY,JSON.stringify(tiles))},[tiles]);const handleTileClick=tile=>{tile.type==="website"&&tile.url?window.open(tile.url,"_blank"):tile.type==="script"&&tile.script?window.confirm("Run this script?")&&eval(tile.script):tile.type==="toggle"&&tile.toggleTarget&&tile.toggleTarget==="nightLight"&&setNightLight(!nightLight)},handleRemove=i=>setTiles(n=>n.filter(s=>s.id!==i)),handleAdd=()=>{let i=null;addType==="website"&&input.url&&input.title?i={id:Math.random().toString(36).slice(2),type:"website",title:input.title,icon:"🌐",url:input.url}:addType==="script"&&input.script&&input.title?i={id:Math.random().toString(36).slice(2),type:"script",title:input.title,icon:"⚡",script:input.script}:addType==="toggle"&&input.toggleTarget&&input.title&&(i={id:Math.random().toString(36).slice(2),type:"toggle",title:input.title,icon:input.toggleTarget==="nightLight"?"🌙":"📱",toggleTarget:input.toggleTarget}),i&&(setTiles(n=>[...n,i]),setShowAdd(!1),setInput({}))};return jsxRuntimeExports.jsxs("div",{className:"action-tiles-bar",children:[jsxRuntimeExports.jsxs("div",{className:"action-tiles-list",children:[tiles.map(i=>jsxRuntimeExports.jsxs("div",{className:"action-tile",onClick:()=>handleTileClick(i),title:i.title,children:[jsxRuntimeExports.jsx("span",{className:"action-tile-icon",children:i.icon}),jsxRuntimeExports.jsx("span",{className:"action-tile-title",children:i.title}),jsxRuntimeExports.jsx("button",{className:"action-tile-remove",onClick:n=>{n.stopPropagation(),handleRemove(i.id)},title:"Remove",children:"×"})]},i.id)),jsxRuntimeExports.jsx("button",{className:"action-tile-add",onClick:()=>setShowAdd(i=>!i),title:"Add Action Tile",children:"＋"})]}),showAdd&&jsxRuntimeExports.jsxs("div",{className:"action-tile-add-form",children:[jsxRuntimeExports.jsxs("select",{value:addType,onChange:i=>setAddType(i.target.value),children:[jsxRuntimeExports.jsx("option",{value:"website",children:"Website"}),jsxRuntimeExports.jsx("option",{value:"script",children:"Script"}),jsxRuntimeExports.jsx("option",{value:"toggle",children:"Toggle Setting"})]}),addType==="website"&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("input",{id:"options-title-input",name:"optionsTitle",placeholder:"Title",value:input.title||"",onChange:i=>setInput(n=>({...n,title:i.target.value}))}),jsxRuntimeExports.jsx("input",{id:"options-url-input",name:"optionsUrl",placeholder:"URL (https://...)",value:input.url||"",onChange:i=>setInput(n=>({...n,url:i.target.value}))})]}),addType==="script"&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("input",{id:"options-title-input",name:"optionsTitle",placeholder:"Title",value:input.title||"",onChange:i=>setInput(n=>({...n,title:i.target.value}))}),jsxRuntimeExports.jsx("textarea",{id:"options-script-input",name:"optionsScript",placeholder:"JS Script",value:input.script||"",onChange:i=>setInput(n=>({...n,script:i.target.value}))})]}),addType==="toggle"&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("input",{id:"options-title-input",name:"optionsTitle",placeholder:"Title",value:input.title||"",onChange:i=>setInput(n=>({...n,title:i.target.value}))}),jsxRuntimeExports.jsxs("select",{id:"options-toggle-target-input",name:"optionsToggleTarget",value:input.toggleTarget||"",onChange:i=>setInput(n=>({...n,toggleTarget:i.target.value})),children:[jsxRuntimeExports.jsx("option",{value:"",children:"Select Setting"}),jsxRuntimeExports.jsx("option",{value:"nightLight",children:"Night Light"})]})]}),jsxRuntimeExports.jsx("button",{className:"action-tile-save",onClick:handleAdd,children:"Save"}),jsxRuntimeExports.jsx("button",{className:"action-tile-cancel",onClick:()=>setShowAdd(!1),children:"Cancel"})]})]})},NotificationPopover=({notifications:i,onRemove:n})=>jsxRuntimeExports.jsxs("div",{className:"notification-popover-root",role:"dialog","aria-label":"Notifications",children:[jsxRuntimeExports.jsx("div",{className:"notification-popover-title",children:"Notifications"}),i.length===0?jsxRuntimeExports.jsx("div",{className:"notification-popover-empty",children:"No notifications"}):i.slice().reverse().map(s=>jsxRuntimeExports.jsxs("div",{className:`notification-popover-item notification-popover-${s.type||"info"}`,children:[jsxRuntimeExports.jsxs("div",{className:"notification-popover-header",children:[jsxRuntimeExports.jsx("span",{className:"notification-popover-item-title",children:s.title}),jsxRuntimeExports.jsx("button",{className:"notification-popover-remove",onClick:()=>n(s.id),"aria-label":"Dismiss notification",children:"✕"})]}),jsxRuntimeExports.jsx("div",{className:"notification-popover-message",children:s.message})]},s.id))]});var quarterOfYear$2={exports:{}},quarterOfYear$1=quarterOfYear$2.exports,hasRequiredQuarterOfYear;function requireQuarterOfYear(){return hasRequiredQuarterOfYear||(hasRequiredQuarterOfYear=1,function(i,n){(function(s,a){i.exports=a()})(quarterOfYear$1,function(){var s="month",a="quarter";return function(h,_){var w=_.prototype;w.quarter=function(f){return this.$utils().u(f)?Math.ceil((this.month()+1)/3):this.month(this.month()%3+3*(f-1))};var l=w.add;w.add=function(f,y){return f=Number(f),this.$utils().p(y)===a?this.add(3*f,s):l.bind(this)(f,y)};var u=w.startOf;w.startOf=function(f,y){var p=this.$utils(),C=!!p.u(y)||y;if(p.p(f)===a){var T=this.quarter()-1;return C?this.month(3*T).startOf(s).startOf("day"):this.month(3*T+2).endOf(s).endOf("day")}return u.bind(this)(f,y)}}})}(quarterOfYear$2)),quarterOfYear$2.exports}var quarterOfYearExports=requireQuarterOfYear();const quarterOfYear=getDefaultExportFromCjs(quarterOfYearExports);var dayjs_min$1={exports:{}},dayjs_min=dayjs_min$1.exports,hasRequiredDayjs_min;function requireDayjs_min(){return hasRequiredDayjs_min||(hasRequiredDayjs_min=1,function(i,n){(function(s,a){i.exports=a()})(dayjs_min,function(){var s=1e3,a=6e4,h=36e5,_="millisecond",w="second",l="minute",u="hour",f="day",y="week",p="month",C="quarter",T="year",E="date",x="Invalid Date",c=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,g=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,d={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(H){var z=["th","st","nd","rd"],Y=H%100;return"["+H+(z[(Y-20)%10]||z[Y]||z[0])+"]"}},m=function(H,z,Y){var k=String(H);return!k||k.length>=z?H:""+Array(z+1-k.length).join(Y)+H},S={s:m,z:function(H){var z=-H.utcOffset(),Y=Math.abs(z),k=Math.floor(Y/60),R=Y%60;return(z<=0?"+":"-")+m(k,2,"0")+":"+m(R,2,"0")},m:function H(z,Y){if(z.date()<Y.date())return-H(Y,z);var k=12*(Y.year()-z.year())+(Y.month()-z.month()),R=z.clone().add(k,p),A=Y-R<0,M=z.clone().add(k+(A?-1:1),p);return+(-(k+(Y-R)/(A?R-M:M-R))||0)},a:function(H){return H<0?Math.ceil(H)||0:Math.floor(H)},p:function(H){return{M:p,y:T,w:y,d:f,D:E,h:u,m:l,s:w,ms:_,Q:C}[H]||String(H||"").toLowerCase().replace(/s$/,"")},u:function(H){return H===void 0}},b="en",P={};P[b]=d;var L="$isDayjsObject",D=function(H){return H instanceof F||!(!H||!H[L])},N=function H(z,Y,k){var R;if(!z)return b;if(typeof z=="string"){var A=z.toLowerCase();P[A]&&(R=A),Y&&(P[A]=Y,R=A);var M=z.split("-");if(!R&&M.length>1)return H(M[0])}else{var B=z.name;P[B]=z,R=B}return!k&&R&&(b=R),R||!k&&b},I=function(H,z){if(D(H))return H.clone();var Y=typeof z=="object"?z:{};return Y.date=H,Y.args=arguments,new F(Y)},U=S;U.l=N,U.i=D,U.w=function(H,z){return I(H,{locale:z.$L,utc:z.$u,x:z.$x,$offset:z.$offset})};var F=function(){function H(Y){this.$L=N(Y.locale,null,!0),this.parse(Y),this.$x=this.$x||Y.x||{},this[L]=!0}var z=H.prototype;return z.parse=function(Y){this.$d=function(k){var R=k.date,A=k.utc;if(R===null)return new Date(NaN);if(U.u(R))return new Date;if(R instanceof Date)return new Date(R);if(typeof R=="string"&&!/Z$/i.test(R)){var M=R.match(c);if(M){var B=M[2]-1||0,G=(M[7]||"0").substring(0,3);return A?new Date(Date.UTC(M[1],B,M[3]||1,M[4]||0,M[5]||0,M[6]||0,G)):new Date(M[1],B,M[3]||1,M[4]||0,M[5]||0,M[6]||0,G)}}return new Date(R)}(Y),this.init()},z.init=function(){var Y=this.$d;this.$y=Y.getFullYear(),this.$M=Y.getMonth(),this.$D=Y.getDate(),this.$W=Y.getDay(),this.$H=Y.getHours(),this.$m=Y.getMinutes(),this.$s=Y.getSeconds(),this.$ms=Y.getMilliseconds()},z.$utils=function(){return U},z.isValid=function(){return this.$d.toString()!==x},z.isSame=function(Y,k){var R=I(Y);return this.startOf(k)<=R&&R<=this.endOf(k)},z.isAfter=function(Y,k){return I(Y)<this.startOf(k)},z.isBefore=function(Y,k){return this.endOf(k)<I(Y)},z.$g=function(Y,k,R){return U.u(Y)?this[k]:this.set(R,Y)},z.unix=function(){return Math.floor(this.valueOf()/1e3)},z.valueOf=function(){return this.$d.getTime()},z.startOf=function(Y,k){var R=this,A=!!U.u(k)||k,M=U.p(Y),B=function(se,te){var ce=U.w(R.$u?Date.UTC(R.$y,te,se):new Date(R.$y,te,se),R);return A?ce:ce.endOf(f)},G=function(se,te){return U.w(R.toDate()[se].apply(R.toDate("s"),(A?[0,0,0,0]:[23,59,59,999]).slice(te)),R)},q=this.$W,ie=this.$M,le=this.$D,_e="set"+(this.$u?"UTC":"");switch(M){case T:return A?B(1,0):B(31,11);case p:return A?B(1,ie):B(0,ie+1);case y:var V=this.$locale().weekStart||0,Z=(q<V?q+7:q)-V;return B(A?le-Z:le+(6-Z),ie);case f:case E:return G(_e+"Hours",0);case u:return G(_e+"Minutes",1);case l:return G(_e+"Seconds",2);case w:return G(_e+"Milliseconds",3);default:return this.clone()}},z.endOf=function(Y){return this.startOf(Y,!1)},z.$set=function(Y,k){var R,A=U.p(Y),M="set"+(this.$u?"UTC":""),B=(R={},R[f]=M+"Date",R[E]=M+"Date",R[p]=M+"Month",R[T]=M+"FullYear",R[u]=M+"Hours",R[l]=M+"Minutes",R[w]=M+"Seconds",R[_]=M+"Milliseconds",R)[A],G=A===f?this.$D+(k-this.$W):k;if(A===p||A===T){var q=this.clone().set(E,1);q.$d[B](G),q.init(),this.$d=q.set(E,Math.min(this.$D,q.daysInMonth())).$d}else B&&this.$d[B](G);return this.init(),this},z.set=function(Y,k){return this.clone().$set(Y,k)},z.get=function(Y){return this[U.p(Y)]()},z.add=function(Y,k){var R,A=this;Y=Number(Y);var M=U.p(k),B=function(ie){var le=I(A);return U.w(le.date(le.date()+Math.round(ie*Y)),A)};if(M===p)return this.set(p,this.$M+Y);if(M===T)return this.set(T,this.$y+Y);if(M===f)return B(1);if(M===y)return B(7);var G=(R={},R[l]=a,R[u]=h,R[w]=s,R)[M]||1,q=this.$d.getTime()+Y*G;return U.w(q,this)},z.subtract=function(Y,k){return this.add(-1*Y,k)},z.format=function(Y){var k=this,R=this.$locale();if(!this.isValid())return R.invalidDate||x;var A=Y||"YYYY-MM-DDTHH:mm:ssZ",M=U.z(this),B=this.$H,G=this.$m,q=this.$M,ie=R.weekdays,le=R.months,_e=R.meridiem,V=function(te,ce,he,ke){return te&&(te[ce]||te(k,A))||he[ce].slice(0,ke)},Z=function(te){return U.s(B%12||12,te,"0")},se=_e||function(te,ce,he){var ke=te<12?"AM":"PM";return he?ke.toLowerCase():ke};return A.replace(g,function(te,ce){return ce||function(he){switch(he){case"YY":return String(k.$y).slice(-2);case"YYYY":return U.s(k.$y,4,"0");case"M":return q+1;case"MM":return U.s(q+1,2,"0");case"MMM":return V(R.monthsShort,q,le,3);case"MMMM":return V(le,q);case"D":return k.$D;case"DD":return U.s(k.$D,2,"0");case"d":return String(k.$W);case"dd":return V(R.weekdaysMin,k.$W,ie,2);case"ddd":return V(R.weekdaysShort,k.$W,ie,3);case"dddd":return ie[k.$W];case"H":return String(B);case"HH":return U.s(B,2,"0");case"h":return Z(1);case"hh":return Z(2);case"a":return se(B,G,!0);case"A":return se(B,G,!1);case"m":return String(G);case"mm":return U.s(G,2,"0");case"s":return String(k.$s);case"ss":return U.s(k.$s,2,"0");case"SSS":return U.s(k.$ms,3,"0");case"Z":return M}return null}(te)||M.replace(":","")})},z.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},z.diff=function(Y,k,R){var A,M=this,B=U.p(k),G=I(Y),q=(G.utcOffset()-this.utcOffset())*a,ie=this-G,le=function(){return U.m(M,G)};switch(B){case T:A=le()/12;break;case p:A=le();break;case C:A=le()/3;break;case y:A=(ie-q)/6048e5;break;case f:A=(ie-q)/864e5;break;case u:A=ie/h;break;case l:A=ie/a;break;case w:A=ie/s;break;default:A=ie}return R?A:U.a(A)},z.daysInMonth=function(){return this.endOf(p).$D},z.$locale=function(){return P[this.$L]},z.locale=function(Y,k){if(!Y)return this.$L;var R=this.clone(),A=N(Y,k,!0);return A&&(R.$L=A),R},z.clone=function(){return U.w(this.$d,this)},z.toDate=function(){return new Date(this.valueOf())},z.toJSON=function(){return this.isValid()?this.toISOString():null},z.toISOString=function(){return this.$d.toISOString()},z.toString=function(){return this.$d.toUTCString()},H}(),$=F.prototype;return I.prototype=$,[["$ms",_],["$s",w],["$m",l],["$H",u],["$W",f],["$M",p],["$y",T],["$D",E]].forEach(function(H){$[H[1]]=function(z){return this.$g(z,H[0],H[1])}}),I.extend=function(H,z){return H.$i||(H(z,F,I),H.$i=!0),I},I.locale=N,I.isDayjs=D,I.unix=function(H){return I(1e3*H)},I.en=P[b],I.Ls=P,I.p={},I})}(dayjs_min$1)),dayjs_min$1.exports}var dayjs_minExports=requireDayjs_min();const dayjs=getDefaultExportFromCjs(dayjs_minExports);var Meridiem;(function(i){i[i.AM=0]="AM",i[i.PM=1]="PM"})(Meridiem||(Meridiem={}));var Weekday;(function(i){i[i.SUNDAY=0]="SUNDAY",i[i.MONDAY=1]="MONDAY",i[i.TUESDAY=2]="TUESDAY",i[i.WEDNESDAY=3]="WEDNESDAY",i[i.THURSDAY=4]="THURSDAY",i[i.FRIDAY=5]="FRIDAY",i[i.SATURDAY=6]="SATURDAY"})(Weekday||(Weekday={}));var Month;(function(i){i[i.JANUARY=1]="JANUARY",i[i.FEBRUARY=2]="FEBRUARY",i[i.MARCH=3]="MARCH",i[i.APRIL=4]="APRIL",i[i.MAY=5]="MAY",i[i.JUNE=6]="JUNE",i[i.JULY=7]="JULY",i[i.AUGUST=8]="AUGUST",i[i.SEPTEMBER=9]="SEPTEMBER",i[i.OCTOBER=10]="OCTOBER",i[i.NOVEMBER=11]="NOVEMBER",i[i.DECEMBER=12]="DECEMBER"})(Month||(Month={}));function implyTheNextDay(i,n){n=n.add(1,"day"),implySimilarDate$1(i,n),implySimilarTime(i,n)}function assignSimilarDate(i,n){i.assign("day",n.date()),i.assign("month",n.month()+1),i.assign("year",n.year())}function assignSimilarTime(i,n){i.assign("hour",n.hour()),i.assign("minute",n.minute()),i.assign("second",n.second()),i.assign("millisecond",n.millisecond()),i.get("hour")<12?i.assign("meridiem",Meridiem.AM):i.assign("meridiem",Meridiem.PM)}function implySimilarDate$1(i,n){i.imply("day",n.date()),i.imply("month",n.month()+1),i.imply("year",n.year())}function implySimilarTime(i,n){i.imply("hour",n.hour()),i.imply("minute",n.minute()),i.imply("second",n.second()),i.imply("millisecond",n.millisecond())}const TIMEZONE_ABBR_MAP={ACDT:630,ACST:570,ADT:-180,AEDT:660,AEST:600,AFT:270,AKDT:-480,AKST:-540,ALMT:360,AMST:-180,AMT:-240,ANAST:720,ANAT:720,AQTT:300,ART:-180,AST:-240,AWDT:540,AWST:480,AZOST:0,AZOT:-60,AZST:300,AZT:240,BNT:480,BOT:-240,BRST:-120,BRT:-180,BST:60,BTT:360,CAST:480,CAT:120,CCT:390,CDT:-300,CEST:120,CET:{timezoneOffsetDuringDst:2*60,timezoneOffsetNonDst:60,dstStart:i=>getLastWeekdayOfMonth(i,Month.MARCH,Weekday.SUNDAY,2),dstEnd:i=>getLastWeekdayOfMonth(i,Month.OCTOBER,Weekday.SUNDAY,3)},CHADT:825,CHAST:765,CKT:-600,CLST:-180,CLT:-240,COT:-300,CST:-360,CT:{timezoneOffsetDuringDst:-5*60,timezoneOffsetNonDst:-6*60,dstStart:i=>getNthWeekdayOfMonth(i,Month.MARCH,Weekday.SUNDAY,2,2),dstEnd:i=>getNthWeekdayOfMonth(i,Month.NOVEMBER,Weekday.SUNDAY,1,2)},CVT:-60,CXT:420,ChST:600,DAVT:420,EASST:-300,EAST:-360,EAT:180,ECT:-300,EDT:-240,EEST:180,EET:120,EGST:0,EGT:-60,EST:-300,ET:{timezoneOffsetDuringDst:-4*60,timezoneOffsetNonDst:-5*60,dstStart:i=>getNthWeekdayOfMonth(i,Month.MARCH,Weekday.SUNDAY,2,2),dstEnd:i=>getNthWeekdayOfMonth(i,Month.NOVEMBER,Weekday.SUNDAY,1,2)},FJST:780,FJT:720,FKST:-180,FKT:-240,FNT:-120,GALT:-360,GAMT:-540,GET:240,GFT:-180,GILT:720,GMT:0,GST:240,GYT:-240,HAA:-180,HAC:-300,HADT:-540,HAE:-240,HAP:-420,HAR:-360,HAST:-600,HAT:-90,HAY:-480,HKT:480,HLV:-210,HNA:-240,HNC:-360,HNE:-300,HNP:-480,HNR:-420,HNT:-150,HNY:-540,HOVT:420,ICT:420,IDT:180,IOT:360,IRDT:270,IRKST:540,IRKT:540,IRST:210,IST:330,JST:540,KGT:360,KRAST:480,KRAT:480,KST:540,KUYT:240,LHDT:660,LHST:630,LINT:840,MAGST:720,MAGT:720,MART:-510,MAWT:300,MDT:-360,MESZ:120,MEZ:60,MHT:720,MMT:390,MSD:240,MSK:180,MST:-420,MT:{timezoneOffsetDuringDst:-6*60,timezoneOffsetNonDst:-7*60,dstStart:i=>getNthWeekdayOfMonth(i,Month.MARCH,Weekday.SUNDAY,2,2),dstEnd:i=>getNthWeekdayOfMonth(i,Month.NOVEMBER,Weekday.SUNDAY,1,2)},MUT:240,MVT:300,MYT:480,NCT:660,NDT:-90,NFT:690,NOVST:420,NOVT:360,NPT:345,NST:-150,NUT:-660,NZDT:780,NZST:720,OMSST:420,OMST:420,PDT:-420,PET:-300,PETST:720,PETT:720,PGT:600,PHOT:780,PHT:480,PKT:300,PMDT:-120,PMST:-180,PONT:660,PST:-480,PT:{timezoneOffsetDuringDst:-7*60,timezoneOffsetNonDst:-8*60,dstStart:i=>getNthWeekdayOfMonth(i,Month.MARCH,Weekday.SUNDAY,2,2),dstEnd:i=>getNthWeekdayOfMonth(i,Month.NOVEMBER,Weekday.SUNDAY,1,2)},PWT:540,PYST:-180,PYT:-240,RET:240,SAMT:240,SAST:120,SBT:660,SCT:240,SGT:480,SRT:-180,SST:-660,TAHT:-600,TFT:300,TJT:300,TKT:780,TLT:540,TMT:300,TVT:720,ULAT:480,UTC:0,UYST:-120,UYT:-180,UZT:300,VET:-210,VLAST:660,VLAT:660,VUT:660,WAST:120,WAT:60,WEST:60,WESZ:60,WET:0,WEZ:0,WFT:720,WGST:-120,WGT:-180,WIB:420,WIT:540,WITA:480,WST:780,WT:0,YAKST:600,YAKT:600,YAPT:600,YEKST:360,YEKT:360};function getNthWeekdayOfMonth(i,n,s,a,h=0){let _=0,w=0;for(;w<a;)_++,new Date(i,n-1,_).getDay()===s&&w++;return new Date(i,n-1,_,h)}function getLastWeekdayOfMonth(i,n,s,a=0){const h=s===0?7:s,_=new Date(i,n-1+1,1,12),w=_.getDay()===0?7:_.getDay();let l;return w===h?l=7:w<h?l=7+w-h:l=w-h,_.setDate(_.getDate()-l),new Date(i,n-1,_.getDate(),a)}function toTimezoneOffset(i,n,s={}){if(i==null)return null;if(typeof i=="number")return i;const a=s[i]??TIMEZONE_ABBR_MAP[i];return a==null?null:typeof a=="number"?a:n==null?null:dayjs(n).isAfter(a.dstStart(n.getFullYear()))&&!dayjs(n).isAfter(a.dstEnd(n.getFullYear()))?a.timezoneOffsetDuringDst:a.timezoneOffsetNonDst}dayjs.extend(quarterOfYear);class ReferenceWithTimezone{constructor(n){n=n??new Date,n instanceof Date?(this.instant=n,this.timezoneOffset=null):(this.instant=n.instant??new Date,this.timezoneOffset=toTimezoneOffset(n.timezone,this.instant))}getDateWithAdjustedTimezone(){const n=new Date(this.instant);return this.timezoneOffset!==null&&n.setMinutes(n.getMinutes()-this.getSystemTimezoneAdjustmentMinute(this.instant)),n}getSystemTimezoneAdjustmentMinute(n,s){(!n||n.getTime()<0)&&(n=new Date);const a=-n.getTimezoneOffset(),h=s??this.timezoneOffset??a;return a-h}getTimezoneOffset(){return this.timezoneOffset??-this.instant.getTimezoneOffset()}}class ParsingComponents{constructor(n,s){if(this._tags=new Set,this.reference=n,this.knownValues={},this.impliedValues={},s)for(const h in s)this.knownValues[h]=s[h];const a=n.getDateWithAdjustedTimezone();this.imply("day",a.getDate()),this.imply("month",a.getMonth()+1),this.imply("year",a.getFullYear()),this.imply("hour",12),this.imply("minute",0),this.imply("second",0),this.imply("millisecond",0)}get(n){return n in this.knownValues?this.knownValues[n]:n in this.impliedValues?this.impliedValues[n]:null}isCertain(n){return n in this.knownValues}getCertainComponents(){return Object.keys(this.knownValues)}imply(n,s){return n in this.knownValues?this:(this.impliedValues[n]=s,this)}assign(n,s){return this.knownValues[n]=s,delete this.impliedValues[n],this}delete(n){delete this.knownValues[n],delete this.impliedValues[n]}clone(){const n=new ParsingComponents(this.reference);n.knownValues={},n.impliedValues={};for(const s in this.knownValues)n.knownValues[s]=this.knownValues[s];for(const s in this.impliedValues)n.impliedValues[s]=this.impliedValues[s];return n}isOnlyDate(){return!this.isCertain("hour")&&!this.isCertain("minute")&&!this.isCertain("second")}isOnlyTime(){return!this.isCertain("weekday")&&!this.isCertain("day")&&!this.isCertain("month")&&!this.isCertain("year")}isOnlyWeekdayComponent(){return this.isCertain("weekday")&&!this.isCertain("day")&&!this.isCertain("month")}isDateWithUnknownYear(){return this.isCertain("month")&&!this.isCertain("year")}isValidDate(){const n=this.dateWithoutTimezoneAdjustment();return!(n.getFullYear()!==this.get("year")||n.getMonth()!==this.get("month")-1||n.getDate()!==this.get("day")||this.get("hour")!=null&&n.getHours()!=this.get("hour")||this.get("minute")!=null&&n.getMinutes()!=this.get("minute"))}toString(){return`[ParsingComponents {
            tags: ${JSON.stringify(Array.from(this._tags).sort())}, 
            knownValues: ${JSON.stringify(this.knownValues)}, 
            impliedValues: ${JSON.stringify(this.impliedValues)}}, 
            reference: ${JSON.stringify(this.reference)}]`}dayjs(){return dayjs(this.dateWithoutTimezoneAdjustment())}date(){const n=this.dateWithoutTimezoneAdjustment(),s=this.reference.getSystemTimezoneAdjustmentMinute(n,this.get("timezoneOffset"));return new Date(n.getTime()+s*6e4)}addTag(n){return this._tags.add(n),this}addTags(n){for(const s of n)this._tags.add(s);return this}tags(){return new Set(this._tags)}dateWithoutTimezoneAdjustment(){const n=new Date(this.get("year"),this.get("month")-1,this.get("day"),this.get("hour"),this.get("minute"),this.get("second"),this.get("millisecond"));return n.setFullYear(this.get("year")),n}static createRelativeFromReference(n,s){let a=dayjs(n.getDateWithAdjustedTimezone());for(const _ in s)a=a.add(s[_],_);const h=new ParsingComponents(n);return h.addTag("result/relativeDate"),s.hour||s.minute||s.second?(h.addTag("result/relativeDateAndTime"),assignSimilarTime(h,a),assignSimilarDate(h,a),h.assign("timezoneOffset",n.getTimezoneOffset())):(implySimilarTime(h,a),h.imply("timezoneOffset",n.getTimezoneOffset()),s.d?(h.assign("day",a.date()),h.assign("month",a.month()+1),h.assign("year",a.year())):s.week?(h.assign("day",a.date()),h.assign("month",a.month()+1),h.assign("year",a.year()),h.imply("weekday",a.day())):(h.imply("day",a.date()),s.month?(h.assign("month",a.month()+1),h.assign("year",a.year())):(h.imply("month",a.month()+1),s.year?h.assign("year",a.year()):h.imply("year",a.year())))),h}}class ParsingResult{constructor(n,s,a,h,_){this.reference=n,this.refDate=n.instant,this.index=s,this.text=a,this.start=h||new ParsingComponents(n),this.end=_}clone(){const n=new ParsingResult(this.reference,this.index,this.text);return n.start=this.start?this.start.clone():null,n.end=this.end?this.end.clone():null,n}date(){return this.start.date()}addTag(n){return this.start.addTag(n),this.end&&this.end.addTag(n),this}addTags(n){return this.start.addTags(n),this.end&&this.end.addTags(n),this}tags(){const n=new Set(this.start.tags());if(this.end)for(const s of this.end.tags())n.add(s);return n}toString(){const n=Array.from(this.tags()).sort();return`[ParsingResult {index: ${this.index}, text: '${this.text}', tags: ${JSON.stringify(n)} ...}]`}}function repeatedTimeunitPattern(i,n,s="\\s{0,5},?\\s{0,5}"){const a=n.replace(/\((?!\?)/g,"(?:");return`${i}${a}(?:${s}${a}){0,10}`}function extractTerms(i){let n;return i instanceof Array?n=[...i]:i instanceof Map?n=Array.from(i.keys()):n=Object.keys(i),n}function matchAnyPattern(i){return`(?:${extractTerms(i).sort((s,a)=>a.length-s.length).join("|").replace(/\./g,"\\.")})`}function findMostLikelyADYear(i){return i<100&&(i>50?i=i+1900:i=i+2e3),i}function findYearClosestToRef(i,n,s){const a=dayjs(i);let h=a;h=h.month(s-1),h=h.date(n),h=h.year(a.year());const _=h.add(1,"y"),w=h.add(-1,"y");return Math.abs(_.diff(a))<Math.abs(h.diff(a))?h=_:Math.abs(w.diff(a))<Math.abs(h.diff(a))&&(h=w),h.year()}const WEEKDAY_DICTIONARY={sunday:0,sun:0,"sun.":0,monday:1,mon:1,"mon.":1,tuesday:2,tue:2,"tue.":2,wednesday:3,wed:3,"wed.":3,thursday:4,thurs:4,"thurs.":4,thur:4,"thur.":4,thu:4,"thu.":4,friday:5,fri:5,"fri.":5,saturday:6,sat:6,"sat.":6},FULL_MONTH_NAME_DICTIONARY={january:1,february:2,march:3,april:4,may:5,june:6,july:7,august:8,september:9,october:10,november:11,december:12},MONTH_DICTIONARY={...FULL_MONTH_NAME_DICTIONARY,jan:1,"jan.":1,feb:2,"feb.":2,mar:3,"mar.":3,apr:4,"apr.":4,jun:6,"jun.":6,jul:7,"jul.":7,aug:8,"aug.":8,sep:9,"sep.":9,sept:9,"sept.":9,oct:10,"oct.":10,nov:11,"nov.":11,dec:12,"dec.":12},INTEGER_WORD_DICTIONARY={one:1,two:2,three:3,four:4,five:5,six:6,seven:7,eight:8,nine:9,ten:10,eleven:11,twelve:12},ORDINAL_WORD_DICTIONARY={first:1,second:2,third:3,fourth:4,fifth:5,sixth:6,seventh:7,eighth:8,ninth:9,tenth:10,eleventh:11,twelfth:12,thirteenth:13,fourteenth:14,fifteenth:15,sixteenth:16,seventeenth:17,eighteenth:18,nineteenth:19,twentieth:20,"twenty first":21,"twenty-first":21,"twenty second":22,"twenty-second":22,"twenty third":23,"twenty-third":23,"twenty fourth":24,"twenty-fourth":24,"twenty fifth":25,"twenty-fifth":25,"twenty sixth":26,"twenty-sixth":26,"twenty seventh":27,"twenty-seventh":27,"twenty eighth":28,"twenty-eighth":28,"twenty ninth":29,"twenty-ninth":29,thirtieth:30,"thirty first":31,"thirty-first":31},TIME_UNIT_DICTIONARY_NO_ABBR={second:"second",seconds:"second",minute:"minute",minutes:"minute",hour:"hour",hours:"hour",day:"d",days:"d",week:"week",weeks:"week",month:"month",months:"month",quarter:"quarter",quarters:"quarter",year:"year",years:"year"},TIME_UNIT_DICTIONARY={s:"second",sec:"second",second:"second",seconds:"second",m:"minute",min:"minute",mins:"minute",minute:"minute",minutes:"minute",h:"hour",hr:"hour",hrs:"hour",hour:"hour",hours:"hour",d:"d",day:"d",days:"d",w:"w",week:"week",weeks:"week",mo:"month",mon:"month",mos:"month",month:"month",months:"month",qtr:"quarter",quarter:"quarter",quarters:"quarter",y:"year",yr:"year",year:"year",years:"year",...TIME_UNIT_DICTIONARY_NO_ABBR},NUMBER_PATTERN=`(?:${matchAnyPattern(INTEGER_WORD_DICTIONARY)}|[0-9]+|[0-9]+\\.[0-9]+|half(?:\\s{0,2}an?)?|an?\\b(?:\\s{0,2}few)?|few|several|the|a?\\s{0,2}couple\\s{0,2}(?:of)?)`;function parseNumberPattern(i){const n=i.toLowerCase();return INTEGER_WORD_DICTIONARY[n]!==void 0?INTEGER_WORD_DICTIONARY[n]:n==="a"||n==="an"||n=="the"?1:n.match(/few/)?3:n.match(/half/)?.5:n.match(/couple/)?2:n.match(/several/)?7:parseFloat(n)}const ORDINAL_NUMBER_PATTERN=`(?:${matchAnyPattern(ORDINAL_WORD_DICTIONARY)}|[0-9]{1,2}(?:st|nd|rd|th)?)`;function parseOrdinalNumberPattern(i){let n=i.toLowerCase();return ORDINAL_WORD_DICTIONARY[n]!==void 0?ORDINAL_WORD_DICTIONARY[n]:(n=n.replace(/(?:st|nd|rd|th)$/i,""),parseInt(n))}const YEAR_PATTERN="(?:[1-9][0-9]{0,3}\\s{0,2}(?:BE|AD|BC|BCE|CE)|[1-2][0-9]{3}|[5-9][0-9]|2[0-5])";function parseYear(i){if(/BE/i.test(i))return i=i.replace(/BE/i,""),parseInt(i)-543;if(/BCE?/i.test(i))return i=i.replace(/BCE?/i,""),-parseInt(i);if(/(AD|CE)/i.test(i))return i=i.replace(/(AD|CE)/i,""),parseInt(i);const n=parseInt(i);return findMostLikelyADYear(n)}const SINGLE_TIME_UNIT_PATTERN=`(${NUMBER_PATTERN})\\s{0,3}(${matchAnyPattern(TIME_UNIT_DICTIONARY)})`,SINGLE_TIME_UNIT_REGEX=new RegExp(SINGLE_TIME_UNIT_PATTERN,"i"),SINGLE_TIME_UNIT_NO_ABBR_PATTERN=`(${NUMBER_PATTERN})\\s{0,3}(${matchAnyPattern(TIME_UNIT_DICTIONARY_NO_ABBR)})`,TIME_UNIT_CONNECTOR_PATTERN="\\s{0,5},?(?:\\s*and)?\\s{0,5}",TIME_UNITS_PATTERN=repeatedTimeunitPattern("(?:(?:about|around)\\s{0,3})?",SINGLE_TIME_UNIT_PATTERN,TIME_UNIT_CONNECTOR_PATTERN),TIME_UNITS_NO_ABBR_PATTERN=repeatedTimeunitPattern("(?:(?:about|around)\\s{0,3})?",SINGLE_TIME_UNIT_NO_ABBR_PATTERN,TIME_UNIT_CONNECTOR_PATTERN);function parseTimeUnits(i){const n={};let s=i,a=SINGLE_TIME_UNIT_REGEX.exec(s);for(;a;)collectDateTimeFragment(n,a),s=s.substring(a[0].length).trim(),a=SINGLE_TIME_UNIT_REGEX.exec(s);return Object.keys(n).length==0?null:n}function collectDateTimeFragment(i,n){if(n[0].match(/^[a-zA-Z]+$/))return;const s=parseNumberPattern(n[1]),a=TIME_UNIT_DICTIONARY[n[2].toLowerCase()];i[a]=s}class AbstractParserWithWordBoundaryChecking{constructor(){this.cachedInnerPattern=null,this.cachedPattern=null}innerPatternHasChange(n,s){return this.innerPattern(n)!==s}patternLeftBoundary(){return"(\\W|^)"}pattern(n){return this.cachedInnerPattern&&!this.innerPatternHasChange(n,this.cachedInnerPattern)?this.cachedPattern:(this.cachedInnerPattern=this.innerPattern(n),this.cachedPattern=new RegExp(`${this.patternLeftBoundary()}${this.cachedInnerPattern.source}`,this.cachedInnerPattern.flags),this.cachedPattern)}extract(n,s){const a=s[1]??"";s.index=s.index+a.length,s[0]=s[0].substring(a.length);for(let h=2;h<s.length;h++)s[h-1]=s[h];return this.innerExtract(n,s)}}const PATTERN_WITH_OPTIONAL_PREFIX=new RegExp(`(?:(?:within|in|for)\\s*)?(?:(?:about|around|roughly|approximately|just)\\s*(?:~\\s*)?)?(${TIME_UNITS_PATTERN})(?=\\W|$)`,"i"),PATTERN_WITH_PREFIX=new RegExp(`(?:within|in|for)\\s*(?:(?:about|around|roughly|approximately|just)\\s*(?:~\\s*)?)?(${TIME_UNITS_PATTERN})(?=\\W|$)`,"i"),PATTERN_WITH_PREFIX_STRICT=new RegExp(`(?:within|in|for)\\s*(?:(?:about|around|roughly|approximately|just)\\s*(?:~\\s*)?)?(${TIME_UNITS_NO_ABBR_PATTERN})(?=\\W|$)`,"i");class ENTimeUnitWithinFormatParser extends AbstractParserWithWordBoundaryChecking{constructor(n){super(),this.strictMode=n}innerPattern(n){return this.strictMode?PATTERN_WITH_PREFIX_STRICT:n.option.forwardDate?PATTERN_WITH_OPTIONAL_PREFIX:PATTERN_WITH_PREFIX}innerExtract(n,s){if(s[0].match(/^for\s*the\s*\w+/))return null;const a=parseTimeUnits(s[1]);return a?ParsingComponents.createRelativeFromReference(n.reference,a):null}}const PATTERN$d=new RegExp(`(?:on\\s{0,3})?(${ORDINAL_NUMBER_PATTERN})(?:\\s{0,3}(?:to|\\-|\\–|until|through|till)?\\s{0,3}(${ORDINAL_NUMBER_PATTERN}))?(?:-|/|\\s{0,3}(?:of)?\\s{0,3})(${matchAnyPattern(MONTH_DICTIONARY)})(?:(?:-|/|,?\\s{0,3})(${YEAR_PATTERN}(?!\\w)))?(?=\\W|$)`,"i"),DATE_GROUP$1=1,DATE_TO_GROUP$1=2,MONTH_NAME_GROUP$3=3,YEAR_GROUP$5=4;class ENMonthNameLittleEndianParser extends AbstractParserWithWordBoundaryChecking{innerPattern(){return PATTERN$d}innerExtract(n,s){const a=n.createParsingResult(s.index,s[0]),h=MONTH_DICTIONARY[s[MONTH_NAME_GROUP$3].toLowerCase()],_=parseOrdinalNumberPattern(s[DATE_GROUP$1]);if(_>31)return s.index=s.index+s[DATE_GROUP$1].length,null;if(a.start.assign("month",h),a.start.assign("day",_),s[YEAR_GROUP$5]){const w=parseYear(s[YEAR_GROUP$5]);a.start.assign("year",w)}else{const w=findYearClosestToRef(n.refDate,_,h);a.start.imply("year",w)}if(s[DATE_TO_GROUP$1]){const w=parseOrdinalNumberPattern(s[DATE_TO_GROUP$1]);a.end=a.start.clone(),a.end.assign("day",w)}return a}}const PATTERN$c=new RegExp(`(${matchAnyPattern(MONTH_DICTIONARY)})(?:-|/|\\s*,?\\s*)(${ORDINAL_NUMBER_PATTERN})(?!\\s*(?:am|pm))\\s*(?:(?:to|\\-)\\s*(${ORDINAL_NUMBER_PATTERN})\\s*)?(?:(?:-|/|\\s*,\\s*|\\s+)(${YEAR_PATTERN}))?(?=\\W|$)(?!\\:\\d)`,"i"),MONTH_NAME_GROUP$2=1,DATE_GROUP=2,DATE_TO_GROUP=3,YEAR_GROUP$4=4;class ENMonthNameMiddleEndianParser extends AbstractParserWithWordBoundaryChecking{constructor(n){super(),this.shouldSkipYearLikeDate=n}innerPattern(){return PATTERN$c}innerExtract(n,s){const a=MONTH_DICTIONARY[s[MONTH_NAME_GROUP$2].toLowerCase()],h=parseOrdinalNumberPattern(s[DATE_GROUP]);if(h>31||this.shouldSkipYearLikeDate&&!s[DATE_TO_GROUP]&&!s[YEAR_GROUP$4]&&s[DATE_GROUP].match(/^2[0-5]$/))return null;const _=n.createParsingComponents({day:h,month:a}).addTag("parser/ENMonthNameMiddleEndianParser");if(s[YEAR_GROUP$4]){const u=parseYear(s[YEAR_GROUP$4]);_.assign("year",u)}else{const u=findYearClosestToRef(n.refDate,h,a);_.imply("year",u)}if(!s[DATE_TO_GROUP])return _;const w=parseOrdinalNumberPattern(s[DATE_TO_GROUP]),l=n.createParsingResult(s.index,s[0]);return l.start=_,l.end=_.clone(),l.end.assign("day",w),l}}const PATTERN$b=new RegExp(`((?:in)\\s*)?(${matchAnyPattern(MONTH_DICTIONARY)})\\s*(?:(?:,|-|of)?\\s*(${YEAR_PATTERN})?)?(?=[^\\s\\w]|\\s+[^0-9]|\\s+$|$)`,"i"),PREFIX_GROUP$1=1,MONTH_NAME_GROUP$1=2,YEAR_GROUP$3=3;class ENMonthNameParser extends AbstractParserWithWordBoundaryChecking{innerPattern(){return PATTERN$b}innerExtract(n,s){const a=s[MONTH_NAME_GROUP$1].toLowerCase();if(s[0].length<=3&&!FULL_MONTH_NAME_DICTIONARY[a])return null;const h=n.createParsingResult(s.index+(s[PREFIX_GROUP$1]||"").length,s.index+s[0].length);h.start.imply("day",1),h.start.addTag("parser/ENMonthNameParser");const _=MONTH_DICTIONARY[a];if(h.start.assign("month",_),s[YEAR_GROUP$3]){const w=parseYear(s[YEAR_GROUP$3]);h.start.assign("year",w)}else{const w=findYearClosestToRef(n.refDate,1,_);h.start.imply("year",w)}return h}}const PATTERN$a=new RegExp(`([0-9]{4})[-\\.\\/\\s](?:(${matchAnyPattern(MONTH_DICTIONARY)})|([0-9]{1,2}))[-\\.\\/\\s]([0-9]{1,2})(?=\\W|$)`,"i"),YEAR_NUMBER_GROUP$1=1,MONTH_NAME_GROUP=2,MONTH_NUMBER_GROUP$1=3,DATE_NUMBER_GROUP$1=4;class ENYearMonthDayParser extends AbstractParserWithWordBoundaryChecking{constructor(n){super(),this.strictMonthDateOrder=n}innerPattern(){return PATTERN$a}innerExtract(n,s){const a=parseInt(s[YEAR_NUMBER_GROUP$1]);let h=parseInt(s[DATE_NUMBER_GROUP$1]),_=s[MONTH_NUMBER_GROUP$1]?parseInt(s[MONTH_NUMBER_GROUP$1]):MONTH_DICTIONARY[s[MONTH_NAME_GROUP].toLowerCase()];if(_<1||_>12){if(this.strictMonthDateOrder)return null;h>=1&&h<=12&&([_,h]=[h,_])}return h<1||h>31?null:{day:h,month:_,year:a}}}const PATTERN$9=new RegExp("([0-9]|0[1-9]|1[012])/([0-9]{4})","i"),MONTH_GROUP=1,YEAR_GROUP$2=2;class ENSlashMonthFormatParser extends AbstractParserWithWordBoundaryChecking{innerPattern(){return PATTERN$9}innerExtract(n,s){const a=parseInt(s[YEAR_GROUP$2]),h=parseInt(s[MONTH_GROUP]);return n.createParsingComponents().imply("day",1).assign("month",h).assign("year",a)}}function primaryTimePattern(i,n,s,a){return new RegExp(`${i}${n}(\\d{1,4})(?:(?:\\.|:|：)(\\d{1,2})(?:(?::|：)(\\d{2})(?:\\.(\\d{1,6}))?)?)?(?:\\s*(a\\.m\\.|p\\.m\\.|am?|pm?))?${s}`,a)}function followingTimePatten(i,n){return new RegExp(`^(${i})(\\d{1,4})(?:(?:\\.|\\:|\\：)(\\d{1,2})(?:(?:\\.|\\:|\\：)(\\d{1,2})(?:\\.(\\d{1,6}))?)?)?(?:\\s*(a\\.m\\.|p\\.m\\.|am?|pm?))?${n}`,"i")}const HOUR_GROUP=2,MINUTE_GROUP=3,SECOND_GROUP=4,MILLI_SECOND_GROUP=5,AM_PM_HOUR_GROUP=6;class AbstractTimeExpressionParser{constructor(n=!1){this.cachedPrimaryPrefix=null,this.cachedPrimarySuffix=null,this.cachedPrimaryTimePattern=null,this.cachedFollowingPhase=null,this.cachedFollowingSuffix=null,this.cachedFollowingTimePatten=null,this.strictMode=n}patternFlags(){return"i"}primaryPatternLeftBoundary(){return"(^|\\s|T|\\b)"}primarySuffix(){return"(?!/)(?=\\W|$)"}followingSuffix(){return"(?!/)(?=\\W|$)"}pattern(n){return this.getPrimaryTimePatternThroughCache()}extract(n,s){const a=this.extractPrimaryTimeComponents(n,s);if(!a)return s[0].match(/^\d{4}/)?(s.index+=4,null):(s.index+=s[0].length,null);const h=s.index+s[1].length,_=s[0].substring(s[1].length),w=n.createParsingResult(h,_,a);s.index+=s[0].length;const l=n.text.substring(s.index),f=this.getFollowingTimePatternThroughCache().exec(l);return _.match(/^\d{3,4}/)&&f&&(f[0].match(/^\s*([+-])\s*\d{2,4}$/)||f[0].match(/^\s*([+-])\s*\d{2}\W\d{2}/))?null:!f||f[0].match(/^\s*([+-])\s*\d{3,4}$/)?this.checkAndReturnWithoutFollowingPattern(w):(w.end=this.extractFollowingTimeComponents(n,f,w),w.end&&(w.text+=f[0]),this.checkAndReturnWithFollowingPattern(w))}extractPrimaryTimeComponents(n,s,a=!1){const h=n.createParsingComponents();let _=0,w=null,l=parseInt(s[HOUR_GROUP]);if(l>100){if(this.strictMode||s[MINUTE_GROUP]!=null)return null;_=l%100,l=Math.floor(l/100)}if(l>24)return null;if(s[MINUTE_GROUP]!=null){if(s[MINUTE_GROUP].length==1&&!s[AM_PM_HOUR_GROUP])return null;_=parseInt(s[MINUTE_GROUP])}if(_>=60)return null;if(l>12&&(w=Meridiem.PM),s[AM_PM_HOUR_GROUP]!=null){if(l>12)return null;const u=s[AM_PM_HOUR_GROUP][0].toLowerCase();u=="a"&&(w=Meridiem.AM,l==12&&(l=0)),u=="p"&&(w=Meridiem.PM,l!=12&&(l+=12))}if(h.assign("hour",l),h.assign("minute",_),w!==null?h.assign("meridiem",w):l<12?h.imply("meridiem",Meridiem.AM):h.imply("meridiem",Meridiem.PM),s[MILLI_SECOND_GROUP]!=null){const u=parseInt(s[MILLI_SECOND_GROUP].substring(0,3));if(u>=1e3)return null;h.assign("millisecond",u)}if(s[SECOND_GROUP]!=null){const u=parseInt(s[SECOND_GROUP]);if(u>=60)return null;h.assign("second",u)}return h}extractFollowingTimeComponents(n,s,a){const h=n.createParsingComponents();if(s[MILLI_SECOND_GROUP]!=null){const u=parseInt(s[MILLI_SECOND_GROUP].substring(0,3));if(u>=1e3)return null;h.assign("millisecond",u)}if(s[SECOND_GROUP]!=null){const u=parseInt(s[SECOND_GROUP]);if(u>=60)return null;h.assign("second",u)}let _=parseInt(s[HOUR_GROUP]),w=0,l=-1;if(s[MINUTE_GROUP]!=null?w=parseInt(s[MINUTE_GROUP]):_>100&&(w=_%100,_=Math.floor(_/100)),w>=60||_>24)return null;if(_>=12&&(l=Meridiem.PM),s[AM_PM_HOUR_GROUP]!=null){if(_>12)return null;const u=s[AM_PM_HOUR_GROUP][0].toLowerCase();u=="a"&&(l=Meridiem.AM,_==12&&(_=0,h.isCertain("day")||h.imply("day",h.get("day")+1))),u=="p"&&(l=Meridiem.PM,_!=12&&(_+=12)),a.start.isCertain("meridiem")||(l==Meridiem.AM?(a.start.imply("meridiem",Meridiem.AM),a.start.get("hour")==12&&a.start.assign("hour",0)):(a.start.imply("meridiem",Meridiem.PM),a.start.get("hour")!=12&&a.start.assign("hour",a.start.get("hour")+12)))}return h.assign("hour",_),h.assign("minute",w),l>=0?h.assign("meridiem",l):a.start.isCertain("meridiem")&&a.start.get("hour")>12?a.start.get("hour")-12>_?h.imply("meridiem",Meridiem.AM):_<=12&&(h.assign("hour",_+12),h.assign("meridiem",Meridiem.PM)):_>12?h.imply("meridiem",Meridiem.PM):_<=12&&h.imply("meridiem",Meridiem.AM),h.date().getTime()<a.start.date().getTime()&&h.imply("day",h.get("day")+1),h}checkAndReturnWithoutFollowingPattern(n){if(n.text.match(/^\d$/)||n.text.match(/^\d\d\d+$/)||n.text.match(/\d[apAP]$/))return null;const s=n.text.match(/[^\d:.](\d[\d.]+)$/);if(s){const a=s[1];if(this.strictMode||a.includes(".")&&!a.match(/\d(\.\d{2})+$/)||parseInt(a)>24)return null}return n}checkAndReturnWithFollowingPattern(n){if(n.text.match(/^\d+-\d+$/))return null;const s=n.text.match(/[^\d:.](\d[\d.]+)\s*-\s*(\d[\d.]+)$/);if(s){if(this.strictMode)return null;const a=s[1],h=s[2];if(h.includes(".")&&!h.match(/\d(\.\d{2})+$/))return null;const _=parseInt(h),w=parseInt(a);if(_>24||w>24)return null}return n}getPrimaryTimePatternThroughCache(){const n=this.primaryPrefix(),s=this.primarySuffix();return this.cachedPrimaryPrefix===n&&this.cachedPrimarySuffix===s?this.cachedPrimaryTimePattern:(this.cachedPrimaryTimePattern=primaryTimePattern(this.primaryPatternLeftBoundary(),n,s,this.patternFlags()),this.cachedPrimaryPrefix=n,this.cachedPrimarySuffix=s,this.cachedPrimaryTimePattern)}getFollowingTimePatternThroughCache(){const n=this.followingPhase(),s=this.followingSuffix();return this.cachedFollowingPhase===n&&this.cachedFollowingSuffix===s?this.cachedFollowingTimePatten:(this.cachedFollowingTimePatten=followingTimePatten(n,s),this.cachedFollowingPhase=n,this.cachedFollowingSuffix=s,this.cachedFollowingTimePatten)}}class ENTimeExpressionParser extends AbstractTimeExpressionParser{constructor(n){super(n)}followingPhase(){return"\\s*(?:\\-|\\–|\\~|\\〜|to|until|through|till|\\?)\\s*"}primaryPrefix(){return"(?:(?:at|from)\\s*)??"}primarySuffix(){return"(?:\\s*(?:o\\W*clock|at\\s*night|in\\s*the\\s*(?:morning|afternoon)))?(?!/)(?=\\W|$)"}extractPrimaryTimeComponents(n,s){const a=super.extractPrimaryTimeComponents(n,s);if(!a)return a;if(s[0].endsWith("night")){const h=a.get("hour");h>=6&&h<12?(a.assign("hour",a.get("hour")+12),a.assign("meridiem",Meridiem.PM)):h<6&&a.assign("meridiem",Meridiem.AM)}if(s[0].endsWith("afternoon")){a.assign("meridiem",Meridiem.PM);const h=a.get("hour");h>=0&&h<=6&&a.assign("hour",a.get("hour")+12)}return s[0].endsWith("morning")&&(a.assign("meridiem",Meridiem.AM),a.get("hour")<12&&a.assign("hour",a.get("hour"))),a.addTag("parser/ENTimeExpressionParser")}extractFollowingTimeComponents(n,s,a){const h=super.extractFollowingTimeComponents(n,s,a);return h&&h.addTag("parser/ENTimeExpressionParser"),h}}function reverseTimeUnits(i){const n={};for(const s in i)n[s]=-i[s];return n}function addImpliedTimeUnits(i,n){const s=i.clone();let a=i.dayjs();for(const h in n)a=a.add(n[h],h);return("day"in n||"d"in n||"week"in n||"month"in n||"year"in n)&&(s.imply("day",a.date()),s.imply("month",a.month()+1),s.imply("year",a.year())),("second"in n||"minute"in n||"hour"in n)&&(s.imply("second",a.second()),s.imply("minute",a.minute()),s.imply("hour",a.hour())),s}const PATTERN$8=new RegExp(`(${TIME_UNITS_PATTERN})\\s{0,5}(?:ago|before|earlier)(?=\\W|$)`,"i"),STRICT_PATTERN$1=new RegExp(`(${TIME_UNITS_NO_ABBR_PATTERN})\\s{0,5}(?:ago|before|earlier)(?=\\W|$)`,"i");class ENTimeUnitAgoFormatParser extends AbstractParserWithWordBoundaryChecking{constructor(n){super(),this.strictMode=n}innerPattern(){return this.strictMode?STRICT_PATTERN$1:PATTERN$8}innerExtract(n,s){const a=parseTimeUnits(s[1]);if(!a)return null;const h=reverseTimeUnits(a);return ParsingComponents.createRelativeFromReference(n.reference,h)}}const PATTERN$7=new RegExp(`(${TIME_UNITS_PATTERN})\\s{0,5}(?:later|after|from now|henceforth|forward|out)(?=(?:\\W|$))`,"i"),STRICT_PATTERN=new RegExp(`(${TIME_UNITS_NO_ABBR_PATTERN})\\s{0,5}(later|after|from now)(?=\\W|$)`,"i"),GROUP_NUM_TIMEUNITS=1;class ENTimeUnitLaterFormatParser extends AbstractParserWithWordBoundaryChecking{constructor(n){super(),this.strictMode=n}innerPattern(){return this.strictMode?STRICT_PATTERN:PATTERN$7}innerExtract(n,s){const a=parseTimeUnits(s[GROUP_NUM_TIMEUNITS]);return a?ParsingComponents.createRelativeFromReference(n.reference,a):null}}class Filter{refine(n,s){return s.filter(a=>this.isValid(n,a))}}class MergingRefiner{refine(n,s){if(s.length<2)return s;const a=[];let h=s[0],_=null;for(let w=1;w<s.length;w++){_=s[w];const l=n.text.substring(h.index+h.text.length,_.index);if(!this.shouldMergeResults(l,h,_,n))a.push(h),h=_;else{const u=h,f=_,y=this.mergeResults(l,u,f,n);n.debug(()=>{console.log(`${this.constructor.name} merged ${u} and ${f} into ${y}`)}),h=y}}return h!=null&&a.push(h),a}}class AbstractMergeDateRangeRefiner extends MergingRefiner{shouldMergeResults(n,s,a){return!s.end&&!a.end&&n.match(this.patternBetween())!=null}mergeResults(n,s,a){if(!s.start.isOnlyWeekdayComponent()&&!a.start.isOnlyWeekdayComponent()&&(a.start.getCertainComponents().forEach(_=>{s.start.isCertain(_)||s.start.imply(_,a.start.get(_))}),s.start.getCertainComponents().forEach(_=>{a.start.isCertain(_)||a.start.imply(_,s.start.get(_))})),s.start.date().getTime()>a.start.date().getTime()){let _=s.start.dayjs(),w=a.start.dayjs();a.start.isOnlyWeekdayComponent()&&w.add(7,"days").isAfter(_)?(w=w.add(7,"days"),a.start.imply("day",w.date()),a.start.imply("month",w.month()+1),a.start.imply("year",w.year())):s.start.isOnlyWeekdayComponent()&&_.add(-7,"days").isBefore(w)?(_=_.add(-7,"days"),s.start.imply("day",_.date()),s.start.imply("month",_.month()+1),s.start.imply("year",_.year())):a.start.isDateWithUnknownYear()&&w.add(1,"years").isAfter(_)?(w=w.add(1,"years"),a.start.imply("year",w.year())):s.start.isDateWithUnknownYear()&&_.add(-1,"years").isBefore(w)?(_=_.add(-1,"years"),s.start.imply("year",_.year())):[a,s]=[s,a]}const h=s.clone();return h.start=s.start,h.end=a.start,h.index=Math.min(s.index,a.index),s.index<a.index?h.text=s.text+n+a.text:h.text=a.text+n+s.text,h}}class ENMergeDateRangeRefiner extends AbstractMergeDateRangeRefiner{patternBetween(){return/^\s*(to|-|–|until|through|till)\s*$/i}}function mergeDateTimeResult(i,n){const s=i.clone(),a=i.start,h=n.start;if(s.start=mergeDateTimeComponent(a,h),i.end!=null||n.end!=null){const _=i.end==null?i.start:i.end,w=n.end==null?n.start:n.end,l=mergeDateTimeComponent(_,w);if(i.end==null&&l.date().getTime()<s.start.date().getTime()){const u=l.dayjs().add(1,"day");l.isCertain("day")?assignSimilarDate(l,u):implySimilarDate$1(l,u)}s.end=l}return s}function mergeDateTimeComponent(i,n){const s=i.clone();return n.isCertain("hour")?(s.assign("hour",n.get("hour")),s.assign("minute",n.get("minute")),n.isCertain("second")?(s.assign("second",n.get("second")),n.isCertain("millisecond")?s.assign("millisecond",n.get("millisecond")):s.imply("millisecond",n.get("millisecond"))):(s.imply("second",n.get("second")),s.imply("millisecond",n.get("millisecond")))):(s.imply("hour",n.get("hour")),s.imply("minute",n.get("minute")),s.imply("second",n.get("second")),s.imply("millisecond",n.get("millisecond"))),n.isCertain("timezoneOffset")&&s.assign("timezoneOffset",n.get("timezoneOffset")),n.isCertain("meridiem")?s.assign("meridiem",n.get("meridiem")):n.get("meridiem")!=null&&s.get("meridiem")==null&&s.imply("meridiem",n.get("meridiem")),s.get("meridiem")==Meridiem.PM&&s.get("hour")<12&&(n.isCertain("hour")?s.assign("hour",s.get("hour")+12):s.imply("hour",s.get("hour")+12)),s.addTags(i.tags()),s.addTags(n.tags()),s}class AbstractMergeDateTimeRefiner extends MergingRefiner{shouldMergeResults(n,s,a){return(s.start.isOnlyDate()&&a.start.isOnlyTime()||a.start.isOnlyDate()&&s.start.isOnlyTime())&&n.match(this.patternBetween())!=null}mergeResults(n,s,a){const h=s.start.isOnlyDate()?mergeDateTimeResult(s,a):mergeDateTimeResult(a,s);return h.index=s.index,h.text=s.text+n+a.text,h}}class ENMergeDateTimeRefiner extends AbstractMergeDateTimeRefiner{patternBetween(){return new RegExp("^\\s*(T|at|after|before|on|of|,|-|\\.|∙|:)?\\s*$")}}const TIMEZONE_NAME_PATTERN=new RegExp("^\\s*,?\\s*\\(?([A-Z]{2,4})\\)?(?=\\W|$)","i");class ExtractTimezoneAbbrRefiner{constructor(n){this.timezoneOverrides=n}refine(n,s){const a=n.option.timezones??{};return s.forEach(h=>{const _=n.text.substring(h.index+h.text.length),w=TIMEZONE_NAME_PATTERN.exec(_);if(!w)return;const l=w[1].toUpperCase(),u=h.start.date()??h.refDate??new Date,f={...this.timezoneOverrides,...a},y=toTimezoneOffset(l,u,f);if(y==null)return;n.debug(()=>{console.log(`Extracting timezone: '${l}' into: ${y} for: ${h.start}`)});const p=h.start.get("timezoneOffset");p!==null&&y!=p&&(h.start.isCertain("timezoneOffset")||l!=w[1])||h.start.isOnlyDate()&&l!=w[1]||(h.text+=w[0],h.start.isCertain("timezoneOffset")||h.start.assign("timezoneOffset",y),h.end!=null&&!h.end.isCertain("timezoneOffset")&&h.end.assign("timezoneOffset",y))}),s}}const TIMEZONE_OFFSET_PATTERN=new RegExp("^\\s*(?:\\(?(?:GMT|UTC)\\s?)?([+-])(\\d{1,2})(?::?(\\d{2}))?\\)?","i"),TIMEZONE_OFFSET_SIGN_GROUP=1,TIMEZONE_OFFSET_HOUR_OFFSET_GROUP=2,TIMEZONE_OFFSET_MINUTE_OFFSET_GROUP=3;class ExtractTimezoneOffsetRefiner{refine(n,s){return s.forEach(function(a){if(a.start.isCertain("timezoneOffset"))return;const h=n.text.substring(a.index+a.text.length),_=TIMEZONE_OFFSET_PATTERN.exec(h);if(!_)return;n.debug(()=>{console.log(`Extracting timezone: '${_[0]}' into : ${a}`)});const w=parseInt(_[TIMEZONE_OFFSET_HOUR_OFFSET_GROUP]),l=parseInt(_[TIMEZONE_OFFSET_MINUTE_OFFSET_GROUP]||"0");let u=w*60+l;u>14*60||(_[TIMEZONE_OFFSET_SIGN_GROUP]==="-"&&(u=-u),a.end!=null&&a.end.assign("timezoneOffset",u),a.start.assign("timezoneOffset",u),a.text+=_[0])}),s}}class OverlapRemovalRefiner{refine(n,s){if(s.length<2)return s;const a=[];let h=s[0];for(let _=1;_<s.length;_++){const w=s[_];if(w.index>=h.index+h.text.length){a.push(h),h=w;continue}let l=null,u=null;w.text.length>h.text.length?(l=w,u=h):(l=h,u=w),n.debug(()=>{console.log(`${this.constructor.name} remove ${u} by ${l}`)}),h=l}return h!=null&&a.push(h),a}}function implySimilarDate(i,n){i.imply("day",n.getDate()),i.imply("month",n.getMonth()+1),i.imply("year",n.getFullYear())}class ForwardDateRefiner{refine(n,s){return n.option.forwardDate&&s.forEach(a=>{let h=dayjs(n.reference.getDateWithAdjustedTimezone());if(a.start.isOnlyTime()&&n.reference.instant>a.start.date()){const _=n.reference.getDateWithAdjustedTimezone(),w=new Date(_);w.setDate(w.getDate()+1),implySimilarDate(a.start,w),n.debug(()=>{console.log(`${this.constructor.name} adjusted ${a} time from the ref date (${_}) to the following day (${w})`)}),a.end&&a.end.isOnlyTime()&&(implySimilarDate(a.end,w),a.start.date()>a.end.date()&&(w.setDate(w.getDate()+1),implySimilarDate(a.end,w)))}if(a.start.isOnlyWeekdayComponent()&&h.isAfter(a.start.dayjs())&&(h.day()>=a.start.get("weekday")?h=h.day(a.start.get("weekday")+7):h=h.day(a.start.get("weekday")),a.start.imply("day",h.date()),a.start.imply("month",h.month()+1),a.start.imply("year",h.year()),n.debug(()=>{console.log(`${this.constructor.name} adjusted ${a} weekday (${a.start})`)}),a.end&&a.end.isOnlyWeekdayComponent()&&(h.day()>a.end.get("weekday")?h=h.day(a.end.get("weekday")+7):h=h.day(a.end.get("weekday")),a.end.imply("day",h.date()),a.end.imply("month",h.month()+1),a.end.imply("year",h.year()),n.debug(()=>{console.log(`${this.constructor.name} adjusted ${a} weekday (${a.end})`)}))),a.start.isDateWithUnknownYear()&&h.isAfter(a.start.dayjs()))for(let _=0;_<3&&h.isAfter(a.start.dayjs());_++)a.start.imply("year",a.start.get("year")+1),n.debug(()=>{console.log(`${this.constructor.name} adjusted ${a} year (${a.start})`)}),a.end&&!a.end.isCertain("year")&&(a.end.imply("year",a.end.get("year")+1),n.debug(()=>{console.log(`${this.constructor.name} adjusted ${a} month (${a.start})`)}))}),s}}class UnlikelyFormatFilter extends Filter{constructor(n){super(),this.strictMode=n}isValid(n,s){return s.text.replace(" ","").match(/^\d*(\.\d*)?$/)?(n.debug(()=>{console.log(`Removing unlikely result '${s.text}'`)}),!1):s.start.isValidDate()?s.end&&!s.end.isValidDate()?(n.debug(()=>{console.log(`Removing invalid result: ${s} (${s.end})`)}),!1):this.strictMode?this.isStrictModeValid(n,s):!0:(n.debug(()=>{console.log(`Removing invalid result: ${s} (${s.start})`)}),!1)}isStrictModeValid(n,s){return s.start.isOnlyWeekdayComponent()?(n.debug(()=>{console.log(`(Strict) Removing weekday only component: ${s} (${s.end})`)}),!1):s.start.isOnlyTime()&&(!s.start.isCertain("hour")||!s.start.isCertain("minute"))?(n.debug(()=>{console.log(`(Strict) Removing uncertain time component: ${s} (${s.end})`)}),!1):!0}}const PATTERN$6=new RegExp("([0-9]{4})\\-([0-9]{1,2})\\-([0-9]{1,2})(?:T([0-9]{1,2}):([0-9]{1,2})(?::([0-9]{1,2})(?:\\.(\\d{1,4}))?)?(Z|([+-]\\d{2}):?(\\d{2})?)?)?(?=\\W|$)","i"),YEAR_NUMBER_GROUP=1,MONTH_NUMBER_GROUP=2,DATE_NUMBER_GROUP=3,HOUR_NUMBER_GROUP=4,MINUTE_NUMBER_GROUP=5,SECOND_NUMBER_GROUP=6,MILLISECOND_NUMBER_GROUP=7,TZD_GROUP=8,TZD_HOUR_OFFSET_GROUP=9,TZD_MINUTE_OFFSET_GROUP=10;class ISOFormatParser extends AbstractParserWithWordBoundaryChecking{innerPattern(){return PATTERN$6}innerExtract(n,s){const a=n.createParsingComponents({year:parseInt(s[YEAR_NUMBER_GROUP]),month:parseInt(s[MONTH_NUMBER_GROUP]),day:parseInt(s[DATE_NUMBER_GROUP])});if(s[HOUR_NUMBER_GROUP]!=null&&(a.assign("hour",parseInt(s[HOUR_NUMBER_GROUP])),a.assign("minute",parseInt(s[MINUTE_NUMBER_GROUP])),s[SECOND_NUMBER_GROUP]!=null&&a.assign("second",parseInt(s[SECOND_NUMBER_GROUP])),s[MILLISECOND_NUMBER_GROUP]!=null&&a.assign("millisecond",parseInt(s[MILLISECOND_NUMBER_GROUP])),s[TZD_GROUP]!=null)){let h=0;if(s[TZD_HOUR_OFFSET_GROUP]){const _=parseInt(s[TZD_HOUR_OFFSET_GROUP]);let w=0;s[TZD_MINUTE_OFFSET_GROUP]!=null&&(w=parseInt(s[TZD_MINUTE_OFFSET_GROUP])),h=_*60,h<0?h-=w:h+=w}a.assign("timezoneOffset",h)}return a.addTag("parser/ISOFormatParser")}}class MergeWeekdayComponentRefiner extends MergingRefiner{mergeResults(n,s,a){const h=a.clone();return h.index=s.index,h.text=s.text+n+h.text,h.start.assign("weekday",s.start.get("weekday")),h.end&&h.end.assign("weekday",s.start.get("weekday")),h}shouldMergeResults(n,s,a){return s.start.isOnlyWeekdayComponent()&&!s.start.isCertain("hour")&&a.start.isCertain("day")&&n.match(/^,?\s*$/)!=null}}function includeCommonConfiguration(i,n=!1){return i.parsers.unshift(new ISOFormatParser),i.refiners.unshift(new MergeWeekdayComponentRefiner),i.refiners.unshift(new ExtractTimezoneOffsetRefiner),i.refiners.unshift(new OverlapRemovalRefiner),i.refiners.push(new ExtractTimezoneAbbrRefiner),i.refiners.push(new OverlapRemovalRefiner),i.refiners.push(new ForwardDateRefiner),i.refiners.push(new UnlikelyFormatFilter(n)),i}function now(i){const n=dayjs(i.getDateWithAdjustedTimezone()),s=new ParsingComponents(i,{});return assignSimilarDate(s,n),assignSimilarTime(s,n),s.assign("timezoneOffset",i.getTimezoneOffset()),s.addTag("casualReference/now"),s}function today(i){const n=dayjs(i.getDateWithAdjustedTimezone()),s=new ParsingComponents(i,{});return assignSimilarDate(s,n),implySimilarTime(s,n),s.addTag("casualReference/today"),s}function yesterday(i){return theDayBefore(i).addTag("casualReference/yesterday")}function theDayBefore(i,n){return theDayAfter(i,-1)}function tomorrow(i){return theDayAfter(i,1).addTag("casualReference/tomorrow")}function theDayAfter(i,n){let s=dayjs(i.getDateWithAdjustedTimezone());const a=new ParsingComponents(i,{});return s=s.add(n,"day"),assignSimilarDate(a,s),implySimilarTime(a,s),a}function tonight(i,n=22){const s=dayjs(i.getDateWithAdjustedTimezone()),a=new ParsingComponents(i,{});return assignSimilarDate(a,s),a.imply("hour",n),a.imply("meridiem",Meridiem.PM),a.addTag("casualReference/tonight"),a}function evening(i,n=20){const s=new ParsingComponents(i,{});return s.imply("meridiem",Meridiem.PM),s.imply("hour",n),s.addTag("casualReference/evening"),s}function midnight(i){const n=new ParsingComponents(i,{}),s=dayjs(i.getDateWithAdjustedTimezone());return s.hour()>2&&implyTheNextDay(n,s),n.assign("hour",0),n.imply("minute",0),n.imply("second",0),n.imply("millisecond",0),n.addTag("casualReference/midnight"),n}function morning(i,n=6){const s=new ParsingComponents(i,{});return s.imply("meridiem",Meridiem.AM),s.imply("hour",n),s.imply("minute",0),s.imply("second",0),s.imply("millisecond",0),s.addTag("casualReference/morning"),s}function afternoon(i,n=15){const s=new ParsingComponents(i,{});return s.imply("meridiem",Meridiem.PM),s.imply("hour",n),s.imply("minute",0),s.imply("second",0),s.imply("millisecond",0),s.addTag("casualReference/afternoon"),s}function noon(i){const n=new ParsingComponents(i,{});return n.imply("meridiem",Meridiem.AM),n.imply("hour",12),n.imply("minute",0),n.imply("second",0),n.imply("millisecond",0),n.addTag("casualReference/noon"),n}const PATTERN$5=/(now|today|tonight|tomorrow|overmorrow|tmr|tmrw|yesterday|last\s*night)(?=\W|$)/i;class ENCasualDateParser extends AbstractParserWithWordBoundaryChecking{innerPattern(n){return PATTERN$5}innerExtract(n,s){let a=dayjs(n.refDate);const h=s[0].toLowerCase();let _=n.createParsingComponents();switch(h){case"now":_=now(n.reference);break;case"today":_=today(n.reference);break;case"yesterday":_=yesterday(n.reference);break;case"tomorrow":case"tmr":case"tmrw":_=tomorrow(n.reference);break;case"tonight":_=tonight(n.reference);break;case"overmorrow":_=theDayAfter(n.reference,2);break;default:h.match(/last\s*night/)&&(a.hour()>6&&(a=a.add(-1,"day")),assignSimilarDate(_,a),_.imply("hour",0));break}return _.addTag("parser/ENCasualDateParser"),_}}const PATTERN$4=/(?:this)?\s{0,3}(morning|afternoon|evening|night|midnight|midday|noon)(?=\W|$)/i;class ENCasualTimeParser extends AbstractParserWithWordBoundaryChecking{innerPattern(){return PATTERN$4}innerExtract(n,s){let a=null;switch(s[1].toLowerCase()){case"afternoon":a=afternoon(n.reference);break;case"evening":case"night":a=evening(n.reference);break;case"midnight":a=midnight(n.reference);break;case"morning":a=morning(n.reference);break;case"noon":case"midday":a=noon(n.reference);break}return a&&a.addTag("parser/ENCasualTimeParser"),a}}function createParsingComponentsAtWeekday(i,n,s){const a=i.getDateWithAdjustedTimezone(),h=getDaysToWeekday(a,n,s);let _=new ParsingComponents(i);return _=addImpliedTimeUnits(_,{day:h}),_.assign("weekday",n),_}function getDaysToWeekday(i,n,s){const a=i.getDay();switch(s){case"this":return getDaysForwardToWeekday(i,n);case"last":return getBackwardDaysToWeekday(i,n);case"next":return a==Weekday.SUNDAY?n==Weekday.SUNDAY?7:n:a==Weekday.SATURDAY?n==Weekday.SATURDAY?7:n==Weekday.SUNDAY?8:1+n:n<a&&n!=Weekday.SUNDAY?getDaysForwardToWeekday(i,n):getDaysForwardToWeekday(i,n)+7}return getDaysToWeekdayClosest(i,n)}function getDaysToWeekdayClosest(i,n){const s=getBackwardDaysToWeekday(i,n),a=getDaysForwardToWeekday(i,n);return a<-s?a:s}function getDaysForwardToWeekday(i,n){const s=i.getDay();let a=n-s;return a<0&&(a+=7),a}function getBackwardDaysToWeekday(i,n){const s=i.getDay();let a=n-s;return a>=0&&(a-=7),a}const PATTERN$3=new RegExp(`(?:(?:\\,|\\(|\\（)\\s*)?(?:on\\s*?)?(?:(this|last|past|next)\\s*)?(${matchAnyPattern(WEEKDAY_DICTIONARY)}|weekend|weekday)(?:\\s*(?:\\,|\\)|\\）))?(?:\\s*(this|last|past|next)\\s*week)?(?=\\W|$)`,"i"),PREFIX_GROUP=1,WEEKDAY_GROUP=2,POSTFIX_GROUP=3;class ENWeekdayParser extends AbstractParserWithWordBoundaryChecking{innerPattern(){return PATTERN$3}innerExtract(n,s){const a=s[PREFIX_GROUP],h=s[POSTFIX_GROUP];let _=a||h;_=_||"",_=_.toLowerCase();let w=null;_=="last"||_=="past"?w="last":_=="next"?w="next":_=="this"&&(w="this");const l=s[WEEKDAY_GROUP].toLowerCase();let u;if(WEEKDAY_DICTIONARY[l]!==void 0)u=WEEKDAY_DICTIONARY[l];else if(l=="weekend")u=w=="last"?Weekday.SUNDAY:Weekday.SATURDAY;else if(l=="weekday"){const f=n.reference.getDateWithAdjustedTimezone().getDay();f==Weekday.SUNDAY||f==Weekday.SATURDAY?u=w=="last"?Weekday.FRIDAY:Weekday.MONDAY:(u=f-1,u=w=="last"?u-1:u+1,u=u%5+1)}else return null;return createParsingComponentsAtWeekday(n.reference,u,w)}}const PATTERN$2=new RegExp(`(this|last|past|next|after\\s*this)\\s*(${matchAnyPattern(TIME_UNIT_DICTIONARY)})(?=\\s*)(?=\\W|$)`,"i"),MODIFIER_WORD_GROUP=1,RELATIVE_WORD_GROUP=2;class ENRelativeDateFormatParser extends AbstractParserWithWordBoundaryChecking{innerPattern(){return PATTERN$2}innerExtract(n,s){const a=s[MODIFIER_WORD_GROUP].toLowerCase(),h=s[RELATIVE_WORD_GROUP].toLowerCase(),_=TIME_UNIT_DICTIONARY[h];if(a=="next"||a.startsWith("after")){const u={};return u[_]=1,ParsingComponents.createRelativeFromReference(n.reference,u)}if(a=="last"||a=="past"){const u={};return u[_]=-1,ParsingComponents.createRelativeFromReference(n.reference,u)}const w=n.createParsingComponents();let l=dayjs(n.reference.instant);return h.match(/week/i)?(l=l.add(-l.get("d"),"d"),w.imply("day",l.date()),w.imply("month",l.month()+1),w.imply("year",l.year())):h.match(/month/i)?(l=l.add(-l.date()+1,"d"),w.imply("day",l.date()),w.assign("year",l.year()),w.assign("month",l.month()+1)):h.match(/year/i)&&(l=l.add(-l.date()+1,"d"),l=l.add(-l.month(),"month"),w.imply("day",l.date()),w.imply("month",l.month()+1),w.assign("year",l.year())),w}}const PATTERN$1=new RegExp("([^\\d]|^)([0-3]{0,1}[0-9]{1})[\\/\\.\\-]([0-3]{0,1}[0-9]{1})(?:[\\/\\.\\-]([0-9]{4}|[0-9]{2}))?(\\W|$)","i"),OPENING_GROUP=1,ENDING_GROUP=5,FIRST_NUMBERS_GROUP=2,SECOND_NUMBERS_GROUP=3,YEAR_GROUP$1=4;class SlashDateFormatParser{constructor(n){this.groupNumberMonth=n?SECOND_NUMBERS_GROUP:FIRST_NUMBERS_GROUP,this.groupNumberDay=n?FIRST_NUMBERS_GROUP:SECOND_NUMBERS_GROUP}pattern(){return PATTERN$1}extract(n,s){const a=s.index+s[OPENING_GROUP].length,h=s.index+s[0].length-s[ENDING_GROUP].length;if(a>0&&n.text.substring(0,a).match("\\d/?$")||h<n.text.length&&n.text.substring(h).match("^/?\\d"))return;const _=n.text.substring(a,h);if(_.match(/^\d\.\d$/)||_.match(/^\d\.\d{1,2}\.\d{1,2}\s*$/)||!s[YEAR_GROUP$1]&&_.indexOf("/")<0)return;const w=n.createParsingResult(a,_);let l=parseInt(s[this.groupNumberMonth]),u=parseInt(s[this.groupNumberDay]);if((l<1||l>12)&&l>12)if(u>=1&&u<=12&&l<=31)[u,l]=[l,u];else return null;if(u<1||u>31)return null;if(w.start.assign("day",u),w.start.assign("month",l),s[YEAR_GROUP$1]){const f=parseInt(s[YEAR_GROUP$1]),y=findMostLikelyADYear(f);w.start.assign("year",y)}else{const f=findYearClosestToRef(n.refDate,u,l);w.start.imply("year",f)}return w.addTag("parser/SlashDateFormatParser")}}const PATTERN=new RegExp(`(this|last|past|next|after|\\+|-)\\s*(${TIME_UNITS_PATTERN})(?=\\W|$)`,"i"),PATTERN_NO_ABBR=new RegExp(`(this|last|past|next|after|\\+|-)\\s*(${TIME_UNITS_NO_ABBR_PATTERN})(?=\\W|$)`,"i");class ENTimeUnitCasualRelativeFormatParser extends AbstractParserWithWordBoundaryChecking{constructor(n=!0){super(),this.allowAbbreviations=n}innerPattern(){return this.allowAbbreviations?PATTERN:PATTERN_NO_ABBR}innerExtract(n,s){const a=s[1].toLowerCase();let h=parseTimeUnits(s[2]);if(!h)return null;switch(a){case"last":case"past":case"-":h=reverseTimeUnits(h);break}return ParsingComponents.createRelativeFromReference(n.reference,h)}}function IsPositiveFollowingReference(i){return i.text.match(/^[+-]/i)!=null}function IsNegativeFollowingReference(i){return i.text.match(/^-/i)!=null}class ENMergeRelativeAfterDateRefiner extends MergingRefiner{shouldMergeResults(n,s,a){return n.match(/^\s*$/i)?IsPositiveFollowingReference(a)||IsNegativeFollowingReference(a):!1}mergeResults(n,s,a,h){let _=parseTimeUnits(a.text);IsNegativeFollowingReference(a)&&(_=reverseTimeUnits(_));const w=ParsingComponents.createRelativeFromReference(new ReferenceWithTimezone(s.start.date()),_);return new ParsingResult(s.reference,s.index,`${s.text}${n}${a.text}`,w)}}function hasImpliedEarlierReferenceDate(i){return i.text.match(/\s+(before|from)$/i)!=null}function hasImpliedLaterReferenceDate(i){return i.text.match(/\s+(after|since)$/i)!=null}class ENMergeRelativeFollowByDateRefiner extends MergingRefiner{patternBetween(){return/^\s*$/i}shouldMergeResults(n,s,a){return!n.match(this.patternBetween())||!hasImpliedEarlierReferenceDate(s)&&!hasImpliedLaterReferenceDate(s)?!1:!!a.start.get("day")&&!!a.start.get("month")&&!!a.start.get("year")}mergeResults(n,s,a){let h=parseTimeUnits(s.text);hasImpliedEarlierReferenceDate(s)&&(h=reverseTimeUnits(h));const _=ParsingComponents.createRelativeFromReference(new ReferenceWithTimezone(a.start.date()),h);return new ParsingResult(a.reference,s.index,`${s.text}${n}${a.text}`,_)}}const YEAR_SUFFIX_PATTERN=new RegExp(`^\\s*(${YEAR_PATTERN})`,"i"),YEAR_GROUP=1;class ENExtractYearSuffixRefiner{refine(n,s){return s.forEach(function(a){if(!a.start.isDateWithUnknownYear())return;const h=n.text.substring(a.index+a.text.length),_=YEAR_SUFFIX_PATTERN.exec(h);if(!_)return;n.debug(()=>{console.log(`Extracting year: '${_[0]}' into : ${a}`)});const w=parseYear(_[YEAR_GROUP]);a.end!=null&&a.end.assign("year",w),a.start.assign("year",w),a.text+=_[0]}),s}}class ENUnlikelyFormatFilter extends Filter{constructor(){super()}isValid(n,s){const a=s.text.trim();return a===n.text.trim()?!0:a.toLowerCase()==="may"&&!n.text.substring(0,s.index).trim().match(/\b(in)$/i)?(n.debug(()=>{console.log(`Removing unlikely result: ${s}`)}),!1):a.toLowerCase().endsWith("the second")?(n.text.substring(s.index+s.text.length).trim().length>0&&n.debug(()=>{console.log(`Removing unlikely result: ${s}`)}),!1):!0}}class ENDefaultConfiguration{createCasualConfiguration(n=!1){const s=this.createConfiguration(!1,n);return s.parsers.push(new ENCasualDateParser),s.parsers.push(new ENCasualTimeParser),s.parsers.push(new ENMonthNameParser),s.parsers.push(new ENRelativeDateFormatParser),s.parsers.push(new ENTimeUnitCasualRelativeFormatParser),s.refiners.push(new ENUnlikelyFormatFilter),s}createConfiguration(n=!0,s=!1){const a=includeCommonConfiguration({parsers:[new SlashDateFormatParser(s),new ENTimeUnitWithinFormatParser(n),new ENMonthNameLittleEndianParser,new ENMonthNameMiddleEndianParser(s),new ENWeekdayParser,new ENSlashMonthFormatParser,new ENTimeExpressionParser(n),new ENTimeUnitAgoFormatParser(n),new ENTimeUnitLaterFormatParser(n)],refiners:[new ENMergeDateTimeRefiner]},n);return a.parsers.unshift(new ENYearMonthDayParser(n)),a.refiners.unshift(new ENMergeRelativeFollowByDateRefiner),a.refiners.unshift(new ENMergeRelativeAfterDateRefiner),a.refiners.unshift(new OverlapRemovalRefiner),a.refiners.push(new ENMergeDateTimeRefiner),a.refiners.push(new ENExtractYearSuffixRefiner),a.refiners.push(new ENMergeDateRangeRefiner),a}}class Chrono{constructor(n){this.defaultConfig=new ENDefaultConfiguration,n=n||this.defaultConfig.createCasualConfiguration(),this.parsers=[...n.parsers],this.refiners=[...n.refiners]}clone(){return new Chrono({parsers:[...this.parsers],refiners:[...this.refiners]})}parseDate(n,s,a){const h=this.parse(n,s,a);return h.length>0?h[0].start.date():null}parse(n,s,a){const h=new ParsingContext(n,s,a);let _=[];return this.parsers.forEach(w=>{const l=Chrono.executeParser(h,w);_=_.concat(l)}),_.sort((w,l)=>w.index-l.index),this.refiners.forEach(function(w){_=w.refine(h,_)}),_}static executeParser(n,s){const a=[],h=s.pattern(n),_=n.text;let w=n.text,l=h.exec(w);for(;l;){const u=l.index+_.length-w.length;l.index=u;const f=s.extract(n,l);if(!f){w=_.substring(l.index+1),l=h.exec(w);continue}let y=null;f instanceof ParsingResult?y=f:f instanceof ParsingComponents?(y=n.createParsingResult(l.index,l[0]),y.start=f):y=n.createParsingResult(l.index,l[0],f);const p=y.index,C=y.text;n.debug(()=>console.log(`${s.constructor.name} extracted (at index=${p}) '${C}'`)),a.push(y),w=_.substring(p+C.length),l=h.exec(w)}return a}}class ParsingContext{constructor(n,s,a){this.text=n,this.reference=new ReferenceWithTimezone(s),this.option=a??{},this.refDate=this.reference.instant}createParsingComponents(n){return n instanceof ParsingComponents?n:new ParsingComponents(this.reference,n)}createParsingResult(n,s,a,h){const _=typeof s=="string"?s:this.text.substring(n,s),w=a?this.createParsingComponents(a):null,l=h?this.createParsingComponents(h):null;return new ParsingResult(this.reference,n,_,w,l)}debug(n){this.option.debug&&(this.option.debug instanceof Function?this.option.debug(n):this.option.debug.debug(n))}}const configuration=new ENDefaultConfiguration,casual$1=new Chrono(configuration.createCasualConfiguration(!1));new Chrono(configuration.createConfiguration(!0,!1));new Chrono(configuration.createCasualConfiguration(!0));const casual=casual$1;function parseDate(i,n,s){return casual.parseDate(i,n,s)}function addEvent(i){const n=i.match(/add\s+['"](.+?)['"]/i),s=n?n[1]:i,a=parseDate(i)||new Date,h={id:Date.now().toString(),title:s,datetime:a.toISOString()},_=JSON.parse(localStorage.getItem("os_events")||"[]");return localStorage.setItem("os_events",JSON.stringify([..._,h])),h}function getEvents(i,n){return JSON.parse(localStorage.getItem("os_events")||"[]").filter(a=>{const h=new Date(a.datetime);return h>=i&&h<=n})}let lastIntent=null,lastLocation=null;const HF_TOKEN=localStorage.getItem("nexa_hf_token")||"";localStorage.getItem("nexa_gemini_key");const DEFAULT_MODEL_ID="meta-llama/Llama-4-Scout-17B-16E-Instruct";function getSelectedModel(){return localStorage.getItem("nexa_model")||DEFAULT_MODEL_ID}async function askAIStream(i,n,s,a){var h;try{const w=await(await fetch(`https://api-inference.huggingface.co/models/${getSelectedModel()}`,{method:"POST",headers:{Authorization:`Bearer ${HF_TOKEN}`,"Content-Type":"application/json"},body:JSON.stringify({inputs:i})})).json();let l="";Array.isArray(w)&&((h=w[0])!=null&&h.generated_text)?l=w[0].generated_text:typeof w=="object"&&w.generated_text?l=w.generated_text:l=JSON.stringify(w),n(l),s(l)}catch(_){a==null||a(_)}}async function askAI(i,n=!1){var ie,le,_e,V,Z,se,te,ce,he,ke,Ie,He,tt,Ae,bt,It,xt,gt,kt,Ze,Tt,Ye,jt,Nt,it,Dt,rt,Qe,Ne,Ge,Pt,me,Ee;const s=i.match(/^open (.+)$/i);if(s){const ee=s[1].trim();return window.dispatchEvent(new CustomEvent("nexa-open-app",{detail:{appName:ee}})),`✅ Opening app: ${ee}`}const a=i.match(/^search files for (.+)$/i);if(a){const ee=a[1].trim();return window.dispatchEvent(new CustomEvent("nexa-search-files",{detail:{term:ee}})),`🔍 Searching files for: ${ee}`}const h=i.match(/^change setting ([^ ]+) to (.+)$/i);if(h){const ee=h[1],re=h[2];return window.dispatchEvent(new CustomEvent("nexa-change-setting",{detail:{setting:ee,value:re}})),`⚙️ Changed setting '${ee}' to '${re}'.`}if(i=i.trim(),n)try{const re=await(await fetch(`https://api-inference.huggingface.co/models/${getSelectedModel()}`,{method:"POST",headers:{Authorization:`Bearer ${HF_TOKEN}`,"Content-Type":"application/json"},body:JSON.stringify({inputs:i})})).json();let ue="";return Array.isArray(re)&&((ie=re[0])!=null&&ie.generated_text)?ue=re[0].generated_text:typeof re=="object"&&re.generated_text?ue=re.generated_text:ue=JSON.stringify(re),ue}catch{return"Sorry, I couldn't get a response from the AI model."}i=i.replace(/^[“”"'`]+|[“”"'`]+$/g,"").trim();let _=i.match(/(?:show|give|get|display)(?: me)? (?:an|some)? (?:images?|pictures?|photos?|pics?)(?: of)? (.+)/i)||i.match(/(?:images?|pictures?|photos?|pics?) of (.+)/i);if(!_){const ee=i.match(/^(.+?) (?:images?|pictures?|photos?|pics?)$/i);ee&&(_=ee)}if(_){const re=_[1].trim().replace(/^(?:an?|the)\s+/i,""),ue="DYtQlcsOWToBLkFv5NXF2vv4GxZhrE18uCVPZlvZI063KUe4PG4K6ZQg";try{const xe=[re,re.endsWith("s")?re:re+"s"];for(const be of xe){const De=await fetch(`https://api.pexels.com/v1/search?query=${encodeURIComponent(be)}&per_page=10`,{headers:{Authorization:ue}}).then(ct=>ct.json());console.debug("Pexels search for",be,De);const Oe=Array.isArray(De.photos)?De.photos.slice().sort(()=>Math.random()-.5):[];if(Oe.length){lastIntent="image";const ct=((_e=(le=Oe.find(yt=>{var Ke,fn;return((Ke=yt.src)==null?void 0:Ke.original)||((fn=yt.src)==null?void 0:fn.large)}))==null?void 0:le.src)==null?void 0:_e.original)||((Z=(V=Oe.find(yt=>{var Ke;return(Ke=yt.src)==null?void 0:Ke.large}))==null?void 0:V.src)==null?void 0:Z.large);if(ct)return ct}}}catch(xe){console.error("Pexels fetch error:",xe)}try{const xe=await fetch(`https://en.wikipedia.org/api/rest_v1/page/summary/${encodeURIComponent(re)}`).then(Ke=>Ke.json()),be=(se=xe.originalimage)==null?void 0:se.source,De=(te=xe.thumbnail)==null?void 0:te.source;let Oe=be||De;if(!be&&De){const Ke=De.match(/^(https:\/\/upload\.wikimedia\.org\/wikipedia\/commons)\/thumb\/(.+?)\/\d+px-.*$/);Ke&&(Oe=`${Ke[1]}/${Ke[2]}`)}if(Oe)return lastIntent="image",Oe;const yt=(ce=(await fetch(`https://en.wikipedia.org/api/rest_v1/page/media-list/${encodeURIComponent(re)}`).then(Ke=>Ke.json())).items)==null?void 0:ce.find(Ke=>Ke.type==="image"&&Array.isArray(Ke.srcset));if((he=yt==null?void 0:yt.srcset)!=null&&he.length){const Ke=yt.srcset;return Oe=Ke[Ke.length-1].src,lastIntent="image",Oe}}catch{}return`Sorry, I couldn't find an image for "${re}".`}if(/weather/i.test(i)&&/\b(there|here|it)\b/i.test(i)&&lastLocation){const ee=lastLocation;try{const re=await fetch(`https://nominatim.openstreetmap.org/search?q=${encodeURIComponent(ee)}&format=json&limit=1`).then(ue=>ue.json());if(Array.isArray(re)&&re.length>0){const{lat:ue,lon:xe}=re[0],De=(await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${ue}&longitude=${xe}&current_weather=true`).then(Oe=>Oe.json())).current_weather;return lastIntent="weather",`Current in ${ee}: ${De.temperature}°C, wind ${De.windspeed} km/h.`}}catch{}return`Sorry, I couldn't find location "${ee}".`}if(/time/i.test(i)&&/\b(there|here|it)\b/i.test(i)&&lastLocation){const ee=lastLocation;try{const re=await fetch(`https://nominatim.openstreetmap.org/search?q=${encodeURIComponent(ee)}&format=json&limit=1`).then(ue=>ue.json());if(Array.isArray(re)&&re.length>0){const{lat:ue,lon:xe}=re[0],De=(await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${ue}&longitude=${xe}&current_weather=true&timezone=auto`).then(ct=>ct.json())).timezone,Oe=new Date().toLocaleTimeString([],{hour:"numeric",hour12:!0,timeZone:De});return lastIntent="time",`It’s ${Oe} in ${ee}.`}}catch{}return`Sorry, I couldn't determine time for "${ee}".`}if(!i.includes(" ")&&/^[A-Za-z\s]+$/.test(i)&&lastIntent){const ee=i;if(lastIntent==="weather"){try{const re=await fetch(`https://nominatim.openstreetmap.org/search?q=${encodeURIComponent(ee)}&format=json&limit=1`).then(ue=>ue.json());if(Array.isArray(re)&&re.length>0){const{lat:ue,lon:xe}=re[0],De=(await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${ue}&longitude=${xe}&current_weather=true`).then(Oe=>Oe.json())).current_weather;return lastIntent="weather",lastLocation=ee,`Current in ${ee}: ${De.temperature}°C, wind ${De.windspeed} km/h.`}}catch{}return`Sorry, I couldn't find location "${ee}".`}if(lastIntent==="time"){try{const re=await fetch(`https://nominatim.openstreetmap.org/search?q=${encodeURIComponent(ee)}&format=json&limit=1`).then(ue=>ue.json());if(Array.isArray(re)&&re.length>0){const{lat:ue,lon:xe}=re[0],De=(await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${ue}&longitude=${xe}&current_weather=true&timezone=auto`).then(ct=>ct.json())).timezone,Oe=new Date().toLocaleTimeString([],{hour:"numeric",hour12:!0,timeZone:De});return lastIntent="time",lastLocation=ee,`It’s ${Oe} in ${ee}.`}}catch{}return`Sorry, I couldn't determine time for "${ee}".`}}const w=i.match(/^add\s+['"](.+?)['"]/i);if(w){const ee=addEvent(i);return window.dispatchEvent(new CustomEvent("os-notification",{detail:{title:"Calendar",message:`${ee.title} @ ${new Date(ee.datetime).toLocaleString()}`}})),`✔️ Added "${w[1]}" on ${new Date(ee.datetime).toLocaleDateString()} at ${new Date(ee.datetime).toLocaleTimeString()}`}if(/what(?:'s| is) due (?:this|) week\?/i.test(i)){const ee=new Date,re=ee.getDay(),ue=ee.getDate()-re+(re===0?-6:1),xe=new Date(ee.setDate(ue));xe.setHours(0,0,0,0);const be=new Date(xe);be.setDate(xe.getDate()+6);const De=getEvents(xe,be);return De.length?De.map(Oe=>`${new Date(Oe.datetime).toLocaleDateString()}: ${Oe.title}`).join(`
`):"No events this week."}const l=i.toLowerCase().trim();if(/^(hi|hello|hey)\b/.test(l))return"Hello there! How can I assist you today?";if(/thank(s| you)/i.test(i))return"My pleasure!";if(/\b(retry|try again)\b/i.test(l))return"Sure—what would you like me to retry?";if(/help|what can you do/i.test(l))return"I can provide weather, time, definitions, sports updates, Wikipedia summaries, jokes, quotes, and more.";if(/\b(joke)\b/i.test(l)){try{const ee=await fetch("https://official-joke-api.appspot.com/jokes/random").then(re=>re.json());return`${ee.setup} — ${ee.punchline}`}catch{}return"Sorry, I don’t have a joke right now."}if(/\b(quote|inspire me)\b/i.test(l)){try{const ee=await fetch("https://api.quotable.io/random").then(re=>re.json());return`${ee.content} —${ee.author}`}catch{}return"Sorry, I can’t fetch a quote right now."}const u=i.match(/weather in (.+)/i);if(u){const ee=u[1];lastIntent="weather",lastLocation=ee;const re=await fetch(`https://nominatim.openstreetmap.org/search?q=${encodeURIComponent(ee)}&format=json`).then(ue=>ue.json());if(re&&re.length>0){const{lat:ue,lon:xe}=re[0],De=(await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${ue}&longitude=${xe}&current_weather=true`).then(Oe=>Oe.json())).current_weather;return`Current in ${ee}: ${De.temperature}°C, wind ${De.windspeed} km/h.`}return`Sorry, I couldn't find location "${ee}".`}const f=i.match(/time\s+(?:is\s+it\s+)?(?:in|at)\s+(.+)/i);if(f){const ee=f[1].trim().replace(/[?.!]+$/,"");lastIntent="time",lastLocation=ee;try{const ue=await fetch(`https://nominatim.openstreetmap.org/search?q=${encodeURIComponent(ee)}&format=json&limit=1`).then(xe=>xe.json());if(Array.isArray(ue)&&ue.length>0){const{lat:xe,lon:be}=ue[0],Oe=(await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${xe}&longitude=${be}&current_weather=true&timezone=auto`).then(yt=>yt.json())).timezone;return`It’s ${new Date().toLocaleTimeString([],{hour:"numeric",hour12:!0,timeZone:Oe})} in ${ee}.`}}catch{}return`It’s ${new Date().toLocaleTimeString([],{hour:"numeric",hour12:!0})} right now.`}const y=i.match(/^define (.+)/i);if(y){const ee=y[1];try{const re=await fetch(`https://api.dictionaryapi.dev/api/v2/entries/en/${encodeURIComponent(ee)}`).then(ue=>ue.json());if(Array.isArray(re)&&((ke=re[0].meanings)!=null&&ke.length)){const ue=re[0].meanings[0].definitions[0].definition;return`Definition of ${ee}: ${ue}`}}catch{}return`Sorry, no definition found for "${ee}".`}const p=i.match(/(?:synonyms? of|thesaurus) (.+)/i);if(p){const ee=p[1];try{const ue=(bt=(Ae=(tt=(He=(Ie=(await fetch(`https://api.dictionaryapi.dev/api/v2/entries/en/${encodeURIComponent(ee)}`).then(xe=>xe.json()))[0])==null?void 0:Ie.meanings)==null?void 0:He[0])==null?void 0:tt.definitions)==null?void 0:Ae[0])==null?void 0:bt.synonyms;if(ue!=null&&ue.length)return`Synonyms of ${ee}: ${ue.join(", ")}`}catch{}return`Sorry, no synonyms found for "${ee}".`}const C=i.match(/(?:check grammar of|grammar check) (.+)/i);if(C){const ee=C[1];try{const re=await fetch("https://api.languagetool.org/v2/check",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:`language=en-US&text=${encodeURIComponent(ee)}`}).then(ue=>ue.json());if((It=re.matches)!=null&&It.length)return`Suggestions: ${re.matches.map(xe=>{var be;return`${ee.substr(xe.offset,xe.length)} → ${(be=xe.replacements[0])==null?void 0:be.value}`}).join("; ")}`}catch{}return"No issues found in grammar or spelling."}const T=i.match(/what (?:is|'s) ([0-9+\-*/^()%.,\s]+)\?*$/i);if(T){const ee=T[1];try{const re=await fetch(`https://api.mathjs.org/v4/?expr=${encodeURIComponent(ee)}`).then(ue=>ue.text());return`${ee.trim()} = ${re}`}catch{}}const E=i.match(/convert\s+([\d.]+)\s*(km|kilometers|m|mi|miles|kg|kilograms|lbs|pounds|°c|c|°f|f)\s+to\s+(km|kilometers|m|mi|miles|kg|kilograms|lbs|pounds|°c|c|°f|f)/i);if(E){const ee=parseFloat(E[1]),re=E[2].toLowerCase(),ue=E[3].toLowerCase();let xe;if(/km|kilometers/.test(re)&&/mi|miles/.test(ue))xe=ee/1.60934;else if(/mi|miles/.test(re)&&/km|kilometers/.test(ue))xe=ee*1.60934;else if(/kg|kilograms/.test(re)&&/lbs|pounds/.test(ue))xe=ee*2.20462;else if(/lbs|pounds/.test(re)&&/kg|kilograms/.test(ue))xe=ee/2.20462;else if(/°?c/.test(re)&&/°?f/.test(ue))xe=ee*9/5+32;else if(/°?f/.test(re)&&/°?c/.test(ue))xe=(ee-32)*5/9;else return`Cannot convert from ${re} to ${ue}.`;return`${ee} ${E[2]} = ${parseFloat(xe.toFixed(4))} ${E[3]}`}const x=i.match(/convert\s+([\d.]+)\s+([A-Za-z]{3})\s+to\s+([A-Za-z]{3})/i);if(x){const ee=x[1],re=x[2].toUpperCase(),ue=x[3].toUpperCase();try{const xe=await fetch(`https://api.exchangerate.host/convert?from=${re}&to=${ue}&amount=${ee}`).then(be=>be.json());if(xe.result!=null)return`${ee} ${re} = ${xe.result} ${ue}`}catch{}}if(/random number fact/.test(i))try{return await fetch("http://numbersapi.com/random/trivia").then(ee=>ee.text())}catch{}const c=i.match(/what happened on\s+([A-Za-z]+)\s+(\d{1,2})/i);if(c){const ee=c[1],re=c[2];try{return await fetch(`http://numbersapi.com/${ee}/${re}/date`).then(ue=>ue.text())}catch{}}const g=i.match(/how many days between\s+(.+)\s+and\s+(.+)\?/i);if(g){const ee=new Date(g[1]),re=new Date(g[2]);if(!isNaN(ee.getTime())&&!isNaN(re.getTime())){const ue=Math.abs(re.getTime()-ee.getTime());return`${Math.round(ue/(1e3*60*60*24))} days between ${ee.toDateString()} and ${re.toDateString()}.`}}const d=i.match(/base64 encode (.+)/i);if(d)return btoa(d[1]);const m=i.match(/base64 decode (.+)/i);if(m)try{return atob(m[1])}catch{}const S=i.match(/rot13 (.+)/i);if(S)return S[1].replace(/[A-Za-z]/g,ee=>{const re=ee.charCodeAt(0),ue=re>=97?97:65;return String.fromCharCode((re-ue+13)%26+ue)});const b=i.match(/reverse text (.+)/i);if(b)return b[1].split("").reverse().join("");const P=i.match(/how (?:do you )?say ['"]?(.+?)['"]? in ([A-Za-z]+)\??/i);if(P){const[,ee,re]=P,ue=re.toLowerCase(),be={french:"fr",spanish:"es",german:"de",italian:"it",portuguese:"pt"}[ue]||ue.slice(0,2);try{const Oe=(await fetch(`https://api.mymemory.translated.net/get?q=${encodeURIComponent(ee)}&langpair=en|${be}`).then(ct=>ct.json())).responseData.translatedText;return`"${ee}" in ${re} is "${Oe}"`}catch{}}const L=i.match(/translate\s+['"]?(.+?)['"]?\s+(?:in|to)\s+([A-Za-z]+)\??/i);if(L){const[,ee,re]=L,ue=re.toLowerCase(),be={french:"fr",spanish:"es",german:"de",italian:"it",portuguese:"pt"}[ue]||ue.slice(0,2);try{const Oe=(await fetch(`https://api.mymemory.translated.net/get?q=${encodeURIComponent(ee)}&langpair=en|${be}`).then(ct=>ct.json())).responseData.translatedText;return`"${ee}" in ${re} is "${Oe}"`}catch{}}const D=i.match(/define\s+(\w+)/i);if(D){const ee=D[1];try{const re=await fetch(`https://api.dictionaryapi.dev/api/v2/entries/en/${ee}`).then(De=>De.json()),ue=Array.isArray(re)?re[0]:re,xe=ue.meanings.flatMap(De=>De.definitions.map(Oe=>Oe.definition)),be=ue.meanings.flatMap(De=>De.definitions.flatMap(Oe=>Oe.synonyms||[]));return`Definition of ${ee}: ${xe[0]}.`+(be.length?` Synonyms: ${be.slice(0,5).join(", ")}.`:"")}catch{}}if(/bitcoin price|btc price/i.test(i))try{return`Bitcoin is currently trading at $${(await fetch("https://api.coindesk.com/v1/bpi/currentprice.json").then(ue=>ue.json())).bpi.USD.rate} USD.`}catch{}const N=i.match(/(capital|population|flag) of (.+)/i);if(N){const ee=N[1].toLowerCase(),re=N[2];try{const xe=(await fetch(`https://restcountries.com/v3.1/name/${encodeURIComponent(re)}?fullText=true`).then(be=>be.json()))[0];if(ee==="capital")return`${xe.name.common}'s capital is ${(xt=xe.capital)==null?void 0:xt[0]}.`;if(ee==="population")return`${xe.name.common} has a population of ${xe.population.toLocaleString()}.`;if(ee==="flag")return`Flag of ${xe.name.common}: ${xe.flags.png}`}catch{}}const I=i.match(/where is (.+)/i);if(I)try{const ee=I[1],re=await fetch(`https://nominatim.openstreetmap.org/search?q=${encodeURIComponent(ee)}&format=json`).then(ue=>ue.json());if(re.length){const ue=re[0];return`${ue.display_name} (lat: ${ue.lat}, lon: ${ue.lon})`}}catch{}const U=i.match(/tell me about (.+)/i);if(U){const ee=U[1].toLowerCase();try{const re=await fetch(`https://pokeapi.co/api/v2/pokemon/${ee}`).then(be=>be.json()),ue=re.types.map(be=>be.type.name).join(", "),xe=re.abilities.map(be=>be.ability.name).join(", ");return`${re.name.charAt(0).toUpperCase()+re.name.slice(1)} (#${re.id}) is a ${ue} type Pokémon. Abilities: ${xe}.`}catch{}}const F=i.match(/^(?:show me an? (?:image|picture) of |(?:image|picture) of )(.+)/i);if(F){const ee=F[1].trim();try{const re=await fetch(`https://en.wikipedia.org/api/rest_v1/page/summary/${encodeURIComponent(ee)}`).then(xe=>xe.json()),ue=((gt=re.originalimage)==null?void 0:gt.source)||((kt=re.thumbnail)==null?void 0:kt.source);if(ue)return ue}catch{}return`Sorry, I couldn't find an image for ${ee}.`}try{const ee=await fetch(`https://en.wikipedia.org/api/rest_v1/page/summary/${encodeURIComponent(i)}`).then(re=>re.json());if(ee.extract){const ue=ee.extract.split(". ")[0]+".";return(Ze=ee.thumbnail)!=null&&Ze.source?`${ue} ${ee.thumbnail.source}`:ue}}catch{}if(/next match/i.test(i))try{const re=(Tt=(await fetch("https://www.thesportsdb.com/api/v1/json/1/eventsnextleague.php?id=4328").then(ue=>ue.json())).events)==null?void 0:Tt[0];if(re)return`Next match: ${re.strEvent} on ${re.dateEvent} at ${re.strTime}.`}catch{}const $=i.match(/^(?:flash thinking|thinking model)\s+([\s\S]+)/i);if($){const ee=$[1],re="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";try{const ue=await fetch("https://openrouter.ai/api/v1/chat/completions",{method:"POST",headers:{Authorization:`Bearer ${re}`,"Content-Type":"application/json","HTTP-Referer":window.location.origin,"X-Title":"Nexa Assistant"},body:JSON.stringify({model:getSelectedModel(),messages:[{role:"user",content:ee}]})}).then(be=>be.json());console.log("[OpenRouter][Flash Thinking] Raw response:",ue);const xe=(Nt=(jt=(Ye=ue.choices)==null?void 0:Ye[0])==null?void 0:jt.message)==null?void 0:Nt.content;if(xe)return xe}catch(ue){console.error("[OpenRouter][Flash Thinking] Error:",ue)}}let H=i.match(/^(?:use|set) model\s+(\S+)\s+([\s\S]+)/i),z=i,Y;if(H&&(Y=H[1],z=H[2]),/random dog|dog picture/i.test(i)){try{return(await fetch("https://dog.ceo/api/breeds/image/random").then(re=>re.json())).message}catch{}return"Sorry, I couldn't fetch a dog picture."}if(/bitcoin price|btc price|btc ticker/i.test(i)){try{return`BTC last price: ${(await fetch("https://api.gemini.com/v2/ticker/btcusd").then(re=>re.json())).last} USD`}catch{}return"Sorry, I couldn't fetch BTC price."}const k=i.match(/recipe for (.+)/i);if(k)return k[1].trim(),"Spoonacular API key not configured.";if(/cat fact/i.test(i)){try{const ee=await fetch("https://cat-fact.herokuapp.com/facts/random").then(re=>re.json());return ee.text||ee.fact||JSON.stringify(ee)}catch{}return"Sorry, I couldn't fetch a cat fact."}if(/sensebox|open sensebox|weather station/i.test(i)){try{const ee=await fetch("https://api.opensensemap.org/boxes/57000b8745fd40c8196ad04c?format=json").then(re=>re.json());return`senseBox: ${ee.name}, sensors: ${ee.sensors.length}`}catch{}return"Sorry, I couldn't fetch senseBox data."}if(/near earth objects|nasa neo/i.test(i))try{const re=(it=(await fetch("https://api.nasa.gov/neo/rest/v1/neo/browse?api_key=DEMO_KEY").then(ue=>ue.json())).near_earth_objects)==null?void 0:it[0];return re?`1st NEO: ${re.name}, hazardous: ${re.is_potentially_hazardous_asteroid}`:"No NEO data."}catch{}if(/wayback machine|archive available/i.test(i)){try{const re=(Dt=(await fetch("https://archive.org/wayback/available?url=google.com").then(ue=>ue.json())).archived_snapshots)==null?void 0:Dt.closest;return re!=null&&re.available?`Snapshot at ${re.timestamp}`:"No snapshot available."}catch{}return"Sorry, I couldn't check Wayback availability."}if(/musicbrainz artist/i.test(i)){try{const ee=await fetch("http://musicbrainz.org/ws/2/artist/5b11f4ce-a62d-471e-81fc-a69a8278c7da?fmt=json").then(re=>re.json());return`Artist: ${ee.name}, info: ${ee.disambiguation||"n/a"}`}catch{}return"Sorry, I couldn't fetch MusicBrainz data."}if(/openwhyd|hot electro/i.test(i)){try{const ee=await fetch("https://openwhyd.org/hot/electro?format=json").then(re=>re.json());return(rt=ee==null?void 0:ee[0])!=null&&rt.title?`Top track: ${ee[0].title}`:"No playlist data."}catch{}return"Sorry, I couldn't fetch playlist data."}if(/archive\.org|archive metadata/i.test(i)){try{const ee=await fetch("https://archive.org/metadata/TheAdventuresOfTomSawyer_201303").then(re=>re.json());return ee.metadata?`Title: ${ee.metadata.title}, creator: ${ee.metadata.creator}`:"No metadata."}catch{}return"Sorry, I couldn't fetch archive metadata."}const R=i.match(/movie (.+)/i);if(R)return R[1].trim(),"OMDB API key not configured.";const A=i.match(/github user (\S+)/i);if(A){try{const ee=await fetch(`https://api.github.com/users/${A[1]}`).then(re=>re.json());return`GitHub user ${ee.login}: ${ee.public_repos} repos, ${ee.followers} followers.`}catch{}return`Sorry, couldn't fetch GitHub user ${A[1]}.`}if(/open library (?:search|info) (.+)/i.test(i)){const ee=i.match(/open library (?:search|info) (.+)/i);if(ee){const re=ee[1].trim();try{const xe=(Qe=(await fetch(`https://openlibrary.org/search.json?title=${encodeURIComponent(re)}&limit=1`).then(be=>be.json())).docs)==null?void 0:Qe[0];if(xe)return`📚 ${xe.title} by ${((Ne=xe.author_name)==null?void 0:Ne[0])||"unknown"} (${xe.first_publish_year})`}catch{}}return"Sorry, could not fetch from Open Library."}if(/exchange rate|currency convert/i.test(i)){try{const ee=await fetch("https://api.exchangerate.host/latest").then(be=>be.json()),re=ee.base,ue=ee.rates,xe=i.match(/convert ([A-Za-z]{3}) to ([A-Za-z]{3})/i);if(xe){const be=xe[1].toUpperCase(),De=xe[2].toUpperCase(),Oe=ue[De]/ue[be];return`1 ${be} = ${Oe.toFixed(4)} ${De}`}return`Base: ${re}, 1 ${re} = ${ue.USD} USD`}catch{}return"Sorry, I couldn't fetch exchange rates."}if(/spacex.*latest launch/i.test(i)){try{const ee=await fetch("https://api.spacexdata.com/v4/launches/latest").then(re=>re.json());return`🚀 ${ee.name} on ${new Date(ee.date_utc).toLocaleDateString()}`}catch{}return"Sorry, I couldn't fetch SpaceX data."}const M=i.match(/tv show (\d+)/i);if(M){try{const ee=await fetch(`https://api.tvmaze.com/shows/${M[1]}`).then(re=>re.json());return`TV Show: ${ee.name} (${ee.premiered}), Rating: ${((Ge=ee.rating)==null?void 0:Ge.average)||"n/a"}`}catch{}return"Sorry, I couldn't fetch TV show info."}const B=i.match(/product (\d+)/i);if(B){try{const re=(await fetch(`https://world.openfoodfacts.org/api/v0/product/${B[1]}.json`).then(ue=>ue.json())).product;return`🧀 ${re.product_name||re.generic_name} by ${re.brands}`}catch{}return"Sorry, I couldn't fetch product info."}if(/public holiday/i.test(i)){const ee=i.match(/public holidays? (?:in )?([A-Za-z]{2})(?: (\d{4}))?/i),re=(ee==null?void 0:ee[1])||"US",ue=(ee==null?void 0:ee[2])||new Date().getFullYear();try{const be=(await fetch(`https://date.nager.at/api/v3/PublicHolidays/${ue}/${re.toUpperCase()}`).then(De=>De.json()))[0];return be?`First holiday: ${be.localName} on ${be.date}`:"No holidays found."}catch{}return"Sorry, I couldn't fetch public holidays."}const G="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",q=Y||getSelectedModel();try{const ee=await fetch("https://openrouter.ai/api/v1/chat/completions",{method:"POST",headers:{Authorization:`Bearer ${G}`,"Content-Type":"application/json","HTTP-Referer":window.location.origin,"X-Title":"Nexa Assistant"},body:JSON.stringify({model:q,messages:[{role:"user",content:z}]})}).then(ue=>ue.json());console.log("[OpenRouter][Fallback] Raw response:",ee);const re=(Ee=(me=(Pt=ee.choices)==null?void 0:Pt[0])==null?void 0:me.message)==null?void 0:Ee.content;if(re)return re.replace(/\*\*(.+?)\*\*/g,"$1")}catch{}return"I'm sorry, I don't have an answer for that."}const AiAssistant=({onClose:i})=>{const{t:n}=useTranslation(),[s,a]=reactExports.useState(""),[h,_]=reactExports.useState([n("aiAssistant.greeting")]),[w,l]=reactExports.useState(!1),[u,f]=reactExports.useState(""),[y,p]=reactExports.useState(null),[C,T]=reactExports.useState({}),[E,x]=reactExports.useState(!1),[c,g]=reactExports.useState(!1),[d,m]=reactExports.useState([]),[S,b]=reactExports.useState(null),P=reactExports.useRef(null),[L,D]=reactExports.useState(!1),N=reactExports.useRef(null),I=()=>D(!0);reactExports.useEffect(()=>{const H=z=>{N.current&&!N.current.contains(z.target)&&I()};return window.addEventListener("mousedown",H),()=>window.removeEventListener("mousedown",H)},[]),reactExports.useEffect(()=>{if(!L)return;const H=N.current;if(!H)return;const z=Y=>{Y.animationName==="slideDown"&&i()};return H.addEventListener("animationend",z),()=>H.removeEventListener("animationend",z)},[L,i]);const U=async()=>{s.trim()&&(g(!0),l(!0),_(H=>[...H,`${n("aiAssistant.you")}: ${s}`]),f(""),p(()=>()=>{l(!1),g(!1)}),askAIStream(s,H=>{f(z=>z+H)},H=>{if(_(z=>[...z,`${n("aiAssistant.nexa")}: ${H}`]),f(""),l(!1),g(!1),a(""),P.current&&(P.current.style.height="auto"),E){const z=[];H.length<500&&z.push("Copy"),H.length>100&&z.push("Summarize"),H.match(/https?:\/\//)&&z.push("Open"),z.push("Search"),T(Y=>{const k=h.length+1;return{...Y,[k]:z}})}},H=>{_(z=>[...z,`${n("aiAssistant.nexa")}: ${n("aiAssistant.error")}`]),f(""),l(!1),g(!1)}))},F=async()=>{if(s.trim()){g(!0),_(H=>[...H,`${n("aiAssistant.you")}: ${s}`]);try{const H=await askAI(`flash thinking ${s}`);_(z=>[...z,`${n("aiAssistant.nexaThinking")}: ${H}`]),m([])}catch{_(H=>[...H,`${n("aiAssistant.nexa")}: ${n("aiAssistant.error")}`])}a(""),P.current&&(P.current.style.height="auto"),g(!1)}},$=H=>{a(H.target.value),H.target.style.height="auto",H.target.style.height=`${H.target.scrollHeight}px`};return jsxRuntimeExports.jsxs("div",{ref:N,className:`ai-assistant-overlay ${L?"closing":""}`,children:[d.length>0&&jsxRuntimeExports.jsx("div",{className:"ai-image-popup",children:d.map((H,z)=>jsxRuntimeExports.jsx("img",{src:H,alt:`Preview ${z+1}`},z))}),jsxRuntimeExports.jsxs("div",{className:"ai-assistant-header",children:[jsxRuntimeExports.jsx("span",{children:"Nexa"}),c&&jsxRuntimeExports.jsx("div",{className:"ai-spinner"}),jsxRuntimeExports.jsx("button",{className:"ai-close-btn",onClick:I,children:"×"})]}),jsxRuntimeExports.jsxs("div",{className:"ai-assistant-body",children:[h.map((H,z)=>jsxRuntimeExports.jsxs("div",{className:"ai-chat-line",children:[H,C[z]&&jsxRuntimeExports.jsxs("div",{className:"ai-quick-actions",children:[C[z].includes("Copy")&&jsxRuntimeExports.jsx("button",{onClick:()=>navigator.clipboard.writeText(H.replace(/^.*?: /,"")),children:"Copy"}),C[z].includes("Summarize")&&jsxRuntimeExports.jsx("button",{onClick:()=>U(),children:"Summarize"}),C[z].includes("Open")&&jsxRuntimeExports.jsx("button",{onClick:()=>{const Y=H.match(/https?:\/\/[\w./?=&%#-]+/);Y&&window.open(Y[0],"_blank")},children:"Open"}),C[z].includes("Search")&&jsxRuntimeExports.jsx("button",{onClick:()=>window.open(`https://www.google.com/search?q=${encodeURIComponent(H.replace(/^.*?: /,""))}`,"_blank"),children:"Search"})]})]},z)),w&&jsxRuntimeExports.jsxs("div",{className:"ai-chat-line streaming",children:[n("aiAssistant.nexa"),": ",u,jsxRuntimeExports.jsx("span",{className:"ai-streaming-cursor",children:"▍"})]})]}),jsxRuntimeExports.jsxs("div",{className:"ai-assistant-input",children:[jsxRuntimeExports.jsx("textarea",{ref:P,rows:1,value:s,onChange:$,onKeyDown:H=>{H.key==="Enter"&&!H.shiftKey&&(H.preventDefault(),w||U())},onDragOver:H=>H.preventDefault(),onDrop:async H=>{H.preventDefault();const z=Array.from(H.dataTransfer.files);for(const Y of z)if(Y.type.startsWith("text/")||Y.name.endsWith(".txt")){const k=await Y.text();a(R=>R+`
`+k)}},placeholder:n("aiAssistant.placeholder"),disabled:c}),jsxRuntimeExports.jsx("button",{onClick:U,disabled:c||w,children:w?n("aiAssistant.stop")||"Stop":n("aiAssistant.send")}),w&&jsxRuntimeExports.jsx("button",{onClick:()=>{y&&y()},children:"Stop"}),jsxRuntimeExports.jsx("button",{className:"ai-think-btn",onClick:F,disabled:c,title:n("aiAssistant.research"),children:jsxRuntimeExports.jsx("svg",{className:"w-6 h-6 text-gray-800 dark:text-white","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 9a3 3 0 0 1 3-3m-2 15h4m0-3c0-4.1 4-4.9 4-9A6 6 0 1 0 6 9c0 4 4 5 4 9h4Z"})})})]})]})},LiveClock=()=>{const[i,n]=React.useState(new Date);return React.useEffect(()=>{const s=setInterval(()=>n(new Date),1e3);return()=>clearInterval(s)},[]),jsxRuntimeExports.jsx("span",{className:"taskbar-clock",style:{minWidth:64,textAlign:"center",fontVariantNumeric:"tabular-nums",fontSize:17,fontWeight:500,color:"#d8e3fa",letterSpacing:.5,userSelect:"none",marginLeft:3},children:i.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})},Taskbar=({onLauncher:i,windows:n,setWindows:s})=>{const{notifications:a,remove:h}=useNotifications(),[_,w]=React.useState(!1),[l,u]=React.useState(!1),[f,y]=React.useState(!1),p=[{id:"notifications",icon:jsxRuntimeExports.jsxs("span",{title:"Notifications",onClick:()=>w(b=>!b),style:{position:"relative"},children:[jsxRuntimeExports.jsx("svg",{width:"1.1em",height:"2em",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:jsxRuntimeExports.jsx("path",{d:"M14.9997 19C14.9997 20.6569 13.6566 22 11.9997 22C10.3429 22 8.99972 20.6569 8.99972 19M13.7962 6.23856C14.2317 5.78864 14.4997 5.17562 14.4997 4.5C14.4997 3.11929 13.3804 2 11.9997 2C10.619 2 9.49972 3.11929 9.49972 4.5C9.49972 5.17562 9.76772 5.78864 10.2032 6.23856M17.9997 11.2C17.9997 9.82087 17.3676 8.49823 16.2424 7.52304C15.1171 6.54786 13.591 6 11.9997 6C10.4084 6 8.8823 6.54786 7.75708 7.52304C6.63186 8.49823 5.99972 9.82087 5.99972 11.2C5.99972 13.4818 5.43385 15.1506 4.72778 16.3447C3.92306 17.7056 3.5207 18.3861 3.53659 18.5486C3.55476 18.7346 3.58824 18.7933 3.73906 18.9036C3.87089 19 4.53323 19 5.85791 19H18.1415C19.4662 19 20.1286 19 20.2604 18.9036C20.4112 18.7933 20.4447 18.7346 20.4629 18.5486C20.4787 18.3861 20.0764 17.7056 19.2717 16.3447C18.5656 15.1506 17.9997 13.4818 17.9997 11.2Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})}),a.length>0&&jsxRuntimeExports.jsx("span",{style:{position:"absolute",top:-3,right:-3,background:"#e53935",color:"#fff",borderRadius:"50%",fontSize:10,width:15,height:15,display:"flex",alignItems:"center",justifyContent:"center",border:"2px solid #232a39"},children:a.length})]}),popover:_?jsxRuntimeExports.jsx(NotificationPopover,{notifications:a,onRemove:h}):null},{id:"network",icon:jsxRuntimeExports.jsx("span",{title:"Nexa",onClick:()=>y(b=>!b),style:{cursor:"pointer",position:"relative",left:"-4px",top:"1.0px"},children:jsxRuntimeExports.jsx("img",{src:NexaAiIcon,alt:"Nexa AI",style:{width:35,height:20,objectFit:"contain"}})}),popover:f?jsxRuntimeExports.jsx(AiAssistant,{onClose:()=>y(!1)}):null},{id:"settings-gear",icon:jsxRuntimeExports.jsx("span",{title:"Settings",style:{cursor:"pointer",position:"relative",left:"-9px",top:"-0.0px",display:"inline-flex",alignItems:"center"},onClick:()=>{s(b=>{const P=b.findIndex(L=>L.id==="settings");return P!==-1?b.map((L,D)=>D===P?{...L,minimized:!1,focused:!0,zIndex:Math.max(...b.map(N=>N.zIndex||0),10)+1}:{...L,focused:!1}):[...b.map(L=>({...L,focused:!1})),{...appStubs.find(L=>L.id==="settings"),minimized:!1,focused:!0,zIndex:Math.max(...b.map(L=>L.zIndex||0),10)+1,key:Date.now()+Math.random()}]})},children:jsxRuntimeExports.jsxs("svg",{width:"14",height:"15",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[jsxRuntimeExports.jsx("circle",{cx:"12",cy:"12",r:"3.5",fill:"none"}),jsxRuntimeExports.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 1 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 1 1-4 0v-.09a1.65 1.65 0 0 0-1-1.51 1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 1 1-2.83-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 1 1 0-4h.09c.7 0 1.31-.4 1.51-1a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 1 1 2.83-2.83l.06.06a1.65 1.65 0 0 0 1.82.33h.09c.7 0 1.31-.4 1.51-1V3a2 2 0 1 1 4 0v.09c0 .7.4 1.31 1 1.51a1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 1 1 2.83 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82v.09c0 .7.4 1.31 1 1.51H21a2 2 0 1 1 0 4h-.09c-.7 0-1.31.4-1.51 1z"})]})})},{id:"battery",icon:jsxRuntimeExports.jsx(BatteryTray,{})},{id:"calendar",icon:jsxRuntimeExports.jsx(CalendarTray,{})},{id:"clock",icon:jsxRuntimeExports.jsx("span",{className:"clock",children:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})}];n.findIndex(b=>b.focused&&!b.minimized);const C=b=>{s(P=>P.map((L,D)=>D===b?{...L,minimized:!1,focused:!0,zIndex:Math.max(...P.map(N=>N.zIndex||0),10)+1}:{...L,focused:!1}))},T=b=>{s(P=>P.map((L,D)=>D===b?{...L,minimized:!0,focused:!1}:L))},[E,x]=React.useState(!1),c=b=>{if(b.startsWith("http://")||b.startsWith("https://"))try{const P=new URL(b).hostname.replace(/^www\./,"");return P.charAt(0).toUpperCase()+P.slice(1)}catch{return b}return b},[g,d]=React.useState(null),[m,S]=React.useState(null);return jsxRuntimeExports.jsxs("div",{className:"taskbar-root",onContextMenu:b=>{if(g)b.preventDefault();else{b.preventDefault();const P=b.currentTarget.getBoundingClientRect();S({anchorRect:P})}},children:[g&&!m&&typeof window<"u"&&reactDomExports.createPortal(jsxRuntimeExports.jsx(ModernContextMenu,{anchorRect:g.anchorRect,items:[{label:"Minimize",onClick:()=>T(g.idx)},{label:"Maximize",onClick:()=>s(b=>b.map((P,L)=>L===g.idx?{...P,minimized:!1,maximized:!0}:P))},{label:"Close Application",onClick:()=>s(b=>b.filter((P,L)=>L!==g.idx))},{label:"End Task",onClick:()=>s(b=>b.filter((P,L)=>L!==g.idx))}],onClose:()=>d(null),taskbar:!0}),window.document.body),jsxRuntimeExports.jsx("button",{className:"taskbar-launcher",onClick:i,title:"Open Launcher",style:{background:"none",border:"none",padding:0,marginRight:8,display:"flex",alignItems:"center",justifyContent:"center",height:42},children:jsxRuntimeExports.jsx("img",{src:StartMenuIcon,alt:"Start Menu",style:{width:32,height:32,objectFit:"contain",borderRadius:8,boxShadow:"0 1.5px 6px #232a3920"}})}),jsxRuntimeExports.jsx("div",{className:"taskbar-center",children:jsxRuntimeExports.jsx("div",{className:"taskbar-apps",children:n.map((b,P)=>jsxRuntimeExports.jsxs("div",{className:"taskbar-app-icon"+(b.focused&&!b.minimized?" taskbar-app-icon--active":"")+(b.minimized?" taskbar-app-icon--minimized":""),title:c(b.title),onClick:()=>C(P),onContextMenu:L=>{L.preventDefault();const D=L.currentTarget.getBoundingClientRect();S(null),d({anchorRect:D,idx:P})},children:[typeof b.icon=="string"&&(b.icon.startsWith("http")||b.icon.startsWith("/"))?jsxRuntimeExports.jsx("img",{src:b.icon,alt:b.title,className:"taskbar-app-img"}):jsxRuntimeExports.jsx("span",{className:"taskbar-app-emoji",children:b.icon}),jsxRuntimeExports.jsx("span",{className:"taskbar-app-title",children:c(b.title)})]},b.id))})}),jsxRuntimeExports.jsxs("div",{className:"taskbar-right",style:{display:"flex",alignItems:"center",gap:8,position:"relative"},children:[jsxRuntimeExports.jsx("button",{className:`taskbar-hidden-toggle${l?" open":""}`,onClick:()=>u(b=>!b),title:l?"Hide hidden icons":"Show hidden icons",children:jsxRuntimeExports.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",stroke:"currentColor",strokeWidth:"2",children:jsxRuntimeExports.jsx("path",{d:"M4 12l6-4-6-4"})})}),jsxRuntimeExports.jsx(SystemTray,{icons:l?p.filter(b=>b.id!=="clock"):p.slice(0,3).filter(b=>b.id!=="clock")}),jsxRuntimeExports.jsx(LiveClock,{}),jsxRuntimeExports.jsx("button",{className:"taskbar-options-btn",title:"Action Center","aria-label":"Open Action Center",onClick:()=>x(b=>!b),style:{background:"none",border:"none",borderRadius:8,padding:4,cursor:"pointer",fontSize:24,color:"#bfaaff",transition:"background 0.14s",display:"flex",alignItems:"center",justifyContent:"center"},children:jsxRuntimeExports.jsxs("svg",{width:"28",height:"28",viewBox:"0 0 28 28",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{display:"block"},children:[jsxRuntimeExports.jsx("rect",{x:"4",y:"8",width:"20",height:"2.4",rx:"1.2",fill:"#bfaaff"}),jsxRuntimeExports.jsx("rect",{x:"7",y:"13.8",width:"14",height:"2.4",rx:"1.2",fill:"#bfaaff"}),jsxRuntimeExports.jsx("rect",{x:"10",y:"19.6",width:"8",height:"2.4",rx:"1.2",fill:"#bfaaff"})]})}),jsxRuntimeExports.jsx(OptionsCenter,{show:E,onClose:()=>x(!1)})]})]})},GPUCanvas=({width:i,height:n,style:s})=>{const a=reactExports.useRef(null),[h,_]=React.useState(null);reactExports.useEffect(()=>{let l=null,u=!1;const f=async()=>{try{const y=navigator;if(!y.gpu){_("WebGPU not supported");return}const p=await y.gpu.requestAdapter();if(!p){_("Failed to get GPU adapter");return}let C;try{C=await p.requestDevice()}catch(E){_("Failed to get GPU device: "+(E instanceof Error?E.message:String(E))),console.error("WebGPU requestDevice failed:",E);return}const T=a.current;if(T){const E=T.getContext("webgpu"),x=y.gpu.getPreferredCanvasFormat();E.configure({device:C,format:x,alphaMode:"premultiplied"}),(()=>{const g=C.createCommandEncoder(),d=E.getCurrentTexture().createView();g.beginRenderPass({colorAttachments:[{view:d,clearValue:{r:0,g:0,b:0,a:0},loadOp:"clear",storeOp:"store"}]}).end(),C.queue.submit([g.finish()])})()}}catch(y){_("WebGPU initialization failed: "+(y instanceof Error?y.message:String(y))),console.error("WebGPU initialization failed:",y),u||(l=setTimeout(()=>{u||f()},5e3))}};return f(),()=>{u=!0,l&&clearTimeout(l)}},[]);const w=({width:l,height:u,style:f})=>{const y=React.useRef(null);return React.useEffect(()=>{let p=0,C=!0;const T=()=>{var x;if(window.__os_dragging_window){requestAnimationFrame(T);return}const E=(x=y.current)==null?void 0:x.getContext("2d");if(E){const c=p/120,g=l*(.5+.4*Math.sin(c)),d=u*(.5+.4*Math.cos(c)),m=Math.max(l,u)*.8,S=E.createRadialGradient(g,d,m*.2,l/2,u/2,m);S.addColorStop(0,"#308aff"),S.addColorStop(1,"#181c25"),E.clearRect(0,0,l,u),E.fillStyle=S,E.fillRect(0,0,l,u)}C&&(p++,requestAnimationFrame(T))};return T(),()=>{C=!1}},[l,u]),jsxRuntimeExports.jsx("canvas",{ref:y,width:l,height:u,style:f})};return h?jsxRuntimeExports.jsx(w,{width:i,height:n,style:s}):jsxRuntimeExports.jsx("canvas",{ref:a,width:i,height:n,style:s})},Window=({win:i,focused:n,onFocus:s,onClose:a,onMove:h,onResize:_,onMinimize:w,onMaximize:l})=>{const[u,f]=reactExports.useState(null),[y,p]=reactExports.useState(!1);reactExports.useEffect(()=>{const k=()=>{p("ontouchstart"in window||navigator.maxTouchPoints>0||window.matchMedia("(pointer: coarse)").matches)};return k(),window.addEventListener("resize",k),()=>window.removeEventListener("resize",k)},[]);const C=reactExports.useRef(null),T=reactExports.useRef(null),E=reactExports.useRef(null),x=8;function c(k,R,A,M){const B=window.innerWidth,G=window.innerHeight;return k=Math.max(x,Math.min(k,B-x-Math.max(A,160))),R=Math.max(x,Math.min(R,G-x-Math.max(M,80))),A=Math.max(160,Math.min(A,B-k-x)),M=Math.max(80,Math.min(M,G-R-x)),{left:k,top:R,width:A,height:M}}const g=reactExports.useCallback(k=>{window.__os_dragging_window=!0;const R="touches"in k?k.touches[0]:k;C.current={x:R.clientX,y:R.clientY},T.current={left:i.left,top:i.top},document.addEventListener("mousemove",d),document.addEventListener("mouseup",m),document.addEventListener("touchmove",d,{passive:!1}),document.addEventListener("touchend",m)},[i.left,i.top,h]),d=reactExports.useCallback(k=>{if(!C.current||!T.current)return;const R="touches"in k?k.touches[0]:k;let A=R.clientX-C.current.x,M=R.clientY-C.current.y;const B=window.innerWidth,G=window.innerHeight,q=x,ie=B-x-i.width,le=x,_e=G-x-i.height;let V=T.current.left,Z=T.current.top;A=Math.max(q-V,Math.min(A,ie-V)),M=Math.max(le-Z,Math.min(M,_e-Z)),h(V+A,Z+M),k.cancelable&&k.preventDefault()},[h,i.width,i.height]),m=reactExports.useCallback(k=>{C.current=null,T.current=null,window.__os_dragging_window=!1,document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",m),document.removeEventListener("touchmove",d),document.removeEventListener("touchend",m)},[d]),S=reactExports.useCallback((k,R)=>{window.__os_dragging_window=!0;const A="touches"in k?k.touches[0]:k;E.current={dir:R,startX:A.clientX,startY:A.clientY,startW:i.width,startH:i.height},document.addEventListener("mousemove",b),document.addEventListener("mouseup",P),document.addEventListener("touchmove",b,{passive:!1}),document.addEventListener("touchend",P)},[i.width,i.height,_]),b=reactExports.useCallback(k=>{if(!E.current)return;const R="touches"in k?k.touches[0]:k;let A=R.clientX-E.current.startX,M=R.clientY-E.current.startY,B=E.current.startW+A,G=E.current.startH+M;const q=c(i.left,i.top,B,G);_(q.width-i.width,q.height-i.height,E.current.dir),k.cancelable&&k.preventDefault()},[_,i.left,i.top,i.width,i.height]),P=reactExports.useCallback(k=>{E.current=null,window.__os_dragging_window=!1,document.removeEventListener("mousemove",b),document.removeEventListener("mouseup",P),document.removeEventListener("touchmove",b),document.removeEventListener("touchend",P)},[b]),L=k=>{window.__os_dragging_window=!0,g(k)},D=(k,R)=>{window.__os_dragging_window=!0,S(k,R)};reactExports.useEffect(()=>{const k=()=>{window.__os_dragging_window=!1};return window.addEventListener("mouseup",k),window.addEventListener("touchend",k),()=>{window.removeEventListener("mouseup",k),window.removeEventListener("touchend",k)}},[]);const N=()=>{if(!u)return null;const k=window.innerWidth,R=window.innerHeight;let A={position:"fixed",zIndex:9999,pointerEvents:"none",borderRadius:18,transition:"all 0.18s",background:"rgba(48,138,255,0.18)",boxShadow:"0 0 0 3px #308aff77",border:"2.5px solid #308aff",backdropFilter:"blur(2px)"};switch(u){case"left":A={...A,left:0,top:0,width:k/2,height:R};break;case"right":A={...A,left:k/2,top:0,width:k/2,height:R};break;case"top":A={...A,left:0,top:0,width:k,height:R/2};break;case"bottom":A={...A,left:0,top:R/2,width:k,height:R/2};break;case"topleft":A={...A,left:0,top:0,width:k/2,height:R/2};break;case"topright":A={...A,left:k/2,top:0,width:k/2,height:R/2};break;case"bottomleft":A={...A,left:0,top:R/2,width:k/2,height:R/2};break;case"bottomright":A={...A,left:k/2,top:R/2,width:k/2,height:R/2};break}return jsxRuntimeExports.jsx("div",{style:A})},I=i.component;let U;try{U=I?jsxRuntimeExports.jsx(I,{}):jsxRuntimeExports.jsx("div",{style:{color:"red",padding:24},children:"App failed to render: no component."})}catch(k){console.error("Error rendering window component:",k,i),U=jsxRuntimeExports.jsx("div",{style:{color:"red",padding:24},children:"App crashed while rendering."})}const[F,$]=reactExports.useState("idle"),H=()=>{$("minimize"),setTimeout(()=>{w&&w(),$("idle")},220)},z=()=>{$("close"),setTimeout(()=>{a()},220)};React.useEffect(()=>{u&&($("snap"),setTimeout(()=>$("idle"),320))},[u]);const Y=reactExports.useMemo(()=>({left:i.left,top:i.top,width:i.width,height:i.height,zIndex:i.zIndex||1,position:"absolute",borderRadius:16,backdropFilter:"blur(10px)",background:i.id==="settings"||i.title==="Settings"?"transparent":"rgba(30,34,43,0.82)",boxShadow:i.id==="settings"||i.title==="Settings"?"none":y?"0 2px 8px 0 rgba(31, 38, 135, 0.10)":"0 8px 32px 0 rgba(31, 38, 135, 0.18)",overflow:"hidden",border:i.id==="settings"||i.title==="Settings"?"none":n?"2px solid var(--accent, #308aff)":"2px solid rgba(48,138,255,0.13)",transition:"border 0.2s cubic-bezier(.61,1.4,.38,1), box-shadow 0.2s cubic-bezier(.61,1.4,.38,1)"}),[i.left,i.top,i.width,i.height,i.zIndex,i.id,i.title,n,y]);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[N(),jsxRuntimeExports.jsxs("div",{style:{position:"relative"},children:[i.id!=="settings"&&i.title!=="Settings"&&jsxRuntimeExports.jsx(GPUCanvas,{width:i.width,height:i.height,style:{position:"absolute",top:0,left:0,zIndex:-1}}),jsxRuntimeExports.jsxs("div",{className:"window-root window-anim-"+F+(n?" window-focused":""),style:{...Y,...y?{touchAction:"manipulation"}:{}},tabIndex:0,onMouseDown:s,onTouchStart:s,children:[i.id!=="settings"&&i.title!=="Settings"&&jsxRuntimeExports.jsx("div",{className:"window-resize-handle window-resize-se",onMouseDown:k=>D(k,"se"),onTouchStart:k=>D(k,"se"),style:y?{touchAction:"none",minWidth:36,minHeight:36}:{}}),i.id!=="settings"&&i.title!=="Settings"&&jsxRuntimeExports.jsxs("div",{className:"window-titlebar",onMouseDown:L,onTouchStart:L,style:{touchAction:y?"manipulation":void 0,WebkitTapHighlightColor:y?"rgba(48,138,255,0.25)":void 0,minHeight:y?56:void 0,padding:y?"0 18px":void 0,fontSize:y?"1.3em":void 0,gap:y?10:void 0},children:[jsxRuntimeExports.jsx("span",{className:"window-title",children:i.title}),jsxRuntimeExports.jsxs("div",{style:{marginLeft:"auto",display:"flex",gap:2},children:[jsxRuntimeExports.jsx("button",{className:"window-minimize",onClick:H,title:"Minimize",style:{background:"none",color:"#fff",border:"none",borderRadius:"3px",width:y?44:28,height:y?44:24,fontSize:y?28:20,cursor:"pointer",display:"inline-flex",alignItems:"center",justifyContent:"center",lineHeight:1,transition:"background 0.15s",position:"relative",top:2,marginRight:y?6:void 0},children:"_"}),jsxRuntimeExports.jsx("button",{className:"window-maximize",onClick:l,title:"Maximize",style:{background:"none",color:"#fff",border:"none",borderRadius:"3px",width:y?44:28,height:y?44:24,fontSize:y?28:18,cursor:"pointer",display:"inline-flex",alignItems:"center",justifyContent:"center",lineHeight:1,transition:"background 0.15s",position:"relative",top:2,marginRight:y?6:void 0},children:"□"}),jsxRuntimeExports.jsx("button",{className:"window-close",onClick:z,title:"Close",style:{background:"none",color:"#fff",border:"none",borderRadius:"3px",width:y?48:28,height:y?48:24,fontSize:y?32:22,cursor:"pointer",display:"inline-flex",alignItems:"center",justifyContent:"center",lineHeight:1,transition:"background 0.15s",position:"relative",top:2},children:"×"})]})]}),jsxRuntimeExports.jsx("div",{className:"window-content",children:U})]})]})]})},WindowManager=({windows:i,setWindows:n})=>{const[s,a]=reactExports.useState(null),h=320,_=180,w=f=>(y,p)=>{n(C=>C.map((T,E)=>E===f?{...T,left:y,top:p}:T))},l=f=>(y,p,C)=>{n(T=>T.map((E,x)=>{if(x!==f)return E;let{left:c,top:g,width:d,height:m}=E;switch(C){case"nw":c+=y,d-=y,g+=p,m-=p;break;case"ne":d+=y,g+=p,m-=p;break;case"sw":c+=y,d-=y,m+=p;break;case"se":d+=y,m+=p;break;case"n":g+=p,m-=p;break;case"s":m+=p;break;case"e":d+=y;break;case"w":c+=y,d-=y;break}return d=Math.max(h,d),m=Math.max(_,m),{...E,left:c,top:g,width:d,height:m}}))},u=f=>()=>{n(y=>y.map((p,C)=>{var T,E,x,c;return C!==f?p:p.maximized?{...p,maximized:!1,left:((T=p.prev)==null?void 0:T.left)??p.left,top:((E=p.prev)==null?void 0:E.top)??p.top,width:((x=p.prev)==null?void 0:x.width)??p.width,height:((c=p.prev)==null?void 0:c.height)??p.height}:{...p,maximized:!0,prev:{left:p.left,top:p.top,width:p.width,height:p.height},left:0,top:0,width:window.innerWidth,height:window.innerHeight}}))};return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:i.map((f,y)=>f.minimized?null:jsxRuntimeExports.jsx(Window,{win:f,focused:s===y,onFocus:()=>a(y),onClose:()=>n(p=>p.filter((C,T)=>T!==y)),onMove:w(y),onResize:l(y),onMinimize:()=>{n(p=>p.map((C,T)=>T===y?{...C,minimized:!0,focused:!1}:{...C,focused:!1})),a(null)},onMaximize:f.title==="Browser"||f.title==="Minecraft"?u(y):void 0},f.id))})},WeatherWidget=()=>{const[i,n]=reactExports.useState(null),[s,a]=reactExports.useState(!0),[h,_]=reactExports.useState(null);async function w(f,y){a(!0),_(null);try{const C=await(await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${f}&longitude=${y}&current_weather=true&hourly=temperature_2m,weathercode&timezone=auto`)).json(),T=C.current_weather.temperature,E=C.current_weather.weathercode,x=l(E),c=u(E);n({temperature:T,description:c,icon:x,location:`${f.toFixed(2)}, ${y.toFixed(2)}`})}catch{_("Could not fetch weather")}a(!1)}reactExports.useEffect(()=>{if(!navigator.geolocation){_("Geolocation not supported"),a(!1);return}navigator.permissions?navigator.permissions.query({name:"geolocation"}).then(f=>{f.state==="denied"?(_("Location permission denied in browser settings. Please allow location and reload."),a(!1)):f.state==="prompt"?(_("Please allow location access in your browser."),a(!1)):navigator.geolocation.getCurrentPosition(y=>{w(y.coords.latitude,y.coords.longitude);const p=setInterval(()=>{w(y.coords.latitude,y.coords.longitude)},6e5);return()=>clearInterval(p)},()=>{_("Location permission denied. Check browser settings and reload."),a(!1)})}).catch(()=>{navigator.geolocation.getCurrentPosition(f=>{w(f.coords.latitude,f.coords.longitude);const y=setInterval(()=>{w(f.coords.latitude,f.coords.longitude)},6e5);return()=>clearInterval(y)},()=>{_("Location permission denied. Check browser settings and reload."),a(!1)})}):navigator.geolocation.getCurrentPosition(f=>{w(f.coords.latitude,f.coords.longitude);const y=setInterval(()=>{w(f.coords.latitude,f.coords.longitude)},6e5);return()=>clearInterval(y)},()=>{_("Location permission denied. Check browser settings and reload."),a(!1)})},[]);function l(f){return f===0?"☀️":f===1||f===2?"🌤️":f===3?"☁️":f===45||f===48?"🌫️":f===51||f===53||f===55?"🌦️":f===61||f===63||f===65?"🌧️":f===71||f===73||f===75?"❄️":f===80||f===81||f===82?"🌧️":f===95||f===96||f===99?"⛈️":"❓"}function u(f){return f===0?"Clear sky":f===1?"Mainly clear":f===2?"Partly cloudy":f===3?"Overcast":f===45||f===48?"Fog":f===51||f===53||f===55?"Drizzle":f===61||f===63||f===65?"Rain":f===71||f===73||f===75?"Snow":f===80||f===81||f===82?"Rain showers":f===95?"Thunderstorm":f===96||f===99?"Thunderstorm w/ hail":"Unknown"}return jsxRuntimeExports.jsxs("div",{style:{padding:10,minWidth:140,maxWidth:200},children:[jsxRuntimeExports.jsx("div",{style:{fontSize:28,color:"#ffe6ff",fontWeight:700,textShadow:"0 2px 8px #a26aff77"},children:i?i.icon:"☀️"}),jsxRuntimeExports.jsx("div",{style:{fontWeight:600,fontSize:18,color:"#fff",marginBottom:4},children:"Weather"}),jsxRuntimeExports.jsxs("div",{style:{fontSize:15,color:"#ffd6fa",marginBottom:2,fontWeight:500},children:[s&&"Loading...",h&&h,i&&!s&&!h&&`${i.temperature}°C, ${i.description}`]}),jsxRuntimeExports.jsxs("div",{style:{fontSize:13,color:"#bfa",marginTop:6},children:[i&&!s&&!h&&`Location: ${i.location}`,!i&&!s&&!h&&"No data"]})]})},NotesWidget=()=>{const[i,n]=reactExports.useState("");return jsxRuntimeExports.jsxs("div",{style:{padding:16,minWidth:180,minHeight:120,height:"100%",display:"flex",flexDirection:"column"},children:[jsxRuntimeExports.jsx("div",{style:{fontSize:22,marginBottom:6},children:"📝 Sticky Notes"}),jsxRuntimeExports.jsx("textarea",{style:{width:"100%",minHeight:60,maxHeight:"calc(100vh - 320px)",resize:"vertical",borderRadius:8,border:"1px solid #ccc",padding:6,fontSize:14,flex:1},placeholder:"Write a note...",value:i,onChange:s=>n(s.target.value)})]})},SystemMonitorWidget=()=>{const[i,n]=reactExports.useState(null);reactExports.useEffect(()=>{let h=null;return"getBattery"in navigator&&navigator.getBattery().then(_=>{h=_,n({level:_.level,charging:_.charging}),_.addEventListener("levelchange",()=>n({level:_.level,charging:_.charging})),_.addEventListener("chargingchange",()=>n({level:_.level,charging:_.charging}))}),()=>{h&&(h.removeEventListener("levelchange",()=>{}),h.removeEventListener("chargingchange",()=>{}))}},[]);const s=navigator.hardwareConcurrency||"N/A",a=navigator.deviceMemory||"N/A";return jsxRuntimeExports.jsxs("div",{style:{padding:16,minWidth:200},children:[jsxRuntimeExports.jsx("div",{style:{fontSize:22,marginBottom:6},children:"📊 System Monitor"}),jsxRuntimeExports.jsxs("div",{style:{fontSize:15,color:"#fff",marginBottom:8},children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("b",{children:"CPU Cores:"})," ",s]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("b",{children:"Device Memory:"})," ",a," GB"]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("b",{children:"Battery:"})," ",i?`${Math.round(i.level*100)}% ${i.charging?"(Charging)":""}`:"N/A"]})]}),jsxRuntimeExports.jsx("div",{style:{fontSize:12,color:"#bfa",marginTop:8},children:"Live hardware info (browser-limited)"})]})};function getDaysInMonth(i,n){return new Date(i,n+1,0).getDate()}function pad(i){return i<10?"0"+i:i}const CalendarWidget=()=>{const i=new Date,[n,s]=reactExports.useState(i.getMonth()),[a,h]=reactExports.useState(i.getFullYear()),[_,w]=reactExports.useState(()=>{try{return JSON.parse(localStorage.getItem("calendar_events")||"[]")}catch{return[]}}),[l,u]=reactExports.useState(null),[f,y]=reactExports.useState(""),p=getDaysInMonth(a,n),C=new Date(a,n,1).getDay();function T(){if(l&&f.trim()){const d=[..._,{date:l,text:f.trim()}];w(d),localStorage.setItem("calendar_events",JSON.stringify(d)),y(""),u(null)}}function E(d){return _.filter(m=>m.date===d)}function x(d){const m=`${a}-${pad(n+1)}-${pad(d)}`,S=m===`${i.getFullYear()}-${pad(i.getMonth()+1)}-${pad(i.getDate())}`,b=E(m).length>0;return jsxRuntimeExports.jsxs("div",{onClick:()=>u(m),style:{width:34,height:34,display:"flex",alignItems:"center",justifyContent:"center",margin:2,borderRadius:8,background:S?"#8f5fff":b?"#232a3966":"transparent",color:S?"#fff":"#e5e5ff",border:S?"2px solid #fff":"1px solid #353a4a",boxShadow:S?"0 2px 8px #8f5fff77":void 0,cursor:"pointer",position:"relative",fontWeight:500},title:b?E(m).map(P=>P.text).join(`
`):void 0,children:[d,b&&jsxRuntimeExports.jsx("span",{style:{position:"absolute",bottom:5,right:6,width:7,height:7,borderRadius:4,background:"#ffb347"}})]},d)}const c=[];let g=[];for(let d=0;d<C;++d)g.push(jsxRuntimeExports.jsx("div",{style:{width:34,height:34}},"empty"+d));for(let d=1;d<=p;++d)g.push(x(d)),g.length===7&&(c.push(g),g=[]);if(g.length)for(;g.length<7;)g.push(jsxRuntimeExports.jsx("div",{style:{width:34,height:34}},"empty"+g.length));return g.length&&c.push(g),jsxRuntimeExports.jsxs("div",{style:{padding:14,minWidth:260,color:"#fff"},children:[jsxRuntimeExports.jsx("div",{style:{fontWeight:700,fontSize:22,marginBottom:8,color:"#fff",textAlign:"center",letterSpacing:1},children:"📅 Calendar"}),jsxRuntimeExports.jsxs("div",{style:{fontWeight:700,fontSize:16,marginBottom:8,color:"#ffe6ff",textAlign:"center"},children:[i.toLocaleString("default",{month:"long"})," ",a]}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:6},children:[jsxRuntimeExports.jsx("button",{onClick:()=>{s(d=>d===0?(h(m=>m-1),11):d-1)},style:{marginRight:8},children:"‹"}),jsxRuntimeExports.jsxs("span",{style:{flex:1,textAlign:"center"},children:[i.toLocaleString("default",{month:"long"})," ",a]}),jsxRuntimeExports.jsx("button",{onClick:()=>{s(d=>d===11?(h(m=>m+1),0):d+1)},style:{marginLeft:8},children:"›"})]}),jsxRuntimeExports.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 34px)",gap:2,background:"rgba(44,18,62,0.18)",borderRadius:8,padding:4},children:[["S","M","T","W","T","F","S"].map(d=>jsxRuntimeExports.jsx("div",{style:{fontWeight:600,color:"#bfa",fontSize:13,textAlign:"center"},children:d},d)),c.flat()]}),l&&jsxRuntimeExports.jsxs("div",{style:{marginTop:12,background:"#232a39",padding:10,borderRadius:8},children:[jsxRuntimeExports.jsxs("div",{style:{fontWeight:600,marginBottom:6},children:["Add event for ",l&&(()=>{const[d,m,S]=l.split("-");return`${S}/${m}/${d}`})()]}),jsxRuntimeExports.jsx("textarea",{value:f,onChange:d=>y(d.target.value),style:{width:"100%",minHeight:48,maxHeight:"calc(100vh - 320px)",resize:"vertical",borderRadius:6,border:"1px solid #8f5fff",marginBottom:6},placeholder:"Event/Reminder"}),jsxRuntimeExports.jsx("button",{onClick:T,style:{background:"#8f5fff",color:"#fff",border:"none",borderRadius:6,padding:"4px 14px",fontWeight:600,fontSize:15,cursor:"pointer"},children:"Save"}),jsxRuntimeExports.jsx("button",{onClick:()=>u(null),style:{marginLeft:8,background:"none",color:"#fff",border:"none",cursor:"pointer"},children:"Cancel"})]})]})},styles={"newsfeed-list":"_newsfeed-list_1ou1x_1"},modalStyles={"newsfeed-modal-bg":"_newsfeed-modal-bg_bg44j_1","newsfeed-modal":"_newsfeed-modal_bg44j_1","newsfeed-modal-close":"_newsfeed-modal-close_bg44j_47","newsfeed-modal-img":"_newsfeed-modal-img_bg44j_67","newsfeed-modal-title":"_newsfeed-modal-title_bg44j_81","newsfeed-modal-meta":"_newsfeed-modal-meta_bg44j_93","newsfeed-modal-link":"_newsfeed-modal-link_bg44j_115"},FEEDS=[{key:"general",label:"General (Top News)",urls:["https://feeds.bbci.co.uk/news/rss.xml","http://rss.cnn.com/rss/edition.rss","https://www.independent.co.uk/news/uk/rss"]},{key:"bbc",label:"BBC News (UK)",urls:["https://feeds.bbci.co.uk/news/rss.xml"]},{key:"independent",label:"The Independent (UK)",urls:["https://www.independent.co.uk/news/uk/rss"]},{key:"guardian",label:"The Guardian (UK)",urls:["https://www.theguardian.com/world/rss"]},{key:"cnn",label:"CNN (US/World)",urls:["http://rss.cnn.com/rss/edition.rss"]},{key:"techcrunch",label:"TechCrunch (Tech)",urls:["http://feeds.feedburner.com/TechCrunch"]},{key:"tomshardware",label:"Tom's Hardware (Tech)",urls:["https://www.tomshardware.com/feeds/all"]},{key:"verge",label:"The Verge (Tech)",urls:["https://www.theverge.com/rss/index.xml"]},{key:"arstechnica",label:"Ars Technica (Tech)",urls:["http://feeds.arstechnica.com/arstechnica/index"]}];function formatPubDate(i){if(!i)return"";const n=new Date(i);if(isNaN(n.getTime()))return i;const a=(new Date().getTime()-n.getTime())/1e3;return a<60?"just now":a<3600?`${Math.floor(a/60)} min ago`:a<86400?`${Math.floor(a/3600)} hr ago`:n.toLocaleString("en-GB",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})}const NewsFeedWidget=()=>{const[i,n]=reactExports.useState([]),[s,a]=reactExports.useState(!0),[h,_]=reactExports.useState(null),[w,l]=reactExports.useState("general"),[u,f]=reactExports.useState(()=>{try{return JSON.parse(localStorage.getItem("custom_rss_feeds")||"[]")}catch{return[]}}),[y,p]=reactExports.useState(""),[C,T]=reactExports.useState(!1),[E,x]=reactExports.useState(null),[c,g]=reactExports.useState(!1),[d,m]=reactExports.useState(null);return reactExports.useEffect(()=>{let S=FEEDS.find(b=>b.key===w);if(!S){const b=u.find(P=>P.url===w);b&&(S={key:b.url,label:b.label,urls:[b.url]})}S&&(a(!0),_(null),m(null),Promise.all(S.urls.map(b=>fetch(`https://api.rss2json.com/v1/api.json?rss_url=${encodeURIComponent(b)}`).then(P=>P.json()).then(P=>{if(P.status==="error")throw new Error(P.message||"Feed error");function L(D){if(D.thumbnail)return D.thumbnail;if(D.enclosure&&(D.enclosure.link||D.enclosure.url))return D.enclosure.link||D.enclosure.url;if(D["media:content"]&&D["media:content"].url)return D["media:content"].url;if(D["media:thumbnail"]&&D["media:thumbnail"].url)return D["media:thumbnail"].url;if(D.description){const N=D.description.match(/<img[^>]+src=["']?([^"'>]+)["']?/i);if(N&&N[1])return N[1]}return null}return P.items.map(D=>({title:D.title,url:D.link,source:P.feed&&P.feed.title?P.feed.title:"News",image:L(D),pubDate:D.pubDate||D.published||D.date||null}))}).catch(()=>[]))).then(b=>{const P=[].concat(...b);P.sort((L,D)=>(D.pubDate||"").localeCompare(L.pubDate||"")),n(P.slice(0,20)),a(!1)}).catch(b=>{_("Failed to load news"),m(b&&b.message?b.message:"Feed error"),a(!1)}))},[w]),jsxRuntimeExports.jsxs("div",{style:{padding:14,minWidth:240,color:"#fff"},children:[jsxRuntimeExports.jsx("div",{style:{fontWeight:700,fontSize:22,marginBottom:8,color:"#fff",textAlign:"center",letterSpacing:1},children:"📰 News Feed"}),jsxRuntimeExports.jsxs("div",{style:{marginBottom:10},children:[jsxRuntimeExports.jsx("label",{htmlFor:"newsfeed-select",style:{display:"none"},children:"Select news feed"}),jsxRuntimeExports.jsxs("select",{id:"newsfeed-select","aria-label":"Select news feed",value:w,onChange:S=>l(S.target.value),style:{padding:4,borderRadius:6,border:"1px solid #8f5fff",fontWeight:600},children:[FEEDS.map(S=>jsxRuntimeExports.jsx("option",{value:S.key,children:S.label},S.key)),u.map((S,b)=>jsxRuntimeExports.jsx("option",{value:S.url,children:S.label},S.url))]}),jsxRuntimeExports.jsx("button",{"aria-label":"Manage custom feeds",style:{marginLeft:8,background:"#8f5fff",color:"#fff",border:"2px solid #fff",borderRadius:8,padding:"6px 16px",fontWeight:700,fontSize:15,cursor:"pointer",boxShadow:"0 2px 8px #0002",transition:"background 0.18s"},onClick:()=>T(S=>!S),children:"Manage"}),jsxRuntimeExports.jsxs("form",{style:{marginTop:8,display:"flex",gap:6},onSubmit:S=>{if(S.preventDefault(),!y.trim())return;let b=y.trim();/^https?:\/\//.test(b)||(b="https://"+b);const P=b.replace(/^https?:\/\/(www\.)?/,"").split(/[/?#]/)[0];f(L=>{const D=[...L,{label:P.charAt(0).toUpperCase()+P.slice(1),url:b}];return localStorage.setItem("custom_rss_feeds",JSON.stringify(D)),D}),l(b),p("")},children:[jsxRuntimeExports.jsx("label",{htmlFor:"add-custom-feed",style:{display:"none"},children:"Add custom RSS feed URL"}),jsxRuntimeExports.jsx("input",{id:"add-custom-feed",type:"text",value:y,onChange:S=>p(S.target.value),placeholder:"Add custom RSS feed URL",style:{flex:1,borderRadius:6,border:"1px solid #8f5fff",padding:4,fontSize:14},"aria-label":"Custom RSS feed URL"}),jsxRuntimeExports.jsx("button",{type:"submit",style:{background:"#8f5fff",color:"#fff",border:"none",borderRadius:6,padding:"4px 12px",fontWeight:600,fontSize:14,cursor:"pointer"},children:"Add"})]}),C&&jsxRuntimeExports.jsxs("div",{style:{marginTop:10,background:"#18122a",borderRadius:8,padding:10},"aria-label":"Manage custom feeds",children:[jsxRuntimeExports.jsx("div",{style:{fontWeight:700,marginBottom:6,color:"#fff"},children:"Custom Feeds"}),jsxRuntimeExports.jsx("ul",{style:{listStyle:"none",padding:0,margin:0},children:u.map((S,b)=>jsxRuntimeExports.jsxs("li",{style:{display:"flex",alignItems:"center",marginBottom:6},children:[jsxRuntimeExports.jsx("span",{style:{flex:1,color:"#fff",fontWeight:600},children:S.label}),jsxRuntimeExports.jsx("button",{"aria-label":`Remove ${S.label}`,style:{background:"none",color:"#ff5252",border:"none",fontWeight:700,fontSize:16,cursor:"pointer",marginLeft:8},onClick:()=>{f(P=>{const L=P.filter(D=>D.url!==S.url);return localStorage.setItem("custom_rss_feeds",JSON.stringify(L)),w===S.url&&L.length>0&&l(L[0].url),w===S.url&&L.length===0&&l("general"),L})},children:"×"}),b>0&&jsxRuntimeExports.jsx("button",{"aria-label":`Move up ${S.label}`,style:{background:"none",color:"#8f5fff",border:"none",fontWeight:700,fontSize:16,cursor:"pointer",marginLeft:2},onClick:()=>{f(P=>{const L=[...P];return[L[b-1],L[b]]=[L[b],L[b-1]],localStorage.setItem("custom_rss_feeds",JSON.stringify(L)),L})},children:"↑"}),b<u.length-1&&jsxRuntimeExports.jsx("button",{"aria-label":`Move down ${S.label}`,style:{background:"none",color:"#8f5fff",border:"none",fontWeight:700,fontSize:16,cursor:"pointer",marginLeft:2},onClick:()=>{f(P=>{const L=[...P];return[L[b+1],L[b]]=[L[b],L[b+1]],localStorage.setItem("custom_rss_feeds",JSON.stringify(L)),L})},children:"↓"})]},S.url))})]})]}),d&&jsxRuntimeExports.jsxs("div",{style:{color:"#ffb347",background:"#2e1856",borderRadius:8,padding:12,marginBottom:10,fontWeight:700,display:"flex",alignItems:"center",gap:10},role:"alert",children:[jsxRuntimeExports.jsx("span",{"aria-label":"Feed error",style:{fontSize:22},children:"⚠️"})," ",d,jsxRuntimeExports.jsx("button",{style:{marginLeft:"auto",background:"#8f5fff",color:"#fff",border:"none",borderRadius:6,padding:"4px 14px",fontWeight:700,fontSize:14,cursor:"pointer"},onClick:()=>window.location.reload(),children:"Retry"}),u.some(S=>S.url===w)&&jsxRuntimeExports.jsx("button",{style:{background:"none",color:"#ff5252",border:"none",fontWeight:700,fontSize:16,cursor:"pointer",marginLeft:8},onClick:()=>{f(S=>{const b=S.filter(P=>P.url!==w);return localStorage.setItem("custom_rss_feeds",JSON.stringify(b)),l("general"),b})},children:"Remove Feed"})]}),s?jsxRuntimeExports.jsx("div",{style:{color:"#aaa"},children:"Loading..."}):h?jsxRuntimeExports.jsx("div",{style:{color:"#ff5252"},children:h}):jsxRuntimeExports.jsx("ul",{className:styles["newsfeed-list"],style:{listStyle:"none",padding:0,margin:0,maxHeight:320,overflowY:"auto"},children:i.map((S,b)=>jsxRuntimeExports.jsxs("li",{style:{display:"flex",alignItems:"flex-start",gap:12,marginBottom:18,background:"rgba(44,18,62,0.22)",borderRadius:8,padding:10},children:[S.image&&jsxRuntimeExports.jsx("img",{src:S.image,alt:"",style:{width:64,height:48,objectFit:"cover",borderRadius:6,flexShrink:0,background:"#222"}}),jsxRuntimeExports.jsxs("div",{style:{flex:1},children:[jsxRuntimeExports.jsx("button",{"aria-label":`Preview article: ${S.title}`,style:{color:"#fff",background:"none",border:"none",fontWeight:700,fontSize:16,textAlign:"left",textDecoration:"none",lineHeight:1.3,letterSpacing:.1,outline:"none",cursor:"pointer",padding:0,width:"100%",borderBottom:"1.5px dotted #8f5fff",transition:"background 0.18s, color 0.18s"},onClick:()=>{try{x(S),g(!0)}catch{_("Preview failed to open. Try reloading.")}},onKeyDown:P=>{if(P.key==="Enter"||P.key===" ")try{x(S),g(!0)}catch{_("Preview failed to open. Try reloading.")}},tabIndex:0,onMouseOver:P=>P.currentTarget.style.background="#22113a",onFocus:P=>P.currentTarget.style.background="#22113a",onMouseOut:P=>P.currentTarget.style.background="none",onBlur:P=>P.currentTarget.style.background="none",children:S.title}),jsxRuntimeExports.jsxs("div",{style:{fontSize:13,color:"#fff",marginTop:2,fontWeight:600},children:[S.source,S.pubDate&&jsxRuntimeExports.jsxs("span",{style:{color:"#ccc",fontWeight:400,marginLeft:8,fontSize:12},children:["• ",formatPubDate(S.pubDate)]})]})]})]},b))}),c&&E&&jsxRuntimeExports.jsx("div",{className:modalStyles["newsfeed-modal-bg"],role:"dialog","aria-modal":"true","aria-label":"Article preview",tabIndex:-1,onClick:S=>{S.target===S.currentTarget&&g(!1)},children:jsxRuntimeExports.jsxs("div",{className:modalStyles["newsfeed-modal"],tabIndex:0,style:{outline:"2px solid #8f5fff"},children:[jsxRuntimeExports.jsx("button",{className:modalStyles["newsfeed-modal-close"],"aria-label":"Close preview",onClick:()=>g(!1),tabIndex:0,children:"×"}),E.image&&jsxRuntimeExports.jsx("img",{src:E.image,alt:"",className:modalStyles["newsfeed-modal-img"]}),jsxRuntimeExports.jsx("div",{className:modalStyles["newsfeed-modal-title"],children:E.title}),jsxRuntimeExports.jsxs("div",{className:modalStyles["newsfeed-modal-meta"],children:[E.source," ",E.pubDate&&jsxRuntimeExports.jsxs("span",{children:["• ",formatPubDate(E.pubDate)]})]}),E.url&&jsxRuntimeExports.jsx("a",{href:E.url,target:"_blank",rel:"noopener noreferrer",className:modalStyles["newsfeed-modal-link"],tabIndex:0,children:"Read Full Article"})]})})]})},BUTTONS=[["7","8","9","/"],["4","5","6","*"],["1","2","3","-"],["0",".","=","+"],["DEL","C"]];function safeEval(i){try{return Function("return ("+i+")")()}catch{return"Err"}}const CalculatorWidget=()=>{const[i,n]=reactExports.useState(""),[s,a]=reactExports.useState("");function h(_){if(_==="="){const w=safeEval(i);a(w)}else _==="C"?(n(""),a("")):n(_==="DEL"?w=>w.slice(0,-1):w=>w+_)}return React.useEffect(()=>{const _=w=>{w.key==="Enter"?a(safeEval(i)):w.key==="Backspace"?(n(l=>l.slice(0,-1)),w.preventDefault()):w.key==="Escape"&&(n(""),a(""))};return window.addEventListener("keydown",_),()=>window.removeEventListener("keydown",_)},[i]),jsxRuntimeExports.jsxs("div",{style:{padding:14,minWidth:180,color:"#fff"},children:[jsxRuntimeExports.jsx("div",{style:{fontWeight:700,fontSize:22,marginBottom:8,color:"#fff",textAlign:"center",letterSpacing:1},children:"🧮 Calculator"}),jsxRuntimeExports.jsx("div",{style:{marginBottom:6,background:"#232a39",borderRadius:8,padding:8,fontSize:18,fontWeight:600,minHeight:32},children:s!==""?s:i||"0"}),jsxRuntimeExports.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 38px)",gap:6},children:BUTTONS.flat().map((_,w)=>jsxRuntimeExports.jsx("button",{onClick:()=>h(_),style:{background:_==="="?"#8f5fff":"#232a39",color:"#fff",border:"1px solid #8f5fff",borderRadius:7,fontWeight:600,fontSize:17,padding:"6px 0",cursor:"pointer",gridColumn:_==="C"?"span 2":void 0},children:_==="C"?"Clear":_==="DEL"?"Del":_},w))})]})},StocksWidget=()=>jsxRuntimeExports.jsxs("div",{style:{padding:14,minWidth:420,color:"#fff",overflowX:"auto"},children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:10,fontWeight:700,fontSize:22,marginBottom:8,color:"#fff",letterSpacing:1},children:[jsxRuntimeExports.jsx("span",{style:{fontSize:26,display:"flex",alignItems:"center"},children:"📈"}),jsxRuntimeExports.jsx("span",{children:"Stocks"})]}),jsxRuntimeExports.jsx("div",{style:{overflowX:"auto",cursor:"grab",marginTop:12},tabIndex:0,onMouseDown:i=>{const n=i.currentTarget;let s=i.pageX,a=n.scrollLeft,h=!0;n.style.cursor="grabbing";const _=l=>{if(!h)return;const u=l.pageX;n.scrollLeft=a-(u-s)},w=()=>{h=!1,n.style.cursor="grab",window.removeEventListener("mousemove",_),window.removeEventListener("mouseup",w)};window.addEventListener("mousemove",_),window.addEventListener("mouseup",w)},onTouchStart:i=>{const n=i.currentTarget;let s=i.touches[0].pageX,a=n.scrollLeft,h=!0;const _=l=>{if(!h)return;const u=l.touches[0].pageX;n.scrollLeft=a-(u-s)},w=()=>{h=!1,window.removeEventListener("touchmove",_),window.removeEventListener("touchend",w)};window.addEventListener("touchmove",_),window.addEventListener("touchend",w)},children:jsxRuntimeExports.jsx("iframe",{title:"TradingView Ticker Tape",src:"https://s.tradingview.com/embed-widget/ticker-tape/?locale=en#%7B%22symbols%22%3A%5B%7B%22proName%22%3A%22NASDAQ%3AAAPL%22%2C%22title%22%3A%22Apple%22%7D%2C%7B%22proName%22%3A%22NASDAQ%3ATSLA%22%2C%22title%22%3A%22Tesla%22%7D%2C%7B%22proName%22%3A%22NASDAQ%3ANVDA%22%2C%22title%22%3A%22Nvidia%22%7D%2C%7B%22proName%22%3A%22NASDAQ%3AAMD%22%2C%22title%22%3A%22AMD%22%7D%2C%7B%22proName%22%3A%22NASDAQ%3AMSFT%22%2C%22title%22%3A%22Microsoft%22%7D%2C%7B%22proName%22%3A%22NASDAQ%3AGOOGL%22%2C%22title%22%3A%22Alphabet%22%7D%2C%7B%22proName%22%3A%22NASDAQ%3AMETA%22%2C%22title%22%3A%22Meta%22%7D%2C%7B%22proName%22%3A%22NASDAQ%3AAMZN%22%2C%22title%22%3A%22Amazon%22%7D%2C%7B%22proName%22%3A%22INDEX%3AFTSE%22%2C%22title%22%3A%22FTSE%20100%22%7D%5D%2C%22colorTheme%22%3A%22dark%22%2C%22isTransparent%22%3Afalse%2C%22displayMode%22%3A%22adaptive%22%2C%22locale%22%3A%22en%22%7D",width:"700",height:"80",style:{border:0,minWidth:700,display:"block"},frameBorder:"0",allowTransparency:!0,scrolling:"no"})}),jsxRuntimeExports.jsxs("div",{style:{marginTop:10,fontSize:13,color:"#bfaaff",textAlign:"center"},children:["Real-time data powered by ",jsxRuntimeExports.jsx("a",{href:"https://www.tradingview.com/",style:{color:"#bfaaff",textDecoration:"underline"},target:"_blank",rel:"noopener noreferrer",children:"TradingView"}),"."]})]}),LANGUAGE_FLAGS={en:"🇬🇧",fr:"🇫🇷",es:"🇪🇸",de:"🇩🇪",it:"🇮🇹",ru:"🇷🇺",zh:"🇨🇳",ar:"🇸🇦",pt:"🇵🇹",ja:"🇯🇵",ko:"🇰🇷",nl:"🇳🇱",pl:"🇵🇱",tr:"🇹🇷",sv:"🇸🇪",fi:"🇫🇮",da:"🇩🇰",no:"🇳🇴",cs:"🇨🇿",el:"🇬🇷",he:"🇮🇱",hi:"🇮🇳",th:"🇹🇭",id:"🇮🇩",uk:"🇺🇦",hu:"🇭🇺",ro:"🇷🇴",bg:"🇧🇬",sk:"🇸🇰",sl:"🇸🇮",hr:"🇭🇷",et:"🇪🇪",lv:"🇱🇻",lt:"🇱🇹"},FlagIcon=({code:i})=>jsxRuntimeExports.jsx("span",{style:{fontSize:"1.1em",marginRight:4},children:LANGUAGE_FLAGS[i]||"🌐"}),LANGUAGES=[{code:"en",name:"English"},{code:"fr",name:"French"},{code:"es",name:"Spanish"},{code:"de",name:"German"},{code:"it",name:"Italian"},{code:"uk",name:"Ukrainian"},{code:"zh",name:"Chinese"},{code:"ar",name:"Arabic"},{code:"pt",name:"Portuguese"},{code:"ja",name:"Japanese"},{code:"ko",name:"Korean"},{code:"fi",name:"Finnish"}],MYMEMORY_URL="https://api.mymemory.translated.net/get",TranslatorWidget=()=>{const[i,n]=reactExports.useState(""),[s,a]=reactExports.useState("");React.useEffect(()=>{i||a("")},[i]);const[h,_]=reactExports.useState("en"),[w,l]=reactExports.useState("fr"),[u,f]=reactExports.useState(!1),[y,p]=reactExports.useState(null),C=()=>{_(w),l(h),n(s),a(i)},T=async()=>{f(!0),p(null),a("");try{const E=new URLSearchParams({q:i,langpair:`${h}|${w}`}),x=`${MYMEMORY_URL}?${E.toString()}`,c=await fetch(x);if(!c.ok){p("API error."),f(!1);return}const g=await c.json();g&&g.responseData&&g.responseData.translatedText?a(g.responseData.translatedText):p("Translation failed.")}catch{p("Network/API error.")}f(!1)};return jsxRuntimeExports.jsxs("div",{className:"translator-widget card",children:[jsxRuntimeExports.jsxs("div",{className:"translator-row",children:[jsxRuntimeExports.jsx("select",{value:h,onChange:E=>_(E.target.value),children:LANGUAGES.map(E=>jsxRuntimeExports.jsxs("option",{value:E.code,children:[jsxRuntimeExports.jsx(FlagIcon,{code:E.code})," ",E.name]},E.code))}),jsxRuntimeExports.jsx("button",{className:"translator-swap",onClick:C,title:"Swap languages",children:"⇄"}),jsxRuntimeExports.jsx("select",{value:w,onChange:E=>l(E.target.value),children:LANGUAGES.map(E=>jsxRuntimeExports.jsxs("option",{value:E.code,children:[jsxRuntimeExports.jsx(FlagIcon,{code:E.code})," ",E.name]},E.code))})]}),jsxRuntimeExports.jsx("textarea",{value:i,onChange:E=>n(E.target.value),rows:4,placeholder:"Enter text..."}),jsxRuntimeExports.jsx("button",{onClick:T,disabled:u||!i.trim(),children:u?"Translating...":"Translate"}),jsxRuntimeExports.jsx("textarea",{className:"translator-output",value:s,readOnly:!0,rows:4,placeholder:"Translation appears here..."}),s&&jsxRuntimeExports.jsx("button",{style:{marginTop:4},onClick:()=>{navigator.clipboard.writeText(s)},children:"Copy Translation"}),y&&i.trim()&&jsxRuntimeExports.jsx("div",{style:{color:"red",marginTop:4},children:y})]})},TranslatorWidgetIcon=()=>jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",shapeRendering:"geometricPrecision",textRendering:"geometricPrecision",imageRendering:"optimizeQuality",fillRule:"evenodd",clipRule:"evenodd",viewBox:"0 0 512 350.259",width:"28",height:"28",children:[jsxRuntimeExports.jsx("path",{fill:"#DC5045",d:"M235.685 65.227L46.41 49.97C21.075 47.927-2.386 70.906.195 96.184l15.258 149.398c2.581 25.276 20.808 46.211 46.214 46.211h48.071l71.816 58.466-5.192-58.466h59.323c25.411 0 46.215-20.793 46.215-46.211v-134.14c0-25.421-20.88-44.172-46.215-46.215z"}),jsxRuntimeExports.jsx("path",{fill:"#2278D2",d:"M276.315 15.385L465.59.127c25.335-2.042 48.796 20.936 46.215 46.214l-15.258 149.398c-2.581 25.277-20.807 46.211-46.215 46.211h-50.099l-71.816 58.466 5.191-58.466h-57.293c-25.411 0-46.215-20.793-46.215-46.211V61.599c0-25.421 20.879-44.172 46.215-46.214z"}),jsxRuntimeExports.jsx("path",{fill:"#fff",d:"M88.292 119.662h40.712V108.19h18.188v11.472h40.859v18.833h-8.388c-1.513 11.897-4.839 21.7-10.491 32.267-4.781 8.924-10.954 17.522-18.123 25.762 11.441 13.684 25.645 25.588 42.556 36.44l-9.354 14.58c-17.755-11.391-32.833-23.934-45.224-38.382-11.084 10.723-23.676 20.712-36.865 29.834l-9.833-14.231c13.052-9.031 25.451-18.894 36.12-29.412-9.833-14.386-17.363-30.532-22.574-49.1l16.686-4.679c4.272 15.23 10.263 28.636 17.963 40.636 5.253-6.359 9.796-12.885 13.384-19.586 4.401-8.233 6.765-15.04 8.255-24.129H88.292v-18.833zM396.834 158.594h-52.699l-7.476 25.514h-30.38c12.19-32.265 26.267-71.008 38.463-103.289 4.392-11.659 9.391-30.98 25.365-30.98 16.559 0 22.058 17.702 26.665 29.932l39.049 104.864h-31.278l-7.709-26.041zm-6.101-24.81l-20.177-54.492-20.252 54.492h40.429z"}),jsxRuntimeExports.jsx("path",{d:"M9.5 16c1.5-2.5 3.5-6 5-10",stroke:"#3af",strokeWidth:"1.5",strokeLinecap:"round"}),jsxRuntimeExports.jsx("path",{d:"M14.5 16c-1.5-2.5-3.5-6-5-10",stroke:"#3af",strokeWidth:"1.5",strokeLinecap:"round"})]}),widgetStubs=[{id:"weather",title:"Weather",icon:"☀️",component:WeatherWidget},{id:"notes",title:"Sticky Notes",icon:"📝",component:NotesWidget},{id:"sysmon",title:"System Monitor",icon:"📊",component:SystemMonitorWidget},{id:"calendar",title:"Calendar",icon:"📅",component:CalendarWidget},{id:"news",title:"News Feed",icon:"📰",component:NewsFeedWidget},{id:"calculator",title:"Calculator",icon:"🧮",component:CalculatorWidget},{id:"stocks",title:"Stocks",icon:"📈",component:StocksWidget},{id:"translator",title:"Translator",icon:jsxRuntimeExports.jsx(TranslatorWidgetIcon,{}),component:TranslatorWidget}],DuckStationApp=()=>{const i=reactExports.useRef(null);return reactExports.useEffect(()=>{const n=document.createElement("script");return n.src="/games/duckstation/duckstation.js",n.async=!0,document.body.appendChild(n),n.onload=()=>{const s=window.DuckStation;s&&i.current&&s.init({canvasContainer:i.current})},()=>{document.body.removeChild(n)}},[]),jsxRuntimeExports.jsx("div",{ref:i,style:{width:"100%",height:"100%"}})},PPSSPPApp=()=>{const i=reactExports.useRef(null);return reactExports.useEffect(()=>{const n=document.createElement("script");return n.src="/games/ppsspp/ppsspp.js",n.async=!0,document.body.appendChild(n),n.onload=()=>{const s=window.PPSSPP;s&&i.current&&s.init({canvasContainer:i.current})},()=>{document.body.removeChild(n)}},[]),jsxRuntimeExports.jsx("div",{ref:i,style:{width:"100%",height:"100%"}})};function EosIcon(){return jsxRuntimeExports.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[jsxRuntimeExports.jsxs("g",{filter:"url(#shadow)",children:[jsxRuntimeExports.jsx("rect",{x:"6",y:"10",width:"36",height:"28",rx:"8",fill:"#fff"}),jsxRuntimeExports.jsx("rect",{x:"6",y:"10",width:"36",height:"28",rx:"8",fill:"url(#mail-gradient)",fillOpacity:"0.22"}),jsxRuntimeExports.jsx("rect",{x:"6",y:"10",width:"36",height:"28",rx:"8",stroke:"#2278D2",strokeWidth:"2"}),jsxRuntimeExports.jsx("path",{d:"M10 16l14 10 14-10",stroke:"#2278D2",strokeWidth:"2.5",strokeLinejoin:"round"})]}),jsxRuntimeExports.jsxs("defs",{children:[jsxRuntimeExports.jsxs("linearGradient",{id:"mail-gradient",x1:"6",y1:"10",x2:"42",y2:"38",gradientUnits:"userSpaceOnUse",children:[jsxRuntimeExports.jsx("stop",{stopColor:"#2278D2"}),jsxRuntimeExports.jsx("stop",{offset:"1",stopColor:"#41C6FF"})]}),jsxRuntimeExports.jsx("filter",{id:"shadow",x:"0",y:"6",width:"48",height:"40",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:jsxRuntimeExports.jsx("feDropShadow",{dx:"0",dy:"2",stdDeviation:"2",floodColor:"#2278D2",floodOpacity:"0.09"})})]})]})}function AccountManager({accounts:i,onAdd:n,onRemove:s,onSwitch:a,activeId:h}){const[_,w]=reactExports.useState(!1),[l,u]=reactExports.useState("google"),f=()=>{const y={id:Date.now().toString(),email:l==="google"?"user@gmail.com":"user@outlook.com",provider:l,token:"mock_token"};n(y),w(!1)};return jsxRuntimeExports.jsxs("div",{className:"eos-account-manager",children:[jsxRuntimeExports.jsx("div",{className:"eos-accounts-list",children:i.map(y=>jsxRuntimeExports.jsxs("div",{className:`eos-account-item${h===y.id?" active":""}`,children:[jsxRuntimeExports.jsx("span",{children:y.email}),jsxRuntimeExports.jsx("button",{onClick:()=>a(y.id),disabled:h===y.id,children:"Switch"}),jsxRuntimeExports.jsx("button",{onClick:()=>s(y.id),children:"Remove"})]},y.id))}),jsxRuntimeExports.jsx("button",{className:"eos-add-account",onClick:()=>w(!0),children:"+ Add Account"}),_&&jsxRuntimeExports.jsxs("div",{className:"eos-add-modal",children:[jsxRuntimeExports.jsx("h3",{children:"Add Account"}),jsxRuntimeExports.jsxs("select",{value:l,onChange:y=>u(y.target.value),children:[jsxRuntimeExports.jsx("option",{value:"google",children:"Google (Gmail)"}),jsxRuntimeExports.jsx("option",{value:"outlook",children:"Microsoft (Outlook)"})]}),jsxRuntimeExports.jsx("button",{onClick:f,children:"Continue (Mock OAuth2)"}),jsxRuntimeExports.jsx("button",{onClick:()=>w(!1),children:"Cancel"})]})]})}const getToday=()=>{const i=new Date;return i.setHours(0,0,0,0),i},CalendarPanel=({events:i,onAddEvent:n,onRemoveEvent:s})=>{const[a,h]=reactExports.useState(getToday()),[_,w]=reactExports.useState(!1),[l,u]=reactExports.useState(""),[f,y]=reactExports.useState(""),p=i.filter(P=>{const L=a.toDateString();return P.start.toDateString()===L});function C(){l&&(n({id:Date.now()+Math.random()+"",title:l,start:new Date(a),end:new Date(a),description:f}),w(!1),u(""),y(""))}const T=getToday(),E=a.getMonth(),x=a.getFullYear(),c=new Date(x,E,1),d=new Date(x,E+1,0).getDate(),m=c.getDay(),S=[];let b=Array(m).fill(null);for(let P=1;P<=d;P++)b.push(new Date(x,E,P)),b.length===7&&(S.push(b),b=[]);return b.length&&S.push([...b,...Array(7-b.length).fill(null)]),jsxRuntimeExports.jsxs("div",{className:"calendar-panel",children:[jsxRuntimeExports.jsxs("div",{className:"calendar-header",children:[jsxRuntimeExports.jsx("button",{onClick:()=>h(new Date(x,E-1,1)),children:"<"}),jsxRuntimeExports.jsx("span",{children:a.toLocaleString("default",{month:"long",year:"numeric"})}),jsxRuntimeExports.jsx("button",{onClick:()=>h(new Date(x,E+1,1)),children:">"})]}),jsxRuntimeExports.jsxs("table",{className:"calendar-grid",children:[jsxRuntimeExports.jsx("thead",{children:jsxRuntimeExports.jsx("tr",{children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(P=>jsxRuntimeExports.jsx("th",{children:P},P))})}),jsxRuntimeExports.jsx("tbody",{children:S.map((P,L)=>jsxRuntimeExports.jsx("tr",{children:P.map((D,N)=>jsxRuntimeExports.jsx("td",{className:D?(D.toDateString()===T.toDateString()?"today":"")+(D.toDateString()===a.toDateString()?" selected":""):"empty",onClick:()=>D&&h(D),children:D?D.getDate():""},N))},L))})]}),jsxRuntimeExports.jsxs("div",{className:"calendar-events",children:[jsxRuntimeExports.jsxs("h4",{children:["Events for ",a.toDateString()]}),p.length?jsxRuntimeExports.jsx("ul",{children:p.map(P=>jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("b",{children:P.title})," ",P.description?`- ${P.description}`:"",jsxRuntimeExports.jsx("button",{onClick:()=>s(P.id),children:"Delete"})]},P.id))}):jsxRuntimeExports.jsx("div",{children:"No events."}),_?jsxRuntimeExports.jsxs("div",{className:"calendar-add-event",children:[jsxRuntimeExports.jsx("input",{value:l,onChange:P=>u(P.target.value),placeholder:"Event title"}),jsxRuntimeExports.jsx("input",{value:f,onChange:P=>y(P.target.value),placeholder:"Description (optional)"}),jsxRuntimeExports.jsx("button",{onClick:C,children:"Add"}),jsxRuntimeExports.jsx("button",{onClick:()=>w(!1),children:"Cancel"})]}):jsxRuntimeExports.jsx("button",{onClick:()=>w(!0),children:"Add Event"})]})]})},MOCK_FOLDERS=["Unified Inbox","Inbox","Sent","Drafts","Spam","Archive","Trash","Calendar"];function EosApp(){const[i,n]=reactExports.useState([]),[s,a]=reactExports.useState(null),[h,_]=reactExports.useState("Inbox"),[w,l]=reactExports.useState(!1),[u,f]=reactExports.useState(!navigator.onLine),[y,p]=reactExports.useState([]),[C,T]=reactExports.useState([]);React.useEffect(()=>{const g=()=>f(!navigator.onLine);return window.addEventListener("online",g),window.addEventListener("offline",g),()=>{window.removeEventListener("online",g),window.removeEventListener("offline",g)}},[]);const E=g=>{n(d=>[...d,g]),a(g.id)},x=g=>{n(d=>d.filter(m=>m.id!==g)),s===g&&a(i.length?i[0].id:null)},c=g=>a(g);return jsxRuntimeExports.jsxs("div",{className:"eos-app",children:[jsxRuntimeExports.jsxs("aside",{className:"eos-sidebar",children:[jsxRuntimeExports.jsxs("div",{className:"eos-logo",children:[jsxRuntimeExports.jsx(EosIcon,{}),jsxRuntimeExports.jsx("span",{className:"eos-title",children:"Eos Mail"})]}),jsxRuntimeExports.jsx(AccountManager,{accounts:i,onAdd:E,onRemove:x,onSwitch:c,activeId:s}),jsxRuntimeExports.jsx("button",{className:"eos-rules-btn",onClick:()=>l(!0),children:"Filters / Rules"}),jsxRuntimeExports.jsx("nav",{className:"eos-folders",children:MOCK_FOLDERS.map(g=>jsxRuntimeExports.jsx("button",{className:`eos-folder-btn${h===g?" active":""}`,onClick:()=>_(g),disabled:!s&&g!=="Unified Inbox"&&g!=="Calendar",children:g},g))})]}),jsxRuntimeExports.jsxs("main",{className:"eos-main",children:[u&&jsxRuntimeExports.jsx("div",{className:"eos-offline-banner",children:"Offline Mode: Some features may be unavailable."}),jsxRuntimeExports.jsx("header",{className:"eos-main-header",children:jsxRuntimeExports.jsx("h2",{children:h})}),h==="Unified Inbox"&&jsxRuntimeExports.jsxs("div",{style:{padding:24},children:[jsxRuntimeExports.jsx("b",{children:"Unified Inbox"}),jsxRuntimeExports.jsx("div",{children:"All accounts' emails will appear here. (Mocked for now)"})]}),h==="Calendar"&&jsxRuntimeExports.jsx(CalendarPanel,{events:C,onAddEvent:g=>T(d=>[...d,g]),onRemoveEvent:g=>T(d=>d.filter(m=>m.id!==g))}),jsxRuntimeExports.jsx("section",{className:"eos-message-list",children:s?jsxRuntimeExports.jsx("div",{className:"eos-message-placeholder",children:"No messages yet for this account."}):jsxRuntimeExports.jsx("div",{className:"eos-message-placeholder",children:"Add an account to view messages."})})]})]})}function MusicPlayerIcon(i){return jsxRuntimeExports.jsxs("svg",{width:"28",height:"28",viewBox:"0 0 28 28",fill:"none",...i,children:[jsxRuntimeExports.jsx("circle",{cx:"14",cy:"14",r:"14",fill:"url(#mpg)"}),jsxRuntimeExports.jsx("g",{filter:"url(#shadow)",children:jsxRuntimeExports.jsx("path",{d:"M19 7v9.5a3.5 3.5 0 1 1-1-2.45V9.2l-7 1.6v6.7a3.5 3.5 0 1 1-1-2.45V10l9-2z",fill:"#fff"})}),jsxRuntimeExports.jsxs("defs",{children:[jsxRuntimeExports.jsxs("linearGradient",{id:"mpg",x1:"0",y1:"0",x2:"28",y2:"28",gradientUnits:"userSpaceOnUse",children:[jsxRuntimeExports.jsx("stop",{stopColor:"#2278d2"}),jsxRuntimeExports.jsx("stop",{offset:"1",stopColor:"#a97cff"})]}),jsxRuntimeExports.jsx("filter",{id:"shadow",x:"0",y:"0",width:"28",height:"28",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:jsxRuntimeExports.jsx("feDropShadow",{dx:"0",dy:"1",stdDeviation:"1.5",floodColor:"#2278d2",floodOpacity:"0.10"})})]})]})}const byteToHex=[];for(let i=0;i<256;++i)byteToHex.push((i+256).toString(16).slice(1));function unsafeStringify(i,n=0){return(byteToHex[i[n+0]]+byteToHex[i[n+1]]+byteToHex[i[n+2]]+byteToHex[i[n+3]]+"-"+byteToHex[i[n+4]]+byteToHex[i[n+5]]+"-"+byteToHex[i[n+6]]+byteToHex[i[n+7]]+"-"+byteToHex[i[n+8]]+byteToHex[i[n+9]]+"-"+byteToHex[i[n+10]]+byteToHex[i[n+11]]+byteToHex[i[n+12]]+byteToHex[i[n+13]]+byteToHex[i[n+14]]+byteToHex[i[n+15]]).toLowerCase()}let getRandomValues;const rnds8=new Uint8Array(16);function rng(){if(!getRandomValues){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");getRandomValues=crypto.getRandomValues.bind(crypto)}return getRandomValues(rnds8)}const randomUUID=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),native={randomUUID};function v4(i,n,s){var h;if(native.randomUUID&&!i)return native.randomUUID();i=i||{};const a=i.random??((h=i.rng)==null?void 0:h.call(i))??rng();if(a.length<16)throw new Error("Random bytes length must be >= 16");return a[6]=a[6]&15|64,a[8]=a[8]&63|128,unsafeStringify(a)}const scriptRel="modulepreload",assetsURL=function(i){return"/INyxOS/"+i},seen={},__vitePreload=function i(n,s,a){let h=Promise.resolve();if(s&&s.length>0){let w=function(f){return Promise.all(f.map(y=>Promise.resolve(y).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),u=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));h=w(s.map(f=>{if(f=assetsURL(f),f in seen)return;seen[f]=!0;const y=f.endsWith(".css"),p=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${p}`))return;const C=document.createElement("link");if(C.rel=y?"stylesheet":scriptRel,y||(C.as="script"),C.crossOrigin="",C.href=f,u&&C.setAttribute("nonce",u),document.head.appendChild(C),y)return new Promise((T,E)=>{C.addEventListener("load",T),C.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${f}`)))})}))}function _(w){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=w,window.dispatchEvent(l),!l.defaultPrevented)throw w}return h.then(w=>{for(const l of w||[])l.status==="rejected"&&_(l.reason);return n().catch(_)})};var loadScript,hasRequiredLoadScript;function requireLoadScript(){if(hasRequiredLoadScript)return loadScript;hasRequiredLoadScript=1,loadScript=function(h,_,w){var l=document.head||document.getElementsByTagName("head")[0],u=document.createElement("script");typeof _=="function"&&(w=_,_={}),_=_||{},w=w||function(){},u.type=_.type||"text/javascript",u.charset=_.charset||"utf8",u.async="async"in _?!!_.async:!0,u.src=h,_.attrs&&i(u,_.attrs),_.text&&(u.text=""+_.text);var f="onload"in u?n:s;f(u,w),u.onload||n(u,w),l.appendChild(u)};function i(a,h){for(var _ in h)a.setAttribute(_,h[_])}function n(a,h){a.onload=function(){this.onerror=this.onload=null,h(null,a)},a.onerror=function(){this.onerror=this.onload=null,h(new Error("Failed to load "+this.src),a)}}function s(a,h){a.onreadystatechange=function(){this.readyState!="complete"&&this.readyState!="loaded"||(this.onreadystatechange=null,h(null,a))}}return loadScript}var cjs,hasRequiredCjs;function requireCjs(){if(hasRequiredCjs)return cjs;hasRequiredCjs=1;var i=function(d){return n(d)&&!s(d)};function n(g){return!!g&&typeof g=="object"}function s(g){var d=Object.prototype.toString.call(g);return d==="[object RegExp]"||d==="[object Date]"||_(g)}var a=typeof Symbol=="function"&&Symbol.for,h=a?Symbol.for("react.element"):60103;function _(g){return g.$$typeof===h}function w(g){return Array.isArray(g)?[]:{}}function l(g,d){return d.clone!==!1&&d.isMergeableObject(g)?x(w(g),g,d):g}function u(g,d,m){return g.concat(d).map(function(S){return l(S,m)})}function f(g,d){if(!d.customMerge)return x;var m=d.customMerge(g);return typeof m=="function"?m:x}function y(g){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(g).filter(function(d){return Object.propertyIsEnumerable.call(g,d)}):[]}function p(g){return Object.keys(g).concat(y(g))}function C(g,d){try{return d in g}catch{return!1}}function T(g,d){return C(g,d)&&!(Object.hasOwnProperty.call(g,d)&&Object.propertyIsEnumerable.call(g,d))}function E(g,d,m){var S={};return m.isMergeableObject(g)&&p(g).forEach(function(b){S[b]=l(g[b],m)}),p(d).forEach(function(b){T(g,b)||(C(g,b)&&m.isMergeableObject(d[b])?S[b]=f(b,m)(g[b],d[b],m):S[b]=l(d[b],m))}),S}function x(g,d,m){m=m||{},m.arrayMerge=m.arrayMerge||u,m.isMergeableObject=m.isMergeableObject||i,m.cloneUnlessOtherwiseSpecified=l;var S=Array.isArray(d),b=Array.isArray(g),P=S===b;return P?S?m.arrayMerge(g,d,m):E(g,d,m):l(d,m)}x.all=function(d,m){if(!Array.isArray(d))throw new Error("first argument should be an array");return d.reduce(function(S,b){return x(S,b,m)},{})};var c=x;return cjs=c,cjs}var utils,hasRequiredUtils;function requireUtils(){if(hasRequiredUtils)return utils;hasRequiredUtils=1;var i=Object.create,n=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,h=Object.getPrototypeOf,_=Object.prototype.hasOwnProperty,w=(A,M)=>{for(var B in M)n(A,B,{get:M[B],enumerable:!0})},l=(A,M,B,G)=>{if(M&&typeof M=="object"||typeof M=="function")for(let q of a(M))!_.call(A,q)&&q!==B&&n(A,q,{get:()=>M[q],enumerable:!(G=s(M,q))||G.enumerable});return A},u=(A,M,B)=>(B=A!=null?i(h(A)):{},l(!A||!A.__esModule?n(B,"default",{value:A,enumerable:!0}):B,A)),f=A=>l(n({},"__esModule",{value:!0}),A),y={};w(y,{callPlayer:()=>H,getConfig:()=>F,getSDK:()=>U,isBlobUrl:()=>Y,isMediaStream:()=>z,lazy:()=>E,omit:()=>$,parseEndTime:()=>P,parseStartTime:()=>b,queryString:()=>D,randomString:()=>L,supportsWebKitPresentationMode:()=>k}),utils=f(y);var p=u(requireReact()),C=u(requireLoadScript()),T=u(requireCjs());const E=A=>p.default.lazy(async()=>{const M=await A();return typeof M.default=="function"?M:M.default}),x=/[?&#](?:start|t)=([0-9hms]+)/,c=/[?&#]end=([0-9hms]+)/,g=/(\d+)(h|m|s)/g,d=/^\d+$/;function m(A,M){if(A instanceof Array)return;const B=A.match(M);if(B){const G=B[1];if(G.match(g))return S(G);if(d.test(G))return parseInt(G)}}function S(A){let M=0,B=g.exec(A);for(;B!==null;){const[,G,q]=B;q==="h"&&(M+=parseInt(G,10)*60*60),q==="m"&&(M+=parseInt(G,10)*60),q==="s"&&(M+=parseInt(G,10)),B=g.exec(A)}return M}function b(A){return m(A,x)}function P(A){return m(A,c)}function L(){return Math.random().toString(36).substr(2,5)}function D(A){return Object.keys(A).map(M=>`${M}=${A[M]}`).join("&")}function N(A){return window[A]?window[A]:window.exports&&window.exports[A]?window.exports[A]:window.module&&window.module.exports&&window.module.exports[A]?window.module.exports[A]:null}const I={},U=function(M,B,G=null,q=()=>!0,ie=C.default){const le=N(B);return le&&q(le)?Promise.resolve(le):new Promise((_e,V)=>{if(I[M]){I[M].push({resolve:_e,reject:V});return}I[M]=[{resolve:_e,reject:V}];const Z=se=>{I[M].forEach(te=>te.resolve(se))};if(G){const se=window[G];window[G]=function(){se&&se(),Z(N(B))}}ie(M,se=>{se?(I[M].forEach(te=>te.reject(se)),I[M]=null):G||Z(N(B))})})};function F(A,M){return(0,T.default)(M.config,A.config)}function $(A,...M){const B=[].concat(...M),G={},q=Object.keys(A);for(const ie of q)B.indexOf(ie)===-1&&(G[ie]=A[ie]);return G}function H(A,...M){if(!this.player||!this.player[A]){let B=`ReactPlayer: ${this.constructor.displayName} player could not call %c${A}%c – `;return this.player?this.player[A]||(B+="The method was not available"):B+="The player was not available",console.warn(B,"font-weight: bold",""),null}return this.player[A](...M)}function z(A){return typeof window<"u"&&typeof window.MediaStream<"u"&&A instanceof window.MediaStream}function Y(A){return/^blob:/.test(A)}function k(A=document.createElement("video")){const M=/iPhone|iPod/.test(navigator.userAgent)===!1;return A.webkitSupportsPresentationMode&&typeof A.webkitSetPresentationMode=="function"&&M}function R(A){return A}return utils}var patterns,hasRequiredPatterns;function requirePatterns(){if(hasRequiredPatterns)return patterns;hasRequiredPatterns=1;var i=Object.defineProperty,n=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,h=(H,z)=>{for(var Y in z)i(H,Y,{get:z[Y],enumerable:!0})},_=(H,z,Y,k)=>{if(z&&typeof z=="object"||typeof z=="function")for(let R of s(z))!a.call(H,R)&&R!==Y&&i(H,R,{get:()=>z[R],enumerable:!(k=n(z,R))||k.enumerable});return H},w=H=>_(i({},"__esModule",{value:!0}),H),l={};h(l,{AUDIO_EXTENSIONS:()=>L,DASH_EXTENSIONS:()=>I,FLV_EXTENSIONS:()=>U,HLS_EXTENSIONS:()=>N,MATCH_URL_DAILYMOTION:()=>m,MATCH_URL_FACEBOOK:()=>T,MATCH_URL_FACEBOOK_WATCH:()=>E,MATCH_URL_KALTURA:()=>P,MATCH_URL_MIXCLOUD:()=>S,MATCH_URL_MUX:()=>C,MATCH_URL_SOUNDCLOUD:()=>y,MATCH_URL_STREAMABLE:()=>x,MATCH_URL_TWITCH_CHANNEL:()=>d,MATCH_URL_TWITCH_VIDEO:()=>g,MATCH_URL_VIDYARD:()=>b,MATCH_URL_VIMEO:()=>p,MATCH_URL_WISTIA:()=>c,MATCH_URL_YOUTUBE:()=>f,VIDEO_EXTENSIONS:()=>D,canPlay:()=>$}),patterns=w(l);var u=requireUtils();const f=/(?:youtu\.be\/|youtube(?:-nocookie|education)?\.com\/(?:embed\/|v\/|watch\/|watch\?v=|watch\?.+&v=|shorts\/|live\/))((\w|-){11})|youtube\.com\/playlist\?list=|youtube\.com\/user\//,y=/(?:soundcloud\.com|snd\.sc)\/[^.]+$/,p=/vimeo\.com\/(?!progressive_redirect).+/,C=/stream\.mux\.com\/(?!\w+\.m3u8)(\w+)/,T=/^https?:\/\/(www\.)?facebook\.com.*\/(video(s)?|watch|story)(\.php?|\/).+$/,E=/^https?:\/\/fb\.watch\/.+$/,x=/streamable\.com\/([a-z0-9]+)$/,c=/(?:wistia\.(?:com|net)|wi\.st)\/(?:medias|embed)\/(?:iframe\/)?([^?]+)/,g=/(?:www\.|go\.)?twitch\.tv\/videos\/(\d+)($|\?)/,d=/(?:www\.|go\.)?twitch\.tv\/([a-zA-Z0-9_]+)($|\?)/,m=/^(?:(?:https?):)?(?:\/\/)?(?:www\.)?(?:(?:dailymotion\.com(?:\/embed)?\/video)|dai\.ly)\/([a-zA-Z0-9]+)(?:_[\w_-]+)?(?:[\w.#_-]+)?/,S=/mixcloud\.com\/([^/]+\/[^/]+)/,b=/vidyard.com\/(?:watch\/)?([a-zA-Z0-9-_]+)/,P=/^https?:\/\/[a-zA-Z]+\.kaltura.(com|org)\/p\/([0-9]+)\/sp\/([0-9]+)00\/embedIframeJs\/uiconf_id\/([0-9]+)\/partner_id\/([0-9]+)(.*)entry_id.([a-zA-Z0-9-_].*)$/,L=/\.(m4a|m4b|mp4a|mpga|mp2|mp2a|mp3|m2a|m3a|wav|weba|aac|oga|spx)($|\?)/i,D=/\.(mp4|og[gv]|webm|mov|m4v)(#t=[,\d+]+)?($|\?)/i,N=/\.(m3u8)($|\?)/i,I=/\.(mpd)($|\?)/i,U=/\.(flv)($|\?)/i,F=H=>{if(H instanceof Array){for(const z of H)if(typeof z=="string"&&F(z)||F(z.src))return!0;return!1}return(0,u.isMediaStream)(H)||(0,u.isBlobUrl)(H)?!0:L.test(H)||D.test(H)||N.test(H)||I.test(H)||U.test(H)},$={youtube:H=>H instanceof Array?H.every(z=>f.test(z)):f.test(H),soundcloud:H=>y.test(H)&&!L.test(H),vimeo:H=>p.test(H)&&!D.test(H)&&!N.test(H),mux:H=>C.test(H),facebook:H=>T.test(H)||E.test(H),streamable:H=>x.test(H),wistia:H=>c.test(H),twitch:H=>g.test(H)||d.test(H),dailymotion:H=>m.test(H),mixcloud:H=>S.test(H),vidyard:H=>b.test(H),kaltura:H=>P.test(H),file:F};return patterns}var players,hasRequiredPlayers;function requirePlayers(){if(hasRequiredPlayers)return players;hasRequiredPlayers=1;var i=Object.defineProperty,n=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,h=(p,C)=>{for(var T in C)i(p,T,{get:C[T],enumerable:!0})},_=(p,C,T,E)=>{if(C&&typeof C=="object"||typeof C=="function")for(let x of s(C))!a.call(p,x)&&x!==T&&i(p,x,{get:()=>C[x],enumerable:!(E=n(C,x))||E.enumerable});return p},w=p=>_(i({},"__esModule",{value:!0}),p),l={};h(l,{default:()=>y}),players=w(l);var u=requireUtils(),f=requirePatterns(),y=[{key:"youtube",name:"YouTube",canPlay:f.canPlay.youtube,lazyPlayer:(0,u.lazy)(()=>__vitePreload(()=>import("./YouTube-BohuNPXt.js").then(p=>p.Y),[]))},{key:"soundcloud",name:"SoundCloud",canPlay:f.canPlay.soundcloud,lazyPlayer:(0,u.lazy)(()=>__vitePreload(()=>import("./SoundCloud-Dkbhud-N.js").then(p=>p.S),[]))},{key:"vimeo",name:"Vimeo",canPlay:f.canPlay.vimeo,lazyPlayer:(0,u.lazy)(()=>__vitePreload(()=>import("./Vimeo-BGH6QtCD.js").then(p=>p.V),[]))},{key:"mux",name:"Mux",canPlay:f.canPlay.mux,lazyPlayer:(0,u.lazy)(()=>__vitePreload(()=>import("./Mux-DxuZDX-J.js").then(p=>p.M),[]))},{key:"facebook",name:"Facebook",canPlay:f.canPlay.facebook,lazyPlayer:(0,u.lazy)(()=>__vitePreload(()=>import("./Facebook-B-iXg0Np.js").then(p=>p.F),[]))},{key:"streamable",name:"Streamable",canPlay:f.canPlay.streamable,lazyPlayer:(0,u.lazy)(()=>__vitePreload(()=>import("./Streamable-CVePAJDT.js").then(p=>p.S),[]))},{key:"wistia",name:"Wistia",canPlay:f.canPlay.wistia,lazyPlayer:(0,u.lazy)(()=>__vitePreload(()=>import("./Wistia-CjHCtSYv.js").then(p=>p.W),[]))},{key:"twitch",name:"Twitch",canPlay:f.canPlay.twitch,lazyPlayer:(0,u.lazy)(()=>__vitePreload(()=>import("./Twitch-ypBsHycm.js").then(p=>p.T),[]))},{key:"dailymotion",name:"DailyMotion",canPlay:f.canPlay.dailymotion,lazyPlayer:(0,u.lazy)(()=>__vitePreload(()=>import("./DailyMotion-Co-DsSuL.js").then(p=>p.D),[]))},{key:"mixcloud",name:"Mixcloud",canPlay:f.canPlay.mixcloud,lazyPlayer:(0,u.lazy)(()=>__vitePreload(()=>import("./Mixcloud-De0Jtsd5.js").then(p=>p.M),[]))},{key:"vidyard",name:"Vidyard",canPlay:f.canPlay.vidyard,lazyPlayer:(0,u.lazy)(()=>__vitePreload(()=>import("./Vidyard-CUxmYZPw.js").then(p=>p.V),[]))},{key:"kaltura",name:"Kaltura",canPlay:f.canPlay.kaltura,lazyPlayer:(0,u.lazy)(()=>__vitePreload(()=>import("./Kaltura-DnKPMU77.js").then(p=>p.K),[]))},{key:"file",name:"FilePlayer",canPlay:f.canPlay.file,canEnablePIP:p=>f.canPlay.file(p)&&(document.pictureInPictureEnabled||(0,u.supportsWebKitPresentationMode)())&&!f.AUDIO_EXTENSIONS.test(p),lazyPlayer:(0,u.lazy)(()=>__vitePreload(()=>import("./FilePlayer-C7X-5nkg.js").then(p=>p.F),[]))}];return players}var safeIsNaN=Number.isNaN||function i(n){return typeof n=="number"&&n!==n};function isEqual(i,n){return!!(i===n||safeIsNaN(i)&&safeIsNaN(n))}function areInputsEqual(i,n){if(i.length!==n.length)return!1;for(var s=0;s<i.length;s++)if(!isEqual(i[s],n[s]))return!1;return!0}function memoizeOne(i,n){n===void 0&&(n=areInputsEqual);var s,a=[],h,_=!1;function w(){for(var l=[],u=0;u<arguments.length;u++)l[u]=arguments[u];return _&&s===this&&n(l,a)||(h=i.apply(this,l),_=!0,s=this,a=l),h}return w}const memoizeOne_esm=Object.freeze(Object.defineProperty({__proto__:null,default:memoizeOne},Symbol.toStringTag,{value:"Module"})),require$$2=getAugmentedNamespace(memoizeOne_esm);var reactFastCompare,hasRequiredReactFastCompare;function requireReactFastCompare(){if(hasRequiredReactFastCompare)return reactFastCompare;hasRequiredReactFastCompare=1;var i=typeof Element<"u",n=typeof Map=="function",s=typeof Set=="function",a=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function h(_,w){if(_===w)return!0;if(_&&w&&typeof _=="object"&&typeof w=="object"){if(_.constructor!==w.constructor)return!1;var l,u,f;if(Array.isArray(_)){if(l=_.length,l!=w.length)return!1;for(u=l;u--!==0;)if(!h(_[u],w[u]))return!1;return!0}var y;if(n&&_ instanceof Map&&w instanceof Map){if(_.size!==w.size)return!1;for(y=_.entries();!(u=y.next()).done;)if(!w.has(u.value[0]))return!1;for(y=_.entries();!(u=y.next()).done;)if(!h(u.value[1],w.get(u.value[0])))return!1;return!0}if(s&&_ instanceof Set&&w instanceof Set){if(_.size!==w.size)return!1;for(y=_.entries();!(u=y.next()).done;)if(!w.has(u.value[0]))return!1;return!0}if(a&&ArrayBuffer.isView(_)&&ArrayBuffer.isView(w)){if(l=_.length,l!=w.length)return!1;for(u=l;u--!==0;)if(_[u]!==w[u])return!1;return!0}if(_.constructor===RegExp)return _.source===w.source&&_.flags===w.flags;if(_.valueOf!==Object.prototype.valueOf&&typeof _.valueOf=="function"&&typeof w.valueOf=="function")return _.valueOf()===w.valueOf();if(_.toString!==Object.prototype.toString&&typeof _.toString=="function"&&typeof w.toString=="function")return _.toString()===w.toString();if(f=Object.keys(_),l=f.length,l!==Object.keys(w).length)return!1;for(u=l;u--!==0;)if(!Object.prototype.hasOwnProperty.call(w,f[u]))return!1;if(i&&_ instanceof Element)return!1;for(u=l;u--!==0;)if(!((f[u]==="_owner"||f[u]==="__v"||f[u]==="__o")&&_.$$typeof)&&!h(_[f[u]],w[f[u]]))return!1;return!0}return _!==_&&w!==w}return reactFastCompare=function(w,l){try{return h(w,l)}catch(u){if((u.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw u}},reactFastCompare}var propTypes={exports:{}},ReactPropTypesSecret_1,hasRequiredReactPropTypesSecret;function requireReactPropTypesSecret(){if(hasRequiredReactPropTypesSecret)return ReactPropTypesSecret_1;hasRequiredReactPropTypesSecret=1;var i="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return ReactPropTypesSecret_1=i,ReactPropTypesSecret_1}var factoryWithThrowingShims,hasRequiredFactoryWithThrowingShims;function requireFactoryWithThrowingShims(){if(hasRequiredFactoryWithThrowingShims)return factoryWithThrowingShims;hasRequiredFactoryWithThrowingShims=1;var i=requireReactPropTypesSecret();function n(){}function s(){}return s.resetWarningCache=n,factoryWithThrowingShims=function(){function a(w,l,u,f,y,p){if(p!==i){var C=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw C.name="Invariant Violation",C}}a.isRequired=a;function h(){return a}var _={array:a,bigint:a,bool:a,func:a,number:a,object:a,string:a,symbol:a,any:a,arrayOf:h,element:a,elementType:a,instanceOf:h,node:a,objectOf:h,oneOf:h,oneOfType:h,shape:h,exact:h,checkPropTypes:s,resetWarningCache:n};return _.PropTypes=_,_},factoryWithThrowingShims}var hasRequiredPropTypes;function requirePropTypes(){return hasRequiredPropTypes||(hasRequiredPropTypes=1,propTypes.exports=requireFactoryWithThrowingShims()()),propTypes.exports}var props,hasRequiredProps;function requireProps(){if(hasRequiredProps)return props;hasRequiredProps=1;var i=Object.create,n=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,h=Object.getPrototypeOf,_=Object.prototype.hasOwnProperty,w=(D,N)=>{for(var I in N)n(D,I,{get:N[I],enumerable:!0})},l=(D,N,I,U)=>{if(N&&typeof N=="object"||typeof N=="function")for(let F of a(N))!_.call(D,F)&&F!==I&&n(D,F,{get:()=>N[F],enumerable:!(U=s(N,F))||U.enumerable});return D},u=(D,N,I)=>(I=D!=null?i(h(D)):{},l(!D||!D.__esModule?n(I,"default",{value:D,enumerable:!0}):I,D)),f=D=>l(n({},"__esModule",{value:!0}),D),y={};w(y,{defaultProps:()=>L,propTypes:()=>b}),props=f(y);var p=u(requirePropTypes());const{string:C,bool:T,number:E,array:x,oneOfType:c,shape:g,object:d,func:m,node:S}=p.default,b={url:c([C,x,d]),playing:T,loop:T,controls:T,volume:E,muted:T,playbackRate:E,width:c([C,E]),height:c([C,E]),style:d,progressInterval:E,playsinline:T,pip:T,stopOnUnmount:T,light:c([T,C,d]),playIcon:S,previewTabIndex:E,previewAriaLabel:C,fallback:S,oEmbedUrl:C,wrapper:c([C,m,g({render:m.isRequired})]),config:g({soundcloud:g({options:d}),youtube:g({playerVars:d,embedOptions:d,onUnstarted:m}),facebook:g({appId:C,version:C,playerId:C,attributes:d}),dailymotion:g({params:d}),vimeo:g({playerOptions:d,title:C}),mux:g({attributes:d,version:C}),file:g({attributes:d,tracks:x,forceVideo:T,forceAudio:T,forceHLS:T,forceSafariHLS:T,forceDisableHls:T,forceDASH:T,forceFLV:T,hlsOptions:d,hlsVersion:C,dashVersion:C,flvVersion:C}),wistia:g({options:d,playerId:C,customControls:x}),mixcloud:g({options:d}),twitch:g({options:d,playerId:C}),vidyard:g({options:d})}),onReady:m,onStart:m,onPlay:m,onPause:m,onBuffer:m,onBufferEnd:m,onEnded:m,onError:m,onDuration:m,onSeek:m,onPlaybackRateChange:m,onPlaybackQualityChange:m,onProgress:m,onClickPreview:m,onEnablePIP:m,onDisablePIP:m},P=()=>{},L={playing:!1,loop:!1,controls:!1,volume:null,muted:!1,playbackRate:1,width:"640px",height:"360px",style:{},progressInterval:1e3,playsinline:!1,pip:!1,stopOnUnmount:!0,light:!1,fallback:null,wrapper:"div",previewTabIndex:0,previewAriaLabel:"",oEmbedUrl:"https://noembed.com/embed?url={url}",config:{soundcloud:{options:{visual:!0,buying:!1,liking:!1,download:!1,sharing:!1,show_comments:!1,show_playcount:!1}},youtube:{playerVars:{playsinline:1,showinfo:0,rel:0,iv_load_policy:3,modestbranding:1},embedOptions:{},onUnstarted:P},facebook:{appId:"1309697205772819",version:"v3.3",playerId:null,attributes:{}},dailymotion:{params:{api:1,"endscreen-enable":!1}},vimeo:{playerOptions:{autopause:!1,byline:!1,portrait:!1,title:!1},title:null},mux:{attributes:{},version:"2"},file:{attributes:{},tracks:[],forceVideo:!1,forceAudio:!1,forceHLS:!1,forceDASH:!1,forceFLV:!1,hlsOptions:{},hlsVersion:"1.1.4",dashVersion:"3.1.3",flvVersion:"1.5.0",forceDisableHls:!1},wistia:{options:{},playerId:null,customControls:null},mixcloud:{options:{hide_cover:1}},twitch:{options:{},playerId:null},vidyard:{options:{}}},onReady:P,onStart:P,onPlay:P,onPause:P,onBuffer:P,onBufferEnd:P,onEnded:P,onError:P,onDuration:P,onSeek:P,onPlaybackRateChange:P,onPlaybackQualityChange:P,onProgress:P,onClickPreview:P,onEnablePIP:P,onDisablePIP:P};return props}var Player_1,hasRequiredPlayer;function requirePlayer(){if(hasRequiredPlayer)return Player_1;hasRequiredPlayer=1;var i=Object.create,n=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,h=Object.getPrototypeOf,_=Object.prototype.hasOwnProperty,w=(m,S,b)=>S in m?n(m,S,{enumerable:!0,configurable:!0,writable:!0,value:b}):m[S]=b,l=(m,S)=>{for(var b in S)n(m,b,{get:S[b],enumerable:!0})},u=(m,S,b,P)=>{if(S&&typeof S=="object"||typeof S=="function")for(let L of a(S))!_.call(m,L)&&L!==b&&n(m,L,{get:()=>S[L],enumerable:!(P=s(S,L))||P.enumerable});return m},f=(m,S,b)=>(b=m!=null?i(h(m)):{},u(!m||!m.__esModule?n(b,"default",{value:m,enumerable:!0}):b,m)),y=m=>u(n({},"__esModule",{value:!0}),m),p=(m,S,b)=>(w(m,typeof S!="symbol"?S+"":S,b),b),C={};l(C,{default:()=>d}),Player_1=y(C);var T=f(requireReact()),E=f(requireReactFastCompare()),x=requireProps(),c=requireUtils();const g=5e3;class d extends T.Component{constructor(){super(...arguments),p(this,"mounted",!1),p(this,"isReady",!1),p(this,"isPlaying",!1),p(this,"isLoading",!0),p(this,"loadOnReady",null),p(this,"startOnPlay",!0),p(this,"seekOnPlay",null),p(this,"onDurationCalled",!1),p(this,"handlePlayerMount",S=>{if(this.player){this.progress();return}this.player=S,this.player.load(this.props.url),this.progress()}),p(this,"getInternalPlayer",S=>this.player?this.player[S]:null),p(this,"progress",()=>{if(this.props.url&&this.player&&this.isReady){const S=this.getCurrentTime()||0,b=this.getSecondsLoaded(),P=this.getDuration();if(P){const L={playedSeconds:S,played:S/P};b!==null&&(L.loadedSeconds=b,L.loaded=b/P),(L.playedSeconds!==this.prevPlayed||L.loadedSeconds!==this.prevLoaded)&&this.props.onProgress(L),this.prevPlayed=L.playedSeconds,this.prevLoaded=L.loadedSeconds}}this.progressTimeout=setTimeout(this.progress,this.props.progressFrequency||this.props.progressInterval)}),p(this,"handleReady",()=>{if(!this.mounted)return;this.isReady=!0,this.isLoading=!1;const{onReady:S,playing:b,volume:P,muted:L}=this.props;S(),!L&&P!==null&&this.player.setVolume(P),this.loadOnReady?(this.player.load(this.loadOnReady,!0),this.loadOnReady=null):b&&this.player.play(),this.handleDurationCheck()}),p(this,"handlePlay",()=>{this.isPlaying=!0,this.isLoading=!1;const{onStart:S,onPlay:b,playbackRate:P}=this.props;this.startOnPlay&&(this.player.setPlaybackRate&&P!==1&&this.player.setPlaybackRate(P),S(),this.startOnPlay=!1),b(),this.seekOnPlay&&(this.seekTo(this.seekOnPlay),this.seekOnPlay=null),this.handleDurationCheck()}),p(this,"handlePause",S=>{this.isPlaying=!1,this.isLoading||this.props.onPause(S)}),p(this,"handleEnded",()=>{const{activePlayer:S,loop:b,onEnded:P}=this.props;S.loopOnEnded&&b&&this.seekTo(0),b||(this.isPlaying=!1,P())}),p(this,"handleError",(...S)=>{this.isLoading=!1,this.props.onError(...S)}),p(this,"handleDurationCheck",()=>{clearTimeout(this.durationCheckTimeout);const S=this.getDuration();S?this.onDurationCalled||(this.props.onDuration(S),this.onDurationCalled=!0):this.durationCheckTimeout=setTimeout(this.handleDurationCheck,100)}),p(this,"handleLoaded",()=>{this.isLoading=!1})}componentDidMount(){this.mounted=!0}componentWillUnmount(){clearTimeout(this.progressTimeout),clearTimeout(this.durationCheckTimeout),this.isReady&&this.props.stopOnUnmount&&(this.player.stop(),this.player.disablePIP&&this.player.disablePIP()),this.mounted=!1}componentDidUpdate(S){if(!this.player)return;const{url:b,playing:P,volume:L,muted:D,playbackRate:N,pip:I,loop:U,activePlayer:F,disableDeferredLoading:$}=this.props;if(!(0,E.default)(S.url,b)){if(this.isLoading&&!F.forceLoad&&!$&&!(0,c.isMediaStream)(b)){console.warn(`ReactPlayer: the attempt to load ${b} is being deferred until the player has loaded`),this.loadOnReady=b;return}this.isLoading=!0,this.startOnPlay=!0,this.onDurationCalled=!1,this.player.load(b,this.isReady)}!S.playing&&P&&!this.isPlaying&&this.player.play(),S.playing&&!P&&this.isPlaying&&this.player.pause(),!S.pip&&I&&this.player.enablePIP&&this.player.enablePIP(),S.pip&&!I&&this.player.disablePIP&&this.player.disablePIP(),S.volume!==L&&L!==null&&this.player.setVolume(L),S.muted!==D&&(D?this.player.mute():(this.player.unmute(),L!==null&&setTimeout(()=>this.player.setVolume(L)))),S.playbackRate!==N&&this.player.setPlaybackRate&&this.player.setPlaybackRate(N),S.loop!==U&&this.player.setLoop&&this.player.setLoop(U)}getDuration(){return this.isReady?this.player.getDuration():null}getCurrentTime(){return this.isReady?this.player.getCurrentTime():null}getSecondsLoaded(){return this.isReady?this.player.getSecondsLoaded():null}seekTo(S,b,P){if(!this.isReady){S!==0&&(this.seekOnPlay=S,setTimeout(()=>{this.seekOnPlay=null},g));return}if(b?b==="fraction":S>0&&S<1){const D=this.player.getDuration();if(!D){console.warn("ReactPlayer: could not seek using fraction – duration not yet available");return}this.player.seekTo(D*S,P);return}this.player.seekTo(S,P)}render(){const S=this.props.activePlayer;return S?T.default.createElement(S,{...this.props,onMount:this.handlePlayerMount,onReady:this.handleReady,onPlay:this.handlePlay,onPause:this.handlePause,onEnded:this.handleEnded,onLoaded:this.handleLoaded,onError:this.handleError}):null}}return p(d,"displayName","Player"),p(d,"propTypes",x.propTypes),p(d,"defaultProps",x.defaultProps),Player_1}var ReactPlayer$1,hasRequiredReactPlayer;function requireReactPlayer(){if(hasRequiredReactPlayer)return ReactPlayer$1;hasRequiredReactPlayer=1;var i=Object.create,n=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,h=Object.getPrototypeOf,_=Object.prototype.hasOwnProperty,w=(U,F,$)=>F in U?n(U,F,{enumerable:!0,configurable:!0,writable:!0,value:$}):U[F]=$,l=(U,F)=>{for(var $ in F)n(U,$,{get:F[$],enumerable:!0})},u=(U,F,$,H)=>{if(F&&typeof F=="object"||typeof F=="function")for(let z of a(F))!_.call(U,z)&&z!==$&&n(U,z,{get:()=>F[z],enumerable:!(H=s(F,z))||H.enumerable});return U},f=(U,F,$)=>($=U!=null?i(h(U)):{},u(!U||!U.__esModule?n($,"default",{value:U,enumerable:!0}):$,U)),y=U=>u(n({},"__esModule",{value:!0}),U),p=(U,F,$)=>(w(U,typeof F!="symbol"?F+"":F,$),$),C={};l(C,{createReactPlayer:()=>I}),ReactPlayer$1=y(C);var T=f(requireReact()),E=f(requireCjs()),x=f(require$$2),c=f(requireReactFastCompare()),g=requireProps(),d=requireUtils(),m=f(requirePlayer());const S=(0,d.lazy)(()=>__vitePreload(()=>import("./Preview-wu0qcze9.js").then(U=>U.P),[])),b=typeof window<"u"&&window.document&&typeof document<"u",P=typeof commonjsGlobal<"u"&&commonjsGlobal.window&&commonjsGlobal.window.document,L=Object.keys(g.propTypes),D=b||P?T.Suspense:()=>null,N=[],I=(U,F)=>{var $;return $=class extends T.Component{constructor(){super(...arguments),p(this,"state",{showPreview:!!this.props.light}),p(this,"references",{wrapper:H=>{this.wrapper=H},player:H=>{this.player=H}}),p(this,"handleClickPreview",H=>{this.setState({showPreview:!1}),this.props.onClickPreview(H)}),p(this,"showPreview",()=>{this.setState({showPreview:!0})}),p(this,"getDuration",()=>this.player?this.player.getDuration():null),p(this,"getCurrentTime",()=>this.player?this.player.getCurrentTime():null),p(this,"getSecondsLoaded",()=>this.player?this.player.getSecondsLoaded():null),p(this,"getInternalPlayer",(H="player")=>this.player?this.player.getInternalPlayer(H):null),p(this,"seekTo",(H,z,Y)=>{if(!this.player)return null;this.player.seekTo(H,z,Y)}),p(this,"handleReady",()=>{this.props.onReady(this)}),p(this,"getActivePlayer",(0,x.default)(H=>{for(const z of[...N,...U])if(z.canPlay(H))return z;return F||null})),p(this,"getConfig",(0,x.default)((H,z)=>{const{config:Y}=this.props;return E.default.all([g.defaultProps.config,g.defaultProps.config[z]||{},Y,Y[z]||{}])})),p(this,"getAttributes",(0,x.default)(H=>(0,d.omit)(this.props,L))),p(this,"renderActivePlayer",H=>{if(!H)return null;const z=this.getActivePlayer(H);if(!z)return null;const Y=this.getConfig(H,z.key);return T.default.createElement(m.default,{...this.props,key:z.key,ref:this.references.player,config:Y,activePlayer:z.lazyPlayer||z,onReady:this.handleReady})})}shouldComponentUpdate(H,z){return!(0,c.default)(this.props,H)||!(0,c.default)(this.state,z)}componentDidUpdate(H){const{light:z}=this.props;!H.light&&z&&this.setState({showPreview:!0}),H.light&&!z&&this.setState({showPreview:!1})}renderPreview(H){if(!H)return null;const{light:z,playIcon:Y,previewTabIndex:k,oEmbedUrl:R,previewAriaLabel:A}=this.props;return T.default.createElement(S,{url:H,light:z,playIcon:Y,previewTabIndex:k,previewAriaLabel:A,oEmbedUrl:R,onClick:this.handleClickPreview})}render(){const{url:H,style:z,width:Y,height:k,fallback:R,wrapper:A}=this.props,{showPreview:M}=this.state,B=this.getAttributes(H),G=typeof A=="string"?this.references.wrapper:void 0;return T.default.createElement(A,{ref:G,style:{...z,width:Y,height:k},...B},T.default.createElement(D,{fallback:R},M?this.renderPreview(H):this.renderActivePlayer(H)))}},p($,"displayName","ReactPlayer"),p($,"propTypes",g.propTypes),p($,"defaultProps",g.defaultProps),p($,"addCustomPlayer",H=>{N.push(H)}),p($,"removeCustomPlayers",()=>{N.length=0}),p($,"canPlay",H=>{for(const z of[...N,...U])if(z.canPlay(H))return!0;return!1}),p($,"canEnablePIP",H=>{for(const z of[...N,...U])if(z.canEnablePIP&&z.canEnablePIP(H))return!0;return!1}),$};return ReactPlayer$1}var lib,hasRequiredLib;function requireLib(){if(hasRequiredLib)return lib;hasRequiredLib=1;var i=Object.create,n=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,h=Object.getPrototypeOf,_=Object.prototype.hasOwnProperty,w=(x,c)=>{for(var g in c)n(x,g,{get:c[g],enumerable:!0})},l=(x,c,g,d)=>{if(c&&typeof c=="object"||typeof c=="function")for(let m of a(c))!_.call(x,m)&&m!==g&&n(x,m,{get:()=>c[m],enumerable:!(d=s(c,m))||d.enumerable});return x},u=(x,c,g)=>(g=x!=null?i(h(x)):{},l(!x||!x.__esModule?n(g,"default",{value:x,enumerable:!0}):g,x)),f=x=>l(n({},"__esModule",{value:!0}),x),y={};w(y,{default:()=>E}),lib=f(y);var p=u(requirePlayers()),C=requireReactPlayer();const T=p.default[p.default.length-1];var E=(0,C.createReactPlayer)(p.default,T);return lib}var libExports=requireLib();const ReactPlayer=getDefaultExportFromCjs(libExports),MediaPlayer=({url:i,title:n})=>{const[s,a]=reactExports.useState(!1),[h,_]=reactExports.useState(.8),[w,l]=reactExports.useState(!1),[u,f]=reactExports.useState(0),[y,p]=reactExports.useState(0),[C,T]=reactExports.useState(!1),[E,x]=reactExports.useState(!1),[c,g]=reactExports.useState(1),[d,m]=reactExports.useState(!1),S=reactExports.useRef(null),b=reactExports.useRef(null),P=()=>{a(!s)},L=k=>{const R=parseFloat(k.target.value);_(R),l(R===0)},D=()=>{l(!w)},N=k=>{const R=parseFloat(k.target.value);f(R),T(!0)},I=()=>{T(!1),S.current&&S.current.seekTo(u)},U=k=>{C||f(k.played)},F=k=>{p(k)},$=()=>{var k;document.fullscreenElement?(document.exitFullscreen(),x(!1)):((k=b.current)==null||k.requestFullscreen().catch(R=>{console.error(`Error attempting to enable fullscreen: ${R.message}`)}),x(!0))},H=k=>{if(isNaN(k))return"0:00";const R=new Date(k*1e3),A=R.getUTCHours(),M=R.getUTCMinutes(),B=R.getUTCSeconds().toString().padStart(2,"0");return A?`${A}:${M.toString().padStart(2,"0")}:${B}`:`${M}:${B}`},z=()=>{S.current&&S.current.seekTo(Math.min(u+.05,.999))},Y=()=>{S.current&&S.current.seekTo(Math.max(u-.05,0))};return reactExports.useEffect(()=>{const k=()=>{x(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",k),()=>{document.removeEventListener("fullscreenchange",k)}},[]),jsxRuntimeExports.jsxs("div",{ref:b,className:"player-container",children:[n&&jsxRuntimeExports.jsx("div",{className:"glass",style:{position:"absolute",top:0,left:0,right:0,zIndex:10,padding:"10px",textAlign:"center",borderTopLeftRadius:"16px",borderTopRightRadius:"16px",borderBottomLeftRadius:"0",borderBottomRightRadius:"0"},children:n}),jsxRuntimeExports.jsx("div",{className:"aspect-video",style:{position:"relative"},children:jsxRuntimeExports.jsx(ReactPlayer,{ref:S,url:i,width:"100%",height:"100%",playing:s,volume:h,muted:w,playbackRate:c,onProgress:U,onDuration:F,style:{position:"absolute",top:0,left:0}})}),jsxRuntimeExports.jsxs("div",{className:"player-controls",children:[jsxRuntimeExports.jsxs("div",{className:"progress-container",children:[jsxRuntimeExports.jsx("span",{className:"progress-time",children:H(u*y)}),jsxRuntimeExports.jsx("input",{type:"range",className:"glass-slider",min:0,max:1,step:.001,value:u,onChange:N,onMouseUp:I,onTouchEnd:I}),jsxRuntimeExports.jsx("span",{className:"progress-time",children:H(y)})]}),jsxRuntimeExports.jsxs("div",{className:"controls-row",children:[jsxRuntimeExports.jsxs("div",{className:"control-group",children:[jsxRuntimeExports.jsx("button",{onClick:Y,className:"icon-button","aria-label":"Skip backward",children:jsxRuntimeExports.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[jsxRuntimeExports.jsx("polygon",{points:"19 20 9 12 19 4 19 20"}),jsxRuntimeExports.jsx("line",{x1:"5",y1:"19",x2:"5",y2:"5"})]})}),jsxRuntimeExports.jsx("button",{onClick:P,className:"icon-button","aria-label":s?"Pause":"Play",children:s?jsxRuntimeExports.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[jsxRuntimeExports.jsx("rect",{x:"6",y:"4",width:"4",height:"16"}),jsxRuntimeExports.jsx("rect",{x:"14",y:"4",width:"4",height:"16"})]}):jsxRuntimeExports.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:jsxRuntimeExports.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})})}),jsxRuntimeExports.jsx("button",{onClick:z,className:"icon-button","aria-label":"Skip forward",children:jsxRuntimeExports.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[jsxRuntimeExports.jsx("polygon",{points:"5 4 15 12 5 20 5 4"}),jsxRuntimeExports.jsx("line",{x1:"19",y1:"5",x2:"19",y2:"19"})]})})]}),jsxRuntimeExports.jsxs("div",{className:"control-group",children:[jsxRuntimeExports.jsxs("div",{className:"volume-control",children:[jsxRuntimeExports.jsx("button",{onClick:D,className:"icon-button","aria-label":w?"Unmute":"Mute",children:w?jsxRuntimeExports.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[jsxRuntimeExports.jsx("line",{x1:"1",y1:"1",x2:"23",y2:"23"}),jsxRuntimeExports.jsx("path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12M15 9.34V4a3 3 0 0 0-5.94-.6"}),jsxRuntimeExports.jsx("path",{d:"M17 16.95A7 7 0 0 1 5 12v-2m14 0v2a7 7 0 0 1-.11 1.23"}),jsxRuntimeExports.jsx("line",{x1:"12",y1:"19",x2:"12",y2:"23"}),jsxRuntimeExports.jsx("line",{x1:"8",y1:"23",x2:"16",y2:"23"})]}):jsxRuntimeExports.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[jsxRuntimeExports.jsx("polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5"}),jsxRuntimeExports.jsx("path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"})]})}),jsxRuntimeExports.jsx("input",{type:"range",className:"glass-slider",min:0,max:1,step:.01,value:w?0:h,onChange:L})]}),jsxRuntimeExports.jsx("button",{onClick:$,className:"icon-button","aria-label":E?"Exit fullscreen":"Enter fullscreen",children:E?jsxRuntimeExports.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:jsxRuntimeExports.jsx("path",{d:"M8 3v3a2 2 0 0 1-2 2H3m18 0h-3a2 2 0 0 1-2-2V3m0 18v-3a2 2 0 0 1 2-2h3M3 16h3a2 2 0 0 1 2 2v3"})}):jsxRuntimeExports.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:jsxRuntimeExports.jsx("path",{d:"M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"})})})]})]})]})]})},FilePicker=({onFileSelect:i,acceptedFileTypes:n="video/*,audio/*"})=>{const[s,a]=reactExports.useState(!1),h=reactExports.useRef(null),_=y=>{const p=y.target.files;if(p&&p.length>0){const C=p[0];i(C)}},w=y=>{y.preventDefault(),y.stopPropagation(),a(!1);const p=y.dataTransfer.files;if(p&&p.length>0){const C=p[0];(C.type.startsWith("video/")||C.type.startsWith("audio/"))&&i(C)}},l=y=>{y.preventDefault(),y.stopPropagation(),a(!0)},u=y=>{y.preventDefault(),y.stopPropagation(),a(!1)},f=()=>{var y;(y=h.current)==null||y.click()};return jsxRuntimeExports.jsxs("div",{className:"glass-card",children:[jsxRuntimeExports.jsx("h3",{style:{marginTop:0,marginBottom:"15px"},children:"Open Media File"}),jsxRuntimeExports.jsxs("div",{className:`file-drop-area ${s?"drag-over":""}`,style:{minHeight:56,minWidth:80,height:56,width:80,padding:0,display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 10px auto",borderRadius:8},onDrop:w,onDragOver:l,onDragLeave:u,onClick:f,children:[jsxRuntimeExports.jsx("div",{style:{marginBottom:0},children:jsxRuntimeExports.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",style:{opacity:.7},children:[jsxRuntimeExports.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),jsxRuntimeExports.jsx("polyline",{points:"17 8 12 3 7 8"}),jsxRuntimeExports.jsx("line",{x1:"12",y1:"3",x2:"12",y2:"15"})]})}),jsxRuntimeExports.jsx("input",{type:"file",ref:h,onChange:_,accept:n,className:"file-input"})]})]})},Playlist=({items:i,currentItemId:n,onItemSelect:s})=>{const[a,h]=reactExports.useState("list"),_=(w=0)=>{if(!w)return"--:--";const l=new Date(w*1e3),u=l.getUTCHours(),f=l.getUTCMinutes(),y=l.getUTCSeconds().toString().padStart(2,"0");return u?`${u}:${f.toString().padStart(2,"0")}:${y}`:`${f}:${y}`};return jsxRuntimeExports.jsxs("div",{className:"glass-card playlist-glass",style:{padding:"12px 12px 10px 12px",minWidth:0,minHeight:0,background:"linear-gradient(135deg, rgba(155, 89, 182, 0.18) 0%, rgba(142, 68, 173, 0.15) 100%)",boxShadow:"0 4px 24px 0 rgba(155, 89, 182, 0.08)",borderRadius:"16px",backdropFilter:"blur(16px) saturate(180%)",WebkitBackdropFilter:"blur(16px) saturate(180%)",border:"1px solid rgba(255,255,255,0.13)"},children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-2",style:{marginBottom:6},children:[jsxRuntimeExports.jsx("h3",{style:{margin:0,fontSize:"1.1rem",fontWeight:700},children:"Media Player"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx("button",{onClick:()=>h("list"),className:`icon-button ${a==="list"?"active":""}`,"aria-label":"List view",style:{padding:2},children:jsxRuntimeExports.jsxs("svg",{width:"13",height:"13",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[jsxRuntimeExports.jsx("line",{x1:"8",y1:"6",x2:"21",y2:"6"}),jsxRuntimeExports.jsx("line",{x1:"8",y1:"12",x2:"21",y2:"12"}),jsxRuntimeExports.jsx("line",{x1:"8",y1:"18",x2:"21",y2:"18"}),jsxRuntimeExports.jsx("line",{x1:"3",y1:"6",x2:"3.01",y2:"6"}),jsxRuntimeExports.jsx("line",{x1:"3",y1:"12",x2:"3.01",y2:"12"}),jsxRuntimeExports.jsx("line",{x1:"3",y1:"18",x2:"3.01",y2:"18"})]})}),jsxRuntimeExports.jsx("button",{onClick:()=>h("grid"),className:`icon-button ${a==="grid"?"active":""}`,"aria-label":"Grid view",style:{padding:2},children:jsxRuntimeExports.jsxs("svg",{width:"13",height:"13",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[jsxRuntimeExports.jsx("rect",{x:"3",y:"3",width:"7",height:"7"}),jsxRuntimeExports.jsx("rect",{x:"14",y:"3",width:"7",height:"7"}),jsxRuntimeExports.jsx("rect",{x:"14",y:"14",width:"7",height:"7"}),jsxRuntimeExports.jsx("rect",{x:"3",y:"14",width:"7",height:"7"})]})})]})]}),i.length===0?jsxRuntimeExports.jsxs("div",{className:"empty-state",style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:120,padding:"10px 0",borderRadius:12,background:"linear-gradient(135deg, rgba(155, 89, 182, 0.10) 0%, rgba(142, 68, 173, 0.08) 100%)",boxShadow:"0 2px 12px 0 rgba(155, 89, 182, 0.05)",backdropFilter:"blur(8px) saturate(160%)",WebkitBackdropFilter:"blur(8px) saturate(160%)"},children:[jsxRuntimeExports.jsx("div",{className:"empty-state-icon",style:{marginBottom:6},children:jsxRuntimeExports.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",children:[jsxRuntimeExports.jsx("path",{d:"M9 18V5l12-2v13"}),jsxRuntimeExports.jsx("circle",{cx:"6",cy:"18",r:"3"}),jsxRuntimeExports.jsx("circle",{cx:"18",cy:"16",r:"3"})]})}),jsxRuntimeExports.jsx("p",{className:"empty-state-text",style:{margin:0,fontSize:"1rem",fontWeight:500},children:"No items in playlist"}),jsxRuntimeExports.jsx("p",{style:{margin:0,fontSize:"13px",opacity:.7},children:"Add media files to get started"})]}):a==="list"?jsxRuntimeExports.jsx("div",{className:"playlist",children:i.map(w=>jsxRuntimeExports.jsxs("div",{onClick:()=>s(w),className:`playlist-item ${n===w.id?"active":""}`,children:[jsxRuntimeExports.jsx("div",{className:"playlist-thumbnail",children:w.thumbnail?jsxRuntimeExports.jsx("img",{src:w.thumbnail,alt:w.title}):jsxRuntimeExports.jsx("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"rgba(0,0,0,0.2)"},children:w.type==="video"?jsxRuntimeExports.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[jsxRuntimeExports.jsx("rect",{x:"2",y:"2",width:"20",height:"20",rx:"2.18",ry:"2.18"}),jsxRuntimeExports.jsx("line",{x1:"7",y1:"2",x2:"7",y2:"22"}),jsxRuntimeExports.jsx("line",{x1:"17",y1:"2",x2:"17",y2:"22"}),jsxRuntimeExports.jsx("line",{x1:"2",y1:"12",x2:"22",y2:"12"}),jsxRuntimeExports.jsx("line",{x1:"2",y1:"7",x2:"7",y2:"7"}),jsxRuntimeExports.jsx("line",{x1:"2",y1:"17",x2:"7",y2:"17"}),jsxRuntimeExports.jsx("line",{x1:"17",y1:"17",x2:"22",y2:"17"}),jsxRuntimeExports.jsx("line",{x1:"17",y1:"7",x2:"22",y2:"7"})]}):jsxRuntimeExports.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[jsxRuntimeExports.jsx("path",{d:"M9 18V5l12-2v13"}),jsxRuntimeExports.jsx("circle",{cx:"6",cy:"18",r:"3"}),jsxRuntimeExports.jsx("circle",{cx:"18",cy:"16",r:"3"})]})})}),jsxRuntimeExports.jsxs("div",{className:"playlist-info",children:[jsxRuntimeExports.jsx("div",{className:"playlist-title",children:w.title}),w.duration&&jsxRuntimeExports.jsx("div",{className:"playlist-duration",children:_(w.duration)})]})]},w.id))}):jsxRuntimeExports.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(120px, 1fr))",gap:"10px",maxHeight:"300px",overflowY:"auto"},children:i.map(w=>jsxRuntimeExports.jsxs("div",{onClick:()=>s(w),style:{cursor:"pointer",borderRadius:"8px",overflow:"hidden",border:n===w.id?"2px solid var(--primary-color)":"1px solid transparent",transition:"all 0.2s ease"},children:[jsxRuntimeExports.jsxs("div",{style:{aspectRatio:"16/9",backgroundColor:"rgba(0,0,0,0.2)",position:"relative"},children:[w.thumbnail?jsxRuntimeExports.jsx("img",{src:w.thumbnail,alt:w.title,style:{width:"100%",height:"100%",objectFit:"cover"}}):jsxRuntimeExports.jsx("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:w.type==="video"?jsxRuntimeExports.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",children:[jsxRuntimeExports.jsx("rect",{x:"2",y:"2",width:"20",height:"20",rx:"2.18",ry:"2.18"}),jsxRuntimeExports.jsx("line",{x1:"7",y1:"2",x2:"7",y2:"22"}),jsxRuntimeExports.jsx("line",{x1:"17",y1:"2",x2:"17",y2:"22"}),jsxRuntimeExports.jsx("line",{x1:"2",y1:"12",x2:"22",y2:"12"}),jsxRuntimeExports.jsx("line",{x1:"2",y1:"7",x2:"7",y2:"7"}),jsxRuntimeExports.jsx("line",{x1:"2",y1:"17",x2:"7",y2:"17"}),jsxRuntimeExports.jsx("line",{x1:"17",y1:"17",x2:"22",y2:"17"}),jsxRuntimeExports.jsx("line",{x1:"17",y1:"7",x2:"22",y2:"7"})]}):jsxRuntimeExports.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",children:[jsxRuntimeExports.jsx("path",{d:"M9 18V5l12-2v13"}),jsxRuntimeExports.jsx("circle",{cx:"6",cy:"18",r:"3"}),jsxRuntimeExports.jsx("circle",{cx:"18",cy:"16",r:"3"})]})}),w.duration&&jsxRuntimeExports.jsx("div",{style:{position:"absolute",bottom:"5px",right:"5px",backgroundColor:"rgba(0,0,0,0.7)",color:"white",fontSize:"10px",padding:"2px 4px",borderRadius:"4px"},children:_(w.duration)})]}),jsxRuntimeExports.jsx("div",{style:{padding:"5px"},children:jsxRuntimeExports.jsx("div",{style:{fontSize:"12px",fontWeight:500,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:w.title})})]},w.id))})]})},APP_WIDTH=1400,APP_HEIGHT=700,PLAYER_WIDTH=960,GAP_BETWEEN=32,CONTROLS_GAP=20,BUTTON_ICON_SIZE=32,BUTTON_ICON_STROKE_WIDTH=2,MAIN_CONTENT_MARGIN=32,BG_COLOR="#232946",BG_COLOR_2="#121629",App=()=>{var y;const[i,n]=reactExports.useState([]),[s,a]=reactExports.useState(null),[h,_]=reactExports.useState(""),w=p=>{const C=URL.createObjectURL(p),T=p.type.startsWith("video")?"video":"audio",E={id:v4(),title:p.name,url:C,type:T};n(x=>{if(x.some(d=>d.url===C))return x;const g=[...x,E];return x.length===0&&a(E.id),g})};reactExports.useEffect(()=>{if(s){const p=i.find(C=>C.id===s);p&&_(p.url)}else _("")},[s,i]);const l=p=>{a(p.id)},u=()=>{if(i.length===0||s===null)return;const p=i.findIndex(C=>C.id===s);p===-1||p===i.length-1?a(i[0].id):a(i[p+1].id)},f=()=>{if(i.length===0||s===null)return;const p=i.findIndex(C=>C.id===s);a(p===-1||p===0?i[i.length-1].id:i[p-1].id)};return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"animated-bg"}),jsxRuntimeExports.jsx("div",{className:"container",style:{width:APP_WIDTH,height:APP_HEIGHT,margin:"32px auto",display:"flex",flexDirection:"row",background:`linear-gradient(135deg, ${BG_COLOR}, ${BG_COLOR_2})`},children:jsxRuntimeExports.jsxs("main",{className:"main-content",style:{display:"flex",flexDirection:"row",alignItems:"flex-start",gap:GAP_BETWEEN,width:"100%",height:"100%"},children:[jsxRuntimeExports.jsxs("div",{style:{width:PLAYER_WIDTH,height:APP_HEIGHT,display:"flex",flexDirection:"column",justifyContent:"flex-start"},children:[jsxRuntimeExports.jsx("div",{className:"player-container",children:h?jsxRuntimeExports.jsx(MediaPlayer,{url:h,title:(y=i.find(p=>p.id===s))==null?void 0:y.title}):jsxRuntimeExports.jsxs("div",{className:"glass-card with-animated-border",style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"12px",margin:"0 auto",maxWidth:"110px"},children:[jsxRuntimeExports.jsx("svg",{width:BUTTON_ICON_SIZE-10,height:BUTTON_ICON_SIZE-10,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:BUTTON_ICON_STROKE_WIDTH,strokeLinecap:"round",strokeLinejoin:"round",style:{opacity:.5,marginBottom:"8px"},children:jsxRuntimeExports.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})}),jsxRuntimeExports.jsx("p",{style:{margin:"0 0 2px",fontSize:"15px"},children:"No media selected"}),jsxRuntimeExports.jsx("p",{style:{margin:"0",fontSize:"12px",opacity:.7},children:"Use the file picker to select media"})]})}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:CONTROLS_GAP,marginTop:MAIN_CONTENT_MARGIN},children:[jsxRuntimeExports.jsxs("button",{onClick:f,className:"glass-button",disabled:!s,"aria-label":"Previous track",children:[jsxRuntimeExports.jsxs("svg",{width:BUTTON_ICON_SIZE,height:BUTTON_ICON_SIZE,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:BUTTON_ICON_STROKE_WIDTH,strokeLinecap:"round",strokeLinejoin:"round",children:[jsxRuntimeExports.jsx("polygon",{points:"19 20 9 12 19 4 19 20"}),jsxRuntimeExports.jsx("line",{x1:"5",y1:"19",x2:"5",y2:"5"})]}),jsxRuntimeExports.jsx("span",{style:{marginLeft:"5px"},children:"Previous"})]}),jsxRuntimeExports.jsxs("button",{onClick:u,className:"glass-button",disabled:!s,"aria-label":"Next track",children:[jsxRuntimeExports.jsx("span",{style:{marginRight:"5px"},children:"Next"}),jsxRuntimeExports.jsxs("svg",{width:BUTTON_ICON_SIZE,height:BUTTON_ICON_SIZE,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:BUTTON_ICON_STROKE_WIDTH,strokeLinecap:"round",strokeLinejoin:"round",children:[jsxRuntimeExports.jsx("polygon",{points:"5 4 15 12 5 20 5 4"}),jsxRuntimeExports.jsx("line",{x1:"19",y1:"5",x2:"19",y2:"19"})]})]})]})]}),jsxRuntimeExports.jsxs("div",{style:{width:280,display:"flex",flexDirection:"column",gap:24,marginLeft:"-10px",height:"100%"},children:[jsxRuntimeExports.jsx(FilePicker,{onFileSelect:w}),jsxRuntimeExports.jsx("div",{style:{marginTop:"15px"},children:jsxRuntimeExports.jsx(Playlist,{items:i,currentItemId:s,onItemSelect:l})})]})]})})]})},defaultPorts={vnc:5900,rdp:3389,ssh:22},ConnectionManager=({onClose:i,onConnect:n})=>{const[s,a]=reactExports.useState("vnc"),[h,_]=reactExports.useState(""),[w,l]=reactExports.useState(defaultPorts[s]),[u,f]=reactExports.useState(""),[y,p]=reactExports.useState(""),[C,T]=reactExports.useState("");return React.useEffect(()=>{l(defaultPorts[s])},[s]),jsxRuntimeExports.jsxs("div",{className:"rd-connection-manager plasma-ui",children:[jsxRuntimeExports.jsx("h3",{children:"New Connection"}),jsxRuntimeExports.jsxs("label",{children:["Protocol",jsxRuntimeExports.jsxs("select",{value:s,onChange:E=>a(E.target.value),children:[jsxRuntimeExports.jsx("option",{value:"vnc",children:"VNC"}),jsxRuntimeExports.jsx("option",{value:"rdp",children:"RDP"}),jsxRuntimeExports.jsx("option",{value:"ssh",children:"SSH"})]})]}),jsxRuntimeExports.jsxs("label",{children:["Host",jsxRuntimeExports.jsx("input",{value:h,onChange:E=>_(E.target.value),placeholder:"192.168.1.100 or server.example.com"})]}),jsxRuntimeExports.jsxs("label",{children:["Port",jsxRuntimeExports.jsx("input",{type:"number",value:w,onChange:E=>l(Number(E.target.value))})]}),(s==="ssh"||s==="rdp")&&jsxRuntimeExports.jsxs("label",{children:["Username",jsxRuntimeExports.jsx("input",{value:u,onChange:E=>f(E.target.value)})]}),(s==="ssh"||s==="rdp")&&jsxRuntimeExports.jsxs("label",{children:["Password",jsxRuntimeExports.jsx("input",{type:"password",value:y,onChange:E=>p(E.target.value)})]}),jsxRuntimeExports.jsxs("label",{children:["Profile Name",jsxRuntimeExports.jsx("input",{value:C,onChange:E=>T(E.target.value),placeholder:"Work Server, Home Pi, etc."})]}),jsxRuntimeExports.jsxs("div",{className:"rd-conn-actions",children:[jsxRuntimeExports.jsx("button",{onClick:i,children:"Cancel"}),jsxRuntimeExports.jsx("button",{className:"rd-connect-btn",onClick:()=>{h&&n({id:`${s}-${h}-${Date.now()}`,name:C||`${s.toUpperCase()} @ ${h}`,protocol:s,host:h,port:w,username:u,password:y})},children:"Connect"})]})]})},RFB=window.RFB,VncSession=({profile:i})=>{const n=reactExports.useRef(null),s=reactExports.useRef(null),[a,h]=reactExports.useState("connecting"),[_,w]=reactExports.useState(null);reactExports.useEffect(()=>{if(!n.current)return;let u;try{u=new RFB(n.current,`ws://${i.host}:${i.port}`),s.current=u,h("connecting"),u.addEventListener("connect",()=>h("connected")),u.addEventListener("disconnect",()=>h("disconnected")),u.addEventListener("securityfailure",f=>{h("error"),w(f.detail.reason||"Security failure")}),u.addEventListener("clipboard",f=>{f.detail&&f.detail.text&&navigator.clipboard.writeText(f.detail.text)})}catch(f){h("error"),w(f.message)}return()=>{s.current&&(s.current.disconnect(),s.current=null)}},[i.host,i.port]);const l=u=>{u.preventDefault(),alert("File transfer via VNC is not supported by all servers.")};return jsxRuntimeExports.jsxs("div",{className:"rd-session-vnc",children:[jsxRuntimeExports.jsxs("div",{className:"rd-vnc-status",children:["Status: ",jsxRuntimeExports.jsx("span",{className:`rd-status rd-status--${a}`,children:a.charAt(0).toUpperCase()+a.slice(1)}),_&&jsxRuntimeExports.jsxs("span",{className:"rd-status-error",children:["Error: ",_]})]}),jsxRuntimeExports.jsx("div",{ref:n,className:"rd-vnc-canvas",style:{width:"100%",height:"480px",background:"#232a39",borderRadius:8,marginTop:8},onDrop:l,onDragOver:u=>u.preventDefault()})]})};var t=t||{};t.ArrayBufferReader=function(i){var n=this;i.onblob=function(s){for(var a=window.atob(s),h=new ArrayBuffer(a.length),_=new Uint8Array(h),w=0;w<a.length;w++)_[w]=a.charCodeAt(w);n.ondata&&n.ondata(h)},i.onend=function(){n.onend&&n.onend()},this.ondata=null,this.onend=null};var t=t||{};t.ArrayBufferWriter=function(i){var n=this;i.onack=function(a){n.onack&&n.onack(a)};function s(a){for(var h="",_=0;_<a.byteLength;_++)h+=String.fromCharCode(a[_]);i.sendBlob(window.btoa(h))}this.blobLength=t.ArrayBufferWriter.DEFAULT_BLOB_LENGTH,this.sendData=function(a){var h=new Uint8Array(a);if(h.length<=n.blobLength)s(h);else for(var _=0;_<h.length;_+=n.blobLength)s(h.subarray(_,_+n.blobLength))},this.sendEnd=function(){i.sendEnd()},this.onack=null};t.ArrayBufferWriter.DEFAULT_BLOB_LENGTH=6048;var t=t||{};t.AudioContextFactory={singleton:null,getAudioContext:function(){var i=window.AudioContext||window.webkitAudioContext;if(i)try{return t.AudioContextFactory.singleton||(t.AudioContextFactory.singleton=new i),t.AudioContextFactory.singleton}catch{}return null}};var t=t||{};t.AudioPlayer=function(){this.sync=function(){}};t.AudioPlayer.isSupportedType=function(i){return t.RawAudioPlayer.isSupportedType(i)};t.AudioPlayer.getSupportedTypes=function(){return t.RawAudioPlayer.getSupportedTypes()};t.AudioPlayer.getInstance=function(i,n){return t.RawAudioPlayer.isSupportedType(n)?new t.RawAudioPlayer(i,n):null};t.RawAudioPlayer=function(i,n){var s=t.RawAudioFormat.parse(n),a=t.AudioContextFactory.getAudioContext(),h=a.currentTime,_=new t.ArrayBufferReader(i),w=.02,l=.3,u=s.bytesPerSample===1?window.Int8Array:window.Int16Array,f=s.bytesPerSample===1?128:32768,y=[],p=function(c){if(c.length<=1)return c[0];var g=0;c.forEach(function(S){g+=S.length});var d=0,m=new u(g);return c.forEach(function(S){m.set(S,d),d+=S.length}),m},C=function(c){for(var g=Number.MAX_VALUE,d=c.length,m=Math.floor(c.length/s.channels),S=Math.floor(s.rate*w),b=Math.max(s.channels*S,s.channels*(m-S)),P=b;P<c.length;P+=s.channels){for(var L=0,D=0;D<s.channels;D++)L+=Math.abs(c[P+D]);L<=g&&(d=P+s.channels,g=L)}return d===c.length?[c]:[new u(c.buffer.slice(0,d*s.bytesPerSample)),new u(c.buffer.slice(d*s.bytesPerSample))]},T=function(c){y.push(new u(c))},E=function(){var c=p(y);return c?(y=C(c),c=y.shift(),c):null},x=function(c){var g=c.length/s.channels,d=a.currentTime;h<d&&(h=d);for(var m=a.createBuffer(s.channels,g,s.rate),S=0;S<s.channels;S++)for(var b=m.getChannelData(S),P=S,L=0;L<g;L++)b[L]=c[P]/f,P+=s.channels;return m};_.ondata=function(c){T(new u(c));var g=E();if(g){var d=a.currentTime;h<d&&(h=d);var m=a.createBufferSource();m.connect(a.destination),m.start||(m.start=m.noteOn),m.buffer=x(g),m.start(h),h+=g.length/s.channels/s.rate}},this.sync=function(){var c=a.currentTime;h=Math.min(h,c+l)}};t.RawAudioPlayer.prototype=new t.AudioPlayer;t.RawAudioPlayer.isSupportedType=function(i){return t.AudioContextFactory.getAudioContext()?t.RawAudioFormat.parse(i)!==null:!1};t.RawAudioPlayer.getSupportedTypes=function(){return t.AudioContextFactory.getAudioContext()?["audio/L8","audio/L16"]:[]};var t=t||{};t.AudioRecorder=function(){this.onclose=null,this.onerror=null};t.AudioRecorder.isSupportedType=function(i){return t.RawAudioRecorder.isSupportedType(i)};t.AudioRecorder.getSupportedTypes=function(){return t.RawAudioRecorder.getSupportedTypes()};t.AudioRecorder.getInstance=function(i,n){return t.RawAudioRecorder.isSupportedType(n)?new t.RawAudioRecorder(i,n):null};t.RawAudioRecorder=function(i,n){var s=this,a=2048,h=3,_=t.RawAudioFormat.parse(n),w=t.AudioContextFactory.getAudioContext();navigator.mediaDevices||(navigator.mediaDevices={}),navigator.mediaDevices.getUserMedia||(navigator.mediaDevices.getUserMedia=(navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia).bind(navigator));var l=new t.ArrayBufferWriter(i),u=_.bytesPerSample===1?window.Int8Array:window.Int16Array,f=_.bytesPerSample===1?128:32768,y=0,p=0,C=null,T=null,E=null,x=function(L){if(L===0)return 1;var D=Math.PI*L;return Math.sin(D)/D},c=function(L,D){return-3<L&&L<D?x(L)*x(L/D):0},g=function(L,D){for(var N=(L.length-1)*D,I=Math.floor(N)-h+1,U=Math.floor(N)+h,F=0,$=I;$<=U;$++)F+=(L[$]||0)*c(N-$,h);return F},d=function(L){var D=L.length;y+=D;var N=Math.round(y*_.rate/L.sampleRate),I=N-p;p+=I;for(var U=new u(I*_.channels),F=0;F<_.channels;F++)for(var $=L.getChannelData(F),H=F,z=0;z<I;z++)U[H]=g($,z/(I-1))*f,H+=_.channels;return U},m=function(L){E=w.createScriptProcessor(a,_.channels,_.channels),E.connect(w.destination),E.onaudioprocess=function(D){l.sendData(d(D.inputBuffer).buffer)},T=w.createMediaStreamSource(L),T.connect(E),w.state==="suspended"&&w.resume(),C=L},S=function(){l.sendEnd(),s.onerror&&s.onerror()},b=function(){var L=navigator.mediaDevices.getUserMedia({audio:!0},m,S);L&&L.then&&L.then(m,S)},P=function(){if(T&&T.disconnect(),E&&E.disconnect(),C)for(var L=C.getTracks(),D=0;D<L.length;D++)L[D].stop();E=null,T=null,C=null,l.sendEnd()};l.onack=function(L){L.code===t.Status.Code.SUCCESS&&!C?b():(P(),l.onack=null,L.code===t.Status.Code.RESOURCE_CLOSED?s.onclose&&s.onclose():s.onerror&&s.onerror())}};t.RawAudioRecorder.prototype=new t.AudioRecorder;t.RawAudioRecorder.isSupportedType=function(i){return t.AudioContextFactory.getAudioContext()?t.RawAudioFormat.parse(i)!==null:!1};t.RawAudioRecorder.getSupportedTypes=function(){return t.AudioContextFactory.getAudioContext()?["audio/L8","audio/L16"]:[]};var t=t||{};t.BlobReader=function(i,n){var s=this,a=0,h;window.BlobBuilder?h=new BlobBuilder:window.WebKitBlobBuilder?h=new WebKitBlobBuilder:window.MozBlobBuilder?h=new MozBlobBuilder:h=new function(){var _=[];this.append=function(w){_.push(new Blob([w],{type:n}))},this.getBlob=function(){return new Blob(_,{type:n})}},i.onblob=function(_){for(var w=window.atob(_),l=new ArrayBuffer(w.length),u=new Uint8Array(l),f=0;f<w.length;f++)u[f]=w.charCodeAt(f);h.append(l),a+=l.byteLength,s.onprogress&&s.onprogress(l.byteLength),i.sendAck("OK",0)},i.onend=function(){s.onend&&s.onend()},this.getLength=function(){return a},this.getBlob=function(){return h.getBlob()},this.onprogress=null,this.onend=null};var t=t||{};t.BlobWriter=function(i){var n=this,s=new t.ArrayBufferWriter(i);s.onack=function(h){n.onack&&n.onack(h)};var a=function(h,_,w){var l=(h.slice||h.webkitSlice||h.mozSlice).bind(h),u=w-_;if(u!==w){var f=l(_,u);if(f.size===u)return f}return l(_,w)};this.sendBlob=function(h){var _=0,w=new FileReader,l=function(){if(_>=h.size){n.oncomplete&&n.oncomplete(h);return}var u=a(h,_,_+s.blobLength);_+=s.blobLength,w.readAsArrayBuffer(u)};w.onload=function(){s.sendData(w.result),s.onack=function(u){n.onack&&n.onack(u),!u.isError()&&(n.onprogress&&n.onprogress(h,_-s.blobLength),l())}},w.onerror=function(){n.onerror&&n.onerror(h,_,w.error)},l()},this.sendEnd=function(){s.sendEnd()},this.onack=null,this.onerror=null,this.onprogress=null,this.oncomplete=null};var t=t||{};t.Client=function(i){var n=this,s=0,a=1,h=2,_=3,w=4,l=5,u=s,f=0,y=5e3,p=null,C=0,T={0:"butt",1:"round",2:"square"},E={0:"bevel",1:"miter",2:"round"},x=new t.Display,c={},g={},d=[],m=[],S=[],b=new t.IntegerPool,P=[];function L(k){k!=u&&(u=k,n.onstatechange&&n.onstatechange(u))}function D(){return u==_||u==h}this.exportState=function(k){var R={currentState:u,currentTimestamp:f,layers:{}},A={};for(var M in c)A[M]=c[M];x.flush(function(){for(var B in A){var G=parseInt(B),q=A[B],ie=q.toCanvas(),le={width:q.width,height:q.height};q.width&&q.height&&(le.url=ie.toDataURL("image/png")),G>0&&(le.x=q.x,le.y=q.y,le.z=q.z,le.alpha=q.alpha,le.matrix=q.matrix,le.parent=I(q.parent)),R.layers[B]=le}k(R)})},this.importState=function(k,R){var A,M;u=k.currentState,f=k.currentTimestamp,x.cancel();for(A in c)M=parseInt(A),M>0&&c[A].dispose();c={};for(A in k.layers){M=parseInt(A);var B=k.layers[A],G=N(M);if(x.resize(G,B.width,B.height),B.url&&(x.setChannelMask(G,t.Layer.SRC),x.draw(G,0,0,B.url)),M>0&&B.parent>=0){var q=N(B.parent);x.move(G,q,B.x,B.y,B.z),x.shade(G,B.alpha);var ie=B.matrix;x.distort(G,ie[0],ie[1],ie[2],ie[3],ie[4],ie[5])}}x.flush(R)},this.getDisplay=function(){return x},this.sendSize=function(k,R){D()&&i.sendMessage("size",k,R)},this.sendKeyEvent=function(k,R){D()&&i.sendMessage("key",R,k)},this.sendMouseState=function(k,R){if(D()){var A=k.x,M=k.y;R&&(A/=x.getScale(),M/=x.getScale()),x.moveCursor(Math.floor(A),Math.floor(M));var B=0;k.left&&(B|=1),k.middle&&(B|=2),k.right&&(B|=4),k.up&&(B|=8),k.down&&(B|=16),i.sendMessage("mouse",Math.floor(A),Math.floor(M),B)}},this.sendTouchState=function(k,R){if(D()){var A=k.x,M=k.y;R&&(A/=x.getScale(),M/=x.getScale()),i.sendMessage("touch",k.id,Math.floor(A),Math.floor(M),Math.floor(k.radiusX),Math.floor(k.radiusY),k.angle,k.force)}},this.createOutputStream=function(){var k=b.next(),R=P[k]=new t.OutputStream(n,k);return R},this.createAudioStream=function(k){var R=n.createOutputStream();return i.sendMessage("audio",R.index,k),R},this.createFileStream=function(k,R){var A=n.createOutputStream();return i.sendMessage("file",A.index,k,R),A},this.createPipeStream=function(k,R){var A=n.createOutputStream();return i.sendMessage("pipe",A.index,k,R),A},this.createClipboardStream=function(k){var R=n.createOutputStream();return i.sendMessage("clipboard",R.index,k),R},this.createArgumentValueStream=function(k,R){var A=n.createOutputStream();return i.sendMessage("argv",A.index,k,R),A},this.createObjectOutputStream=function(k,R,A){var M=n.createOutputStream();return i.sendMessage("put",k,M.index,R,A),M},this.requestObjectInputStream=function(k,R){D()&&i.sendMessage("get",k,R)},this.sendAck=function(k,R,A){D()&&i.sendMessage("ack",k,R,A)},this.sendBlob=function(k,R){D()&&i.sendMessage("blob",k,R)},this.endStream=function(k){D()&&(i.sendMessage("end",k),P[k]&&(b.free(k),delete P[k]))},this.onstatechange=null,this.onname=null,this.onerror=null,this.onmsg=null,this.onjoin=null,this.onleave=null,this.onaudio=null,this.onvideo=null,this.onmultitouch=null,this.onargv=null,this.onclipboard=null,this.onfile=null,this.onfilesystem=null,this.onpipe=null,this.onrequired=null,this.onsync=null;var N=function(k){var R=c[k];return R||(k===0?R=x.getDefaultLayer():k>0?R=x.createLayer():R=x.createBuffer(),c[k]=R),R},I=function(k){if(!k)return null;for(var R in c)if(k===c[R])return parseInt(R);return null};function U(k){var R=d[k];return R==null&&(R=d[k]=new t.Parser,R.oninstruction=i.oninstruction),R}var F={"miter-limit":function(k,R){x.setMiterLimit(k,parseFloat(R))},"multi-touch":function(k,R){n.onmultitouch&&k instanceof t.Display.VisibleLayer&&n.onmultitouch(k,parseInt(R))}},$={ack:function(k){var R=parseInt(k[0]),A=k[1],M=parseInt(k[2]),B=P[R];B&&(B.onack&&B.onack(new t.Status(M,A)),M>=256&&P[R]===B&&(b.free(R),delete P[R]))},arc:function(k){var R=N(parseInt(k[0])),A=parseInt(k[1]),M=parseInt(k[2]),B=parseInt(k[3]),G=parseFloat(k[4]),q=parseFloat(k[5]),ie=parseInt(k[6]);x.arc(R,A,M,B,G,q,ie!=0)},argv:function(k){var R=parseInt(k[0]),A=k[1],M=k[2];if(n.onargv){var B=m[R]=new t.InputStream(n,R);n.onargv(B,A,M)}else n.sendAck(R,"Receiving argument values unsupported",256)},audio:function(k){var R=parseInt(k[0]),A=k[1],M=m[R]=new t.InputStream(n,R),B=null;n.onaudio&&(B=n.onaudio(M,A)),B||(B=t.AudioPlayer.getInstance(M,A)),B?(g[R]=B,n.sendAck(R,"OK",0)):n.sendAck(R,"BAD TYPE",783)},blob:function(k){var R=parseInt(k[0]),A=k[1],M=m[R];M&&M.onblob&&M.onblob(A)},body:function(k){var R=parseInt(k[0]),A=S[R],M=parseInt(k[1]),B=k[2],G=k[3];if(A&&A.onbody){var q=m[M]=new t.InputStream(n,M);A.onbody(q,B,G)}else n.sendAck(M,"Receipt of body unsupported",256)},cfill:function(k){var R=parseInt(k[0]),A=N(parseInt(k[1])),M=parseInt(k[2]),B=parseInt(k[3]),G=parseInt(k[4]),q=parseInt(k[5]);x.setChannelMask(A,R),x.fillColor(A,M,B,G,q)},clip:function(k){var R=N(parseInt(k[0]));x.clip(R)},clipboard:function(k){var R=parseInt(k[0]),A=k[1];if(n.onclipboard){var M=m[R]=new t.InputStream(n,R);n.onclipboard(M,A)}else n.sendAck(R,"Clipboard unsupported",256)},close:function(k){var R=N(parseInt(k[0]));x.close(R)},copy:function(k){var R=N(parseInt(k[0])),A=parseInt(k[1]),M=parseInt(k[2]),B=parseInt(k[3]),G=parseInt(k[4]),q=parseInt(k[5]),ie=N(parseInt(k[6])),le=parseInt(k[7]),_e=parseInt(k[8]);x.setChannelMask(ie,q),x.copy(R,A,M,B,G,ie,le,_e)},cstroke:function(k){var R=parseInt(k[0]),A=N(parseInt(k[1])),M=T[parseInt(k[2])],B=E[parseInt(k[3])],G=parseInt(k[4]),q=parseInt(k[5]),ie=parseInt(k[6]),le=parseInt(k[7]),_e=parseInt(k[8]);x.setChannelMask(A,R),x.strokeColor(A,M,B,G,q,ie,le,_e)},cursor:function(k){var R=parseInt(k[0]),A=parseInt(k[1]),M=N(parseInt(k[2])),B=parseInt(k[3]),G=parseInt(k[4]),q=parseInt(k[5]),ie=parseInt(k[6]);x.setCursor(R,A,M,B,G,q,ie)},curve:function(k){var R=N(parseInt(k[0])),A=parseInt(k[1]),M=parseInt(k[2]),B=parseInt(k[3]),G=parseInt(k[4]),q=parseInt(k[5]),ie=parseInt(k[6]);x.curveTo(R,A,M,B,G,q,ie)},disconnect:function(k){n.disconnect()},dispose:function(k){var R=parseInt(k[0]);if(R>0){var A=N(R);x.dispose(A),delete c[R]}else R<0&&delete c[R]},distort:function(k){var R=parseInt(k[0]),A=parseFloat(k[1]),M=parseFloat(k[2]),B=parseFloat(k[3]),G=parseFloat(k[4]),q=parseFloat(k[5]),ie=parseFloat(k[6]);if(R>=0){var le=N(R);x.distort(le,A,M,B,G,q,ie)}},error:function(k){var R=k[0],A=parseInt(k[1]);n.onerror&&n.onerror(new t.Status(A,R)),n.disconnect()},end:function(k){var R=parseInt(k[0]),A=m[R];A&&(A.onend&&A.onend(),delete m[R])},file:function(k){var R=parseInt(k[0]),A=k[1],M=k[2];if(n.onfile){var B=m[R]=new t.InputStream(n,R);n.onfile(B,A,M)}else n.sendAck(R,"File transfer unsupported",256)},filesystem:function(k){var R=parseInt(k[0]),A=k[1];if(n.onfilesystem){var M=S[R]=new t.Object(n,R);n.onfilesystem(M,A)}},identity:function(k){var R=N(parseInt(k[0]));x.setTransform(R,1,0,0,1,0,0)},img:function(k){var R=parseInt(k[0]),A=parseInt(k[1]),M=N(parseInt(k[2])),B=k[3],G=parseInt(k[4]),q=parseInt(k[5]),ie=m[R]=new t.InputStream(n,R);x.setChannelMask(M,A),x.drawStream(M,G,q,ie,B)},jpeg:function(k){var R=parseInt(k[0]),A=N(parseInt(k[1])),M=parseInt(k[2]),B=parseInt(k[3]),G=k[4];x.setChannelMask(A,R),x.draw(A,M,B,"data:image/jpeg;base64,"+G)},lfill:function(k){var R=parseInt(k[0]),A=N(parseInt(k[1])),M=N(parseInt(k[2]));x.setChannelMask(A,R),x.fillLayer(A,M)},line:function(k){var R=N(parseInt(k[0])),A=parseInt(k[1]),M=parseInt(k[2]);x.lineTo(R,A,M)},lstroke:function(k){var R=parseInt(k[0]),A=N(parseInt(k[1])),M=N(parseInt(k[2]));x.setChannelMask(A,R),x.strokeLayer(A,M)},mouse:function(k){var R=parseInt(k[0]),A=parseInt(k[1]);x.showCursor(!0),x.moveCursor(R,A)},move:function(k){var R=parseInt(k[0]),A=parseInt(k[1]),M=parseInt(k[2]),B=parseInt(k[3]),G=parseInt(k[4]);if(R>0&&A>=0){var q=N(R),ie=N(A);x.move(q,ie,M,B,G)}},msg:function(k){var R,A,M=!0,B=parseInt(k[0]);if(n.onmsg&&(M=n.onmsg(B,k.slice(1)),M===void 0&&(M=!0)),M)switch(B){case t.Client.Message.USER_JOINED:R=k[1],A=k[2],n.onjoin&&n.onjoin(R,A);break;case t.Client.Message.USER_LEFT:R=k[1],A=k[2],n.onleave&&n.onleave(R,A);break}},name:function(k){n.onname&&n.onname(k[0])},nest:function(k){var R=U(parseInt(k[0]));R.receive(k[1])},pipe:function(k){var R=parseInt(k[0]),A=k[1],M=k[2];if(n.onpipe){var B=m[R]=new t.InputStream(n,R);n.onpipe(B,A,M)}else n.sendAck(R,"Named pipes unsupported",256)},png:function(k){var R=parseInt(k[0]),A=N(parseInt(k[1])),M=parseInt(k[2]),B=parseInt(k[3]),G=k[4];x.setChannelMask(A,R),x.draw(A,M,B,"data:image/png;base64,"+G)},pop:function(k){var R=N(parseInt(k[0]));x.pop(R)},push:function(k){var R=N(parseInt(k[0]));x.push(R)},rect:function(k){var R=N(parseInt(k[0])),A=parseInt(k[1]),M=parseInt(k[2]),B=parseInt(k[3]),G=parseInt(k[4]);x.rect(R,A,M,B,G)},required:function(k){n.onrequired&&n.onrequired(k)},reset:function(k){var R=N(parseInt(k[0]));x.reset(R)},set:function(k){var R=N(parseInt(k[0])),A=k[1],M=k[2],B=F[A];B&&B(R,M)},shade:function(k){var R=parseInt(k[0]),A=parseInt(k[1]);if(R>=0){var M=N(R);x.shade(M,A)}},size:function(k){var R=parseInt(k[0]),A=N(R),M=parseInt(k[1]),B=parseInt(k[2]);x.resize(A,M,B)},start:function(k){var R=N(parseInt(k[0])),A=parseInt(k[1]),M=parseInt(k[2]);x.moveTo(R,A,M)},sync:function(k){var R=parseInt(k[0]);x.flush(function(){for(var A in g){var M=g[A];M&&M.sync()}R!==f&&(i.sendMessage("sync",R),f=R)}),u===h&&L(_),n.onsync&&n.onsync(R)},transfer:function(k){var R=N(parseInt(k[0])),A=parseInt(k[1]),M=parseInt(k[2]),B=parseInt(k[3]),G=parseInt(k[4]),q=parseInt(k[5]),ie=N(parseInt(k[6])),le=parseInt(k[7]),_e=parseInt(k[8]);q===3?x.put(R,A,M,B,G,ie,le,_e):q!==5&&x.transfer(R,A,M,B,G,ie,le,_e,t.Client.DefaultTransferFunction[q])},transform:function(k){var R=N(parseInt(k[0])),A=parseFloat(k[1]),M=parseFloat(k[2]),B=parseFloat(k[3]),G=parseFloat(k[4]),q=parseFloat(k[5]),ie=parseFloat(k[6]);x.transform(R,A,M,B,G,q,ie)},undefine:function(k){var R=parseInt(k[0]),A=S[R];A&&A.onundefine&&A.onundefine()},video:function(k){var R=parseInt(k[0]),A=N(parseInt(k[1])),M=k[2],B=m[R]=new t.InputStream(n,R),G=null;n.onvideo&&(G=n.onvideo(B,A,M)),G||(G=t.VideoPlayer.getInstance(B,A,M)),G?n.sendAck(R,"OK",0):n.sendAck(R,"BAD TYPE",783)}},H=function(){i.sendMessage("nop"),C=new Date().getTime()},z=function(){window.clearTimeout(p);var k=new Date().getTime(),R=Math.max(C+y-k,0);R>0?p=window.setTimeout(H,R):H()},Y=function(){window.clearTimeout(p)};i.oninstruction=function(k,R){var A=$[k];A&&A(R),z()},this.disconnect=function(){u!=l&&u!=w&&(L(w),Y(),i.sendMessage("disconnect"),i.disconnect(),L(l))},this.connect=function(k){L(a);try{i.connect(k)}catch(R){throw L(s),R}z(),L(h)}};t.Client.DefaultTransferFunction={0:function(i,n){n.red=n.green=n.blue=0},15:function(i,n){n.red=n.green=n.blue=255},3:function(i,n){n.red=i.red,n.green=i.green,n.blue=i.blue,n.alpha=i.alpha},5:function(i,n){},12:function(i,n){n.red=255&~i.red,n.green=255&~i.green,n.blue=255&~i.blue,n.alpha=i.alpha},10:function(i,n){n.red=255&~n.red,n.green=255&~n.green,n.blue=255&~n.blue},1:function(i,n){n.red=i.red&n.red,n.green=i.green&n.green,n.blue=i.blue&n.blue},14:function(i,n){n.red=255&~(i.red&n.red),n.green=255&~(i.green&n.green),n.blue=255&~(i.blue&n.blue)},7:function(i,n){n.red=i.red|n.red,n.green=i.green|n.green,n.blue=i.blue|n.blue},8:function(i,n){n.red=255&~(i.red|n.red),n.green=255&~(i.green|n.green),n.blue=255&~(i.blue|n.blue)},6:function(i,n){n.red=i.red^n.red,n.green=i.green^n.green,n.blue=i.blue^n.blue},9:function(i,n){n.red=255&~(i.red^n.red),n.green=255&~(i.green^n.green),n.blue=255&~(i.blue^n.blue)},4:function(i,n){n.red=255&(~i.red&n.red),n.green=255&(~i.green&n.green),n.blue=255&(~i.blue&n.blue)},13:function(i,n){n.red=255&(~i.red|n.red),n.green=255&(~i.green|n.green),n.blue=255&(~i.blue|n.blue)},2:function(i,n){n.red=255&(i.red&~n.red),n.green=255&(i.green&~n.green),n.blue=255&(i.blue&~n.blue)},11:function(i,n){n.red=255&(i.red|~n.red),n.green=255&(i.green|~n.green),n.blue=255&(i.blue|~n.blue)}};t.Client.Message={USER_JOINED:1,USER_LEFT:2};var t=t||{};t.DataURIReader=function(i,n){var s=this,a="data:"+n+";base64,";i.onblob=function(h){a+=h},i.onend=function(){s.onend&&s.onend()},this.getURI=function(){return a},this.onend=null};var t=t||{};t.Display=function(){var i=this,n=0,s=0,a=1,h=document.createElement("div");h.style.position="relative",h.style.width=n+"px",h.style.height=s+"px",h.style.transformOrigin=h.style.webkitTransformOrigin=h.style.MozTransformOrigin=h.style.OTransformOrigin=h.style.msTransformOrigin="0 0";var _=new t.Display.VisibleLayer(n,s),w=new t.Display.VisibleLayer(0,0);w.setChannelMask(t.Layer.SRC),h.appendChild(_.getElement()),h.appendChild(w.getElement());var l=document.createElement("div");l.style.position="relative",l.style.width=n*a+"px",l.style.height=s*a+"px",l.appendChild(h),this.cursorHotspotX=0,this.cursorHotspotY=0,this.cursorX=0,this.cursorY=0,this.onresize=null,this.oncursor=null;var u=[],f=[];function y(){for(var E=0;E<f.length;){var x=f[E];if(!x.isReady())break;x.flush(),E++}f.splice(0,E)}function p(E,x){this.cancel=function(){E=null,x.forEach(function(c){c.cancel()}),x=[]},this.isReady=function(){for(var c=0;c<x.length;c++)if(x[c].blocked)return!1;return!0},this.flush=function(){for(var c=0;c<x.length;c++)x[c].execute();E&&E()}}function C(E,x){var c=this;this.blocked=x,this.cancel=function(){c.blocked=!1,E=null},this.unblock=function(){c.blocked&&(c.blocked=!1,y())},this.execute=function(){E&&E()}}function T(E,x){var c=new C(E,x);return u.push(c),c}this.getElement=function(){return l},this.getWidth=function(){return n},this.getHeight=function(){return s},this.getDefaultLayer=function(){return _},this.getCursorLayer=function(){return w},this.createLayer=function(){var E=new t.Display.VisibleLayer(n,s);return E.move(_,0,0,0),E},this.createBuffer=function(){var E=new t.Layer(0,0);return E.autosize=1,E},this.flush=function(E){f.push(new p(E,u)),u=[],y()},this.cancel=function(){f.forEach(function(E){E.cancel()}),f=[],u.forEach(function(E){E.cancel()}),u=[]},this.setCursor=function(E,x,c,g,d,m,S){T(function(){i.cursorHotspotX=E,i.cursorHotspotY=x,w.resize(m,S),w.copy(c,g,d,m,S,0,0),i.moveCursor(i.cursorX,i.cursorY),i.oncursor&&i.oncursor(w.toCanvas(),E,x)})},this.showCursor=function(E){var x=w.getElement(),c=x.parentNode;E===!1?c&&c.removeChild(x):c!==h&&h.appendChild(x)},this.moveCursor=function(E,x){w.translate(E-i.cursorHotspotX,x-i.cursorHotspotY),i.cursorX=E,i.cursorY=x},this.resize=function(E,x,c){T(function(){E.resize(x,c),E===_&&(n=x,s=c,h.style.width=n+"px",h.style.height=s+"px",l.style.width=n*a+"px",l.style.height=s*a+"px",i.onresize&&i.onresize(x,c))})},this.drawImage=function(E,x,c,g){T(function(){E.drawImage(x,c,g)})},this.drawBlob=function(E,x,c,g){var d;if(window.createImageBitmap){var m;d=T(function(){E.drawImage(x,c,m)},!0),window.createImageBitmap(g).then(function(P){m=P,d.unblock()})}else{var S=URL.createObjectURL(g);d=T(function(){b.width&&b.height&&E.drawImage(x,c,b),URL.revokeObjectURL(S)},!0);var b=new Image;b.onload=d.unblock,b.onerror=d.unblock,b.src=S}},this.drawStream=function(E,x,c,g,d){if(window.createImageBitmap){var m=new t.BlobReader(g,d);m.onend=function(){i.drawBlob(E,x,c,m.getBlob())}}else{var m=new t.DataURIReader(g,d);m.onend=function(){i.draw(E,x,c,m.getURI())}}},this.draw=function(E,x,c,g){var d=T(function(){m.width&&m.height&&E.drawImage(x,c,m)},!0),m=new Image;m.onload=d.unblock,m.onerror=d.unblock,m.src=g},this.play=function(E,x,c,g){var d=document.createElement("video");d.type=x,d.src=g,d.addEventListener("play",function(){function m(){E.drawImage(0,0,d),d.ended||window.setTimeout(m,20)}m()},!1),T(d.play)},this.transfer=function(E,x,c,g,d,m,S,b,P){T(function(){m.transfer(E,x,c,g,d,S,b,P)})},this.put=function(E,x,c,g,d,m,S,b){T(function(){m.put(E,x,c,g,d,S,b)})},this.copy=function(E,x,c,g,d,m,S,b){T(function(){m.copy(E,x,c,g,d,S,b)})},this.moveTo=function(E,x,c){T(function(){E.moveTo(x,c)})},this.lineTo=function(E,x,c){T(function(){E.lineTo(x,c)})},this.arc=function(E,x,c,g,d,m,S){T(function(){E.arc(x,c,g,d,m,S)})},this.curveTo=function(E,x,c,g,d,m,S){T(function(){E.curveTo(x,c,g,d,m,S)})},this.close=function(E){T(function(){E.close()})},this.rect=function(E,x,c,g,d){T(function(){E.rect(x,c,g,d)})},this.clip=function(E){T(function(){E.clip()})},this.strokeColor=function(E,x,c,g,d,m,S,b){T(function(){E.strokeColor(x,c,g,d,m,S,b)})},this.fillColor=function(E,x,c,g,d){T(function(){E.fillColor(x,c,g,d)})},this.strokeLayer=function(E,x,c,g,d){T(function(){E.strokeLayer(x,c,g,d)})},this.fillLayer=function(E,x){T(function(){E.fillLayer(x)})},this.push=function(E){T(function(){E.push()})},this.pop=function(E){T(function(){E.pop()})},this.reset=function(E){T(function(){E.reset()})},this.setTransform=function(E,x,c,g,d,m,S){T(function(){E.setTransform(x,c,g,d,m,S)})},this.transform=function(E,x,c,g,d,m,S){T(function(){E.transform(x,c,g,d,m,S)})},this.setChannelMask=function(E,x){T(function(){E.setChannelMask(x)})},this.setMiterLimit=function(E,x){T(function(){E.setMiterLimit(x)})},this.dispose=function(E){T(function(){E.dispose()})},this.distort=function(E,x,c,g,d,m,S){T(function(){E.distort(x,c,g,d,m,S)})},this.move=function(E,x,c,g,d){T(function(){E.move(x,c,g,d)})},this.shade=function(E,x){T(function(){E.shade(x)})},this.scale=function(E){h.style.transform=h.style.WebkitTransform=h.style.MozTransform=h.style.OTransform=h.style.msTransform="scale("+E+","+E+")",a=E,l.style.width=n*a+"px",l.style.height=s*a+"px"},this.getScale=function(){return a},this.flatten=function(){var E=document.createElement("canvas");E.width=_.width,E.height=_.height;var x=E.getContext("2d");function c(d){var m=[];for(var S in d.children)m.push(d.children[S]);return m.sort(function(b,P){var L=b.z-P.z;if(L!==0)return L;var D=b.getElement(),N=P.getElement(),I=N.compareDocumentPosition(D);return I&Node.DOCUMENT_POSITION_PRECEDING?-1:I&Node.DOCUMENT_POSITION_FOLLOWING?1:0}),m}function g(d,m,S){if(d.width>0&&d.height>0){var b=x.globalAlpha;x.globalAlpha*=d.alpha/255,x.drawImage(d.getCanvas(),m,S);for(var P=c(d),L=0;L<P.length;L++){var D=P[L];g(D,m+D.x,S+D.y)}x.globalAlpha=b}}return g(_,0,0),E}};t.Display.VisibleLayer=function(i,n){t.Layer.apply(this,[i,n]);var s=this;this.__unique_id=t.Display.VisibleLayer.__next_id++,this.alpha=255,this.x=0,this.y=0,this.z=0,this.matrix=[1,0,0,1,0,0],this.parent=null,this.children={};var a=s.getCanvas();a.style.position="absolute",a.style.left="0px",a.style.top="0px";var h=document.createElement("div");h.appendChild(a),h.style.width=i+"px",h.style.height=n+"px",h.style.position="absolute",h.style.left="0px",h.style.top="0px",h.style.overflow="hidden";var _=this.resize;this.resize=function(u,f){h.style.width=u+"px",h.style.height=f+"px",_(u,f)},this.getElement=function(){return h};var w="translate(0px, 0px)",l="matrix(1, 0, 0, 1, 0, 0)";this.translate=function(u,f){s.x=u,s.y=f,w="translate("+u+"px,"+f+"px)",h.style.transform=h.style.WebkitTransform=h.style.MozTransform=h.style.OTransform=h.style.msTransform=w+" "+l},this.move=function(u,f,y,p){if(s.parent!==u){s.parent&&delete s.parent.children[s.__unique_id],s.parent=u,u.children[s.__unique_id]=s;var C=u.getElement();C.appendChild(h)}s.translate(f,y),s.z=p,h.style.zIndex=p},this.shade=function(u){s.alpha=u,h.style.opacity=u/255},this.dispose=function(){s.parent&&(delete s.parent.children[s.__unique_id],s.parent=null),h.parentNode&&h.parentNode.removeChild(h)},this.distort=function(u,f,y,p,C,T){s.matrix=[u,f,y,p,C,T],l="matrix("+u+","+f+","+y+","+p+","+C+","+T+")",h.style.transform=h.style.WebkitTransform=h.style.MozTransform=h.style.OTransform=h.style.msTransform=w+" "+l}};t.Display.VisibleLayer.__next_id=0;var t=t||{};t.Event=function(i){this.type=i,this.timestamp=new Date().getTime(),this.getAge=function(){return new Date().getTime()-this.timestamp},this.invokeLegacyHandler=function(n){}};t.Event.DOMEvent=function(i,n){t.Event.call(this,i),n=n||[],Array.isArray(n)||(n=[n]),this.preventDefault=function(){n.forEach(function(s){s.preventDefault&&s.preventDefault(),s.returnValue=!1})},this.stopPropagation=function(){n.forEach(function(s){s.stopPropagation()})}};t.Event.DOMEvent.cancelEvent=function(i){i.stopPropagation(),i.preventDefault&&i.preventDefault(),i.returnValue=!1};t.Event.Target=function(){var i={};this.on=function(n,s){var a=i[n];a||(i[n]=a=[]),a.push(s)},this.onEach=function(n,s){n.forEach(function(a){this.on(a,s)},this)},this.dispatch=function(n){n.invokeLegacyHandler(this);var s=i[n.type];if(s)for(var a=0;a<s.length;a++)s[a](n,this)},this.off=function(n,s){var a=i[n];if(!a)return!1;for(var h=0;h<a.length;h++)if(a[h]===s)return a.splice(h,1),!0;return!1},this.offEach=function(n,s){var a=!1;return n.forEach(function(h){a|=this.off(h,s)},this),a}};var t=t||{};t.InputSink=function(){var i=this,n=document.createElement("textarea");n.style.position="fixed",n.style.outline="none",n.style.border="none",n.style.margin="0",n.style.padding="0",n.style.height="0",n.style.width="0",n.style.left="0",n.style.bottom="0",n.style.resize="none",n.style.background="transparent",n.style.color="transparent",n.addEventListener("keypress",function(s){n.value=""},!1),n.addEventListener("compositionend",function(s){s.data&&(n.value="")},!1),n.addEventListener("input",function(s){s.data&&!s.isComposing&&(n.value="")},!1),n.addEventListener("focus",function(){window.setTimeout(function(){n.click(),n.select()},0)},!0),this.focus=function(){window.setTimeout(function(){n.focus()},0)},this.getElement=function(){return n},document.addEventListener("keydown",function(s){var a=document.activeElement;if(a&&a!==document.body){var h=a.getBoundingClientRect();if(h.left+h.width>0&&h.top+h.height>0)return}i.focus()},!0)};var t=t||{};t.InputStream=function(i,n){var s=this;this.index=n,this.onblob=null,this.onend=null,this.sendAck=function(a,h){i.sendAck(s.index,a,h)}};var t=t||{};t.IntegerPool=function(){var i=this,n=[];this.next_int=0,this.next=function(){return n.length>0?n.shift():i.next_int++},this.free=function(s){n.push(s)}};var t=t||{};t.JSONReader=function(i){var n=this,s=new t.StringReader(i),a="";this.getLength=function(){return a.length},this.getJSON=function(){return JSON.parse(a)},s.ontext=function(h){a+=h,n.onprogress&&n.onprogress(h.length)},s.onend=function(){n.onend&&n.onend()},this.onprogress=null,this.onend=null};var t=t||{};t.Keyboard=function(i){var n=this,s=t.Keyboard._nextID++,a="_GUAC_KEYBOARD_HANDLED_BY_"+s;this.onkeydown=null,this.onkeyup=null;var h={keyupUnreliable:!1,altIsTypableOnly:!1,capsLockKeyupUnreliable:!1};navigator&&navigator.platform&&(navigator.platform.match(/ipad|iphone|ipod/i)?h.keyupUnreliable=!0:navigator.platform.match(/^mac/i)&&(h.altIsTypableOnly=!0,h.capsLockKeyupUnreliable=!0));var _=function(k){var R=this;this.keyCode=k?k.which||k.keyCode:0,this.keyIdentifier=k&&k.keyIdentifier,this.key=k&&k.key,this.location=k?z(k):0,this.modifiers=k?t.Keyboard.ModifierState.fromKeyboardEvent(k):new t.Keyboard.ModifierState,this.timestamp=new Date().getTime(),this.defaultPrevented=!1,this.keysym=null,this.reliable=!1,this.getAge=function(){return new Date().getTime()-R.timestamp}},w=function(k){_.call(this,k),this.keysym=S(this.key,this.location)||L(this.keyCode,this.location),this.keyupReliable=!h.keyupUnreliable,this.keysym&&!m(this.keysym)&&(this.reliable=!0),!this.keysym&&D(this.keyCode,this.keyIdentifier)&&(this.keysym=S(this.keyIdentifier,this.location,this.modifiers.shift)),this.modifiers.meta&&this.keysym!==65511&&this.keysym!==65512?this.keyupReliable=!1:this.keysym===65509&&h.capsLockKeyupUnreliable&&(this.keyupReliable=!1);var R=!this.modifiers.ctrl&&!h.altIsTypableOnly,A=!this.modifiers.alt;(A&&this.modifiers.ctrl||R&&this.modifiers.alt||this.modifiers.meta||this.modifiers.hyper)&&(this.reliable=!0),x[this.keyCode]=this.keysym};w.prototype=new _;var l=function(k){_.call(this,k),this.keysym=P(this.keyCode),this.reliable=!0};l.prototype=new _;var u=function(k){_.call(this,k),this.keysym=L(this.keyCode,this.location)||S(this.key,this.location),n.pressed[this.keysym]||(this.keysym=x[this.keyCode]||this.keysym),this.reliable=!0};u.prototype=new _;var f=[],y={8:[65288],9:[65289],12:[65291,65291,65291,65461],13:[65293],16:[65505,65505,65506],17:[65507,65507,65508],18:[65513,65513,65027],19:[65299],20:[65509],27:[65307],32:[32],33:[65365,65365,65365,65465],34:[65366,65366,65366,65459],35:[65367,65367,65367,65457],36:[65360,65360,65360,65463],37:[65361,65361,65361,65460],38:[65362,65362,65362,65464],39:[65363,65363,65363,65462],40:[65364,65364,65364,65458],45:[65379,65379,65379,65456],46:[65535,65535,65535,65454],91:[65511],92:[65512],93:[65383],96:[65456],97:[65457],98:[65458],99:[65459],100:[65460],101:[65461],102:[65462],103:[65463],104:[65464],105:[65465],106:[65450],107:[65451],109:[65453],110:[65454],111:[65455],112:[65470],113:[65471],114:[65472],115:[65473],116:[65474],117:[65475],118:[65476],119:[65477],120:[65478],121:[65479],122:[65480],123:[65481],144:[65407],145:[65300],225:[65027]},p={Again:[65382],AllCandidates:[65341],Alphanumeric:[65328],Alt:[65513,65513,65027],Attn:[64782],AltGraph:[65027],ArrowDown:[65364],ArrowLeft:[65361],ArrowRight:[65363],ArrowUp:[65362],Backspace:[65288],CapsLock:[65509],Cancel:[65385],Clear:[65291],Convert:[65313],Copy:[64789],Crsel:[64796],CrSel:[64796],CodeInput:[65335],Compose:[65312],Control:[65507,65507,65508],ContextMenu:[65383],Delete:[65535],Down:[65364],End:[65367],Enter:[65293],EraseEof:[64774],Escape:[65307],Execute:[65378],Exsel:[64797],ExSel:[64797],F1:[65470],F2:[65471],F3:[65472],F4:[65473],F5:[65474],F6:[65475],F7:[65476],F8:[65477],F9:[65478],F10:[65479],F11:[65480],F12:[65481],F13:[65482],F14:[65483],F15:[65484],F16:[65485],F17:[65486],F18:[65487],F19:[65488],F20:[65489],F21:[65490],F22:[65491],F23:[65492],F24:[65493],Find:[65384],GroupFirst:[65036],GroupLast:[65038],GroupNext:[65032],GroupPrevious:[65034],FullWidth:null,HalfWidth:null,HangulMode:[65329],Hankaku:[65321],HanjaMode:[65332],Help:[65386],Hiragana:[65317],HiraganaKatakana:[65319],Home:[65360],Hyper:[65517,65517,65518],Insert:[65379],JapaneseHiragana:[65317],JapaneseKatakana:[65318],JapaneseRomaji:[65316],JunjaMode:[65336],KanaMode:[65325],KanjiMode:[65313],Katakana:[65318],Left:[65361],Meta:[65511,65511,65512],ModeChange:[65406],NumLock:[65407],PageDown:[65366],PageUp:[65365],Pause:[65299],Play:[64790],PreviousCandidate:[65342],PrintScreen:[65377],Redo:[65382],Right:[65363],RomanCharacters:null,Scroll:[65300],Select:[65376],Separator:[65452],Shift:[65505,65505,65506],SingleCandidate:[65340],Super:[65515,65515,65516],Tab:[65289],UIKeyInputDownArrow:[65364],UIKeyInputEscape:[65307],UIKeyInputLeftArrow:[65361],UIKeyInputRightArrow:[65363],UIKeyInputUpArrow:[65362],Up:[65362],Undo:[65381],Win:[65511,65511,65512],Zenkaku:[65320],ZenkakuHankaku:[65322]},C={65027:!0,65505:!0,65506:!0,65507:!0,65508:!0,65509:!0,65511:!0,65512:!0,65513:!0,65514:!0,65515:!0,65516:!0};this.modifiers=new t.Keyboard.ModifierState,this.pressed={};var T={},E={},x={},c=null,g=null,d=function(k,R){return k?k[R]||k[0]:null},m=function(k){return k>=0&&k<=255||(k&4294901760)===16777216};function S(k,R,A){if(!k)return null;var M,B=k.indexOf("U+");if(B>=0){var G=k.substring(B+2);M=String.fromCharCode(parseInt(G,16))}else if(k.length===1&&R!==3)M=k;else return d(p[k],R);A===!0?M=M.toUpperCase():A===!1&&(M=M.toLowerCase());var q=M.charCodeAt(0);return P(q)}function b(k){return k<=31||k>=127&&k<=159}function P(k){return b(k)?65280|k:k>=0&&k<=255?k:k>=256&&k<=1114111?16777216|k:null}function L(k,R){return d(y[k],R)}var D=function(k,R){if(!R)return!1;var A=R.indexOf("U+");if(A===-1)return!0;var M=parseInt(R.substring(A+2),16);return k!==M||k>=65&&k<=90||k>=48&&k<=57};this.press=function(k){if(k!==null){if(!n.pressed[k]&&(n.pressed[k]=!0,n.onkeydown)){var R=n.onkeydown(k);return E[k]=R,window.clearTimeout(c),window.clearInterval(g),C[k]||(c=window.setTimeout(function(){g=window.setInterval(function(){n.onkeyup(k),n.onkeydown(k)},50)},500)),R}return E[k]||!1}},this.release=function(k){n.pressed[k]&&(delete n.pressed[k],delete T[k],window.clearTimeout(c),window.clearInterval(g),k!==null&&n.onkeyup&&n.onkeyup(k))},this.type=function(k){for(var R=0;R<k.length;R++){var A=k.codePointAt?k.codePointAt(R):k.charCodeAt(R),M=P(A);n.press(M),n.release(M)}},this.reset=function(){for(var k in n.pressed)n.release(parseInt(k));f=[]};var N=function(k,R,A){var M=A.modifiers[k],B=n.modifiers[k],G;if(R.indexOf(A.keysym)===-1){if(B&&M===!1)for(G=0;G<R.length;G++)n.release(R[G]);else if(!B&&M){for(G=0;G<R.length;G++)if(n.pressed[R[G]])return;var q=R[0];A.keysym&&(T[q]=!0),n.press(q)}}},I=function(k){N("alt",[65513,65514,65027],k),N("shift",[65505,65506],k),N("ctrl",[65507,65508],k),N("meta",[65511,65512],k),N("hyper",[65515,65516],k),n.modifiers=k.modifiers},U=function(){for(var k in n.pressed)if(!T[k])return!1;return!0};function F(){var k=H();if(!k)return!1;var R;do R=k,k=H();while(k!==null);return U()&&n.reset(),R.defaultPrevented}var $=function(k){!n.modifiers.ctrl||!n.modifiers.alt||k>=65&&k<=90||k>=97&&k<=122||(k<=255||(k&4278190080)===16777216)&&(n.release(65507),n.release(65508),n.release(65513),n.release(65514))},H=function(){var k=f[0];if(!k)return null;if(k instanceof w){var R=null,A=[];if(k.keysym===65511||k.keysym===65512){if(f.length===1)return null;if(f[1].keysym!==k.keysym){if(!f[1].modifiers.meta)return f.shift()}else if(f[1]instanceof w)return f.shift()}if(k.reliable?(R=k.keysym,A=f.splice(0,1)):f[1]instanceof l?(R=f[1].keysym,A=f.splice(0,2)):f[1]&&(R=k.keysym,A=f.splice(0,1)),A.length>0){if(I(k),R){$(R);var M=!n.press(R);x[k.keyCode]=R,k.keyupReliable||n.release(R);for(var B=0;B<A.length;B++)A[B].defaultPrevented=M}return k}}else if(k instanceof u&&!h.keyupUnreliable){var R=k.keysym;if(R)n.release(R),delete x[k.keyCode],k.defaultPrevented=!0;else return n.reset(),k;return I(k),f.shift()}else return f.shift();return null},z=function(k){return"location"in k?k.location:"keyLocation"in k?k.keyLocation:0},Y=function(k){return k[a]?!1:(k[a]=!0,!0)};this.listenTo=function(k){k.addEventListener("keydown",function(M){if(n.onkeydown&&Y(M)){var B=new w(M);B.keyCode!==229&&(f.push(B),F()&&M.preventDefault())}},!0),k.addEventListener("keypress",function(M){!n.onkeydown&&!n.onkeyup||Y(M)&&(f.push(new l(M)),F()&&M.preventDefault())},!0),k.addEventListener("keyup",function(M){n.onkeyup&&Y(M)&&(M.preventDefault(),f.push(new u(M)),F())},!0);var R=function(M){!n.onkeydown&&!n.onkeyup||Y(M)&&M.data&&!M.isComposing&&(k.removeEventListener("compositionend",A,!1),n.type(M.data))},A=function(M){!n.onkeydown&&!n.onkeyup||Y(M)&&M.data&&(k.removeEventListener("input",R,!1),n.type(M.data))};k.addEventListener("input",R,!1),k.addEventListener("compositionend",A,!1)},i&&n.listenTo(i)};t.Keyboard._nextID=0;t.Keyboard.ModifierState=function(){this.shift=!1,this.ctrl=!1,this.alt=!1,this.meta=!1,this.hyper=!1};t.Keyboard.ModifierState.fromKeyboardEvent=function(i){var n=new t.Keyboard.ModifierState;return n.shift=i.shiftKey,n.ctrl=i.ctrlKey,n.alt=i.altKey,n.meta=i.metaKey,i.getModifierState&&(n.hyper=i.getModifierState("OS")||i.getModifierState("Super")||i.getModifierState("Hyper")||i.getModifierState("Win")),n};var t=t||{};t.Layer=function(i,n){var s=this,a=64,h=document.createElement("canvas"),_=h.getContext("2d");_.save();var w=!0,l=!0,u=0,f={1:"destination-in",2:"destination-out",4:"source-in",6:"source-atop",8:"source-out",9:"destination-atop",10:"xor",11:"destination-over",12:"copy",14:"source-over",15:"lighter"},y=function(C,T){C=C||0,T=T||0;var E=Math.ceil(C/a)*a,x=Math.ceil(T/a)*a;if(h.width!==E||h.height!==x){var c=null;if(!w&&h.width!==0&&h.height!==0){c=document.createElement("canvas"),c.width=Math.min(s.width,C),c.height=Math.min(s.height,T);var g=c.getContext("2d");g.drawImage(h,0,0,c.width,c.height,0,0,c.width,c.height)}var d=_.globalCompositeOperation;h.width=E,h.height=x,c&&_.drawImage(c,0,0,c.width,c.height,0,0,c.width,c.height),_.globalCompositeOperation=d,u=0,_.save()}else s.reset();s.width=C,s.height=T};function p(C,T,E,x){var c=E+C,g=x+T,d;c>s.width?d=c:d=s.width;var m;g>s.height?m=g:m=s.height,s.resize(d,m)}this.autosize=!1,this.width=i,this.height=n,this.getCanvas=function(){return h},this.toCanvas=function(){var C=document.createElement("canvas");C.width=s.width,C.height=s.height;var T=C.getContext("2d");return T.drawImage(s.getCanvas(),0,0),C},this.resize=function(C,T){(C!==s.width||T!==s.height)&&y(C,T)},this.drawImage=function(C,T,E){s.autosize&&p(C,T,E.width,E.height),_.drawImage(E,C,T),w=!1},this.transfer=function(C,T,E,x,c,g,d,m){var S=C.getCanvas();if(!(T>=S.width||E>=S.height)&&(T+x>S.width&&(x=S.width-T),E+c>S.height&&(c=S.height-E),!(x===0||c===0))){s.autosize&&p(g,d,x,c);for(var b=C.getCanvas().getContext("2d").getImageData(T,E,x,c),P=_.getImageData(g,d,x,c),L=0;L<x*c*4;L+=4){var D=new t.Layer.Pixel(b.data[L],b.data[L+1],b.data[L+2],b.data[L+3]),N=new t.Layer.Pixel(P.data[L],P.data[L+1],P.data[L+2],P.data[L+3]);m(D,N),P.data[L]=N.red,P.data[L+1]=N.green,P.data[L+2]=N.blue,P.data[L+3]=N.alpha}_.putImageData(P,g,d),w=!1}},this.put=function(C,T,E,x,c,g,d){var m=C.getCanvas();if(!(T>=m.width||E>=m.height)&&(T+x>m.width&&(x=m.width-T),E+c>m.height&&(c=m.height-E),!(x===0||c===0))){s.autosize&&p(g,d,x,c);var S=C.getCanvas().getContext("2d").getImageData(T,E,x,c);_.putImageData(S,g,d),w=!1}},this.copy=function(C,T,E,x,c,g,d){var m=C.getCanvas();T>=m.width||E>=m.height||(T+x>m.width&&(x=m.width-T),E+c>m.height&&(c=m.height-E),!(x===0||c===0)&&(s.autosize&&p(g,d,x,c),_.drawImage(m,T,E,x,c,g,d,x,c),w=!1))},this.moveTo=function(C,T){l&&(_.beginPath(),l=!1),s.autosize&&p(C,T,0,0),_.moveTo(C,T)},this.lineTo=function(C,T){l&&(_.beginPath(),l=!1),s.autosize&&p(C,T,0,0),_.lineTo(C,T)},this.arc=function(C,T,E,x,c,g){l&&(_.beginPath(),l=!1),s.autosize&&p(C,T,0,0),_.arc(C,T,E,x,c,g)},this.curveTo=function(C,T,E,x,c,g){l&&(_.beginPath(),l=!1),s.autosize&&p(c,g,0,0),_.bezierCurveTo(C,T,E,x,c,g)},this.close=function(){_.closePath(),l=!0},this.rect=function(C,T,E,x){l&&(_.beginPath(),l=!1),s.autosize&&p(C,T,E,x),_.rect(C,T,E,x)},this.clip=function(){_.clip(),l=!0},this.strokeColor=function(C,T,E,x,c,g,d){_.lineCap=C,_.lineJoin=T,_.lineWidth=E,_.strokeStyle="rgba("+x+","+c+","+g+","+d/255+")",_.stroke(),w=!1,l=!0},this.fillColor=function(C,T,E,x){_.fillStyle="rgba("+C+","+T+","+E+","+x/255+")",_.fill(),w=!1,l=!0},this.strokeLayer=function(C,T,E,x){_.lineCap=C,_.lineJoin=T,_.lineWidth=E,_.strokeStyle=_.createPattern(x.getCanvas(),"repeat"),_.stroke(),w=!1,l=!0},this.fillLayer=function(C){_.fillStyle=_.createPattern(C.getCanvas(),"repeat"),_.fill(),w=!1,l=!0},this.push=function(){_.save(),u++},this.pop=function(){u>0&&(_.restore(),u--)},this.reset=function(){for(;u>0;)_.restore(),u--;_.restore(),_.save(),_.beginPath(),l=!1},this.setTransform=function(C,T,E,x,c,g){_.setTransform(C,T,E,x,c,g)},this.transform=function(C,T,E,x,c,g){_.transform(C,T,E,x,c,g)},this.setChannelMask=function(C){_.globalCompositeOperation=f[C]},this.setMiterLimit=function(C){_.miterLimit=C},y(i,n),h.style.zIndex=-1};t.Layer.ROUT=2;t.Layer.ATOP=6;t.Layer.XOR=10;t.Layer.ROVER=11;t.Layer.OVER=14;t.Layer.PLUS=15;t.Layer.RIN=1;t.Layer.IN=4;t.Layer.OUT=8;t.Layer.RATOP=9;t.Layer.SRC=12;t.Layer.Pixel=function(i,n,s,a){this.red=i,this.green=n,this.blue=s,this.alpha=a};var t=t||{};t.Mouse=function(i){t.Mouse.Event.Target.call(this);var n=this;this.touchMouseThreshold=3,this.scrollThreshold=53,this.PIXELS_PER_LINE=18,this.PIXELS_PER_PAGE=this.PIXELS_PER_LINE*16;var s=[t.Mouse.State.Buttons.LEFT,t.Mouse.State.Buttons.MIDDLE,t.Mouse.State.Buttons.RIGHT],a=0,h=0;i.addEventListener("contextmenu",function(u){t.Event.DOMEvent.cancelEvent(u)},!1),i.addEventListener("mousemove",function(u){if(a){t.Event.DOMEvent.cancelEvent(u),a--;return}n.move(t.Position.fromClientPosition(i,u.clientX,u.clientY),u)},!1),i.addEventListener("mousedown",function(u){if(a){t.Event.DOMEvent.cancelEvent(u);return}var f=s[u.button];f&&n.press(f,u)},!1),i.addEventListener("mouseup",function(u){if(a){t.Event.DOMEvent.cancelEvent(u);return}var f=s[u.button];f&&n.release(f,u)},!1),i.addEventListener("mouseout",function(u){u||(u=window.event);for(var f=u.relatedTarget||u.toElement;f;){if(f===i)return;f=f.parentNode}n.reset(u),n.out(u)},!1),i.addEventListener("selectstart",function(u){t.Event.DOMEvent.cancelEvent(u)},!1);function _(){a=n.touchMouseThreshold}i.addEventListener("touchmove",_,!1),i.addEventListener("touchstart",_,!1),i.addEventListener("touchend",_,!1);function w(u){var f=u.deltaY||-u.wheelDeltaY||-u.wheelDelta;if(f?u.deltaMode===1?f=u.deltaY*n.PIXELS_PER_LINE:u.deltaMode===2&&(f=u.deltaY*n.PIXELS_PER_PAGE):f=u.detail*n.PIXELS_PER_LINE,h+=f,h<=-n.scrollThreshold){do n.click(t.Mouse.State.Buttons.UP),h+=n.scrollThreshold;while(h<=-n.scrollThreshold);h=0}if(h>=n.scrollThreshold){do n.click(t.Mouse.State.Buttons.DOWN),h-=n.scrollThreshold;while(h>=n.scrollThreshold);h=0}t.Event.DOMEvent.cancelEvent(u)}i.addEventListener("DOMMouseScroll",w,!1),i.addEventListener("mousewheel",w,!1),i.addEventListener("wheel",w,!1);var l=function(){var u=document.createElement("div");if(!("cursor"in u.style))return!1;try{u.style.cursor="url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAQMAAAAl21bKAAAAA1BMVEX///+nxBvIAAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==) 0 0, auto"}catch{return!1}return/\burl\([^()]*\)\s+0\s+0\b/.test(u.style.cursor||"")}();this.setCursor=function(u,f,y){if(l){var p=u.toDataURL("image/png");return i.style.cursor="url("+p+") "+f+" "+y+", auto",!0}return!1}};t.Mouse.State=function(i){var n=function(s,a,h,_,w,l,u){return{x:s,y:a,left:h,middle:_,right:w,up:l,down:u}};arguments.length>1?i=n.apply(this,arguments):i=i||{},t.Position.call(this,i),this.left=i.left||!1,this.middle=i.middle||!1,this.right=i.right||!1,this.up=i.up||!1,this.down=i.down||!1};t.Mouse.State.Buttons={LEFT:"left",MIDDLE:"middle",RIGHT:"right",UP:"up",DOWN:"down"};t.Mouse.Event=function(i,n,s){t.Event.DOMEvent.call(this,i,s);var a="on"+this.type;this.state=n,this.invokeLegacyHandler=function(h){h[a]&&(this.preventDefault(),this.stopPropagation(),h[a](this.state))}};t.Mouse.Event.Target=function(){t.Event.Target.call(this),this.currentState=new t.Mouse.State,this.press=function(i,n){this.currentState[i]||(this.currentState[i]=!0,this.dispatch(new t.Mouse.Event("mousedown",this.currentState,n)))},this.release=function(i,n){this.currentState[i]&&(this.currentState[i]=!1,this.dispatch(new t.Mouse.Event("mouseup",this.currentState,n)))},this.click=function(i,n){this.press(i,n),this.release(i,n)},this.move=function(i,n){(this.currentState.x!==i.x||this.currentState.y!==i.y)&&(this.currentState.x=i.x,this.currentState.y=i.y,this.dispatch(new t.Mouse.Event("mousemove",this.currentState,n)))},this.out=function(i){this.dispatch(new t.Mouse.Event("mouseout",this.currentState,i))},this.reset=function(i){for(var n in t.Mouse.State.Buttons)this.release(t.Mouse.State.Buttons[n],i)}};t.Mouse.Touchpad=function(i){t.Mouse.Event.Target.call(this);var n=this;this.scrollThreshold=20*(window.devicePixelRatio||1),this.clickTimingThreshold=250,this.clickMoveThreshold=10*(window.devicePixelRatio||1),this.currentState=new t.Mouse.State;var s=0,a=0,h=0,_=0,w=0,l={1:"left",2:"right",3:"middle"},u=!1,f=null;i.addEventListener("touchend",function(y){if(y.preventDefault(),u&&y.touches.length===0){var p=new Date().getTime(),C=l[s];n.currentState[C]&&(n.release(C,y),f&&(window.clearTimeout(f),f=null)),p-_<=n.clickTimingThreshold&&w<n.clickMoveThreshold&&(n.press(C,y),f=window.setTimeout(function(){n.release(C,y),u=!1},n.clickTimingThreshold)),f||(u=!1)}},!1),i.addEventListener("touchstart",function(y){if(y.preventDefault(),s=Math.min(y.touches.length,3),f&&(window.clearTimeout(f),f=null),!u){u=!0;var p=y.touches[0];a=p.clientX,h=p.clientY,_=new Date().getTime(),w=0}},!1),i.addEventListener("touchmove",function(y){y.preventDefault();var p=y.touches[0],C=p.clientX-a,T=p.clientY-h;if(w+=Math.abs(C)+Math.abs(T),s===1){var E=w/(new Date().getTime()-_),x=1+E,c=new t.Position(n.currentState);c.x+=C*x,c.y+=T*x,c.x=Math.min(Math.max(0,c.x),i.offsetWidth-1),c.y=Math.min(Math.max(0,c.y),i.offsetHeight-1),n.move(c,y),a=p.clientX,h=p.clientY}else if(s===2&&Math.abs(T)>=n.scrollThreshold){var g;T>0?g="down":g="up",n.click(g,y),a=p.clientX,h=p.clientY}},!1)};t.Mouse.Touchscreen=function(i){t.Mouse.Event.Target.call(this);var n=this,s=!1,a=null,h=null,_=null,w=null;this.scrollThreshold=20*(window.devicePixelRatio||1),this.clickTimingThreshold=250,this.clickMoveThreshold=16*(window.devicePixelRatio||1),this.longPressThreshold=500;function l(y){var p=y.touches[0]||y.changedTouches[0],C=p.clientX-a,T=p.clientY-h;return Math.sqrt(C*C+T*T)>=n.clickMoveThreshold}function u(y){var p=y.touches[0];s=!0,a=p.clientX,h=p.clientY}function f(){window.clearTimeout(_),window.clearTimeout(w),s=!1}i.addEventListener("touchend",function(y){if(s){if(y.touches.length!==0||y.changedTouches.length!==1){f();return}if(window.clearTimeout(w),n.release(t.Mouse.State.Buttons.LEFT,y),!l(y)&&(y.preventDefault(),!n.currentState.left)){var p=y.changedTouches[0];n.move(t.Position.fromClientPosition(i,p.clientX,p.clientY)),n.press(t.Mouse.State.Buttons.LEFT,y),_=window.setTimeout(function(){n.release(t.Mouse.State.Buttons.LEFT,y),f()},n.clickTimingThreshold)}}},!1),i.addEventListener("touchstart",function(y){if(y.touches.length!==1){f();return}y.preventDefault(),u(y),window.clearTimeout(_),w=window.setTimeout(function(){var p=y.touches[0];n.move(t.Position.fromClientPosition(i,p.clientX,p.clientY)),n.click(t.Mouse.State.Buttons.RIGHT,y),f()},n.longPressThreshold)},!1),i.addEventListener("touchmove",function(y){if(s){if(l(y)&&window.clearTimeout(w),y.touches.length!==1){f();return}if(n.currentState.left){y.preventDefault();var p=y.touches[0];n.move(t.Position.fromClientPosition(i,p.clientX,p.clientY),y)}}},!1)};var t=t||{},t=t||{};t.Object=function(i,n){var s=this,a={},h=function(w){var l=a[w];if(!l)return null;var u=l.shift();return l.length===0&&delete a[w],u},_=function(w,l){var u=a[w];u||(u=[],a[w]=u),u.push(l)};this.index=n,this.onbody=function(w,l,u){var f=h(u);f&&f(w,l)},this.onundefine=null,this.requestInputStream=function(w,l){l&&_(w,l),i.requestObjectInputStream(s.index,w)},this.createOutputStream=function(w,l){return i.createObjectOutputStream(s.index,w,l)}};t.Object.ROOT_STREAM="/";t.Object.STREAM_INDEX_MIMETYPE="application/vnd.glyptodon.guacamole.stream-index+json";var t=t||{};t.OnScreenKeyboard=function(i){var n=this,s={},a={},h=[],_=function(d,m){d.classList?d.classList.add(m):d.className+=" "+m},w=function(d,m){d.classList?d.classList.remove(m):d.className=d.className.replace(/([^ ]+)[ ]*/g,function(S,b){return b===m?"":S})},l=0,u=function(d,m,S,b){this.width=m,this.height=S,this.scale=function(P){d.style.width=m*P+"px",d.style.height=S*P+"px",b&&(d.style.lineHeight=S*P+"px",d.style.fontSize=P+"px")}},f=function(d){for(var m=0;m<d.length;m++){var S=d[m];if(!(S in s))return!1}return!0},y=function(d){var m=n.keys[d];if(!m)return null;for(var S=m.length-1;S>=0;S--){var b=m[S];if(f(b.requires))return b}return null},p=function(d,m){if(!a[d]){_(m,"guac-keyboard-pressed");var S=y(d);if(S.modifier){var b="guac-keyboard-modifier-"+c(S.modifier),P=s[S.modifier];P===void 0?(_(T,b),s[S.modifier]=S.keysym,S.keysym&&n.onkeydown&&n.onkeydown(S.keysym)):(w(T,b),delete s[S.modifier],P&&n.onkeyup&&n.onkeyup(P))}else n.onkeydown&&n.onkeydown(S.keysym);a[d]=!0}},C=function(d,m){if(a[d]){w(m,"guac-keyboard-pressed");var S=y(d);!S.modifier&&n.onkeyup&&n.onkeyup(S.keysym),a[d]=!1}},T=document.createElement("div");T.className="guac-keyboard",T.onselectstart=T.onmousemove=T.onmouseup=T.onmousedown=function(d){return l&&l--,d.stopPropagation(),!1},this.touchMouseThreshold=3,this.onkeydown=null,this.onkeyup=null,this.layout=new t.OnScreenKeyboard.Layout(i),this.getElement=function(){return T},this.resize=function(d){for(var m=Math.floor(d*10/n.layout.width)/10,S=0;S<h.length;S++){var b=h[S];b.scale(m)}};var E=function(d,m){if(m instanceof Array){for(var S=[],b=0;b<m.length;b++)S.push(new t.OnScreenKeyboard.Key(m[b],d));return S}return typeof m=="number"?[new t.OnScreenKeyboard.Key({name:d,keysym:m})]:typeof m=="string"?[new t.OnScreenKeyboard.Key({name:d,title:m})]:[new t.OnScreenKeyboard.Key(m,d)]},x=function(d){var m={};for(var S in i.keys)m[S]=E(S,d[S]);return m};this.keys=x(i.keys);var c=function(d){var m=d.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[^A-Za-z0-9]+/g,"-").toLowerCase();return m},g=function d(m,S,b){var P,L=document.createElement("div");if(b&&_(L,"guac-keyboard-"+c(b)),S instanceof Array)for(_(L,"guac-keyboard-group"),P=0;P<S.length;P++)d(L,S[P]);else if(S instanceof Object){_(L,"guac-keyboard-group");var D=Object.keys(S).sort();for(P=0;P<D.length;P++){var b=D[P];d(L,S[b],b)}}else if(typeof S=="number")_(L,"guac-keyboard-gap"),h.push(new u(L,S,S));else if(typeof S=="string"){var N=S;N.length===1&&(N="0x"+N.charCodeAt(0).toString(16)),_(L,"guac-keyboard-key-container");var I=document.createElement("div");I.className="guac-keyboard-key guac-keyboard-key-"+c(N);var U=n.keys[S];if(U)for(P=0;P<U.length;P++){var F=U[P],$=document.createElement("div");$.className="guac-keyboard-cap",$.textContent=F.title;for(var H=0;H<F.requires.length;H++){var z=F.requires[H];_($,"guac-keyboard-requires-"+c(z)),_(I,"guac-keyboard-uses-"+c(z))}I.appendChild($)}L.appendChild(I),h.push(new u(L,n.layout.keyWidths[S]||1,1,!0));var Y=function(M){M.preventDefault(),l=n.touchMouseThreshold,p(S,I)},k=function(M){M.preventDefault(),l=n.touchMouseThreshold,C(S,I)},R=function(M){M.preventDefault(),l===0&&p(S,I)},A=function(M){M.preventDefault(),l===0&&C(S,I)};I.addEventListener("touchstart",Y,!0),I.addEventListener("touchend",k,!0),I.addEventListener("mousedown",R,!0),I.addEventListener("mouseup",A,!0),I.addEventListener("mouseout",A,!0)}m.appendChild(L)};g(T,i.layout)};t.OnScreenKeyboard.Layout=function(i){this.language=i.language,this.type=i.type,this.keys=i.keys,this.layout=i.layout,this.width=i.width,this.keyWidths=i.keyWidths||{}};t.OnScreenKeyboard.Key=function(i,n){this.name=n||i.name,this.title=i.title||this.name,this.keysym=i.keysym||function(s){if(!s||s.length!==1)return null;var a=s.charCodeAt(0);return a>=0&&a<=255?a:a>=256&&a<=1114111?16777216|a:null}(this.title),this.modifier=i.modifier,this.requires=i.requires||[]};var t=t||{};t.OutputStream=function(i,n){var s=this;this.index=n,this.onack=null,this.sendBlob=function(a){i.sendBlob(s.index,a)},this.sendEnd=function(){i.endStream(s.index)}};var t=t||{};t.Parser=function(){var i=this,n="",s=[],a=-1,h=0,_=0,w=4096,l=65536;this.receive=function(u,f){for(f?n=u:(h>w&&a>=h&&(n=n.substring(h),a-=h,h=0),n.length?n+=u:n=u);a<n.length;){if(a>=h){var y=t.Parser.codePointCount(n,h,a);if(y<_){a+=_-y;continue}else if(_&&n.codePointAt(a-1)>=l){a++;continue}var p=n.substring(h,a),C=n.substring(a,a+1);if(s.push(p),C===";"){var T=s.shift();i.oninstruction!==null&&i.oninstruction(T,s),s=[],!f&&a+1===n.length&&(a=-1,n="")}else if(C!==",")throw new Error('Element terminator of instruction was not ";" nor ",".');h=a+1}var E=n.indexOf(".",h);if(E!==-1){if(_=parseInt(n.substring(a+1,E)),isNaN(_))throw new Error("Non-numeric character in element length.");h=E+1,a=h+_}else{h=n.length;break}}},this.oninstruction=null};t.Parser.codePointCount=function(i,n,s){i=i.substring(n||0,s);var a=i.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g);return i.length-(a?a.length:0)};t.Parser.toInstruction=function(i){for(var n=function(h){var _=""+h;return t.Parser.codePointCount(_)+"."+_},s=n(i[0]),a=1;a<i.length;a++)s+=","+n(i[a]);return s+";"};var t=t||{};t.Position=function(i){i=i||{},this.x=i.x||0,this.y=i.y||0,this.fromClientPosition=function(n,s,a){this.x=s-n.offsetLeft,this.y=a-n.offsetTop;for(var h=n.offsetParent;h&&h!==document.body;)this.x-=h.offsetLeft-h.scrollLeft,this.y-=h.offsetTop-h.scrollTop,h=h.offsetParent;if(h){var _=document.body.scrollLeft||document.documentElement.scrollLeft,w=document.body.scrollTop||document.documentElement.scrollTop;this.x-=h.offsetLeft-_,this.y-=h.offsetTop-w}}};t.Position.fromClientPosition=function(i,n,s){var a=new t.Position;return a.fromClientPosition(i,n,s),a};var t=t||{};t.RawAudioFormat=function(i){this.bytesPerSample=i.bytesPerSample,this.channels=i.channels,this.rate=i.rate};t.RawAudioFormat.parse=function(i){var n,s=null,a=1;if(i.substring(0,9)==="audio/L8;")i=i.substring(9),n=1;else if(i.substring(0,10)==="audio/L16;")i=i.substring(10),n=2;else return null;for(var h=i.split(","),_=0;_<h.length;_++){var w=h[_],l=w.indexOf("=");if(l===-1)return null;var u=w.substring(0,l),f=w.substring(l+1);switch(u){case"channels":a=parseInt(f);break;case"rate":s=parseInt(f);break;default:return null}}return s===null?null:new t.RawAudioFormat({bytesPerSample:n,channels:a,rate:s})};var t=t||{};t.SessionRecording=function(i){var n=this,s,a=null,h=262144,_=16384,w=5e3,l=[],u=0,f=new t.SessionRecording._PlaybackTunnel,y=new t.Client(f),p=-1,C=null,T=null,E=null,x=0,c=0,g=!1,d=null,m=function(z,Y,k){if(!(g&&z===s)){var R=new t.Parser;R.oninstruction=Y;var A=0,M=new FileReader,B=function(){if(!(g&&z===s)){if(M.readyState===2)try{R.receive(M.result)}catch(q){n.onerror&&n.onerror(q.message);return}if(A>=z.size)k&&k();else{var G=z.slice(A,A+h);A+=G.size,M.readAsText(G)}}};M.onload=B,B()}},S=function(z){for(var Y=z.length,k=Y+3;Y>=10;)k++,Y=Math.floor(Y/10);return k};y.connect(),y.getDisplay().showCursor(!1);var b=function(z,Y){c+=S(z);for(var k=0;k<Y.length;k++)c+=S(Y[k]);if(z==="sync"){var R=parseInt(Y[0]),A=new t.SessionRecording._Frame(R,x,c);l.push(A),x=c,(l.length===1||c-l[u].start>=_&&R-l[u].timestamp>=w)&&(A.keyframe=!0,u=l.length-1),n.onprogress&&n.onprogress(n.getDuration(),c)}},P=function(){n.onload&&n.onload()};if(i instanceof Blob)s=i,m(s,b,P);else{a=i,s=new Blob;var L=!1,D="";a.oninstruction=function(z,Y){D+=z.length+"."+z,Y.forEach(function(k){D+=","+k.length+"."+k}),D+=";",D.length>=h&&(s=new Blob([s,D]),D=""),b(z,Y)},a.onerror=function(z){L=!0,n.onerror&&n.onerror(z.message)},a.onstatechange=function(z){z===t.Tunnel.State.CLOSED&&(D.length&&(s=new Blob([s,D]),D=""),L||P())}}var N=function(z){return l.length===0?0:z-l[0].timestamp},I=function z(Y,k,R){if(Y===k)return Y;var A=Math.floor((Y+k)/2),M=N(l[A].timestamp);return R<M&&A>Y?z(Y,A-1,R):R>M&&A<k?z(A+1,k,R):A},U=function(z,Y){var k=l[z];m(s.slice(k.start,k.end),function(R,A){f.receiveInstruction(R,A)},function(){k.keyframe&&!k.clientState&&y.exportState(function(R){k.clientState=new Blob([JSON.stringify(R)])}),p=z,Y&&Y()})},F=function(z,Y,k){$();for(var R=E={aborted:!1},A=z,M=function q(){n.onseek&&p>A&&n.onseek(N(l[p].timestamp),p-A,z-A),!R.aborted&&(p<z?U(p+1,q):Y())},B=function(){var q=k?Math.max(k-new Date().getTime(),0):0;q?window.setTimeout(M,q):M()};A>=0;A--){var G=l[A];if(A===p)break;if(G.clientState){G.clientState.text().then(function(q){y.importState(JSON.parse(q)),p=A,B()});return}}B()},$=function(){E&&(E.aborted=!0,E=null)},H=function z(){if(p+1<l.length){var Y=l[p+1],k=Y.timestamp-C+T;F(p+1,function(){z()},k)}else n.pause()};this.onload=null,this.onerror=null,this.onabort=null,this.onprogress=null,this.onplay=null,this.onpause=null,this.onseek=null,this.connect=function(z){a&&a.connect(z)},this.disconnect=function(){a&&a.disconnect()},this.abort=function(){g||(g=!0,n.onabort&&n.onabort(),a&&a.disconnect())},this.getDisplay=function(){return y.getDisplay()},this.isPlaying=function(){return!!C},this.getPosition=function(){return p===-1?0:N(l[p].timestamp)},this.getDuration=function(){return l.length===0?0:N(l[l.length-1].timestamp)},this.play=function(){if(!n.isPlaying()&&p+1<l.length){n.onplay&&n.onplay();var z=l[p+1];C=z.timestamp,T=new Date().getTime(),H()}},this.seek=function(z,Y){if(l.length!==0){n.cancel();var k=n.isPlaying();n.pause(),d=function(){d=null,k&&(n.play(),k=null),Y&&Y()},F(I(0,l.length-1,z),d)}},this.cancel=function(){d&&($(),d())},this.pause=function(){$(),n.isPlaying()&&(n.onpause&&n.onpause(),C=null,T=null)}};t.SessionRecording._Frame=function(i,n,s){this.keyframe=!1,this.timestamp=i,this.start=n,this.end=s,this.clientState=null};t.SessionRecording._PlaybackTunnel=function(){var i=this;this.connect=function(n){},this.sendMessage=function(n){},this.disconnect=function(){},this.receiveInstruction=function(n,s){i.oninstruction&&i.oninstruction(n,s)}};var t=t||{};t.Status=function(i,n){var s=this;this.code=i,this.message=n,this.isError=function(){return s.code<0||s.code>255}};t.Status.Code={SUCCESS:0,UNSUPPORTED:256,SERVER_ERROR:512,SERVER_BUSY:513,UPSTREAM_TIMEOUT:514,UPSTREAM_ERROR:515,RESOURCE_NOT_FOUND:516,RESOURCE_CONFLICT:517,RESOURCE_CLOSED:518,UPSTREAM_NOT_FOUND:519,UPSTREAM_UNAVAILABLE:520,SESSION_CONFLICT:521,SESSION_TIMEOUT:522,SESSION_CLOSED:523,CLIENT_BAD_REQUEST:768,CLIENT_UNAUTHORIZED:769,CLIENT_FORBIDDEN:771,CLIENT_TIMEOUT:776,CLIENT_OVERRUN:781,CLIENT_BAD_TYPE:783,CLIENT_TOO_MANY:797};t.Status.Code.fromHTTPCode=function(i){switch(i){case 400:return t.Status.Code.CLIENT_BAD_REQUEST;case 403:return t.Status.Code.CLIENT_FORBIDDEN;case 404:return t.Status.Code.RESOURCE_NOT_FOUND;case 429:return t.Status.Code.CLIENT_TOO_MANY;case 503:return t.Status.Code.SERVER_BUSY}return t.Status.Code.SERVER_ERROR};t.Status.Code.fromWebSocketCode=function(i){switch(i){case 1e3:return t.Status.Code.SUCCESS;case 1006:case 1015:return t.Status.Code.UPSTREAM_NOT_FOUND;case 1001:case 1012:case 1013:case 1014:return t.Status.Code.UPSTREAM_UNAVAILABLE}return t.Status.Code.SERVER_ERROR};var t=t||{};t.StringReader=function(i){var n=this,s=new t.UTF8Parser,a=new t.ArrayBufferReader(i);a.ondata=function(h){var _=s.decode(h);n.ontext&&n.ontext(_)},a.onend=function(){n.onend&&n.onend()},this.ontext=null,this.onend=null};var t=t||{};t.StringWriter=function(i){var n=this,s=new t.ArrayBufferWriter(i),a=new Uint8Array(8192),h=0;s.onack=function(u){n.onack&&n.onack(u)};function _(u){if(h+u>=a.length){var f=new Uint8Array((h+u)*2);f.set(a),a=f}h+=u}function w(u){var f,y;if(u<=127)f=0,y=1;else if(u<=2047)f=192,y=2;else if(u<=65535)f=224,y=3;else if(u<=2097151)f=240,y=4;else{w(65533);return}_(y);for(var p=h-1,C=1;C<y;C++)a[p--]=128|u&63,u>>=6;a[p]=f|u}function l(u){for(var f=0;f<u.length;f++){var y=u.charCodeAt(f);w(y)}if(h>0){var p=a.subarray(0,h);return h=0,p}}this.sendText=function(u){u.length&&s.sendData(l(u))},this.sendEnd=function(){s.sendEnd()},this.onack=null};var t=t||{};t.Touch=function(i){t.Event.Target.call(this);var n=this,s=Math.floor(16*window.devicePixelRatio);this.touches={},this.activeTouches=0,i.addEventListener("touchstart",function(a){for(var h=0;h<a.changedTouches.length;h++){var _=a.changedTouches[h],w=_.identifier;if(!n.touches[w]){var l=n.touches[w]=new t.Touch.State({id:w,radiusX:_.radiusX||s,radiusY:_.radiusY||s,angle:_.angle||0,force:_.force||1});n.activeTouches++,l.fromClientPosition(i,_.clientX,_.clientY),n.dispatch(new t.Touch.Event("touchmove",a,l))}}},!1),i.addEventListener("touchmove",function(a){for(var h=0;h<a.changedTouches.length;h++){var _=a.changedTouches[h],w=_.identifier,l=n.touches[w];l&&(_.force&&(l.force=_.force),l.angle=_.angle||0,l.radiusX=_.radiusX||s,l.radiusY=_.radiusY||s,l.fromClientPosition(i,_.clientX,_.clientY),n.dispatch(new t.Touch.Event("touchmove",a,l)))}},!1),i.addEventListener("touchend",function(a){for(var h=0;h<a.changedTouches.length;h++){var _=a.changedTouches[h],w=_.identifier,l=n.touches[w];l&&(delete n.touches[w],n.activeTouches--,l.force=0,l.fromClientPosition(i,_.clientX,_.clientY),n.dispatch(new t.Touch.Event("touchend",a,l)))}},!1)};t.Touch.State=function(i){i=i||{},t.Position.call(this,i),this.id=i.id||0,this.radiusX=i.radiusX||0,this.radiusY=i.radiusY||0,this.angle=i.angle||0,this.force=i.force||1};t.Touch.Event=function(i,n,s){t.Event.DOMEvent.call(this,i,[n]),this.state=s};var t=t||{};t.Tunnel=function(){this.connect=function(i){},this.disconnect=function(){},this.sendMessage=function(i){},this.setState=function(i){i!==this.state&&(this.state=i,this.onstatechange&&this.onstatechange(i))},this.setUUID=function(i){this.uuid=i,this.onuuid&&this.onuuid(i)},this.isConnected=function(){return this.state===t.Tunnel.State.OPEN||this.state===t.Tunnel.State.UNSTABLE},this.state=t.Tunnel.State.CLOSED,this.receiveTimeout=15e3,this.unstableThreshold=1500,this.uuid=null,this.onuuid=null,this.onerror=null,this.onstatechange=null,this.oninstruction=null};t.Tunnel.INTERNAL_DATA_OPCODE="";t.Tunnel.State={CONNECTING:0,OPEN:1,CLOSED:2,UNSTABLE:3};t.HTTPTunnel=function(i,n,s){var a=this,h=i+"?connect",_=i+"?read:",w=i+"?write:",l=1,u=0,f=l,y=!1,p="",C=!!n,T=null,E=null,x=null,c=500,g=s||{},d="Guacamole-Tunnel-Token",m=null;function S(F,$){for(var H in $)F.setRequestHeader(H,$[H])}var b=function(){window.clearTimeout(T),window.clearTimeout(E),a.state===t.Tunnel.State.UNSTABLE&&a.setState(t.Tunnel.State.OPEN),T=window.setTimeout(function(){P(new t.Status(t.Status.Code.UPSTREAM_TIMEOUT,"Server timeout."))},a.receiveTimeout),E=window.setTimeout(function(){a.setState(t.Tunnel.State.UNSTABLE)},a.unstableThreshold)};function P(F){window.clearTimeout(T),window.clearTimeout(E),window.clearInterval(x),a.state!==t.Tunnel.State.CLOSED&&(F.code!==t.Status.Code.SUCCESS&&a.onerror&&(a.state===t.Tunnel.State.CONNECTING||F.code!==t.Status.Code.RESOURCE_NOT_FOUND)&&a.onerror(F),y=!1,a.setState(t.Tunnel.State.CLOSED))}this.sendMessage=function(){a.isConnected()&&arguments.length&&(p+=t.Parser.toInstruction(arguments),y||L())};function L(){if(a.isConnected())if(p.length>0){y=!0;var F=new XMLHttpRequest;F.open("POST",w+a.uuid),F.withCredentials=C,S(F,g),F.setRequestHeader("Content-type","application/octet-stream"),F.setRequestHeader(d,m),F.onreadystatechange=function(){F.readyState===4&&(b(),F.status!==200?D(F):L())},F.send(p),p=""}else y=!1}function D(F){var $=parseInt(F.getResponseHeader("Guacamole-Status-Code"));if($){var H=F.getResponseHeader("Guacamole-Error-Message");P(new t.Status($,H))}else F.status?P(new t.Status(t.Status.Code.fromHTTPCode(F.status),F.statusText)):P(new t.Status(t.Status.Code.UPSTREAM_NOT_FOUND))}function N(F){var $=null,H=null,z=0,Y=new t.Parser;Y.oninstruction=function R(A,M){A===t.Tunnel.INTERNAL_DATA_OPCODE&&M.length===0?(Y=new t.Parser,Y.oninstruction=R,$&&clearInterval($),F.onreadystatechange=null,F.abort(),H&&N(H)):A!==t.Tunnel.INTERNAL_DATA_OPCODE&&a.oninstruction&&a.oninstruction(A,M)};function k(){if(!a.isConnected()){$!==null&&clearInterval($);return}if(!(F.readyState<2)){var R;try{R=F.status}catch{R=200}if(!H&&R===200&&(H=U()),F.readyState===3||F.readyState===4){if(b(),f===l&&(F.readyState===3&&!$?$=setInterval(k,30):F.readyState===4&&$&&clearInterval($)),F.status===0){a.disconnect();return}else if(F.status!==200){D(F);return}var A;try{A=F.responseText}catch{return}try{Y.receive(A,!0)}catch(M){P(new t.Status(t.Status.Code.SERVER_ERROR,M.message));return}}}}f===l?F.onreadystatechange=function(){F.readyState===3&&(z++,z>=2&&(f=u,F.onreadystatechange=k)),k()}:F.onreadystatechange=k,k()}var I=0;function U(){var F=new XMLHttpRequest;return F.open("GET",_+a.uuid+":"+I++),F.setRequestHeader(d,m),F.withCredentials=C,S(F,g),F.send(null),F}this.connect=function(F){b(),a.setState(t.Tunnel.State.CONNECTING);var $=new XMLHttpRequest;$.onreadystatechange=function(){if($.readyState===4){if($.status!==200){D($);return}if(b(),a.setUUID($.responseText),m=$.getResponseHeader(d),!m){P(new t.Status(t.Status.Code.UPSTREAM_NOT_FOUND));return}a.setState(t.Tunnel.State.OPEN),x=setInterval(function(){a.sendMessage("nop")},c),N(U())}},$.open("POST",h,!0),$.withCredentials=C,S($,g),$.setRequestHeader("Content-type","application/x-www-form-urlencoded; charset=UTF-8"),$.send(F)},this.disconnect=function(){P(new t.Status(t.Status.Code.SUCCESS,"Manually closed."))}};t.HTTPTunnel.prototype=new t.Tunnel;t.WebSocketTunnel=function(i){var n=this,s=null,a=null,h=null,_=null,w=null,l={"http:":"ws:","https:":"wss:"},u=500,f=0;if(i.substring(0,3)!=="ws:"&&i.substring(0,4)!=="wss:"){var y=l[window.location.protocol];if(i.substring(0,1)==="/")i=y+"//"+window.location.host+i;else{var p=window.location.pathname.lastIndexOf("/"),C=window.location.pathname.substring(0,p+1);i=y+"//"+window.location.host+C+i}}var T=function(){var c=new Date().getTime();n.sendMessage(t.Tunnel.INTERNAL_DATA_OPCODE,"ping",c),f=c},E=function(){window.clearTimeout(h),window.clearTimeout(_),window.clearTimeout(w),n.state===t.Tunnel.State.UNSTABLE&&n.setState(t.Tunnel.State.OPEN),h=window.setTimeout(function(){x(new t.Status(t.Status.Code.UPSTREAM_TIMEOUT,"Server timeout."))},n.receiveTimeout),_=window.setTimeout(function(){n.setState(t.Tunnel.State.UNSTABLE)},n.unstableThreshold);var c=new Date().getTime(),g=Math.max(f+u-c,0);g>0?w=window.setTimeout(T,g):T()};function x(c){window.clearTimeout(h),window.clearTimeout(_),window.clearTimeout(w),n.state!==t.Tunnel.State.CLOSED&&(c.code!==t.Status.Code.SUCCESS&&n.onerror&&n.onerror(c),n.setState(t.Tunnel.State.CLOSED),a.close())}this.sendMessage=function(c){n.isConnected()&&arguments.length&&a.send(t.Parser.toInstruction(arguments))},this.connect=function(c){E(),n.setState(t.Tunnel.State.CONNECTING),s=new t.Parser,s.oninstruction=function(g,d){n.uuid===null&&(g===t.Tunnel.INTERNAL_DATA_OPCODE&&d.length===1&&n.setUUID(d[0]),n.setState(t.Tunnel.State.OPEN)),g!==t.Tunnel.INTERNAL_DATA_OPCODE&&n.oninstruction&&n.oninstruction(g,d)},a=new WebSocket(i+"?"+c,"guacamole"),a.onopen=function(g){E()},a.onclose=function(g){g.reason?x(new t.Status(parseInt(g.reason),g.reason)):g.code?x(new t.Status(t.Status.Code.fromWebSocketCode(g.code))):x(new t.Status(t.Status.Code.UPSTREAM_NOT_FOUND))},a.onmessage=function(g){E();try{s.receive(g.data)}catch(d){x(new t.Status(t.Status.Code.SERVER_ERROR,d.message))}}},this.disconnect=function(){x(new t.Status(t.Status.Code.SUCCESS,"Manually closed."))}};t.WebSocketTunnel.prototype=new t.Tunnel;t.ChainedTunnel=function(i){for(var n=this,s,a=[],h=null,_=0;_<arguments.length;_++)a.push(arguments[_]);function w(l){n.disconnect=l.disconnect,n.sendMessage=l.sendMessage;var u=function(y){if(y&&y.code===t.Status.Code.UPSTREAM_TIMEOUT)return a=[],null;var p=a.shift();return p&&(l.onerror=null,l.oninstruction=null,l.onstatechange=null,w(p)),p};function f(){l.onstatechange=n.onstatechange,l.oninstruction=n.oninstruction,l.onerror=n.onerror,l.uuid&&n.setUUID(l.uuid),l.onuuid=function(y){n.setUUID(y)},h=l}l.onstatechange=function(y){switch(y){case t.Tunnel.State.OPEN:f(),n.onstatechange&&n.onstatechange(y);break;case t.Tunnel.State.CLOSED:!u()&&n.onstatechange&&n.onstatechange(y);break}},l.oninstruction=function(y,p){f(),n.oninstruction&&n.oninstruction(y,p)},l.onerror=function(y){!u(y)&&n.onerror&&n.onerror(y)},l.connect(s)}this.connect=function(l){s=l;var u=h||a.shift();u?w(u):n.onerror&&n.onerror(t.Status.Code.SERVER_ERROR,"No tunnels to try.")}};t.ChainedTunnel.prototype=new t.Tunnel;t.StaticHTTPTunnel=function(i,n,s){var a=this,h=null,_=s||{};this.size=null,this.sendMessage=function(w){},this.connect=function(w){a.disconnect(),a.setState(t.Tunnel.State.CONNECTING);var l=new t.Parser,u=new t.UTF8Parser;l.oninstruction=function(f,y){a.oninstruction&&a.oninstruction(f,y)},h=new AbortController,fetch(i,{headers:_,credentials:n?"include":"same-origin",signal:h.signal}).then(function(f){if(!f.ok){a.onerror&&a.onerror(new t.Status(t.Status.Code.fromHTTPCode(f.status),f.statusText)),a.disconnect();return}a.size=f.headers.get("Content-Length"),a.setState(t.Tunnel.State.OPEN);var y=f.body.getReader(),p=function C(T){if(T.done){a.disconnect();return}l.receive(u.decode(T.value)),y.read().then(C)};y.read().then(p)})},this.disconnect=function(){h&&(h.abort(),h=null),a.setState(t.Tunnel.State.CLOSED)}};t.StaticHTTPTunnel.prototype=new t.Tunnel;var t=t||{};t.UTF8Parser=function(){var i=0,n=0;this.decode=function(s){for(var a="",h=new Uint8Array(s),_=0;_<h.length;_++){var w=h[_];i===0?(w|127)===127?a+=String.fromCharCode(w):(w|31)===223?(n=w&31,i=1):(w|15)===239?(n=w&15,i=2):(w|7)===247?(n=w&7,i=3):a+="�":(w|63)===191?(n=n<<6|w&63,i--,i===0&&(a+=String.fromCharCode(n))):(i=0,a+="�")}return a}};var t=t||{};t.API_VERSION="1.5.5";var t=t||{};t.VideoPlayer=function(){this.sync=function(){}};t.VideoPlayer.isSupportedType=function(i){return!1};t.VideoPlayer.getSupportedTypes=function(){return[]};t.VideoPlayer.getInstance=function(i,n,s){return null};const X=t,RdpSession=({profile:i})=>{const n=reactExports.useRef(null),s=reactExports.useRef(null),[a,h]=reactExports.useState("connecting"),[_,w]=reactExports.useState(null);reactExports.useEffect(()=>{if(!n.current)return;let u,f;try{u=new X.WebSocketTunnel(`ws://${i.host}:${i.port}/guacamole/websocket-tunnel`),f=new X.Client(u),s.current=f,h("connecting"),f.connect({username:i.username,password:i.password,domain:""}),n.current.innerHTML="",n.current.appendChild(f.getDisplay().getElement()),u.onstatechange=y=>{y===3?h("connected"):y===0?h("disconnected"):y===2&&h("connecting")},u.onerror=y=>{h("error"),w(y.message||"Tunnel error")},f.onclipboard=(y,p)=>{if(p==="text/plain"){let C="";y.onblob=T=>{C+=T},y.onend=()=>{navigator.clipboard.writeText(C)}}}}catch(y){h("error"),w(y.message)}return()=>{s.current&&(s.current.disconnect(),s.current=null)}},[i.host,i.port,i.username,i.password]);const l=u=>{u.preventDefault(),alert("File transfer via RDP/Guacamole is not supported by all servers.")};return jsxRuntimeExports.jsxs("div",{className:"rd-session-rdp",children:[jsxRuntimeExports.jsxs("div",{className:"rd-rdp-status",children:["Status: ",jsxRuntimeExports.jsx("span",{className:`rd-status rd-status--${a}`,children:a.charAt(0).toUpperCase()+a.slice(1)}),_&&jsxRuntimeExports.jsxs("span",{className:"rd-status-error",children:["Error: ",_]})]}),jsxRuntimeExports.jsx("div",{ref:n,className:"rd-rdp-canvas",style:{width:"100%",height:"480px",background:"#232a39",borderRadius:8,marginTop:8},onDrop:l,onDragOver:u=>u.preventDefault()})]})};var xterm={exports:{}},hasRequiredXterm;function requireXterm(){return hasRequiredXterm||(hasRequiredXterm=1,function(i,n){(function(s,a){i.exports=a()})(self,()=>(()=>{var s={4567:function(w,l,u){var f=this&&this.__decorate||function(m,S,b,P){var L,D=arguments.length,N=D<3?S:P===null?P=Object.getOwnPropertyDescriptor(S,b):P;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")N=Reflect.decorate(m,S,b,P);else for(var I=m.length-1;I>=0;I--)(L=m[I])&&(N=(D<3?L(N):D>3?L(S,b,N):L(S,b))||N);return D>3&&N&&Object.defineProperty(S,b,N),N},y=this&&this.__param||function(m,S){return function(b,P){S(b,P,m)}};Object.defineProperty(l,"__esModule",{value:!0}),l.AccessibilityManager=void 0;const p=u(9042),C=u(6114),T=u(9924),E=u(844),x=u(5596),c=u(4725),g=u(3656);let d=l.AccessibilityManager=class extends E.Disposable{constructor(m,S){super(),this._terminal=m,this._renderService=S,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=document.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=document.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let b=0;b<this._terminal.rows;b++)this._rowElements[b]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[b]);if(this._topBoundaryFocusListener=b=>this._handleBoundaryFocus(b,0),this._bottomBoundaryFocusListener=b=>this._handleBoundaryFocus(b,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=document.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new T.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize(b=>this._handleResize(b.rows))),this.register(this._terminal.onRender(b=>this._refreshRows(b.start,b.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(b=>this._handleChar(b))),this.register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this.register(this._terminal.onA11yTab(b=>this._handleTab(b))),this.register(this._terminal.onKey(b=>this._handleKey(b.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this._screenDprMonitor=new x.ScreenDprMonitor(window),this.register(this._screenDprMonitor),this._screenDprMonitor.setListener(()=>this._refreshRowsDimensions()),this.register((0,g.addDisposableDomListener)(window,"resize",()=>this._refreshRowsDimensions())),this._refreshRows(),this.register((0,E.toDisposable)(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(m){for(let S=0;S<m;S++)this._handleChar(" ")}_handleChar(m){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==m&&(this._charsToAnnounce+=m):this._charsToAnnounce+=m,m===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=p.tooMuchOutput)),C.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout(()=>{this._accessibilityContainer.appendChild(this._liveRegion)},0))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0,C.isMac&&this._liveRegion.remove()}_handleKey(m){this._clearLiveRegion(),new RegExp("\\p{Control}","u").test(m)||this._charsToConsume.push(m)}_refreshRows(m,S){this._liveRegionDebouncer.refresh(m,S,this._terminal.rows)}_renderRows(m,S){const b=this._terminal.buffer,P=b.lines.length.toString();for(let L=m;L<=S;L++){const D=b.translateBufferLineToString(b.ydisp+L,!0),N=(b.ydisp+L+1).toString(),I=this._rowElements[L];I&&(D.length===0?I.innerText=" ":I.textContent=D,I.setAttribute("aria-posinset",N),I.setAttribute("aria-setsize",P))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(m,S){const b=m.target,P=this._rowElements[S===0?1:this._rowElements.length-2];if(b.getAttribute("aria-posinset")===(S===0?"1":`${this._terminal.buffer.lines.length}`)||m.relatedTarget!==P)return;let L,D;if(S===0?(L=b,D=this._rowElements.pop(),this._rowContainer.removeChild(D)):(L=this._rowElements.shift(),D=b,this._rowContainer.removeChild(L)),L.removeEventListener("focus",this._topBoundaryFocusListener),D.removeEventListener("focus",this._bottomBoundaryFocusListener),S===0){const N=this._createAccessibilityTreeNode();this._rowElements.unshift(N),this._rowContainer.insertAdjacentElement("afterbegin",N)}else{const N=this._createAccessibilityTreeNode();this._rowElements.push(N),this._rowContainer.appendChild(N)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(S===0?-1:1),this._rowElements[S===0?1:this._rowElements.length-2].focus(),m.preventDefault(),m.stopImmediatePropagation()}_handleResize(m){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let S=this._rowContainer.children.length;S<this._terminal.rows;S++)this._rowElements[S]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[S]);for(;this._rowElements.length>m;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const m=document.createElement("div");return m.setAttribute("role","listitem"),m.tabIndex=-1,this._refreshRowDimensions(m),m}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let m=0;m<this._terminal.rows;m++)this._refreshRowDimensions(this._rowElements[m])}}_refreshRowDimensions(m){m.style.height=`${this._renderService.dimensions.css.cell.height}px`}};l.AccessibilityManager=d=f([y(1,c.IRenderService)],d)},3614:(w,l)=>{function u(C){return C.replace(/\r?\n/g,"\r")}function f(C,T){return T?"\x1B[200~"+C+"\x1B[201~":C}function y(C,T,E,x){C=f(C=u(C),E.decPrivateModes.bracketedPasteMode&&x.rawOptions.ignoreBracketedPasteMode!==!0),E.triggerDataEvent(C,!0),T.value=""}function p(C,T,E){const x=E.getBoundingClientRect(),c=C.clientX-x.left-10,g=C.clientY-x.top-10;T.style.width="20px",T.style.height="20px",T.style.left=`${c}px`,T.style.top=`${g}px`,T.style.zIndex="1000",T.focus()}Object.defineProperty(l,"__esModule",{value:!0}),l.rightClickHandler=l.moveTextAreaUnderMouseCursor=l.paste=l.handlePasteEvent=l.copyHandler=l.bracketTextForPaste=l.prepareTextForTerminal=void 0,l.prepareTextForTerminal=u,l.bracketTextForPaste=f,l.copyHandler=function(C,T){C.clipboardData&&C.clipboardData.setData("text/plain",T.selectionText),C.preventDefault()},l.handlePasteEvent=function(C,T,E,x){C.stopPropagation(),C.clipboardData&&y(C.clipboardData.getData("text/plain"),T,E,x)},l.paste=y,l.moveTextAreaUnderMouseCursor=p,l.rightClickHandler=function(C,T,E,x,c){p(C,T,E),c&&x.rightClickSelect(C),T.value=x.selectionText,T.select()}},7239:(w,l,u)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.ColorContrastCache=void 0;const f=u(1505);l.ColorContrastCache=class{constructor(){this._color=new f.TwoKeyMap,this._css=new f.TwoKeyMap}setCss(y,p,C){this._css.set(y,p,C)}getCss(y,p){return this._css.get(y,p)}setColor(y,p,C){this._color.set(y,p,C)}getColor(y,p){return this._color.get(y,p)}clear(){this._color.clear(),this._css.clear()}}},3656:(w,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.addDisposableDomListener=void 0,l.addDisposableDomListener=function(u,f,y,p){u.addEventListener(f,y,p);let C=!1;return{dispose:()=>{C||(C=!0,u.removeEventListener(f,y,p))}}}},6465:function(w,l,u){var f=this&&this.__decorate||function(c,g,d,m){var S,b=arguments.length,P=b<3?g:m===null?m=Object.getOwnPropertyDescriptor(g,d):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")P=Reflect.decorate(c,g,d,m);else for(var L=c.length-1;L>=0;L--)(S=c[L])&&(P=(b<3?S(P):b>3?S(g,d,P):S(g,d))||P);return b>3&&P&&Object.defineProperty(g,d,P),P},y=this&&this.__param||function(c,g){return function(d,m){g(d,m,c)}};Object.defineProperty(l,"__esModule",{value:!0}),l.Linkifier2=void 0;const p=u(3656),C=u(8460),T=u(844),E=u(2585);let x=l.Linkifier2=class extends T.Disposable{get currentLink(){return this._currentLink}constructor(c){super(),this._bufferService=c,this._linkProviders=[],this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new C.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new C.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,T.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,T.toDisposable)(()=>{this._lastMouseEvent=void 0})),this.register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0}))}registerLinkProvider(c){return this._linkProviders.push(c),{dispose:()=>{const g=this._linkProviders.indexOf(c);g!==-1&&this._linkProviders.splice(g,1)}}}attachToDom(c,g,d){this._element=c,this._mouseService=g,this._renderService=d,this.register((0,p.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,p.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,p.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,p.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(c){if(this._lastMouseEvent=c,!this._element||!this._mouseService)return;const g=this._positionFromMouseEvent(c,this._element,this._mouseService);if(!g)return;this._isMouseOut=!1;const d=c.composedPath();for(let m=0;m<d.length;m++){const S=d[m];if(S.classList.contains("xterm"))break;if(S.classList.contains("xterm-hover"))return}this._lastBufferCell&&g.x===this._lastBufferCell.x&&g.y===this._lastBufferCell.y||(this._handleHover(g),this._lastBufferCell=g)}_handleHover(c){if(this._activeLine!==c.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(c,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,c)||(this._clearCurrentLink(),this._askForLink(c,!0))}_askForLink(c,g){var d,m;this._activeProviderReplies&&g||((d=this._activeProviderReplies)===null||d===void 0||d.forEach(b=>{b==null||b.forEach(P=>{P.link.dispose&&P.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=c.y);let S=!1;for(const[b,P]of this._linkProviders.entries())g?!((m=this._activeProviderReplies)===null||m===void 0)&&m.get(b)&&(S=this._checkLinkProviderResult(b,c,S)):P.provideLinks(c.y,L=>{var D,N;if(this._isMouseOut)return;const I=L==null?void 0:L.map(U=>({link:U}));(D=this._activeProviderReplies)===null||D===void 0||D.set(b,I),S=this._checkLinkProviderResult(b,c,S),((N=this._activeProviderReplies)===null||N===void 0?void 0:N.size)===this._linkProviders.length&&this._removeIntersectingLinks(c.y,this._activeProviderReplies)})}_removeIntersectingLinks(c,g){const d=new Set;for(let m=0;m<g.size;m++){const S=g.get(m);if(S)for(let b=0;b<S.length;b++){const P=S[b],L=P.link.range.start.y<c?0:P.link.range.start.x,D=P.link.range.end.y>c?this._bufferService.cols:P.link.range.end.x;for(let N=L;N<=D;N++){if(d.has(N)){S.splice(b--,1);break}d.add(N)}}}}_checkLinkProviderResult(c,g,d){var m;if(!this._activeProviderReplies)return d;const S=this._activeProviderReplies.get(c);let b=!1;for(let P=0;P<c;P++)this._activeProviderReplies.has(P)&&!this._activeProviderReplies.get(P)||(b=!0);if(!b&&S){const P=S.find(L=>this._linkAtPosition(L.link,g));P&&(d=!0,this._handleNewLink(P))}if(this._activeProviderReplies.size===this._linkProviders.length&&!d)for(let P=0;P<this._activeProviderReplies.size;P++){const L=(m=this._activeProviderReplies.get(P))===null||m===void 0?void 0:m.find(D=>this._linkAtPosition(D.link,g));if(L){d=!0,this._handleNewLink(L);break}}return d}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(c){if(!this._element||!this._mouseService||!this._currentLink)return;const g=this._positionFromMouseEvent(c,this._element,this._mouseService);g&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,g)&&this._currentLink.link.activate(c,this._currentLink.link.text)}_clearCurrentLink(c,g){this._element&&this._currentLink&&this._lastMouseEvent&&(!c||!g||this._currentLink.link.range.start.y>=c&&this._currentLink.link.range.end.y<=g)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,T.disposeArray)(this._linkCacheDisposables))}_handleNewLink(c){if(!this._element||!this._lastMouseEvent||!this._mouseService)return;const g=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);g&&this._linkAtPosition(c.link,g)&&(this._currentLink=c,this._currentLink.state={decorations:{underline:c.link.decorations===void 0||c.link.decorations.underline,pointerCursor:c.link.decorations===void 0||c.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,c.link,this._lastMouseEvent),c.link.decorations={},Object.defineProperties(c.link.decorations,{pointerCursor:{get:()=>{var d,m;return(m=(d=this._currentLink)===null||d===void 0?void 0:d.state)===null||m===void 0?void 0:m.decorations.pointerCursor},set:d=>{var m,S;!((m=this._currentLink)===null||m===void 0)&&m.state&&this._currentLink.state.decorations.pointerCursor!==d&&(this._currentLink.state.decorations.pointerCursor=d,this._currentLink.state.isHovered&&((S=this._element)===null||S===void 0||S.classList.toggle("xterm-cursor-pointer",d)))}},underline:{get:()=>{var d,m;return(m=(d=this._currentLink)===null||d===void 0?void 0:d.state)===null||m===void 0?void 0:m.decorations.underline},set:d=>{var m,S,b;!((m=this._currentLink)===null||m===void 0)&&m.state&&((b=(S=this._currentLink)===null||S===void 0?void 0:S.state)===null||b===void 0?void 0:b.decorations.underline)!==d&&(this._currentLink.state.decorations.underline=d,this._currentLink.state.isHovered&&this._fireUnderlineEvent(c.link,d))}}}),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(d=>{if(!this._currentLink)return;const m=d.start===0?0:d.start+1+this._bufferService.buffer.ydisp,S=this._bufferService.buffer.ydisp+1+d.end;if(this._currentLink.link.range.start.y>=m&&this._currentLink.link.range.end.y<=S&&(this._clearCurrentLink(m,S),this._lastMouseEvent&&this._element)){const b=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);b&&this._askForLink(b,!1)}})))}_linkHover(c,g,d){var m;!((m=this._currentLink)===null||m===void 0)&&m.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(g,!0),this._currentLink.state.decorations.pointerCursor&&c.classList.add("xterm-cursor-pointer")),g.hover&&g.hover(d,g.text)}_fireUnderlineEvent(c,g){const d=c.range,m=this._bufferService.buffer.ydisp,S=this._createLinkUnderlineEvent(d.start.x-1,d.start.y-m-1,d.end.x,d.end.y-m-1,void 0);(g?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(S)}_linkLeave(c,g,d){var m;!((m=this._currentLink)===null||m===void 0)&&m.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(g,!1),this._currentLink.state.decorations.pointerCursor&&c.classList.remove("xterm-cursor-pointer")),g.leave&&g.leave(d,g.text)}_linkAtPosition(c,g){const d=c.range.start.y*this._bufferService.cols+c.range.start.x,m=c.range.end.y*this._bufferService.cols+c.range.end.x,S=g.y*this._bufferService.cols+g.x;return d<=S&&S<=m}_positionFromMouseEvent(c,g,d){const m=d.getCoords(c,g,this._bufferService.cols,this._bufferService.rows);if(m)return{x:m[0],y:m[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(c,g,d,m,S){return{x1:c,y1:g,x2:d,y2:m,cols:this._bufferService.cols,fg:S}}};l.Linkifier2=x=f([y(0,E.IBufferService)],x)},9042:(w,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.tooMuchOutput=l.promptLabel=void 0,l.promptLabel="Terminal input",l.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(w,l,u){var f=this&&this.__decorate||function(x,c,g,d){var m,S=arguments.length,b=S<3?c:d===null?d=Object.getOwnPropertyDescriptor(c,g):d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(x,c,g,d);else for(var P=x.length-1;P>=0;P--)(m=x[P])&&(b=(S<3?m(b):S>3?m(c,g,b):m(c,g))||b);return S>3&&b&&Object.defineProperty(c,g,b),b},y=this&&this.__param||function(x,c){return function(g,d){c(g,d,x)}};Object.defineProperty(l,"__esModule",{value:!0}),l.OscLinkProvider=void 0;const p=u(511),C=u(2585);let T=l.OscLinkProvider=class{constructor(x,c,g){this._bufferService=x,this._optionsService=c,this._oscLinkService=g}provideLinks(x,c){var g;const d=this._bufferService.buffer.lines.get(x-1);if(!d)return void c(void 0);const m=[],S=this._optionsService.rawOptions.linkHandler,b=new p.CellData,P=d.getTrimmedLength();let L=-1,D=-1,N=!1;for(let I=0;I<P;I++)if(D!==-1||d.hasContent(I)){if(d.loadCell(I,b),b.hasExtendedAttrs()&&b.extended.urlId){if(D===-1){D=I,L=b.extended.urlId;continue}N=b.extended.urlId!==L}else D!==-1&&(N=!0);if(N||D!==-1&&I===P-1){const U=(g=this._oscLinkService.getLinkData(L))===null||g===void 0?void 0:g.uri;if(U){const F={start:{x:D+1,y:x},end:{x:I+(N||I!==P-1?0:1),y:x}};let $=!1;if(!(S!=null&&S.allowNonHttpProtocols))try{const H=new URL(U);["http:","https:"].includes(H.protocol)||($=!0)}catch{$=!0}$||m.push({text:U,range:F,activate:(H,z)=>S?S.activate(H,z,F):E(0,z),hover:(H,z)=>{var Y;return(Y=S==null?void 0:S.hover)===null||Y===void 0?void 0:Y.call(S,H,z,F)},leave:(H,z)=>{var Y;return(Y=S==null?void 0:S.leave)===null||Y===void 0?void 0:Y.call(S,H,z,F)}})}N=!1,b.hasExtendedAttrs()&&b.extended.urlId?(D=I,L=b.extended.urlId):(D=-1,L=-1)}}c(m)}};function E(x,c){if(confirm(`Do you want to navigate to ${c}?

WARNING: This link could potentially be dangerous`)){const g=window.open();if(g){try{g.opener=null}catch{}g.location.href=c}else console.warn("Opening link blocked as opener could not be cleared")}}l.OscLinkProvider=T=f([y(0,C.IBufferService),y(1,C.IOptionsService),y(2,C.IOscLinkService)],T)},6193:(w,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.RenderDebouncer=void 0,l.RenderDebouncer=class{constructor(u,f){this._parentWindow=u,this._renderCallback=f,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._parentWindow.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(u){return this._refreshCallbacks.push(u),this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(u,f,y){this._rowCount=y,u=u!==void 0?u:0,f=f!==void 0?f:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,u):u,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,f):f,this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();const u=Math.max(this._rowStart,0),f=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(u,f),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const u of this._refreshCallbacks)u(0);this._refreshCallbacks=[]}}},5596:(w,l,u)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.ScreenDprMonitor=void 0;const f=u(844);class y extends f.Disposable{constructor(C){super(),this._parentWindow=C,this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this.register((0,f.toDisposable)(()=>{this.clearListener()}))}setListener(C){this._listener&&this.clearListener(),this._listener=C,this._outerListener=()=>{this._listener&&(this._listener(this._parentWindow.devicePixelRatio,this._currentDevicePixelRatio),this._updateDpr())},this._updateDpr()}_updateDpr(){var C;this._outerListener&&((C=this._resolutionMediaMatchList)===null||C===void 0||C.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)}}l.ScreenDprMonitor=y},3236:(w,l,u)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.Terminal=void 0;const f=u(3614),y=u(3656),p=u(6465),C=u(9042),T=u(3730),E=u(1680),x=u(3107),c=u(5744),g=u(2950),d=u(1296),m=u(428),S=u(4269),b=u(5114),P=u(8934),L=u(3230),D=u(9312),N=u(4725),I=u(6731),U=u(8055),F=u(8969),$=u(8460),H=u(844),z=u(6114),Y=u(8437),k=u(2584),R=u(7399),A=u(5941),M=u(9074),B=u(2585),G=u(5435),q=u(4567),ie=typeof window<"u"?window.document:null;class le extends F.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(V={}){super(V),this.browser=z,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new H.MutableDisposable),this._onCursorMove=this.register(new $.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new $.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new $.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new $.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new $.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new $.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new $.EventEmitter),this._onBlur=this.register(new $.EventEmitter),this._onA11yCharEmitter=this.register(new $.EventEmitter),this._onA11yTabEmitter=this.register(new $.EventEmitter),this._onWillOpen=this.register(new $.EventEmitter),this._setup(),this.linkifier2=this.register(this._instantiationService.createInstance(p.Linkifier2)),this.linkifier2.registerLinkProvider(this._instantiationService.createInstance(T.OscLinkProvider)),this._decorationService=this._instantiationService.createInstance(M.DecorationService),this._instantiationService.setService(B.IDecorationService,this._decorationService),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((Z,se)=>this.refresh(Z,se))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(Z=>this._reportWindowsOptions(Z))),this.register(this._inputHandler.onColor(Z=>this._handleColorEvent(Z))),this.register((0,$.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,$.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,$.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,$.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(Z=>this._afterResize(Z.cols,Z.rows))),this.register((0,H.toDisposable)(()=>{var Z,se;this._customKeyEventHandler=void 0,(se=(Z=this.element)===null||Z===void 0?void 0:Z.parentNode)===null||se===void 0||se.removeChild(this.element)}))}_handleColorEvent(V){if(this._themeService)for(const Z of V){let se,te="";switch(Z.index){case 256:se="foreground",te="10";break;case 257:se="background",te="11";break;case 258:se="cursor",te="12";break;default:se="ansi",te="4;"+Z.index}switch(Z.type){case 0:const ce=U.color.toColorRGB(se==="ansi"?this._themeService.colors.ansi[Z.index]:this._themeService.colors[se]);this.coreService.triggerDataEvent(`${k.C0.ESC}]${te};${(0,A.toRgbString)(ce)}${k.C1_ESCAPED.ST}`);break;case 1:if(se==="ansi")this._themeService.modifyColors(he=>he.ansi[Z.index]=U.rgba.toColor(...Z.color));else{const he=se;this._themeService.modifyColors(ke=>ke[he]=U.rgba.toColor(...Z.color))}break;case 2:this._themeService.restoreColor(Z.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(V){V?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(q.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(V){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(k.C0.ESC+"[I"),this.updateCursorStyle(V),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var V;return(V=this.textarea)===null||V===void 0?void 0:V.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(k.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const V=this.buffer.ybase+this.buffer.y,Z=this.buffer.lines.get(V);if(!Z)return;const se=Math.min(this.buffer.x,this.cols-1),te=this._renderService.dimensions.css.cell.height,ce=Z.getWidth(se),he=this._renderService.dimensions.css.cell.width*ce,ke=this.buffer.y*this._renderService.dimensions.css.cell.height,Ie=se*this._renderService.dimensions.css.cell.width;this.textarea.style.left=Ie+"px",this.textarea.style.top=ke+"px",this.textarea.style.width=he+"px",this.textarea.style.height=te+"px",this.textarea.style.lineHeight=te+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,y.addDisposableDomListener)(this.element,"copy",Z=>{this.hasSelection()&&(0,f.copyHandler)(Z,this._selectionService)}));const V=Z=>(0,f.handlePasteEvent)(Z,this.textarea,this.coreService,this.optionsService);this.register((0,y.addDisposableDomListener)(this.textarea,"paste",V)),this.register((0,y.addDisposableDomListener)(this.element,"paste",V)),z.isFirefox?this.register((0,y.addDisposableDomListener)(this.element,"mousedown",Z=>{Z.button===2&&(0,f.rightClickHandler)(Z,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,y.addDisposableDomListener)(this.element,"contextmenu",Z=>{(0,f.rightClickHandler)(Z,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),z.isLinux&&this.register((0,y.addDisposableDomListener)(this.element,"auxclick",Z=>{Z.button===1&&(0,f.moveTextAreaUnderMouseCursor)(Z,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,y.addDisposableDomListener)(this.textarea,"keyup",V=>this._keyUp(V),!0)),this.register((0,y.addDisposableDomListener)(this.textarea,"keydown",V=>this._keyDown(V),!0)),this.register((0,y.addDisposableDomListener)(this.textarea,"keypress",V=>this._keyPress(V),!0)),this.register((0,y.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,y.addDisposableDomListener)(this.textarea,"compositionupdate",V=>this._compositionHelper.compositionupdate(V))),this.register((0,y.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,y.addDisposableDomListener)(this.textarea,"input",V=>this._inputEvent(V),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(V){var Z;if(!V)throw new Error("Terminal requires a parent element.");V.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this._document=V.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),V.appendChild(this.element);const se=ie.createDocumentFragment();this._viewportElement=ie.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),se.appendChild(this._viewportElement),this._viewportScrollArea=ie.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=ie.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=ie.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),se.appendChild(this.screenElement),this.textarea=ie.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",C.promptLabel),z.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this._instantiationService.createInstance(b.CoreBrowserService,this.textarea,(Z=this._document.defaultView)!==null&&Z!==void 0?Z:window),this._instantiationService.setService(N.ICoreBrowserService,this._coreBrowserService),this.register((0,y.addDisposableDomListener)(this.textarea,"focus",te=>this._handleTextAreaFocus(te))),this.register((0,y.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(m.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(N.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(I.ThemeService),this._instantiationService.setService(N.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(S.CharacterJoinerService),this._instantiationService.setService(N.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(L.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(N.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(te=>this._onRender.fire(te))),this.onResize(te=>this._renderService.resize(te.cols,te.rows)),this._compositionView=ie.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(g.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild(se);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this._mouseService=this._instantiationService.createInstance(P.MouseService),this._instantiationService.setService(N.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(E.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines(te=>this.scrollLines(te.amount,te.suppressScrollEvent,1)),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(D.SelectionService,this.element,this.screenElement,this.linkifier2)),this._instantiationService.setService(N.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(te=>this.scrollLines(te.amount,te.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw(te=>this._renderService.handleSelectionChanged(te.start,te.end,te.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection(te=>{this.textarea.value=te,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event(te=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,y.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.linkifier2.attachToDom(this.screenElement,this._mouseService,this._renderService),this.register(this._instantiationService.createInstance(x.BufferDecorationRenderer,this.screenElement)),this.register((0,y.addDisposableDomListener)(this.element,"mousedown",te=>this._selectionService.handleMouseDown(te))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(q.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",te=>this._handleScreenReaderModeOptionChange(te))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(c.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",te=>{!this._overviewRulerRenderer&&te&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(c.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(d.DomRenderer,this.element,this.screenElement,this._viewportElement,this.linkifier2)}bindMouse(){const V=this,Z=this.element;function se(he){const ke=V._mouseService.getMouseReportCoords(he,V.screenElement);if(!ke)return!1;let Ie,He;switch(he.overrideType||he.type){case"mousemove":He=32,he.buttons===void 0?(Ie=3,he.button!==void 0&&(Ie=he.button<3?he.button:3)):Ie=1&he.buttons?0:4&he.buttons?1:2&he.buttons?2:3;break;case"mouseup":He=0,Ie=he.button<3?he.button:3;break;case"mousedown":He=1,Ie=he.button<3?he.button:3;break;case"wheel":if(V.viewport.getLinesScrolled(he)===0)return!1;He=he.deltaY<0?0:1,Ie=4;break;default:return!1}return!(He===void 0||Ie===void 0||Ie>4)&&V.coreMouseService.triggerMouseEvent({col:ke.col,row:ke.row,x:ke.x,y:ke.y,button:Ie,action:He,ctrl:he.ctrlKey,alt:he.altKey,shift:he.shiftKey})}const te={mouseup:null,wheel:null,mousedrag:null,mousemove:null},ce={mouseup:he=>(se(he),he.buttons||(this._document.removeEventListener("mouseup",te.mouseup),te.mousedrag&&this._document.removeEventListener("mousemove",te.mousedrag)),this.cancel(he)),wheel:he=>(se(he),this.cancel(he,!0)),mousedrag:he=>{he.buttons&&se(he)},mousemove:he=>{he.buttons||se(he)}};this.register(this.coreMouseService.onProtocolChange(he=>{he?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(he)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&he?te.mousemove||(Z.addEventListener("mousemove",ce.mousemove),te.mousemove=ce.mousemove):(Z.removeEventListener("mousemove",te.mousemove),te.mousemove=null),16&he?te.wheel||(Z.addEventListener("wheel",ce.wheel,{passive:!1}),te.wheel=ce.wheel):(Z.removeEventListener("wheel",te.wheel),te.wheel=null),2&he?te.mouseup||(Z.addEventListener("mouseup",ce.mouseup),te.mouseup=ce.mouseup):(this._document.removeEventListener("mouseup",te.mouseup),Z.removeEventListener("mouseup",te.mouseup),te.mouseup=null),4&he?te.mousedrag||(te.mousedrag=ce.mousedrag):(this._document.removeEventListener("mousemove",te.mousedrag),te.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,y.addDisposableDomListener)(Z,"mousedown",he=>{if(he.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(he))return se(he),te.mouseup&&this._document.addEventListener("mouseup",te.mouseup),te.mousedrag&&this._document.addEventListener("mousemove",te.mousedrag),this.cancel(he)})),this.register((0,y.addDisposableDomListener)(Z,"wheel",he=>{if(!te.wheel){if(!this.buffer.hasScrollback){const ke=this.viewport.getLinesScrolled(he);if(ke===0)return;const Ie=k.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(he.deltaY<0?"A":"B");let He="";for(let tt=0;tt<Math.abs(ke);tt++)He+=Ie;return this.coreService.triggerDataEvent(He,!0),this.cancel(he,!0)}return this.viewport.handleWheel(he)?this.cancel(he):void 0}},{passive:!1})),this.register((0,y.addDisposableDomListener)(Z,"touchstart",he=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(he),this.cancel(he)},{passive:!0})),this.register((0,y.addDisposableDomListener)(Z,"touchmove",he=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(he)?void 0:this.cancel(he)},{passive:!1}))}refresh(V,Z){var se;(se=this._renderService)===null||se===void 0||se.refreshRows(V,Z)}updateCursorStyle(V){var Z;!((Z=this._selectionService)===null||Z===void 0)&&Z.shouldColumnSelect(V)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(V,Z,se=0){var te;se===1?(super.scrollLines(V,Z,se),this.refresh(0,this.rows-1)):(te=this.viewport)===null||te===void 0||te.scrollLines(V)}paste(V){(0,f.paste)(V,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(V){this._customKeyEventHandler=V}registerLinkProvider(V){return this.linkifier2.registerLinkProvider(V)}registerCharacterJoiner(V){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");const Z=this._characterJoinerService.register(V);return this.refresh(0,this.rows-1),Z}deregisterCharacterJoiner(V){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(V)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(V){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+V)}registerDecoration(V){return this._decorationService.registerDecoration(V)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(V,Z,se){this._selectionService.setSelection(V,Z,se)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var V;(V=this._selectionService)===null||V===void 0||V.clearSelection()}selectAll(){var V;(V=this._selectionService)===null||V===void 0||V.selectAll()}selectLines(V,Z){var se;(se=this._selectionService)===null||se===void 0||se.selectLines(V,Z)}_keyDown(V){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(V)===!1)return!1;const Z=this.browser.isMac&&this.options.macOptionIsMeta&&V.altKey;if(!Z&&!this._compositionHelper.keydown(V))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;Z||V.key!=="Dead"&&V.key!=="AltGraph"||(this._unprocessedDeadKey=!0);const se=(0,R.evaluateKeyboardEvent)(V,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(V),se.type===3||se.type===2){const te=this.rows-1;return this.scrollLines(se.type===2?-te:te),this.cancel(V,!0)}return se.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,V)||(se.cancel&&this.cancel(V,!0),!se.key||!!(V.key&&!V.ctrlKey&&!V.altKey&&!V.metaKey&&V.key.length===1&&V.key.charCodeAt(0)>=65&&V.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(se.key!==k.C0.ETX&&se.key!==k.C0.CR||(this.textarea.value=""),this._onKey.fire({key:se.key,domEvent:V}),this._showCursor(),this.coreService.triggerDataEvent(se.key,!0),!this.optionsService.rawOptions.screenReaderMode||V.altKey||V.ctrlKey?this.cancel(V,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(V,Z){const se=V.isMac&&!this.options.macOptionIsMeta&&Z.altKey&&!Z.ctrlKey&&!Z.metaKey||V.isWindows&&Z.altKey&&Z.ctrlKey&&!Z.metaKey||V.isWindows&&Z.getModifierState("AltGraph");return Z.type==="keypress"?se:se&&(!Z.keyCode||Z.keyCode>47)}_keyUp(V){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(V)===!1||(function(Z){return Z.keyCode===16||Z.keyCode===17||Z.keyCode===18}(V)||this.focus(),this.updateCursorStyle(V),this._keyPressHandled=!1)}_keyPress(V){let Z;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(V)===!1)return!1;if(this.cancel(V),V.charCode)Z=V.charCode;else if(V.which===null||V.which===void 0)Z=V.keyCode;else{if(V.which===0||V.charCode===0)return!1;Z=V.which}return!(!Z||(V.altKey||V.ctrlKey||V.metaKey)&&!this._isThirdLevelShift(this.browser,V)||(Z=String.fromCharCode(Z),this._onKey.fire({key:Z,domEvent:V}),this._showCursor(),this.coreService.triggerDataEvent(Z,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(V){if(V.data&&V.inputType==="insertText"&&(!V.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;const Z=V.data;return this.coreService.triggerDataEvent(Z,!0),this.cancel(V),!0}return!1}resize(V,Z){V!==this.cols||Z!==this.rows?super.resize(V,Z):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(V,Z){var se,te;(se=this._charSizeService)===null||se===void 0||se.measure(),(te=this.viewport)===null||te===void 0||te.syncScrollArea(!0)}clear(){var V;if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let Z=1;Z<this.rows;Z++)this.buffer.lines.push(this.buffer.getBlankLine(Y.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),(V=this.viewport)===null||V===void 0||V.reset(),this.refresh(0,this.rows-1)}}reset(){var V,Z;this.options.rows=this.rows,this.options.cols=this.cols;const se=this._customKeyEventHandler;this._setup(),super.reset(),(V=this._selectionService)===null||V===void 0||V.reset(),this._decorationService.reset(),(Z=this.viewport)===null||Z===void 0||Z.reset(),this._customKeyEventHandler=se,this.refresh(0,this.rows-1)}clearTextureAtlas(){var V;(V=this._renderService)===null||V===void 0||V.clearTextureAtlas()}_reportFocus(){var V;!((V=this.element)===null||V===void 0)&&V.classList.contains("focus")?this.coreService.triggerDataEvent(k.C0.ESC+"[I"):this.coreService.triggerDataEvent(k.C0.ESC+"[O")}_reportWindowsOptions(V){if(this._renderService)switch(V){case G.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const Z=this._renderService.dimensions.css.canvas.width.toFixed(0),se=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${k.C0.ESC}[4;${se};${Z}t`);break;case G.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const te=this._renderService.dimensions.css.cell.width.toFixed(0),ce=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${k.C0.ESC}[6;${ce};${te}t`)}}cancel(V,Z){if(this.options.cancelEvents||Z)return V.preventDefault(),V.stopPropagation(),!1}}l.Terminal=le},9924:(w,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.TimeBasedDebouncer=void 0,l.TimeBasedDebouncer=class{constructor(u,f=1e3){this._renderCallback=u,this._debounceThresholdMS=f,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(u,f,y){this._rowCount=y,u=u!==void 0?u:0,f=f!==void 0?f:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,u):u,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,f):f;const p=Date.now();if(p-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=p,this._innerRefresh();else if(!this._additionalRefreshRequested){const C=p-this._lastRefreshMs,T=this._debounceThresholdMS-C;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},T)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;const u=Math.max(this._rowStart,0),f=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(u,f)}}},1680:function(w,l,u){var f=this&&this.__decorate||function(g,d,m,S){var b,P=arguments.length,L=P<3?d:S===null?S=Object.getOwnPropertyDescriptor(d,m):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(g,d,m,S);else for(var D=g.length-1;D>=0;D--)(b=g[D])&&(L=(P<3?b(L):P>3?b(d,m,L):b(d,m))||L);return P>3&&L&&Object.defineProperty(d,m,L),L},y=this&&this.__param||function(g,d){return function(m,S){d(m,S,g)}};Object.defineProperty(l,"__esModule",{value:!0}),l.Viewport=void 0;const p=u(3656),C=u(4725),T=u(8460),E=u(844),x=u(2585);let c=l.Viewport=class extends E.Disposable{constructor(g,d,m,S,b,P,L,D){super(),this._viewportElement=g,this._scrollArea=d,this._bufferService=m,this._optionsService=S,this._charSizeService=b,this._renderService=P,this._coreBrowserService=L,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new T.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,p.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(N=>this._activeBuffer=N.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(N=>this._renderDimensions=N)),this._handleThemeChange(D.colors),this.register(D.onChangeColors(N=>this._handleThemeChange(N))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea())}_handleThemeChange(g){this._viewportElement.style.backgroundColor=g.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame(()=>this.syncScrollArea())}_refresh(g){if(g)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderService.dimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderService.dimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const d=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.css.canvas.height);this._lastRecordedBufferHeight!==d&&(this._lastRecordedBufferHeight=d,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}const g=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==g&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=g),this._refreshAnimationFrame=null}syncScrollArea(g=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(g);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(g)}_handleScroll(g){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});const d=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:d,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;const g=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(g*(this._smoothScrollState.target-this._smoothScrollState.origin)),g<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(g,d){const m=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(d<0&&this._viewportElement.scrollTop!==0||d>0&&m<this._lastRecordedBufferHeight)||(g.cancelable&&g.preventDefault(),!1)}handleWheel(g){const d=this._getPixelsScrolled(g);return d!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+d:this._smoothScrollState.target+=d,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=d,this._bubbleScroll(g,d))}scrollLines(g){if(g!==0)if(this._optionsService.rawOptions.smoothScrollDuration){const d=g*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+d,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:g,suppressScrollEvent:!1})}_getPixelsScrolled(g){if(g.deltaY===0||g.shiftKey)return 0;let d=this._applyScrollModifier(g.deltaY,g);return g.deltaMode===WheelEvent.DOM_DELTA_LINE?d*=this._currentRowHeight:g.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(d*=this._currentRowHeight*this._bufferService.rows),d}getBufferElements(g,d){var m;let S,b="";const P=[],L=d??this._bufferService.buffer.lines.length,D=this._bufferService.buffer.lines;for(let N=g;N<L;N++){const I=D.get(N);if(!I)continue;const U=(m=D.get(N+1))===null||m===void 0?void 0:m.isWrapped;if(b+=I.translateToString(!U),!U||N===D.length-1){const F=document.createElement("div");F.textContent=b,P.push(F),b.length>0&&(S=F),b=""}}return{bufferElements:P,cursorElement:S}}getLinesScrolled(g){if(g.deltaY===0||g.shiftKey)return 0;let d=this._applyScrollModifier(g.deltaY,g);return g.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(d/=this._currentRowHeight+0,this._wheelPartialScroll+=d,d=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):g.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(d*=this._bufferService.rows),d}_applyScrollModifier(g,d){const m=this._optionsService.rawOptions.fastScrollModifier;return m==="alt"&&d.altKey||m==="ctrl"&&d.ctrlKey||m==="shift"&&d.shiftKey?g*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:g*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(g){this._lastTouchY=g.touches[0].pageY}handleTouchMove(g){const d=this._lastTouchY-g.touches[0].pageY;return this._lastTouchY=g.touches[0].pageY,d!==0&&(this._viewportElement.scrollTop+=d,this._bubbleScroll(g,d))}};l.Viewport=c=f([y(2,x.IBufferService),y(3,x.IOptionsService),y(4,C.ICharSizeService),y(5,C.IRenderService),y(6,C.ICoreBrowserService),y(7,C.IThemeService)],c)},3107:function(w,l,u){var f=this&&this.__decorate||function(c,g,d,m){var S,b=arguments.length,P=b<3?g:m===null?m=Object.getOwnPropertyDescriptor(g,d):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")P=Reflect.decorate(c,g,d,m);else for(var L=c.length-1;L>=0;L--)(S=c[L])&&(P=(b<3?S(P):b>3?S(g,d,P):S(g,d))||P);return b>3&&P&&Object.defineProperty(g,d,P),P},y=this&&this.__param||function(c,g){return function(d,m){g(d,m,c)}};Object.defineProperty(l,"__esModule",{value:!0}),l.BufferDecorationRenderer=void 0;const p=u(3656),C=u(4725),T=u(844),E=u(2585);let x=l.BufferDecorationRenderer=class extends T.Disposable{constructor(c,g,d,m){super(),this._screenElement=c,this._bufferService=g,this._decorationService=d,this._renderService=m,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register((0,p.addDisposableDomListener)(window,"resize",()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(S=>this._removeDecoration(S))),this.register((0,T.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(const c of this._decorationService.decorations)this._renderDecoration(c);this._dimensionsChanged=!1}_renderDecoration(c){this._refreshStyle(c),this._dimensionsChanged&&this._refreshXPosition(c)}_createElement(c){var g,d;const m=document.createElement("div");m.classList.add("xterm-decoration"),m.classList.toggle("xterm-decoration-top-layer",((g=c==null?void 0:c.options)===null||g===void 0?void 0:g.layer)==="top"),m.style.width=`${Math.round((c.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,m.style.height=(c.options.height||1)*this._renderService.dimensions.css.cell.height+"px",m.style.top=(c.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",m.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;const S=(d=c.options.x)!==null&&d!==void 0?d:0;return S&&S>this._bufferService.cols&&(m.style.display="none"),this._refreshXPosition(c,m),m}_refreshStyle(c){const g=c.marker.line-this._bufferService.buffers.active.ydisp;if(g<0||g>=this._bufferService.rows)c.element&&(c.element.style.display="none",c.onRenderEmitter.fire(c.element));else{let d=this._decorationElements.get(c);d||(d=this._createElement(c),c.element=d,this._decorationElements.set(c,d),this._container.appendChild(d),c.onDispose(()=>{this._decorationElements.delete(c),d.remove()})),d.style.top=g*this._renderService.dimensions.css.cell.height+"px",d.style.display=this._altBufferIsActive?"none":"block",c.onRenderEmitter.fire(d)}}_refreshXPosition(c,g=c.element){var d;if(!g)return;const m=(d=c.options.x)!==null&&d!==void 0?d:0;(c.options.anchor||"left")==="right"?g.style.right=m?m*this._renderService.dimensions.css.cell.width+"px":"":g.style.left=m?m*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(c){var g;(g=this._decorationElements.get(c))===null||g===void 0||g.remove(),this._decorationElements.delete(c),c.dispose()}};l.BufferDecorationRenderer=x=f([y(1,E.IBufferService),y(2,E.IDecorationService),y(3,C.IRenderService)],x)},5871:(w,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.ColorZoneStore=void 0,l.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(u){if(u.options.overviewRulerOptions){for(const f of this._zones)if(f.color===u.options.overviewRulerOptions.color&&f.position===u.options.overviewRulerOptions.position){if(this._lineIntersectsZone(f,u.marker.line))return;if(this._lineAdjacentToZone(f,u.marker.line,u.options.overviewRulerOptions.position))return void this._addLineToZone(f,u.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=u.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=u.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=u.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=u.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:u.options.overviewRulerOptions.color,position:u.options.overviewRulerOptions.position,startBufferLine:u.marker.line,endBufferLine:u.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(u){this._linePadding=u}_lineIntersectsZone(u,f){return f>=u.startBufferLine&&f<=u.endBufferLine}_lineAdjacentToZone(u,f,y){return f>=u.startBufferLine-this._linePadding[y||"full"]&&f<=u.endBufferLine+this._linePadding[y||"full"]}_addLineToZone(u,f){u.startBufferLine=Math.min(u.startBufferLine,f),u.endBufferLine=Math.max(u.endBufferLine,f)}}},5744:function(w,l,u){var f=this&&this.__decorate||function(S,b,P,L){var D,N=arguments.length,I=N<3?b:L===null?L=Object.getOwnPropertyDescriptor(b,P):L;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")I=Reflect.decorate(S,b,P,L);else for(var U=S.length-1;U>=0;U--)(D=S[U])&&(I=(N<3?D(I):N>3?D(b,P,I):D(b,P))||I);return N>3&&I&&Object.defineProperty(b,P,I),I},y=this&&this.__param||function(S,b){return function(P,L){b(P,L,S)}};Object.defineProperty(l,"__esModule",{value:!0}),l.OverviewRulerRenderer=void 0;const p=u(5871),C=u(3656),T=u(4725),E=u(844),x=u(2585),c={full:0,left:0,center:0,right:0},g={full:0,left:0,center:0,right:0},d={full:0,left:0,center:0,right:0};let m=l.OverviewRulerRenderer=class extends E.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(S,b,P,L,D,N,I){var U;super(),this._viewportElement=S,this._screenElement=b,this._bufferService=P,this._decorationService=L,this._renderService=D,this._optionsService=N,this._coreBrowseService=I,this._colorZoneStore=new p.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),(U=this._viewportElement.parentElement)===null||U===void 0||U.insertBefore(this._canvas,this._viewportElement);const F=this._canvas.getContext("2d");if(!F)throw new Error("Ctx cannot be null");this._ctx=F,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,E.toDisposable)(()=>{var $;($=this._canvas)===null||$===void 0||$.remove()}))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register((0,C.addDisposableDomListener)(this._coreBrowseService.window,"resize",()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){const S=Math.floor(this._canvas.width/3),b=Math.ceil(this._canvas.width/3);g.full=this._canvas.width,g.left=S,g.center=b,g.right=S,this._refreshDrawHeightConstants(),d.full=0,d.left=0,d.center=g.left,d.right=g.left+g.center}_refreshDrawHeightConstants(){c.full=Math.round(2*this._coreBrowseService.dpr);const S=this._canvas.height/this._bufferService.buffer.lines.length,b=Math.round(Math.max(Math.min(S,12),6)*this._coreBrowseService.dpr);c.left=b,c.center=b,c.right=b}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*c.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*c.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*c.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*c.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowseService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowseService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const b of this._decorationService.decorations)this._colorZoneStore.addDecoration(b);this._ctx.lineWidth=1;const S=this._colorZoneStore.zones;for(const b of S)b.position!=="full"&&this._renderColorZone(b);for(const b of S)b.position==="full"&&this._renderColorZone(b);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(S){this._ctx.fillStyle=S.color,this._ctx.fillRect(d[S.position||"full"],Math.round((this._canvas.height-1)*(S.startBufferLine/this._bufferService.buffers.active.lines.length)-c[S.position||"full"]/2),g[S.position||"full"],Math.round((this._canvas.height-1)*((S.endBufferLine-S.startBufferLine)/this._bufferService.buffers.active.lines.length)+c[S.position||"full"]))}_queueRefresh(S,b){this._shouldUpdateDimensions=S||this._shouldUpdateDimensions,this._shouldUpdateAnchor=b||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowseService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};l.OverviewRulerRenderer=m=f([y(2,x.IBufferService),y(3,x.IDecorationService),y(4,T.IRenderService),y(5,x.IOptionsService),y(6,T.ICoreBrowserService)],m)},2950:function(w,l,u){var f=this&&this.__decorate||function(x,c,g,d){var m,S=arguments.length,b=S<3?c:d===null?d=Object.getOwnPropertyDescriptor(c,g):d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(x,c,g,d);else for(var P=x.length-1;P>=0;P--)(m=x[P])&&(b=(S<3?m(b):S>3?m(c,g,b):m(c,g))||b);return S>3&&b&&Object.defineProperty(c,g,b),b},y=this&&this.__param||function(x,c){return function(g,d){c(g,d,x)}};Object.defineProperty(l,"__esModule",{value:!0}),l.CompositionHelper=void 0;const p=u(4725),C=u(2585),T=u(2584);let E=l.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(x,c,g,d,m,S){this._textarea=x,this._compositionView=c,this._bufferService=g,this._optionsService=d,this._coreService=m,this._renderService=S,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(x){this._compositionView.textContent=x.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(x){if(this._isComposing||this._isSendingComposition){if(x.keyCode===229||x.keyCode===16||x.keyCode===17||x.keyCode===18)return!1;this._finalizeComposition(!1)}return x.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(x){if(this._compositionView.classList.remove("active"),this._isComposing=!1,x){const c={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let g;this._isSendingComposition=!1,c.start+=this._dataAlreadySent.length,g=this._isComposing?this._textarea.value.substring(c.start,c.end):this._textarea.value.substring(c.start),g.length>0&&this._coreService.triggerDataEvent(g,!0)}},0)}else{this._isSendingComposition=!1;const c=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(c,!0)}}_handleAnyTextareaChanges(){const x=this._textarea.value;setTimeout(()=>{if(!this._isComposing){const c=this._textarea.value,g=c.replace(x,"");this._dataAlreadySent=g,c.length>x.length?this._coreService.triggerDataEvent(g,!0):c.length<x.length?this._coreService.triggerDataEvent(`${T.C0.DEL}`,!0):c.length===x.length&&c!==x&&this._coreService.triggerDataEvent(c,!0)}},0)}updateCompositionElements(x){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const c=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),g=this._renderService.dimensions.css.cell.height,d=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,m=c*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=m+"px",this._compositionView.style.top=d+"px",this._compositionView.style.height=g+"px",this._compositionView.style.lineHeight=g+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";const S=this._compositionView.getBoundingClientRect();this._textarea.style.left=m+"px",this._textarea.style.top=d+"px",this._textarea.style.width=Math.max(S.width,1)+"px",this._textarea.style.height=Math.max(S.height,1)+"px",this._textarea.style.lineHeight=S.height+"px"}x||setTimeout(()=>this.updateCompositionElements(!0),0)}}};l.CompositionHelper=E=f([y(2,C.IBufferService),y(3,C.IOptionsService),y(4,C.ICoreService),y(5,p.IRenderService)],E)},9806:(w,l)=>{function u(f,y,p){const C=p.getBoundingClientRect(),T=f.getComputedStyle(p),E=parseInt(T.getPropertyValue("padding-left")),x=parseInt(T.getPropertyValue("padding-top"));return[y.clientX-C.left-E,y.clientY-C.top-x]}Object.defineProperty(l,"__esModule",{value:!0}),l.getCoords=l.getCoordsRelativeToElement=void 0,l.getCoordsRelativeToElement=u,l.getCoords=function(f,y,p,C,T,E,x,c,g){if(!E)return;const d=u(f,y,p);return d?(d[0]=Math.ceil((d[0]+(g?x/2:0))/x),d[1]=Math.ceil(d[1]/c),d[0]=Math.min(Math.max(d[0],1),C+(g?1:0)),d[1]=Math.min(Math.max(d[1],1),T),d):void 0}},9504:(w,l,u)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.moveToCellSequence=void 0;const f=u(2584);function y(c,g,d,m){const S=c-p(c,d),b=g-p(g,d),P=Math.abs(S-b)-function(L,D,N){let I=0;const U=L-p(L,N),F=D-p(D,N);for(let $=0;$<Math.abs(U-F);$++){const H=C(L,D)==="A"?-1:1,z=N.buffer.lines.get(U+H*$);z!=null&&z.isWrapped&&I++}return I}(c,g,d);return x(P,E(C(c,g),m))}function p(c,g){let d=0,m=g.buffer.lines.get(c),S=m==null?void 0:m.isWrapped;for(;S&&c>=0&&c<g.rows;)d++,m=g.buffer.lines.get(--c),S=m==null?void 0:m.isWrapped;return d}function C(c,g){return c>g?"A":"B"}function T(c,g,d,m,S,b){let P=c,L=g,D="";for(;P!==d||L!==m;)P+=S?1:-1,S&&P>b.cols-1?(D+=b.buffer.translateBufferLineToString(L,!1,c,P),P=0,c=0,L++):!S&&P<0&&(D+=b.buffer.translateBufferLineToString(L,!1,0,c+1),P=b.cols-1,c=P,L--);return D+b.buffer.translateBufferLineToString(L,!1,c,P)}function E(c,g){const d=g?"O":"[";return f.C0.ESC+d+c}function x(c,g){c=Math.floor(c);let d="";for(let m=0;m<c;m++)d+=g;return d}l.moveToCellSequence=function(c,g,d,m){const S=d.buffer.x,b=d.buffer.y;if(!d.buffer.hasScrollback)return function(D,N,I,U,F,$){return y(N,U,F,$).length===0?"":x(T(D,N,D,N-p(N,F),!1,F).length,E("D",$))}(S,b,0,g,d,m)+y(b,g,d,m)+function(D,N,I,U,F,$){let H;H=y(N,U,F,$).length>0?U-p(U,F):N;const z=U,Y=function(k,R,A,M,B,G){let q;return q=y(A,M,B,G).length>0?M-p(M,B):R,k<A&&q<=M||k>=A&&q<M?"C":"D"}(D,N,I,U,F,$);return x(T(D,H,I,z,Y==="C",F).length,E(Y,$))}(S,b,c,g,d,m);let P;if(b===g)return P=S>c?"D":"C",x(Math.abs(S-c),E(P,m));P=b>g?"D":"C";const L=Math.abs(b-g);return x(function(D,N){return N.cols-D}(b>g?c:S,d)+(L-1)*d.cols+1+((b>g?S:c)-1),E(P,m))}},1296:function(w,l,u){var f=this&&this.__decorate||function(F,$,H,z){var Y,k=arguments.length,R=k<3?$:z===null?z=Object.getOwnPropertyDescriptor($,H):z;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")R=Reflect.decorate(F,$,H,z);else for(var A=F.length-1;A>=0;A--)(Y=F[A])&&(R=(k<3?Y(R):k>3?Y($,H,R):Y($,H))||R);return k>3&&R&&Object.defineProperty($,H,R),R},y=this&&this.__param||function(F,$){return function(H,z){$(H,z,F)}};Object.defineProperty(l,"__esModule",{value:!0}),l.DomRenderer=void 0;const p=u(3787),C=u(2550),T=u(2223),E=u(6171),x=u(4725),c=u(8055),g=u(8460),d=u(844),m=u(2585),S="xterm-dom-renderer-owner-",b="xterm-rows",P="xterm-fg-",L="xterm-bg-",D="xterm-focus",N="xterm-selection";let I=1,U=l.DomRenderer=class extends d.Disposable{constructor(F,$,H,z,Y,k,R,A,M,B){super(),this._element=F,this._screenElement=$,this._viewportElement=H,this._linkifier2=z,this._charSizeService=k,this._optionsService=R,this._bufferService=A,this._coreBrowserService=M,this._themeService=B,this._terminalClass=I++,this._rowElements=[],this.onRequestRedraw=this.register(new g.EventEmitter).event,this._rowContainer=document.createElement("div"),this._rowContainer.classList.add(b),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=document.createElement("div"),this._selectionContainer.classList.add(N),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,E.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._themeService.onChangeColors(G=>this._injectCss(G))),this._injectCss(this._themeService.colors),this._rowFactory=Y.createInstance(p.DomRendererRowFactory,document),this._element.classList.add(S+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(G=>this._handleLinkHover(G))),this.register(this._linkifier2.onHideLinkUnderline(G=>this._handleLinkLeave(G))),this.register((0,d.toDisposable)(()=>{this._element.classList.remove(S+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new C.WidthCache(document),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){const F=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*F,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*F),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/F),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/F),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const H of this._rowElements)H.style.width=`${this.dimensions.css.canvas.width}px`,H.style.height=`${this.dimensions.css.cell.height}px`,H.style.lineHeight=`${this.dimensions.css.cell.height}px`,H.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));const $=`${this._terminalSelector} .${b} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=$,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(F){this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let $=`${this._terminalSelector} .${b} { color: ${F.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;$+=`${this._terminalSelector} .${b} .xterm-dim { color: ${c.color.multiplyOpacity(F.foreground,.5).css};}`,$+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`,$+="@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  border-bottom-style: hidden; }}",$+="@keyframes blink_block_"+this._terminalClass+` { 0% {  background-color: ${F.cursor.css};  color: ${F.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${F.cursor.css}; }}`,$+=`${this._terminalSelector} .${b}.${D} .xterm-cursor.xterm-cursor-blink:not(.xterm-cursor-block) { animation: blink_box_shadow_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${b}.${D} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: blink_block_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${b} .xterm-cursor.xterm-cursor-block { background-color: ${F.cursor.css}; color: ${F.cursorAccent.css};}${this._terminalSelector} .${b} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${F.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${b} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${F.cursor.css} inset;}${this._terminalSelector} .${b} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${F.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,$+=`${this._terminalSelector} .${N} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${N} div { position: absolute; background-color: ${F.selectionBackgroundOpaque.css};}${this._terminalSelector} .${N} div { position: absolute; background-color: ${F.selectionInactiveBackgroundOpaque.css};}`;for(const[H,z]of F.ansi.entries())$+=`${this._terminalSelector} .${P}${H} { color: ${z.css}; }${this._terminalSelector} .${P}${H}.xterm-dim { color: ${c.color.multiplyOpacity(z,.5).css}; }${this._terminalSelector} .${L}${H} { background-color: ${z.css}; }`;$+=`${this._terminalSelector} .${P}${T.INVERTED_DEFAULT_COLOR} { color: ${c.color.opaque(F.background).css}; }${this._terminalSelector} .${P}${T.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${c.color.multiplyOpacity(c.color.opaque(F.background),.5).css}; }${this._terminalSelector} .${L}${T.INVERTED_DEFAULT_COLOR} { background-color: ${F.foreground.css}; }`,this._themeStyleElement.textContent=$}_setDefaultSpacing(){const F=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${F}px`,this._rowFactory.defaultSpacing=F}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(F,$){for(let H=this._rowElements.length;H<=$;H++){const z=document.createElement("div");this._rowContainer.appendChild(z),this._rowElements.push(z)}for(;this._rowElements.length>$;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(F,$){this._refreshRowElements(F,$),this._updateDimensions()}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(D)}handleFocus(){this._rowContainer.classList.add(D),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(F,$,H){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(F,$,H),this.renderRows(0,this._bufferService.rows-1),!F||!$)return;const z=F[1]-this._bufferService.buffer.ydisp,Y=$[1]-this._bufferService.buffer.ydisp,k=Math.max(z,0),R=Math.min(Y,this._bufferService.rows-1);if(k>=this._bufferService.rows||R<0)return;const A=document.createDocumentFragment();if(H){const M=F[0]>$[0];A.appendChild(this._createSelectionElement(k,M?$[0]:F[0],M?F[0]:$[0],R-k+1))}else{const M=z===k?F[0]:0,B=k===Y?$[0]:this._bufferService.cols;A.appendChild(this._createSelectionElement(k,M,B));const G=R-k-1;if(A.appendChild(this._createSelectionElement(k+1,0,this._bufferService.cols,G)),k!==R){const q=Y===R?$[0]:this._bufferService.cols;A.appendChild(this._createSelectionElement(R,0,q))}}this._selectionContainer.appendChild(A)}_createSelectionElement(F,$,H,z=1){const Y=document.createElement("div");return Y.style.height=z*this.dimensions.css.cell.height+"px",Y.style.top=F*this.dimensions.css.cell.height+"px",Y.style.left=$*this.dimensions.css.cell.width+"px",Y.style.width=this.dimensions.css.cell.width*(H-$)+"px",Y}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(const F of this._rowElements)F.replaceChildren()}renderRows(F,$){const H=this._bufferService.buffer,z=H.ybase+H.y,Y=Math.min(H.x,this._bufferService.cols-1),k=this._optionsService.rawOptions.cursorBlink,R=this._optionsService.rawOptions.cursorStyle,A=this._optionsService.rawOptions.cursorInactiveStyle;for(let M=F;M<=$;M++){const B=M+H.ydisp,G=this._rowElements[M],q=H.lines.get(B);if(!G||!q)break;G.replaceChildren(...this._rowFactory.createRow(q,B,B===z,R,A,Y,k,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${S}${this._terminalClass}`}_handleLinkHover(F){this._setCellUnderline(F.x1,F.x2,F.y1,F.y2,F.cols,!0)}_handleLinkLeave(F){this._setCellUnderline(F.x1,F.x2,F.y1,F.y2,F.cols,!1)}_setCellUnderline(F,$,H,z,Y,k){H<0&&(F=0),z<0&&($=0);const R=this._bufferService.rows-1;H=Math.max(Math.min(H,R),0),z=Math.max(Math.min(z,R),0),Y=Math.min(Y,this._bufferService.cols);const A=this._bufferService.buffer,M=A.ybase+A.y,B=Math.min(A.x,Y-1),G=this._optionsService.rawOptions.cursorBlink,q=this._optionsService.rawOptions.cursorStyle,ie=this._optionsService.rawOptions.cursorInactiveStyle;for(let le=H;le<=z;++le){const _e=le+A.ydisp,V=this._rowElements[le],Z=A.lines.get(_e);if(!V||!Z)break;V.replaceChildren(...this._rowFactory.createRow(Z,_e,_e===M,q,ie,B,G,this.dimensions.css.cell.width,this._widthCache,k?le===H?F:0:-1,k?(le===z?$:Y)-1:-1))}}};l.DomRenderer=U=f([y(4,m.IInstantiationService),y(5,x.ICharSizeService),y(6,m.IOptionsService),y(7,m.IBufferService),y(8,x.ICoreBrowserService),y(9,x.IThemeService)],U)},3787:function(w,l,u){var f=this&&this.__decorate||function(P,L,D,N){var I,U=arguments.length,F=U<3?L:N===null?N=Object.getOwnPropertyDescriptor(L,D):N;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")F=Reflect.decorate(P,L,D,N);else for(var $=P.length-1;$>=0;$--)(I=P[$])&&(F=(U<3?I(F):U>3?I(L,D,F):I(L,D))||F);return U>3&&F&&Object.defineProperty(L,D,F),F},y=this&&this.__param||function(P,L){return function(D,N){L(D,N,P)}};Object.defineProperty(l,"__esModule",{value:!0}),l.DomRendererRowFactory=void 0;const p=u(2223),C=u(643),T=u(511),E=u(2585),x=u(8055),c=u(4725),g=u(4269),d=u(6171),m=u(3734);let S=l.DomRendererRowFactory=class{constructor(P,L,D,N,I,U,F){this._document=P,this._characterJoinerService=L,this._optionsService=D,this._coreBrowserService=N,this._coreService=I,this._decorationService=U,this._themeService=F,this._workCell=new T.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(P,L,D){this._selectionStart=P,this._selectionEnd=L,this._columnSelectMode=D}createRow(P,L,D,N,I,U,F,$,H,z,Y){const k=[],R=this._characterJoinerService.getJoinedCharacters(L),A=this._themeService.colors;let M,B=P.getNoBgTrimmedLength();D&&B<U+1&&(B=U+1);let G=0,q="",ie=0,le=0,_e=0,V=!1,Z=0,se=!1,te=0;const ce=[],he=z!==-1&&Y!==-1;for(let ke=0;ke<B;ke++){P.loadCell(ke,this._workCell);let Ie=this._workCell.getWidth();if(Ie===0)continue;let He=!1,tt=ke,Ae=this._workCell;if(R.length>0&&ke===R[0][0]){He=!0;const Ne=R.shift();Ae=new g.JoinedCellData(this._workCell,P.translateToString(!0,Ne[0],Ne[1]),Ne[1]-Ne[0]),tt=Ne[1]-1,Ie=Ae.getWidth()}const bt=this._isCellInSelection(ke,L),It=D&&ke===U,xt=he&&ke>=z&&ke<=Y;let gt=!1;this._decorationService.forEachDecorationAtCell(ke,L,void 0,Ne=>{gt=!0});let kt=Ae.getChars()||C.WHITESPACE_CELL_CHAR;if(kt===" "&&(Ae.isUnderline()||Ae.isOverline())&&(kt=" "),te=Ie*$-H.get(kt,Ae.isBold(),Ae.isItalic()),M){if(G&&(bt&&se||!bt&&!se&&Ae.bg===ie)&&(bt&&se&&A.selectionForeground||Ae.fg===le)&&Ae.extended.ext===_e&&xt===V&&te===Z&&!It&&!He&&!gt){q+=kt,G++;continue}G&&(M.textContent=q),M=this._document.createElement("span"),G=0,q=""}else M=this._document.createElement("span");if(ie=Ae.bg,le=Ae.fg,_e=Ae.extended.ext,V=xt,Z=te,se=bt,He&&U>=ke&&U<=tt&&(U=ke),!this._coreService.isCursorHidden&&It){if(ce.push("xterm-cursor"),this._coreBrowserService.isFocused)F&&ce.push("xterm-cursor-blink"),ce.push(N==="bar"?"xterm-cursor-bar":N==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(I)switch(I){case"outline":ce.push("xterm-cursor-outline");break;case"block":ce.push("xterm-cursor-block");break;case"bar":ce.push("xterm-cursor-bar");break;case"underline":ce.push("xterm-cursor-underline")}}if(Ae.isBold()&&ce.push("xterm-bold"),Ae.isItalic()&&ce.push("xterm-italic"),Ae.isDim()&&ce.push("xterm-dim"),q=Ae.isInvisible()?C.WHITESPACE_CELL_CHAR:Ae.getChars()||C.WHITESPACE_CELL_CHAR,Ae.isUnderline()&&(ce.push(`xterm-underline-${Ae.extended.underlineStyle}`),q===" "&&(q=" "),!Ae.isUnderlineColorDefault()))if(Ae.isUnderlineColorRGB())M.style.textDecorationColor=`rgb(${m.AttributeData.toColorRGB(Ae.getUnderlineColor()).join(",")})`;else{let Ne=Ae.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&Ae.isBold()&&Ne<8&&(Ne+=8),M.style.textDecorationColor=A.ansi[Ne].css}Ae.isOverline()&&(ce.push("xterm-overline"),q===" "&&(q=" ")),Ae.isStrikethrough()&&ce.push("xterm-strikethrough"),xt&&(M.style.textDecoration="underline");let Ze=Ae.getFgColor(),Tt=Ae.getFgColorMode(),Ye=Ae.getBgColor(),jt=Ae.getBgColorMode();const Nt=!!Ae.isInverse();if(Nt){const Ne=Ze;Ze=Ye,Ye=Ne;const Ge=Tt;Tt=jt,jt=Ge}let it,Dt,rt,Qe=!1;switch(this._decorationService.forEachDecorationAtCell(ke,L,void 0,Ne=>{Ne.options.layer!=="top"&&Qe||(Ne.backgroundColorRGB&&(jt=50331648,Ye=Ne.backgroundColorRGB.rgba>>8&16777215,it=Ne.backgroundColorRGB),Ne.foregroundColorRGB&&(Tt=50331648,Ze=Ne.foregroundColorRGB.rgba>>8&16777215,Dt=Ne.foregroundColorRGB),Qe=Ne.options.layer==="top")}),!Qe&&bt&&(it=this._coreBrowserService.isFocused?A.selectionBackgroundOpaque:A.selectionInactiveBackgroundOpaque,Ye=it.rgba>>8&16777215,jt=50331648,Qe=!0,A.selectionForeground&&(Tt=50331648,Ze=A.selectionForeground.rgba>>8&16777215,Dt=A.selectionForeground)),Qe&&ce.push("xterm-decoration-top"),jt){case 16777216:case 33554432:rt=A.ansi[Ye],ce.push(`xterm-bg-${Ye}`);break;case 50331648:rt=x.rgba.toColor(Ye>>16,Ye>>8&255,255&Ye),this._addStyle(M,`background-color:#${b((Ye>>>0).toString(16),"0",6)}`);break;default:Nt?(rt=A.foreground,ce.push(`xterm-bg-${p.INVERTED_DEFAULT_COLOR}`)):rt=A.background}switch(it||Ae.isDim()&&(it=x.color.multiplyOpacity(rt,.5)),Tt){case 16777216:case 33554432:Ae.isBold()&&Ze<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(Ze+=8),this._applyMinimumContrast(M,rt,A.ansi[Ze],Ae,it,void 0)||ce.push(`xterm-fg-${Ze}`);break;case 50331648:const Ne=x.rgba.toColor(Ze>>16&255,Ze>>8&255,255&Ze);this._applyMinimumContrast(M,rt,Ne,Ae,it,Dt)||this._addStyle(M,`color:#${b(Ze.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(M,rt,A.foreground,Ae,it,void 0)||Nt&&ce.push(`xterm-fg-${p.INVERTED_DEFAULT_COLOR}`)}ce.length&&(M.className=ce.join(" "),ce.length=0),It||He||gt?M.textContent=q:G++,te!==this.defaultSpacing&&(M.style.letterSpacing=`${te}px`),k.push(M),ke=tt}return M&&G&&(M.textContent=q),k}_applyMinimumContrast(P,L,D,N,I,U){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,d.excludeFromContrastRatioDemands)(N.getCode()))return!1;const F=this._getContrastCache(N);let $;if(I||U||($=F.getColor(L.rgba,D.rgba)),$===void 0){const H=this._optionsService.rawOptions.minimumContrastRatio/(N.isDim()?2:1);$=x.color.ensureContrastRatio(I||L,U||D,H),F.setColor((I||L).rgba,(U||D).rgba,$??null)}return!!$&&(this._addStyle(P,`color:${$.css}`),!0)}_getContrastCache(P){return P.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(P,L){P.setAttribute("style",`${P.getAttribute("style")||""}${L};`)}_isCellInSelection(P,L){const D=this._selectionStart,N=this._selectionEnd;return!(!D||!N)&&(this._columnSelectMode?D[0]<=N[0]?P>=D[0]&&L>=D[1]&&P<N[0]&&L<=N[1]:P<D[0]&&L>=D[1]&&P>=N[0]&&L<=N[1]:L>D[1]&&L<N[1]||D[1]===N[1]&&L===D[1]&&P>=D[0]&&P<N[0]||D[1]<N[1]&&L===N[1]&&P<N[0]||D[1]<N[1]&&L===D[1]&&P>=D[0])}};function b(P,L,D){for(;P.length<D;)P=L+P;return P}l.DomRendererRowFactory=S=f([y(1,c.ICharacterJoinerService),y(2,E.IOptionsService),y(3,c.ICoreBrowserService),y(4,E.ICoreService),y(5,E.IDecorationService),y(6,c.IThemeService)],S)},2550:(w,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.WidthCache=void 0,l.WidthCache=class{constructor(u){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=u.createElement("div"),this._container.style.position="absolute",this._container.style.top="-50000px",this._container.style.width="50000px",this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";const f=u.createElement("span"),y=u.createElement("span");y.style.fontWeight="bold";const p=u.createElement("span");p.style.fontStyle="italic";const C=u.createElement("span");C.style.fontWeight="bold",C.style.fontStyle="italic",this._measureElements=[f,y,p,C],this._container.appendChild(f),this._container.appendChild(y),this._container.appendChild(p),this._container.appendChild(C),u.body.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(u,f,y,p){u===this._font&&f===this._fontSize&&y===this._weight&&p===this._weightBold||(this._font=u,this._fontSize=f,this._weight=y,this._weightBold=p,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${y}`,this._measureElements[1].style.fontWeight=`${p}`,this._measureElements[2].style.fontWeight=`${y}`,this._measureElements[3].style.fontWeight=`${p}`,this.clear())}get(u,f,y){let p=0;if(!f&&!y&&u.length===1&&(p=u.charCodeAt(0))<256)return this._flat[p]!==-9999?this._flat[p]:this._flat[p]=this._measure(u,0);let C=u;f&&(C+="B"),y&&(C+="I");let T=this._holey.get(C);if(T===void 0){let E=0;f&&(E|=1),y&&(E|=2),T=this._measure(u,E),this._holey.set(C,T)}return T}_measure(u,f){const y=this._measureElements[f];return y.textContent=u.repeat(32),y.offsetWidth/32}}},2223:(w,l,u)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.TEXT_BASELINE=l.DIM_OPACITY=l.INVERTED_DEFAULT_COLOR=void 0;const f=u(6114);l.INVERTED_DEFAULT_COLOR=257,l.DIM_OPACITY=.5,l.TEXT_BASELINE=f.isFirefox||f.isLegacyEdge?"bottom":"ideographic"},6171:(w,l)=>{function u(f){return 57508<=f&&f<=57558}Object.defineProperty(l,"__esModule",{value:!0}),l.createRenderDimensions=l.excludeFromContrastRatioDemands=l.isRestrictedPowerlineGlyph=l.isPowerlineGlyph=l.throwIfFalsy=void 0,l.throwIfFalsy=function(f){if(!f)throw new Error("value must not be falsy");return f},l.isPowerlineGlyph=u,l.isRestrictedPowerlineGlyph=function(f){return 57520<=f&&f<=57527},l.excludeFromContrastRatioDemands=function(f){return u(f)||function(y){return 9472<=y&&y<=9631}(f)},l.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}}},456:(w,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.SelectionModel=void 0,l.SelectionModel=class{constructor(u){this._bufferService=u,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const u=this.selectionStart[0]+this.selectionStartLength;return u>this._bufferService.cols?u%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(u/this._bufferService.cols)-1]:[u%this._bufferService.cols,this.selectionStart[1]+Math.floor(u/this._bufferService.cols)]:[u,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const u=this.selectionStart[0]+this.selectionStartLength;return u>this._bufferService.cols?[u%this._bufferService.cols,this.selectionStart[1]+Math.floor(u/this._bufferService.cols)]:[Math.max(u,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const u=this.selectionStart,f=this.selectionEnd;return!(!u||!f)&&(u[1]>f[1]||u[1]===f[1]&&u[0]>f[0])}handleTrim(u){return this.selectionStart&&(this.selectionStart[1]-=u),this.selectionEnd&&(this.selectionEnd[1]-=u),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(w,l,u){var f=this&&this.__decorate||function(c,g,d,m){var S,b=arguments.length,P=b<3?g:m===null?m=Object.getOwnPropertyDescriptor(g,d):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")P=Reflect.decorate(c,g,d,m);else for(var L=c.length-1;L>=0;L--)(S=c[L])&&(P=(b<3?S(P):b>3?S(g,d,P):S(g,d))||P);return b>3&&P&&Object.defineProperty(g,d,P),P},y=this&&this.__param||function(c,g){return function(d,m){g(d,m,c)}};Object.defineProperty(l,"__esModule",{value:!0}),l.CharSizeService=void 0;const p=u(2585),C=u(8460),T=u(844);let E=l.CharSizeService=class extends T.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(c,g,d){super(),this._optionsService=d,this.width=0,this.height=0,this._onCharSizeChange=this.register(new C.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event,this._measureStrategy=new x(c,g,this._optionsService),this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}measure(){const c=this._measureStrategy.measure();c.width===this.width&&c.height===this.height||(this.width=c.width,this.height=c.height,this._onCharSizeChange.fire())}};l.CharSizeService=E=f([y(2,p.IOptionsService)],E);class x{constructor(g,d,m){this._document=g,this._parentElement=d,this._optionsService=m,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`;const g={height:Number(this._measureElement.offsetHeight),width:Number(this._measureElement.offsetWidth)};return g.width!==0&&g.height!==0&&(this._result.width=g.width/32,this._result.height=Math.ceil(g.height)),this._result}}},4269:function(w,l,u){var f=this&&this.__decorate||function(g,d,m,S){var b,P=arguments.length,L=P<3?d:S===null?S=Object.getOwnPropertyDescriptor(d,m):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(g,d,m,S);else for(var D=g.length-1;D>=0;D--)(b=g[D])&&(L=(P<3?b(L):P>3?b(d,m,L):b(d,m))||L);return P>3&&L&&Object.defineProperty(d,m,L),L},y=this&&this.__param||function(g,d){return function(m,S){d(m,S,g)}};Object.defineProperty(l,"__esModule",{value:!0}),l.CharacterJoinerService=l.JoinedCellData=void 0;const p=u(3734),C=u(643),T=u(511),E=u(2585);class x extends p.AttributeData{constructor(d,m,S){super(),this.content=0,this.combinedData="",this.fg=d.fg,this.bg=d.bg,this.combinedData=m,this._width=S}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(d){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}l.JoinedCellData=x;let c=l.CharacterJoinerService=class Ec{constructor(d){this._bufferService=d,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new T.CellData}register(d){const m={id:this._nextCharacterJoinerId++,handler:d};return this._characterJoiners.push(m),m.id}deregister(d){for(let m=0;m<this._characterJoiners.length;m++)if(this._characterJoiners[m].id===d)return this._characterJoiners.splice(m,1),!0;return!1}getJoinedCharacters(d){if(this._characterJoiners.length===0)return[];const m=this._bufferService.buffer.lines.get(d);if(!m||m.length===0)return[];const S=[],b=m.translateToString(!0);let P=0,L=0,D=0,N=m.getFg(0),I=m.getBg(0);for(let U=0;U<m.getTrimmedLength();U++)if(m.loadCell(U,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==N||this._workCell.bg!==I){if(U-P>1){const F=this._getJoinedRanges(b,D,L,m,P);for(let $=0;$<F.length;$++)S.push(F[$])}P=U,D=L,N=this._workCell.fg,I=this._workCell.bg}L+=this._workCell.getChars().length||C.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-P>1){const U=this._getJoinedRanges(b,D,L,m,P);for(let F=0;F<U.length;F++)S.push(U[F])}return S}_getJoinedRanges(d,m,S,b,P){const L=d.substring(m,S);let D=[];try{D=this._characterJoiners[0].handler(L)}catch(N){console.error(N)}for(let N=1;N<this._characterJoiners.length;N++)try{const I=this._characterJoiners[N].handler(L);for(let U=0;U<I.length;U++)Ec._mergeRanges(D,I[U])}catch(I){console.error(I)}return this._stringRangesToCellRanges(D,b,P),D}_stringRangesToCellRanges(d,m,S){let b=0,P=!1,L=0,D=d[b];if(D){for(let N=S;N<this._bufferService.cols;N++){const I=m.getWidth(N),U=m.getString(N).length||C.WHITESPACE_CELL_CHAR.length;if(I!==0){if(!P&&D[0]<=L&&(D[0]=N,P=!0),D[1]<=L){if(D[1]=N,D=d[++b],!D)break;D[0]<=L?(D[0]=N,P=!0):P=!1}L+=U}}D&&(D[1]=this._bufferService.cols)}}static _mergeRanges(d,m){let S=!1;for(let b=0;b<d.length;b++){const P=d[b];if(S){if(m[1]<=P[0])return d[b-1][1]=m[1],d;if(m[1]<=P[1])return d[b-1][1]=Math.max(m[1],P[1]),d.splice(b,1),d;d.splice(b,1),b--}else{if(m[1]<=P[0])return d.splice(b,0,m),d;if(m[1]<=P[1])return P[0]=Math.min(m[0],P[0]),d;m[0]<P[1]&&(P[0]=Math.min(m[0],P[0]),S=!0)}}return S?d[d.length-1][1]=m[1]:d.push(m),d}};l.CharacterJoinerService=c=f([y(0,E.IBufferService)],c)},5114:(w,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.CoreBrowserService=void 0,l.CoreBrowserService=class{constructor(u,f){this._textarea=u,this.window=f,this._isFocused=!1,this._cachedIsFocused=void 0,this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}},8934:function(w,l,u){var f=this&&this.__decorate||function(E,x,c,g){var d,m=arguments.length,S=m<3?x:g===null?g=Object.getOwnPropertyDescriptor(x,c):g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(E,x,c,g);else for(var b=E.length-1;b>=0;b--)(d=E[b])&&(S=(m<3?d(S):m>3?d(x,c,S):d(x,c))||S);return m>3&&S&&Object.defineProperty(x,c,S),S},y=this&&this.__param||function(E,x){return function(c,g){x(c,g,E)}};Object.defineProperty(l,"__esModule",{value:!0}),l.MouseService=void 0;const p=u(4725),C=u(9806);let T=l.MouseService=class{constructor(E,x){this._renderService=E,this._charSizeService=x}getCoords(E,x,c,g,d){return(0,C.getCoords)(window,E,x,c,g,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,d)}getMouseReportCoords(E,x){const c=(0,C.getCoordsRelativeToElement)(window,E,x);if(this._charSizeService.hasValidSize)return c[0]=Math.min(Math.max(c[0],0),this._renderService.dimensions.css.canvas.width-1),c[1]=Math.min(Math.max(c[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(c[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(c[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(c[0]),y:Math.floor(c[1])}}};l.MouseService=T=f([y(0,p.IRenderService),y(1,p.ICharSizeService)],T)},3230:function(w,l,u){var f=this&&this.__decorate||function(S,b,P,L){var D,N=arguments.length,I=N<3?b:L===null?L=Object.getOwnPropertyDescriptor(b,P):L;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")I=Reflect.decorate(S,b,P,L);else for(var U=S.length-1;U>=0;U--)(D=S[U])&&(I=(N<3?D(I):N>3?D(b,P,I):D(b,P))||I);return N>3&&I&&Object.defineProperty(b,P,I),I},y=this&&this.__param||function(S,b){return function(P,L){b(P,L,S)}};Object.defineProperty(l,"__esModule",{value:!0}),l.RenderService=void 0;const p=u(3656),C=u(6193),T=u(5596),E=u(4725),x=u(8460),c=u(844),g=u(7226),d=u(2585);let m=l.RenderService=class extends c.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(S,b,P,L,D,N,I,U){if(super(),this._rowCount=S,this._charSizeService=L,this._renderer=this.register(new c.MutableDisposable),this._pausedResizeTask=new g.DebouncedIdleTask,this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new x.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new x.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new x.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new x.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new C.RenderDebouncer(I.window,(F,$)=>this._renderRows(F,$)),this.register(this._renderDebouncer),this._screenDprMonitor=new T.ScreenDprMonitor(I.window),this._screenDprMonitor.setListener(()=>this.handleDevicePixelRatioChange()),this.register(this._screenDprMonitor),this.register(N.onResize(()=>this._fullRefresh())),this.register(N.buffers.onBufferActivate(()=>{var F;return(F=this._renderer.value)===null||F===void 0?void 0:F.clear()})),this.register(P.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(D.onDecorationRegistered(()=>this._fullRefresh())),this.register(D.onDecorationRemoved(()=>this._fullRefresh())),this.register(P.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio"],()=>{this.clear(),this.handleResize(N.cols,N.rows),this._fullRefresh()})),this.register(P.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(N.buffer.y,N.buffer.y,!0))),this.register((0,p.addDisposableDomListener)(I.window,"resize",()=>this.handleDevicePixelRatioChange())),this.register(U.onChangeColors(()=>this._fullRefresh())),"IntersectionObserver"in I.window){const F=new I.window.IntersectionObserver($=>this._handleIntersectionChange($[$.length-1]),{threshold:0});F.observe(b),this.register({dispose:()=>F.disconnect()})}}_handleIntersectionChange(S){this._isPaused=S.isIntersecting===void 0?S.intersectionRatio===0:!S.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(S,b,P=!1){this._isPaused?this._needsFullRefresh=!0:(P||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(S,b,this._rowCount))}_renderRows(S,b){this._renderer.value&&(S=Math.min(S,this._rowCount-1),b=Math.min(b,this._rowCount-1),this._renderer.value.renderRows(S,b),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:S,end:b}),this._onRender.fire({start:S,end:b}),this._isNextRenderRedrawOnly=!0)}resize(S,b){this._rowCount=b,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(S){this._renderer.value=S,this._renderer.value.onRequestRedraw(b=>this.refreshRows(b.start,b.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh()}addRefreshCallback(S){return this._renderDebouncer.addRefreshCallback(S)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var S,b;this._renderer.value&&((b=(S=this._renderer.value).clearTextureAtlas)===null||b===void 0||b.call(S),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(S,b){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>this._renderer.value.handleResize(S,b)):this._renderer.value.handleResize(S,b),this._fullRefresh())}handleCharSizeChanged(){var S;(S=this._renderer.value)===null||S===void 0||S.handleCharSizeChanged()}handleBlur(){var S;(S=this._renderer.value)===null||S===void 0||S.handleBlur()}handleFocus(){var S;(S=this._renderer.value)===null||S===void 0||S.handleFocus()}handleSelectionChanged(S,b,P){var L;this._selectionState.start=S,this._selectionState.end=b,this._selectionState.columnSelectMode=P,(L=this._renderer.value)===null||L===void 0||L.handleSelectionChanged(S,b,P)}handleCursorMove(){var S;(S=this._renderer.value)===null||S===void 0||S.handleCursorMove()}clear(){var S;(S=this._renderer.value)===null||S===void 0||S.clear()}};l.RenderService=m=f([y(2,d.IOptionsService),y(3,E.ICharSizeService),y(4,d.IDecorationService),y(5,d.IBufferService),y(6,E.ICoreBrowserService),y(7,E.IThemeService)],m)},9312:function(w,l,u){var f=this&&this.__decorate||function(D,N,I,U){var F,$=arguments.length,H=$<3?N:U===null?U=Object.getOwnPropertyDescriptor(N,I):U;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")H=Reflect.decorate(D,N,I,U);else for(var z=D.length-1;z>=0;z--)(F=D[z])&&(H=($<3?F(H):$>3?F(N,I,H):F(N,I))||H);return $>3&&H&&Object.defineProperty(N,I,H),H},y=this&&this.__param||function(D,N){return function(I,U){N(I,U,D)}};Object.defineProperty(l,"__esModule",{value:!0}),l.SelectionService=void 0;const p=u(9806),C=u(9504),T=u(456),E=u(4725),x=u(8460),c=u(844),g=u(6114),d=u(4841),m=u(511),S=u(2585),b=" ",P=new RegExp(b,"g");let L=l.SelectionService=class extends c.Disposable{constructor(D,N,I,U,F,$,H,z,Y){super(),this._element=D,this._screenElement=N,this._linkifier=I,this._bufferService=U,this._coreService=F,this._mouseService=$,this._optionsService=H,this._renderService=z,this._coreBrowserService=Y,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new m.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new x.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new x.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new x.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new x.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=k=>this._handleMouseMove(k),this._mouseUpListener=k=>this._handleMouseUp(k),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(k=>this._handleTrim(k)),this.register(this._bufferService.buffers.onBufferActivate(k=>this._handleBufferActivate(k))),this.enable(),this._model=new T.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,c.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const D=this._model.finalSelectionStart,N=this._model.finalSelectionEnd;return!(!D||!N||D[0]===N[0]&&D[1]===N[1])}get selectionText(){const D=this._model.finalSelectionStart,N=this._model.finalSelectionEnd;if(!D||!N)return"";const I=this._bufferService.buffer,U=[];if(this._activeSelectionMode===3){if(D[0]===N[0])return"";const F=D[0]<N[0]?D[0]:N[0],$=D[0]<N[0]?N[0]:D[0];for(let H=D[1];H<=N[1];H++){const z=I.translateBufferLineToString(H,!0,F,$);U.push(z)}}else{const F=D[1]===N[1]?N[0]:void 0;U.push(I.translateBufferLineToString(D[1],!0,D[0],F));for(let $=D[1]+1;$<=N[1]-1;$++){const H=I.lines.get($),z=I.translateBufferLineToString($,!0);H!=null&&H.isWrapped?U[U.length-1]+=z:U.push(z)}if(D[1]!==N[1]){const $=I.lines.get(N[1]),H=I.translateBufferLineToString(N[1],!0,0,N[0]);$&&$.isWrapped?U[U.length-1]+=H:U.push(H)}}return U.map(F=>F.replace(P," ")).join(g.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(D){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),g.isLinux&&D&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(D){const N=this._getMouseBufferCoords(D),I=this._model.finalSelectionStart,U=this._model.finalSelectionEnd;return!!(I&&U&&N)&&this._areCoordsInSelection(N,I,U)}isCellInSelection(D,N){const I=this._model.finalSelectionStart,U=this._model.finalSelectionEnd;return!(!I||!U)&&this._areCoordsInSelection([D,N],I,U)}_areCoordsInSelection(D,N,I){return D[1]>N[1]&&D[1]<I[1]||N[1]===I[1]&&D[1]===N[1]&&D[0]>=N[0]&&D[0]<I[0]||N[1]<I[1]&&D[1]===I[1]&&D[0]<I[0]||N[1]<I[1]&&D[1]===N[1]&&D[0]>=N[0]}_selectWordAtCursor(D,N){var I,U;const F=(U=(I=this._linkifier.currentLink)===null||I===void 0?void 0:I.link)===null||U===void 0?void 0:U.range;if(F)return this._model.selectionStart=[F.start.x-1,F.start.y-1],this._model.selectionStartLength=(0,d.getRangeLength)(F,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const $=this._getMouseBufferCoords(D);return!!$&&(this._selectWordAt($,N),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(D,N){this._model.clearSelection(),D=Math.max(D,0),N=Math.min(N,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,D],this._model.selectionEnd=[this._bufferService.cols,N],this.refresh(),this._onSelectionChange.fire()}_handleTrim(D){this._model.handleTrim(D)&&this.refresh()}_getMouseBufferCoords(D){const N=this._mouseService.getCoords(D,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(N)return N[0]--,N[1]--,N[1]+=this._bufferService.buffer.ydisp,N}_getMouseEventScrollAmount(D){let N=(0,p.getCoordsRelativeToElement)(this._coreBrowserService.window,D,this._screenElement)[1];const I=this._renderService.dimensions.css.canvas.height;return N>=0&&N<=I?0:(N>I&&(N-=I),N=Math.min(Math.max(N,-50),50),N/=50,N/Math.abs(N)+Math.round(14*N))}shouldForceSelection(D){return g.isMac?D.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:D.shiftKey}handleMouseDown(D){if(this._mouseDownTimeStamp=D.timeStamp,(D.button!==2||!this.hasSelection)&&D.button===0){if(!this._enabled){if(!this.shouldForceSelection(D))return;D.stopPropagation()}D.preventDefault(),this._dragScrollAmount=0,this._enabled&&D.shiftKey?this._handleIncrementalClick(D):D.detail===1?this._handleSingleClick(D):D.detail===2?this._handleDoubleClick(D):D.detail===3&&this._handleTripleClick(D),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(D){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(D))}_handleSingleClick(D){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(D)?3:0,this._model.selectionStart=this._getMouseBufferCoords(D),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const N=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);N&&N.length!==this._model.selectionStart[0]&&N.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(D){this._selectWordAtCursor(D,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(D){const N=this._getMouseBufferCoords(D);N&&(this._activeSelectionMode=2,this._selectLineAt(N[1]))}shouldColumnSelect(D){return D.altKey&&!(g.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(D){if(D.stopImmediatePropagation(),!this._model.selectionStart)return;const N=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(D),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(D),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const I=this._bufferService.buffer;if(this._model.selectionEnd[1]<I.lines.length){const U=I.lines.get(this._model.selectionEnd[1]);U&&U.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]++}N&&N[0]===this._model.selectionEnd[0]&&N[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const D=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(D.ydisp+this._bufferService.rows,D.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=D.ydisp),this.refresh()}}_handleMouseUp(D){const N=D.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&N<500&&D.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const I=this._mouseService.getCoords(D,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(I&&I[0]!==void 0&&I[1]!==void 0){const U=(0,C.moveToCellSequence)(I[0]-1,I[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(U,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const D=this._model.finalSelectionStart,N=this._model.finalSelectionEnd,I=!(!D||!N||D[0]===N[0]&&D[1]===N[1]);I?D&&N&&(this._oldSelectionStart&&this._oldSelectionEnd&&D[0]===this._oldSelectionStart[0]&&D[1]===this._oldSelectionStart[1]&&N[0]===this._oldSelectionEnd[0]&&N[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(D,N,I)):this._oldHasSelection&&this._fireOnSelectionChange(D,N,I)}_fireOnSelectionChange(D,N,I){this._oldSelectionStart=D,this._oldSelectionEnd=N,this._oldHasSelection=I,this._onSelectionChange.fire()}_handleBufferActivate(D){this.clearSelection(),this._trimListener.dispose(),this._trimListener=D.activeBuffer.lines.onTrim(N=>this._handleTrim(N))}_convertViewportColToCharacterIndex(D,N){let I=N;for(let U=0;N>=U;U++){const F=D.loadCell(U,this._workCell).getChars().length;this._workCell.getWidth()===0?I--:F>1&&N!==U&&(I+=F-1)}return I}setSelection(D,N,I){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[D,N],this._model.selectionStartLength=I,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(D){this._isClickInSelection(D)||(this._selectWordAtCursor(D,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(D,N,I=!0,U=!0){if(D[0]>=this._bufferService.cols)return;const F=this._bufferService.buffer,$=F.lines.get(D[1]);if(!$)return;const H=F.translateBufferLineToString(D[1],!1);let z=this._convertViewportColToCharacterIndex($,D[0]),Y=z;const k=D[0]-z;let R=0,A=0,M=0,B=0;if(H.charAt(z)===" "){for(;z>0&&H.charAt(z-1)===" ";)z--;for(;Y<H.length&&H.charAt(Y+1)===" ";)Y++}else{let ie=D[0],le=D[0];$.getWidth(ie)===0&&(R++,ie--),$.getWidth(le)===2&&(A++,le++);const _e=$.getString(le).length;for(_e>1&&(B+=_e-1,Y+=_e-1);ie>0&&z>0&&!this._isCharWordSeparator($.loadCell(ie-1,this._workCell));){$.loadCell(ie-1,this._workCell);const V=this._workCell.getChars().length;this._workCell.getWidth()===0?(R++,ie--):V>1&&(M+=V-1,z-=V-1),z--,ie--}for(;le<$.length&&Y+1<H.length&&!this._isCharWordSeparator($.loadCell(le+1,this._workCell));){$.loadCell(le+1,this._workCell);const V=this._workCell.getChars().length;this._workCell.getWidth()===2?(A++,le++):V>1&&(B+=V-1,Y+=V-1),Y++,le++}}Y++;let G=z+k-R+M,q=Math.min(this._bufferService.cols,Y-z+R+A-M-B);if(N||H.slice(z,Y).trim()!==""){if(I&&G===0&&$.getCodePoint(0)!==32){const ie=F.lines.get(D[1]-1);if(ie&&$.isWrapped&&ie.getCodePoint(this._bufferService.cols-1)!==32){const le=this._getWordAt([this._bufferService.cols-1,D[1]-1],!1,!0,!1);if(le){const _e=this._bufferService.cols-le.start;G-=_e,q+=_e}}}if(U&&G+q===this._bufferService.cols&&$.getCodePoint(this._bufferService.cols-1)!==32){const ie=F.lines.get(D[1]+1);if(ie!=null&&ie.isWrapped&&ie.getCodePoint(0)!==32){const le=this._getWordAt([0,D[1]+1],!1,!1,!0);le&&(q+=le.length)}}return{start:G,length:q}}}_selectWordAt(D,N){const I=this._getWordAt(D,N);if(I){for(;I.start<0;)I.start+=this._bufferService.cols,D[1]--;this._model.selectionStart=[I.start,D[1]],this._model.selectionStartLength=I.length}}_selectToWordAt(D){const N=this._getWordAt(D,!0);if(N){let I=D[1];for(;N.start<0;)N.start+=this._bufferService.cols,I--;if(!this._model.areSelectionValuesReversed())for(;N.start+N.length>this._bufferService.cols;)N.length-=this._bufferService.cols,I++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?N.start:N.start+N.length,I]}}_isCharWordSeparator(D){return D.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(D.getChars())>=0}_selectLineAt(D){const N=this._bufferService.buffer.getWrappedRangeForLine(D),I={start:{x:0,y:N.first},end:{x:this._bufferService.cols-1,y:N.last}};this._model.selectionStart=[0,N.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,d.getRangeLength)(I,this._bufferService.cols)}};l.SelectionService=L=f([y(3,S.IBufferService),y(4,S.ICoreService),y(5,E.IMouseService),y(6,S.IOptionsService),y(7,E.IRenderService),y(8,E.ICoreBrowserService)],L)},4725:(w,l,u)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.IThemeService=l.ICharacterJoinerService=l.ISelectionService=l.IRenderService=l.IMouseService=l.ICoreBrowserService=l.ICharSizeService=void 0;const f=u(8343);l.ICharSizeService=(0,f.createDecorator)("CharSizeService"),l.ICoreBrowserService=(0,f.createDecorator)("CoreBrowserService"),l.IMouseService=(0,f.createDecorator)("MouseService"),l.IRenderService=(0,f.createDecorator)("RenderService"),l.ISelectionService=(0,f.createDecorator)("SelectionService"),l.ICharacterJoinerService=(0,f.createDecorator)("CharacterJoinerService"),l.IThemeService=(0,f.createDecorator)("ThemeService")},6731:function(w,l,u){var f=this&&this.__decorate||function(L,D,N,I){var U,F=arguments.length,$=F<3?D:I===null?I=Object.getOwnPropertyDescriptor(D,N):I;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")$=Reflect.decorate(L,D,N,I);else for(var H=L.length-1;H>=0;H--)(U=L[H])&&($=(F<3?U($):F>3?U(D,N,$):U(D,N))||$);return F>3&&$&&Object.defineProperty(D,N,$),$},y=this&&this.__param||function(L,D){return function(N,I){D(N,I,L)}};Object.defineProperty(l,"__esModule",{value:!0}),l.ThemeService=l.DEFAULT_ANSI_COLORS=void 0;const p=u(7239),C=u(8055),T=u(8460),E=u(844),x=u(2585),c=C.css.toColor("#ffffff"),g=C.css.toColor("#000000"),d=C.css.toColor("#ffffff"),m=C.css.toColor("#000000"),S={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};l.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const L=[C.css.toColor("#2e3436"),C.css.toColor("#cc0000"),C.css.toColor("#4e9a06"),C.css.toColor("#c4a000"),C.css.toColor("#3465a4"),C.css.toColor("#75507b"),C.css.toColor("#06989a"),C.css.toColor("#d3d7cf"),C.css.toColor("#555753"),C.css.toColor("#ef2929"),C.css.toColor("#8ae234"),C.css.toColor("#fce94f"),C.css.toColor("#729fcf"),C.css.toColor("#ad7fa8"),C.css.toColor("#34e2e2"),C.css.toColor("#eeeeec")],D=[0,95,135,175,215,255];for(let N=0;N<216;N++){const I=D[N/36%6|0],U=D[N/6%6|0],F=D[N%6];L.push({css:C.channels.toCss(I,U,F),rgba:C.channels.toRgba(I,U,F)})}for(let N=0;N<24;N++){const I=8+10*N;L.push({css:C.channels.toCss(I,I,I),rgba:C.channels.toRgba(I,I,I)})}return L})());let b=l.ThemeService=class extends E.Disposable{get colors(){return this._colors}constructor(L){super(),this._optionsService=L,this._contrastCache=new p.ColorContrastCache,this._halfContrastCache=new p.ColorContrastCache,this._onChangeColors=this.register(new T.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:c,background:g,cursor:d,cursorAccent:m,selectionForeground:void 0,selectionBackgroundTransparent:S,selectionBackgroundOpaque:C.color.blend(g,S),selectionInactiveBackgroundTransparent:S,selectionInactiveBackgroundOpaque:C.color.blend(g,S),ansi:l.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}_setTheme(L={}){const D=this._colors;if(D.foreground=P(L.foreground,c),D.background=P(L.background,g),D.cursor=P(L.cursor,d),D.cursorAccent=P(L.cursorAccent,m),D.selectionBackgroundTransparent=P(L.selectionBackground,S),D.selectionBackgroundOpaque=C.color.blend(D.background,D.selectionBackgroundTransparent),D.selectionInactiveBackgroundTransparent=P(L.selectionInactiveBackground,D.selectionBackgroundTransparent),D.selectionInactiveBackgroundOpaque=C.color.blend(D.background,D.selectionInactiveBackgroundTransparent),D.selectionForeground=L.selectionForeground?P(L.selectionForeground,C.NULL_COLOR):void 0,D.selectionForeground===C.NULL_COLOR&&(D.selectionForeground=void 0),C.color.isOpaque(D.selectionBackgroundTransparent)&&(D.selectionBackgroundTransparent=C.color.opacity(D.selectionBackgroundTransparent,.3)),C.color.isOpaque(D.selectionInactiveBackgroundTransparent)&&(D.selectionInactiveBackgroundTransparent=C.color.opacity(D.selectionInactiveBackgroundTransparent,.3)),D.ansi=l.DEFAULT_ANSI_COLORS.slice(),D.ansi[0]=P(L.black,l.DEFAULT_ANSI_COLORS[0]),D.ansi[1]=P(L.red,l.DEFAULT_ANSI_COLORS[1]),D.ansi[2]=P(L.green,l.DEFAULT_ANSI_COLORS[2]),D.ansi[3]=P(L.yellow,l.DEFAULT_ANSI_COLORS[3]),D.ansi[4]=P(L.blue,l.DEFAULT_ANSI_COLORS[4]),D.ansi[5]=P(L.magenta,l.DEFAULT_ANSI_COLORS[5]),D.ansi[6]=P(L.cyan,l.DEFAULT_ANSI_COLORS[6]),D.ansi[7]=P(L.white,l.DEFAULT_ANSI_COLORS[7]),D.ansi[8]=P(L.brightBlack,l.DEFAULT_ANSI_COLORS[8]),D.ansi[9]=P(L.brightRed,l.DEFAULT_ANSI_COLORS[9]),D.ansi[10]=P(L.brightGreen,l.DEFAULT_ANSI_COLORS[10]),D.ansi[11]=P(L.brightYellow,l.DEFAULT_ANSI_COLORS[11]),D.ansi[12]=P(L.brightBlue,l.DEFAULT_ANSI_COLORS[12]),D.ansi[13]=P(L.brightMagenta,l.DEFAULT_ANSI_COLORS[13]),D.ansi[14]=P(L.brightCyan,l.DEFAULT_ANSI_COLORS[14]),D.ansi[15]=P(L.brightWhite,l.DEFAULT_ANSI_COLORS[15]),L.extendedAnsi){const N=Math.min(D.ansi.length-16,L.extendedAnsi.length);for(let I=0;I<N;I++)D.ansi[I+16]=P(L.extendedAnsi[I],l.DEFAULT_ANSI_COLORS[I+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(L){this._restoreColor(L),this._onChangeColors.fire(this.colors)}_restoreColor(L){if(L!==void 0)switch(L){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[L]=this._restoreColors.ansi[L]}else for(let D=0;D<this._restoreColors.ansi.length;++D)this._colors.ansi[D]=this._restoreColors.ansi[D]}modifyColors(L){L(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function P(L,D){if(L!==void 0)try{return C.css.toColor(L)}catch{}return D}l.ThemeService=b=f([y(0,x.IOptionsService)],b)},6349:(w,l,u)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.CircularList=void 0;const f=u(8460),y=u(844);class p extends y.Disposable{constructor(T){super(),this._maxLength=T,this.onDeleteEmitter=this.register(new f.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new f.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new f.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(T){if(this._maxLength===T)return;const E=new Array(T);for(let x=0;x<Math.min(T,this.length);x++)E[x]=this._array[this._getCyclicIndex(x)];this._array=E,this._maxLength=T,this._startIndex=0}get length(){return this._length}set length(T){if(T>this._length)for(let E=this._length;E<T;E++)this._array[E]=void 0;this._length=T}get(T){return this._array[this._getCyclicIndex(T)]}set(T,E){this._array[this._getCyclicIndex(T)]=E}push(T){this._array[this._getCyclicIndex(this._length)]=T,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(T,E,...x){if(E){for(let c=T;c<this._length-E;c++)this._array[this._getCyclicIndex(c)]=this._array[this._getCyclicIndex(c+E)];this._length-=E,this.onDeleteEmitter.fire({index:T,amount:E})}for(let c=this._length-1;c>=T;c--)this._array[this._getCyclicIndex(c+x.length)]=this._array[this._getCyclicIndex(c)];for(let c=0;c<x.length;c++)this._array[this._getCyclicIndex(T+c)]=x[c];if(x.length&&this.onInsertEmitter.fire({index:T,amount:x.length}),this._length+x.length>this._maxLength){const c=this._length+x.length-this._maxLength;this._startIndex+=c,this._length=this._maxLength,this.onTrimEmitter.fire(c)}else this._length+=x.length}trimStart(T){T>this._length&&(T=this._length),this._startIndex+=T,this._length-=T,this.onTrimEmitter.fire(T)}shiftElements(T,E,x){if(!(E<=0)){if(T<0||T>=this._length)throw new Error("start argument out of range");if(T+x<0)throw new Error("Cannot shift elements in list beyond index 0");if(x>0){for(let g=E-1;g>=0;g--)this.set(T+g+x,this.get(T+g));const c=T+E+x-this._length;if(c>0)for(this._length+=c;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let c=0;c<E;c++)this.set(T+c+x,this.get(T+c))}}_getCyclicIndex(T){return(this._startIndex+T)%this._maxLength}}l.CircularList=p},1439:(w,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.clone=void 0,l.clone=function u(f,y=5){if(typeof f!="object")return f;const p=Array.isArray(f)?[]:{};for(const C in f)p[C]=y<=1?f[C]:f[C]&&u(f[C],y-1);return p}},8055:(w,l,u)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.contrastRatio=l.toPaddedHex=l.rgba=l.rgb=l.css=l.color=l.channels=l.NULL_COLOR=void 0;const f=u(6114);let y=0,p=0,C=0,T=0;var E,x,c,g,d;function m(b){const P=b.toString(16);return P.length<2?"0"+P:P}function S(b,P){return b<P?(P+.05)/(b+.05):(b+.05)/(P+.05)}l.NULL_COLOR={css:"#00000000",rgba:0},function(b){b.toCss=function(P,L,D,N){return N!==void 0?`#${m(P)}${m(L)}${m(D)}${m(N)}`:`#${m(P)}${m(L)}${m(D)}`},b.toRgba=function(P,L,D,N=255){return(P<<24|L<<16|D<<8|N)>>>0}}(E||(l.channels=E={})),function(b){function P(L,D){return T=Math.round(255*D),[y,p,C]=d.toChannels(L.rgba),{css:E.toCss(y,p,C,T),rgba:E.toRgba(y,p,C,T)}}b.blend=function(L,D){if(T=(255&D.rgba)/255,T===1)return{css:D.css,rgba:D.rgba};const N=D.rgba>>24&255,I=D.rgba>>16&255,U=D.rgba>>8&255,F=L.rgba>>24&255,$=L.rgba>>16&255,H=L.rgba>>8&255;return y=F+Math.round((N-F)*T),p=$+Math.round((I-$)*T),C=H+Math.round((U-H)*T),{css:E.toCss(y,p,C),rgba:E.toRgba(y,p,C)}},b.isOpaque=function(L){return(255&L.rgba)==255},b.ensureContrastRatio=function(L,D,N){const I=d.ensureContrastRatio(L.rgba,D.rgba,N);if(I)return d.toColor(I>>24&255,I>>16&255,I>>8&255)},b.opaque=function(L){const D=(255|L.rgba)>>>0;return[y,p,C]=d.toChannels(D),{css:E.toCss(y,p,C),rgba:D}},b.opacity=P,b.multiplyOpacity=function(L,D){return T=255&L.rgba,P(L,T*D/255)},b.toColorRGB=function(L){return[L.rgba>>24&255,L.rgba>>16&255,L.rgba>>8&255]}}(x||(l.color=x={})),function(b){let P,L;if(!f.isNode){const D=document.createElement("canvas");D.width=1,D.height=1;const N=D.getContext("2d",{willReadFrequently:!0});N&&(P=N,P.globalCompositeOperation="copy",L=P.createLinearGradient(0,0,1,1))}b.toColor=function(D){if(D.match(/#[\da-f]{3,8}/i))switch(D.length){case 4:return y=parseInt(D.slice(1,2).repeat(2),16),p=parseInt(D.slice(2,3).repeat(2),16),C=parseInt(D.slice(3,4).repeat(2),16),d.toColor(y,p,C);case 5:return y=parseInt(D.slice(1,2).repeat(2),16),p=parseInt(D.slice(2,3).repeat(2),16),C=parseInt(D.slice(3,4).repeat(2),16),T=parseInt(D.slice(4,5).repeat(2),16),d.toColor(y,p,C,T);case 7:return{css:D,rgba:(parseInt(D.slice(1),16)<<8|255)>>>0};case 9:return{css:D,rgba:parseInt(D.slice(1),16)>>>0}}const N=D.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(N)return y=parseInt(N[1]),p=parseInt(N[2]),C=parseInt(N[3]),T=Math.round(255*(N[5]===void 0?1:parseFloat(N[5]))),d.toColor(y,p,C,T);if(!P||!L)throw new Error("css.toColor: Unsupported css format");if(P.fillStyle=L,P.fillStyle=D,typeof P.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(P.fillRect(0,0,1,1),[y,p,C,T]=P.getImageData(0,0,1,1).data,T!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:E.toRgba(y,p,C,T),css:D}}}(c||(l.css=c={})),function(b){function P(L,D,N){const I=L/255,U=D/255,F=N/255;return .2126*(I<=.03928?I/12.92:Math.pow((I+.055)/1.055,2.4))+.7152*(U<=.03928?U/12.92:Math.pow((U+.055)/1.055,2.4))+.0722*(F<=.03928?F/12.92:Math.pow((F+.055)/1.055,2.4))}b.relativeLuminance=function(L){return P(L>>16&255,L>>8&255,255&L)},b.relativeLuminance2=P}(g||(l.rgb=g={})),function(b){function P(D,N,I){const U=D>>24&255,F=D>>16&255,$=D>>8&255;let H=N>>24&255,z=N>>16&255,Y=N>>8&255,k=S(g.relativeLuminance2(H,z,Y),g.relativeLuminance2(U,F,$));for(;k<I&&(H>0||z>0||Y>0);)H-=Math.max(0,Math.ceil(.1*H)),z-=Math.max(0,Math.ceil(.1*z)),Y-=Math.max(0,Math.ceil(.1*Y)),k=S(g.relativeLuminance2(H,z,Y),g.relativeLuminance2(U,F,$));return(H<<24|z<<16|Y<<8|255)>>>0}function L(D,N,I){const U=D>>24&255,F=D>>16&255,$=D>>8&255;let H=N>>24&255,z=N>>16&255,Y=N>>8&255,k=S(g.relativeLuminance2(H,z,Y),g.relativeLuminance2(U,F,$));for(;k<I&&(H<255||z<255||Y<255);)H=Math.min(255,H+Math.ceil(.1*(255-H))),z=Math.min(255,z+Math.ceil(.1*(255-z))),Y=Math.min(255,Y+Math.ceil(.1*(255-Y))),k=S(g.relativeLuminance2(H,z,Y),g.relativeLuminance2(U,F,$));return(H<<24|z<<16|Y<<8|255)>>>0}b.ensureContrastRatio=function(D,N,I){const U=g.relativeLuminance(D>>8),F=g.relativeLuminance(N>>8);if(S(U,F)<I){if(F<U){const z=P(D,N,I),Y=S(U,g.relativeLuminance(z>>8));if(Y<I){const k=L(D,N,I);return Y>S(U,g.relativeLuminance(k>>8))?z:k}return z}const $=L(D,N,I),H=S(U,g.relativeLuminance($>>8));if(H<I){const z=P(D,N,I);return H>S(U,g.relativeLuminance(z>>8))?$:z}return $}},b.reduceLuminance=P,b.increaseLuminance=L,b.toChannels=function(D){return[D>>24&255,D>>16&255,D>>8&255,255&D]},b.toColor=function(D,N,I,U){return{css:E.toCss(D,N,I,U),rgba:E.toRgba(D,N,I,U)}}}(d||(l.rgba=d={})),l.toPaddedHex=m,l.contrastRatio=S},8969:(w,l,u)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.CoreTerminal=void 0;const f=u(844),y=u(2585),p=u(4348),C=u(7866),T=u(744),E=u(7302),x=u(6975),c=u(8460),g=u(1753),d=u(1480),m=u(7994),S=u(9282),b=u(5435),P=u(5981),L=u(2660);let D=!1;class N extends f.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new c.EventEmitter),this._onScroll.event(U=>{var F;(F=this._onScrollApi)===null||F===void 0||F.fire(U.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(U){for(const F in U)this.optionsService.options[F]=U[F]}constructor(U){super(),this._windowsWrappingHeuristics=this.register(new f.MutableDisposable),this._onBinary=this.register(new c.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new c.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new c.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new c.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new c.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new c.EventEmitter),this._instantiationService=new p.InstantiationService,this.optionsService=this.register(new E.OptionsService(U)),this._instantiationService.setService(y.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(T.BufferService)),this._instantiationService.setService(y.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(C.LogService)),this._instantiationService.setService(y.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(x.CoreService)),this._instantiationService.setService(y.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(g.CoreMouseService)),this._instantiationService.setService(y.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(d.UnicodeService)),this._instantiationService.setService(y.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(m.CharsetService),this._instantiationService.setService(y.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(L.OscLinkService),this._instantiationService.setService(y.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new b.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,c.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,c.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,c.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,c.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this.register(this._bufferService.onScroll(F=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(F=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new P.WriteBuffer((F,$)=>this._inputHandler.parse(F,$))),this.register((0,c.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(U,F){this._writeBuffer.write(U,F)}writeSync(U,F){this._logService.logLevel<=y.LogLevelEnum.WARN&&!D&&(this._logService.warn("writeSync is unreliable and will be removed soon."),D=!0),this._writeBuffer.writeSync(U,F)}resize(U,F){isNaN(U)||isNaN(F)||(U=Math.max(U,T.MINIMUM_COLS),F=Math.max(F,T.MINIMUM_ROWS),this._bufferService.resize(U,F))}scroll(U,F=!1){this._bufferService.scroll(U,F)}scrollLines(U,F,$){this._bufferService.scrollLines(U,F,$)}scrollPages(U){this.scrollLines(U*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(U){const F=U-this._bufferService.buffer.ydisp;F!==0&&this.scrollLines(F)}registerEscHandler(U,F){return this._inputHandler.registerEscHandler(U,F)}registerDcsHandler(U,F){return this._inputHandler.registerDcsHandler(U,F)}registerCsiHandler(U,F){return this._inputHandler.registerCsiHandler(U,F)}registerOscHandler(U,F){return this._inputHandler.registerOscHandler(U,F)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let U=!1;const F=this.optionsService.rawOptions.windowsPty;F&&F.buildNumber!==void 0&&F.buildNumber!==void 0?U=F.backend==="conpty"&&F.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(U=!0),U?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){const U=[];U.push(this.onLineFeed(S.updateWindowsModeWrappedState.bind(null,this._bufferService))),U.push(this.registerCsiHandler({final:"H"},()=>((0,S.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsWrappingHeuristics.value=(0,f.toDisposable)(()=>{for(const F of U)F.dispose()})}}}l.CoreTerminal=N},8460:(w,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.forwardEvent=l.EventEmitter=void 0,l.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=u=>(this._listeners.push(u),{dispose:()=>{if(!this._disposed){for(let f=0;f<this._listeners.length;f++)if(this._listeners[f]===u)return void this._listeners.splice(f,1)}}})),this._event}fire(u,f){const y=[];for(let p=0;p<this._listeners.length;p++)y.push(this._listeners[p]);for(let p=0;p<y.length;p++)y[p].call(void 0,u,f)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},l.forwardEvent=function(u,f){return u(y=>f.fire(y))}},5435:function(w,l,u){var f=this&&this.__decorate||function(k,R,A,M){var B,G=arguments.length,q=G<3?R:M===null?M=Object.getOwnPropertyDescriptor(R,A):M;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")q=Reflect.decorate(k,R,A,M);else for(var ie=k.length-1;ie>=0;ie--)(B=k[ie])&&(q=(G<3?B(q):G>3?B(R,A,q):B(R,A))||q);return G>3&&q&&Object.defineProperty(R,A,q),q},y=this&&this.__param||function(k,R){return function(A,M){R(A,M,k)}};Object.defineProperty(l,"__esModule",{value:!0}),l.InputHandler=l.WindowsOptionsReportType=void 0;const p=u(2584),C=u(7116),T=u(2015),E=u(844),x=u(482),c=u(8437),g=u(8460),d=u(643),m=u(511),S=u(3734),b=u(2585),P=u(6242),L=u(6351),D=u(5941),N={"(":0,")":1,"*":2,"+":3,"-":1,".":2},I=131072;function U(k,R){if(k>24)return R.setWinLines||!1;switch(k){case 1:return!!R.restoreWin;case 2:return!!R.minimizeWin;case 3:return!!R.setWinPosition;case 4:return!!R.setWinSizePixels;case 5:return!!R.raiseWin;case 6:return!!R.lowerWin;case 7:return!!R.refreshWin;case 8:return!!R.setWinSizeChars;case 9:return!!R.maximizeWin;case 10:return!!R.fullscreenWin;case 11:return!!R.getWinState;case 13:return!!R.getWinPosition;case 14:return!!R.getWinSizePixels;case 15:return!!R.getScreenSizePixels;case 16:return!!R.getCellSizePixels;case 18:return!!R.getWinSizeChars;case 19:return!!R.getScreenSizeChars;case 20:return!!R.getIconTitle;case 21:return!!R.getWinTitle;case 22:return!!R.pushTitle;case 23:return!!R.popTitle;case 24:return!!R.setWinLines}return!1}var F;(function(k){k[k.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",k[k.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(F||(l.WindowsOptionsReportType=F={}));let $=0;class H extends E.Disposable{getAttrData(){return this._curAttrData}constructor(R,A,M,B,G,q,ie,le,_e=new T.EscapeSequenceParser){super(),this._bufferService=R,this._charsetService=A,this._coreService=M,this._logService=B,this._optionsService=G,this._oscLinkService=q,this._coreMouseService=ie,this._unicodeService=le,this._parser=_e,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new x.StringToUtf32,this._utf8Decoder=new x.Utf8ToUtf32,this._workCell=new m.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=c.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=c.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new g.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new g.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new g.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new g.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new g.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new g.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new g.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new g.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new g.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new g.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new g.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new g.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new g.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new z(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(V=>this._activeBuffer=V.activeBuffer)),this._parser.setCsiHandlerFallback((V,Z)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(V),params:Z.toArray()})}),this._parser.setEscHandlerFallback(V=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(V)})}),this._parser.setExecuteHandlerFallback(V=>{this._logService.debug("Unknown EXECUTE code: ",{code:V})}),this._parser.setOscHandlerFallback((V,Z,se)=>{this._logService.debug("Unknown OSC code: ",{identifier:V,action:Z,data:se})}),this._parser.setDcsHandlerFallback((V,Z,se)=>{Z==="HOOK"&&(se=se.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(V),action:Z,payload:se})}),this._parser.setPrintHandler((V,Z,se)=>this.print(V,Z,se)),this._parser.registerCsiHandler({final:"@"},V=>this.insertChars(V)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},V=>this.scrollLeft(V)),this._parser.registerCsiHandler({final:"A"},V=>this.cursorUp(V)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},V=>this.scrollRight(V)),this._parser.registerCsiHandler({final:"B"},V=>this.cursorDown(V)),this._parser.registerCsiHandler({final:"C"},V=>this.cursorForward(V)),this._parser.registerCsiHandler({final:"D"},V=>this.cursorBackward(V)),this._parser.registerCsiHandler({final:"E"},V=>this.cursorNextLine(V)),this._parser.registerCsiHandler({final:"F"},V=>this.cursorPrecedingLine(V)),this._parser.registerCsiHandler({final:"G"},V=>this.cursorCharAbsolute(V)),this._parser.registerCsiHandler({final:"H"},V=>this.cursorPosition(V)),this._parser.registerCsiHandler({final:"I"},V=>this.cursorForwardTab(V)),this._parser.registerCsiHandler({final:"J"},V=>this.eraseInDisplay(V,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},V=>this.eraseInDisplay(V,!0)),this._parser.registerCsiHandler({final:"K"},V=>this.eraseInLine(V,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},V=>this.eraseInLine(V,!0)),this._parser.registerCsiHandler({final:"L"},V=>this.insertLines(V)),this._parser.registerCsiHandler({final:"M"},V=>this.deleteLines(V)),this._parser.registerCsiHandler({final:"P"},V=>this.deleteChars(V)),this._parser.registerCsiHandler({final:"S"},V=>this.scrollUp(V)),this._parser.registerCsiHandler({final:"T"},V=>this.scrollDown(V)),this._parser.registerCsiHandler({final:"X"},V=>this.eraseChars(V)),this._parser.registerCsiHandler({final:"Z"},V=>this.cursorBackwardTab(V)),this._parser.registerCsiHandler({final:"`"},V=>this.charPosAbsolute(V)),this._parser.registerCsiHandler({final:"a"},V=>this.hPositionRelative(V)),this._parser.registerCsiHandler({final:"b"},V=>this.repeatPrecedingCharacter(V)),this._parser.registerCsiHandler({final:"c"},V=>this.sendDeviceAttributesPrimary(V)),this._parser.registerCsiHandler({prefix:">",final:"c"},V=>this.sendDeviceAttributesSecondary(V)),this._parser.registerCsiHandler({final:"d"},V=>this.linePosAbsolute(V)),this._parser.registerCsiHandler({final:"e"},V=>this.vPositionRelative(V)),this._parser.registerCsiHandler({final:"f"},V=>this.hVPosition(V)),this._parser.registerCsiHandler({final:"g"},V=>this.tabClear(V)),this._parser.registerCsiHandler({final:"h"},V=>this.setMode(V)),this._parser.registerCsiHandler({prefix:"?",final:"h"},V=>this.setModePrivate(V)),this._parser.registerCsiHandler({final:"l"},V=>this.resetMode(V)),this._parser.registerCsiHandler({prefix:"?",final:"l"},V=>this.resetModePrivate(V)),this._parser.registerCsiHandler({final:"m"},V=>this.charAttributes(V)),this._parser.registerCsiHandler({final:"n"},V=>this.deviceStatus(V)),this._parser.registerCsiHandler({prefix:"?",final:"n"},V=>this.deviceStatusPrivate(V)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},V=>this.softReset(V)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},V=>this.setCursorStyle(V)),this._parser.registerCsiHandler({final:"r"},V=>this.setScrollRegion(V)),this._parser.registerCsiHandler({final:"s"},V=>this.saveCursor(V)),this._parser.registerCsiHandler({final:"t"},V=>this.windowOptions(V)),this._parser.registerCsiHandler({final:"u"},V=>this.restoreCursor(V)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},V=>this.insertColumns(V)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},V=>this.deleteColumns(V)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},V=>this.selectProtected(V)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},V=>this.requestMode(V,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},V=>this.requestMode(V,!1)),this._parser.setExecuteHandler(p.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(p.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(p.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(p.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(p.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(p.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(p.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(p.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(p.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(p.C1.IND,()=>this.index()),this._parser.setExecuteHandler(p.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(p.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new P.OscHandler(V=>(this.setTitle(V),this.setIconName(V),!0))),this._parser.registerOscHandler(1,new P.OscHandler(V=>this.setIconName(V))),this._parser.registerOscHandler(2,new P.OscHandler(V=>this.setTitle(V))),this._parser.registerOscHandler(4,new P.OscHandler(V=>this.setOrReportIndexedColor(V))),this._parser.registerOscHandler(8,new P.OscHandler(V=>this.setHyperlink(V))),this._parser.registerOscHandler(10,new P.OscHandler(V=>this.setOrReportFgColor(V))),this._parser.registerOscHandler(11,new P.OscHandler(V=>this.setOrReportBgColor(V))),this._parser.registerOscHandler(12,new P.OscHandler(V=>this.setOrReportCursorColor(V))),this._parser.registerOscHandler(104,new P.OscHandler(V=>this.restoreIndexedColor(V))),this._parser.registerOscHandler(110,new P.OscHandler(V=>this.restoreFgColor(V))),this._parser.registerOscHandler(111,new P.OscHandler(V=>this.restoreBgColor(V))),this._parser.registerOscHandler(112,new P.OscHandler(V=>this.restoreCursorColor(V))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(const V in C.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:V},()=>this.selectCharset("("+V)),this._parser.registerEscHandler({intermediates:")",final:V},()=>this.selectCharset(")"+V)),this._parser.registerEscHandler({intermediates:"*",final:V},()=>this.selectCharset("*"+V)),this._parser.registerEscHandler({intermediates:"+",final:V},()=>this.selectCharset("+"+V)),this._parser.registerEscHandler({intermediates:"-",final:V},()=>this.selectCharset("-"+V)),this._parser.registerEscHandler({intermediates:".",final:V},()=>this.selectCharset("."+V)),this._parser.registerEscHandler({intermediates:"/",final:V},()=>this.selectCharset("/"+V));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(V=>(this._logService.error("Parsing error: ",V),V)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new L.DcsHandler((V,Z)=>this.requestStatusString(V,Z)))}_preserveStack(R,A,M,B){this._parseStack.paused=!0,this._parseStack.cursorStartX=R,this._parseStack.cursorStartY=A,this._parseStack.decodedLength=M,this._parseStack.position=B}_logSlowResolvingAsync(R){this._logService.logLevel<=b.LogLevelEnum.WARN&&Promise.race([R,new Promise((A,M)=>setTimeout(()=>M("#SLOW_TIMEOUT"),5e3))]).catch(A=>{if(A!=="#SLOW_TIMEOUT")throw A;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(R,A){let M,B=this._activeBuffer.x,G=this._activeBuffer.y,q=0;const ie=this._parseStack.paused;if(ie){if(M=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,A))return this._logSlowResolvingAsync(M),M;B=this._parseStack.cursorStartX,G=this._parseStack.cursorStartY,this._parseStack.paused=!1,R.length>I&&(q=this._parseStack.position+I)}if(this._logService.logLevel<=b.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof R=="string"?` "${R}"`:` "${Array.prototype.map.call(R,le=>String.fromCharCode(le)).join("")}"`),typeof R=="string"?R.split("").map(le=>le.charCodeAt(0)):R),this._parseBuffer.length<R.length&&this._parseBuffer.length<I&&(this._parseBuffer=new Uint32Array(Math.min(R.length,I))),ie||this._dirtyRowTracker.clearRange(),R.length>I)for(let le=q;le<R.length;le+=I){const _e=le+I<R.length?le+I:R.length,V=typeof R=="string"?this._stringDecoder.decode(R.substring(le,_e),this._parseBuffer):this._utf8Decoder.decode(R.subarray(le,_e),this._parseBuffer);if(M=this._parser.parse(this._parseBuffer,V))return this._preserveStack(B,G,V,le),this._logSlowResolvingAsync(M),M}else if(!ie){const le=typeof R=="string"?this._stringDecoder.decode(R,this._parseBuffer):this._utf8Decoder.decode(R,this._parseBuffer);if(M=this._parser.parse(this._parseBuffer,le))return this._preserveStack(B,G,le,0),this._logSlowResolvingAsync(M),M}this._activeBuffer.x===B&&this._activeBuffer.y===G||this._onCursorMove.fire(),this._onRequestRefreshRows.fire(this._dirtyRowTracker.start,this._dirtyRowTracker.end)}print(R,A,M){let B,G;const q=this._charsetService.charset,ie=this._optionsService.rawOptions.screenReaderMode,le=this._bufferService.cols,_e=this._coreService.decPrivateModes.wraparound,V=this._coreService.modes.insertMode,Z=this._curAttrData;let se=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&M-A>0&&se.getWidth(this._activeBuffer.x-1)===2&&se.setCellFromCodePoint(this._activeBuffer.x-1,0,1,Z.fg,Z.bg,Z.extended);for(let te=A;te<M;++te){if(B=R[te],G=this._unicodeService.wcwidth(B),B<127&&q){const ce=q[String.fromCharCode(B)];ce&&(B=ce.charCodeAt(0))}if(ie&&this._onA11yChar.fire((0,x.stringFromCodePoint)(B)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),G||!this._activeBuffer.x){if(this._activeBuffer.x+G-1>=le){if(_e){for(;this._activeBuffer.x<le;)se.setCellFromCodePoint(this._activeBuffer.x++,0,1,Z.fg,Z.bg,Z.extended);this._activeBuffer.x=0,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),se=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)}else if(this._activeBuffer.x=le-1,G===2)continue}if(V&&(se.insertCells(this._activeBuffer.x,G,this._activeBuffer.getNullCell(Z),Z),se.getWidth(le-1)===2&&se.setCellFromCodePoint(le-1,d.NULL_CELL_CODE,d.NULL_CELL_WIDTH,Z.fg,Z.bg,Z.extended)),se.setCellFromCodePoint(this._activeBuffer.x++,B,G,Z.fg,Z.bg,Z.extended),G>0)for(;--G;)se.setCellFromCodePoint(this._activeBuffer.x++,0,0,Z.fg,Z.bg,Z.extended)}else se.getWidth(this._activeBuffer.x-1)?se.addCodepointToCell(this._activeBuffer.x-1,B):se.addCodepointToCell(this._activeBuffer.x-2,B)}M-A>0&&(se.loadCell(this._activeBuffer.x-1,this._workCell),this._workCell.getWidth()===2||this._workCell.getCode()>65535?this._parser.precedingCodepoint=0:this._workCell.isCombined()?this._parser.precedingCodepoint=this._workCell.getChars().charCodeAt(0):this._parser.precedingCodepoint=this._workCell.content),this._activeBuffer.x<le&&M-A>0&&se.getWidth(this._activeBuffer.x)===0&&!se.hasContent(this._activeBuffer.x)&&se.setCellFromCodePoint(this._activeBuffer.x,0,1,Z.fg,Z.bg,Z.extended),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(R,A){return R.final!=="t"||R.prefix||R.intermediates?this._parser.registerCsiHandler(R,A):this._parser.registerCsiHandler(R,M=>!U(M.params[0],this._optionsService.rawOptions.windowOptions)||A(M))}registerDcsHandler(R,A){return this._parser.registerDcsHandler(R,new L.DcsHandler(A))}registerEscHandler(R,A){return this._parser.registerEscHandler(R,A)}registerOscHandler(R,A){return this._parser.registerOscHandler(R,new P.OscHandler(A))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var R;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&(!((R=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))===null||R===void 0)&&R.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const A=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);A.hasWidth(this._activeBuffer.x)&&!A.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const R=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-R),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(R=this._bufferService.cols-1){this._activeBuffer.x=Math.min(R,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(R,A){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=R,this._activeBuffer.y=this._activeBuffer.scrollTop+A):(this._activeBuffer.x=R,this._activeBuffer.y=A),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(R,A){this._restrictCursor(),this._setCursor(this._activeBuffer.x+R,this._activeBuffer.y+A)}cursorUp(R){const A=this._activeBuffer.y-this._activeBuffer.scrollTop;return A>=0?this._moveCursor(0,-Math.min(A,R.params[0]||1)):this._moveCursor(0,-(R.params[0]||1)),!0}cursorDown(R){const A=this._activeBuffer.scrollBottom-this._activeBuffer.y;return A>=0?this._moveCursor(0,Math.min(A,R.params[0]||1)):this._moveCursor(0,R.params[0]||1),!0}cursorForward(R){return this._moveCursor(R.params[0]||1,0),!0}cursorBackward(R){return this._moveCursor(-(R.params[0]||1),0),!0}cursorNextLine(R){return this.cursorDown(R),this._activeBuffer.x=0,!0}cursorPrecedingLine(R){return this.cursorUp(R),this._activeBuffer.x=0,!0}cursorCharAbsolute(R){return this._setCursor((R.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(R){return this._setCursor(R.length>=2?(R.params[1]||1)-1:0,(R.params[0]||1)-1),!0}charPosAbsolute(R){return this._setCursor((R.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(R){return this._moveCursor(R.params[0]||1,0),!0}linePosAbsolute(R){return this._setCursor(this._activeBuffer.x,(R.params[0]||1)-1),!0}vPositionRelative(R){return this._moveCursor(0,R.params[0]||1),!0}hVPosition(R){return this.cursorPosition(R),!0}tabClear(R){const A=R.params[0];return A===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:A===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(R){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let A=R.params[0]||1;for(;A--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(R){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let A=R.params[0]||1;for(;A--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(R){const A=R.params[0];return A===1&&(this._curAttrData.bg|=536870912),A!==2&&A!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(R,A,M,B=!1,G=!1){const q=this._activeBuffer.lines.get(this._activeBuffer.ybase+R);q.replaceCells(A,M,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData(),G),B&&(q.isWrapped=!1)}_resetBufferLine(R,A=!1){const M=this._activeBuffer.lines.get(this._activeBuffer.ybase+R);M&&(M.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),A),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+R),M.isWrapped=!1)}eraseInDisplay(R,A=!1){let M;switch(this._restrictCursor(this._bufferService.cols),R.params[0]){case 0:for(M=this._activeBuffer.y,this._dirtyRowTracker.markDirty(M),this._eraseInBufferLine(M++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,A);M<this._bufferService.rows;M++)this._resetBufferLine(M,A);this._dirtyRowTracker.markDirty(M);break;case 1:for(M=this._activeBuffer.y,this._dirtyRowTracker.markDirty(M),this._eraseInBufferLine(M,0,this._activeBuffer.x+1,!0,A),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(M+1).isWrapped=!1);M--;)this._resetBufferLine(M,A);this._dirtyRowTracker.markDirty(0);break;case 2:for(M=this._bufferService.rows,this._dirtyRowTracker.markDirty(M-1);M--;)this._resetBufferLine(M,A);this._dirtyRowTracker.markDirty(0);break;case 3:const B=this._activeBuffer.lines.length-this._bufferService.rows;B>0&&(this._activeBuffer.lines.trimStart(B),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-B,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-B,0),this._onScroll.fire(0))}return!0}eraseInLine(R,A=!1){switch(this._restrictCursor(this._bufferService.cols),R.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,A);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,A);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,A)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(R){this._restrictCursor();let A=R.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const M=this._activeBuffer.ybase+this._activeBuffer.y,B=this._bufferService.rows-1-this._activeBuffer.scrollBottom,G=this._bufferService.rows-1+this._activeBuffer.ybase-B+1;for(;A--;)this._activeBuffer.lines.splice(G-1,1),this._activeBuffer.lines.splice(M,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(R){this._restrictCursor();let A=R.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const M=this._activeBuffer.ybase+this._activeBuffer.y;let B;for(B=this._bufferService.rows-1-this._activeBuffer.scrollBottom,B=this._bufferService.rows-1+this._activeBuffer.ybase-B;A--;)this._activeBuffer.lines.splice(M,1),this._activeBuffer.lines.splice(B,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(R){this._restrictCursor();const A=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return A&&(A.insertCells(this._activeBuffer.x,R.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(R){this._restrictCursor();const A=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return A&&(A.deleteCells(this._activeBuffer.x,R.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(R){let A=R.params[0]||1;for(;A--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(R){let A=R.params[0]||1;for(;A--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(c.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(R){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const A=R.params[0]||1;for(let M=this._activeBuffer.scrollTop;M<=this._activeBuffer.scrollBottom;++M){const B=this._activeBuffer.lines.get(this._activeBuffer.ybase+M);B.deleteCells(0,A,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),B.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(R){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const A=R.params[0]||1;for(let M=this._activeBuffer.scrollTop;M<=this._activeBuffer.scrollBottom;++M){const B=this._activeBuffer.lines.get(this._activeBuffer.ybase+M);B.insertCells(0,A,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),B.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(R){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const A=R.params[0]||1;for(let M=this._activeBuffer.scrollTop;M<=this._activeBuffer.scrollBottom;++M){const B=this._activeBuffer.lines.get(this._activeBuffer.ybase+M);B.insertCells(this._activeBuffer.x,A,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),B.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(R){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const A=R.params[0]||1;for(let M=this._activeBuffer.scrollTop;M<=this._activeBuffer.scrollBottom;++M){const B=this._activeBuffer.lines.get(this._activeBuffer.ybase+M);B.deleteCells(this._activeBuffer.x,A,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),B.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(R){this._restrictCursor();const A=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return A&&(A.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(R.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(R){if(!this._parser.precedingCodepoint)return!0;const A=R.params[0]||1,M=new Uint32Array(A);for(let B=0;B<A;++B)M[B]=this._parser.precedingCodepoint;return this.print(M,0,M.length),!0}sendDeviceAttributesPrimary(R){return R.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(p.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(p.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(R){return R.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(p.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(p.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(R.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(p.C0.ESC+"[>83;40003;0c")),!0}_is(R){return(this._optionsService.rawOptions.termName+"").indexOf(R)===0}setMode(R){for(let A=0;A<R.length;A++)switch(R.params[A]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(R){for(let A=0;A<R.length;A++)switch(R.params[A]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,C.DEFAULT_CHARSET),this._charsetService.setgCharset(1,C.DEFAULT_CHARSET),this._charsetService.setgCharset(2,C.DEFAULT_CHARSET),this._charsetService.setgCharset(3,C.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(R){for(let A=0;A<R.length;A++)switch(R.params[A]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(R){for(let A=0;A<R.length;A++)switch(R.params[A]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),R.params[A]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(R,A){const M=this._coreService.decPrivateModes,{activeProtocol:B,activeEncoding:G}=this._coreMouseService,q=this._coreService,{buffers:ie,cols:le}=this._bufferService,{active:_e,alt:V}=ie,Z=this._optionsService.rawOptions,se=ke=>ke?1:2,te=R.params[0];return ce=te,he=A?te===2?4:te===4?se(q.modes.insertMode):te===12?3:te===20?se(Z.convertEol):0:te===1?se(M.applicationCursorKeys):te===3?Z.windowOptions.setWinLines?le===80?2:le===132?1:0:0:te===6?se(M.origin):te===7?se(M.wraparound):te===8?3:te===9?se(B==="X10"):te===12?se(Z.cursorBlink):te===25?se(!q.isCursorHidden):te===45?se(M.reverseWraparound):te===66?se(M.applicationKeypad):te===67?4:te===1e3?se(B==="VT200"):te===1002?se(B==="DRAG"):te===1003?se(B==="ANY"):te===1004?se(M.sendFocus):te===1005?4:te===1006?se(G==="SGR"):te===1015?4:te===1016?se(G==="SGR_PIXELS"):te===1048?1:te===47||te===1047||te===1049?se(_e===V):te===2004?se(M.bracketedPasteMode):0,q.triggerDataEvent(`${p.C0.ESC}[${A?"":"?"}${ce};${he}$y`),!0;var ce,he}_updateAttrColor(R,A,M,B,G){return A===2?(R|=50331648,R&=-16777216,R|=S.AttributeData.fromColorRGB([M,B,G])):A===5&&(R&=-50331904,R|=33554432|255&M),R}_extractColor(R,A,M){const B=[0,0,-1,0,0,0];let G=0,q=0;do{if(B[q+G]=R.params[A+q],R.hasSubParams(A+q)){const ie=R.getSubParams(A+q);let le=0;do B[1]===5&&(G=1),B[q+le+1+G]=ie[le];while(++le<ie.length&&le+q+1+G<B.length);break}if(B[1]===5&&q+G>=2||B[1]===2&&q+G>=5)break;B[1]&&(G=1)}while(++q+A<R.length&&q+G<B.length);for(let ie=2;ie<B.length;++ie)B[ie]===-1&&(B[ie]=0);switch(B[0]){case 38:M.fg=this._updateAttrColor(M.fg,B[1],B[3],B[4],B[5]);break;case 48:M.bg=this._updateAttrColor(M.bg,B[1],B[3],B[4],B[5]);break;case 58:M.extended=M.extended.clone(),M.extended.underlineColor=this._updateAttrColor(M.extended.underlineColor,B[1],B[3],B[4],B[5])}return q}_processUnderline(R,A){A.extended=A.extended.clone(),(!~R||R>5)&&(R=1),A.extended.underlineStyle=R,A.fg|=268435456,R===0&&(A.fg&=-268435457),A.updateExtended()}_processSGR0(R){R.fg=c.DEFAULT_ATTR_DATA.fg,R.bg=c.DEFAULT_ATTR_DATA.bg,R.extended=R.extended.clone(),R.extended.underlineStyle=0,R.extended.underlineColor&=-67108864,R.updateExtended()}charAttributes(R){if(R.length===1&&R.params[0]===0)return this._processSGR0(this._curAttrData),!0;const A=R.length;let M;const B=this._curAttrData;for(let G=0;G<A;G++)M=R.params[G],M>=30&&M<=37?(B.fg&=-50331904,B.fg|=16777216|M-30):M>=40&&M<=47?(B.bg&=-50331904,B.bg|=16777216|M-40):M>=90&&M<=97?(B.fg&=-50331904,B.fg|=16777224|M-90):M>=100&&M<=107?(B.bg&=-50331904,B.bg|=16777224|M-100):M===0?this._processSGR0(B):M===1?B.fg|=134217728:M===3?B.bg|=67108864:M===4?(B.fg|=268435456,this._processUnderline(R.hasSubParams(G)?R.getSubParams(G)[0]:1,B)):M===5?B.fg|=536870912:M===7?B.fg|=67108864:M===8?B.fg|=1073741824:M===9?B.fg|=2147483648:M===2?B.bg|=134217728:M===21?this._processUnderline(2,B):M===22?(B.fg&=-134217729,B.bg&=-134217729):M===23?B.bg&=-67108865:M===24?(B.fg&=-268435457,this._processUnderline(0,B)):M===25?B.fg&=-536870913:M===27?B.fg&=-67108865:M===28?B.fg&=-1073741825:M===29?B.fg&=2147483647:M===39?(B.fg&=-67108864,B.fg|=16777215&c.DEFAULT_ATTR_DATA.fg):M===49?(B.bg&=-67108864,B.bg|=16777215&c.DEFAULT_ATTR_DATA.bg):M===38||M===48||M===58?G+=this._extractColor(R,G,B):M===53?B.bg|=1073741824:M===55?B.bg&=-1073741825:M===59?(B.extended=B.extended.clone(),B.extended.underlineColor=-1,B.updateExtended()):M===100?(B.fg&=-67108864,B.fg|=16777215&c.DEFAULT_ATTR_DATA.fg,B.bg&=-67108864,B.bg|=16777215&c.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",M);return!0}deviceStatus(R){switch(R.params[0]){case 5:this._coreService.triggerDataEvent(`${p.C0.ESC}[0n`);break;case 6:const A=this._activeBuffer.y+1,M=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${p.C0.ESC}[${A};${M}R`)}return!0}deviceStatusPrivate(R){if(R.params[0]===6){const A=this._activeBuffer.y+1,M=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${p.C0.ESC}[?${A};${M}R`)}return!0}softReset(R){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=c.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(R){const A=R.params[0]||1;switch(A){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}const M=A%2==1;return this._optionsService.options.cursorBlink=M,!0}setScrollRegion(R){const A=R.params[0]||1;let M;return(R.length<2||(M=R.params[1])>this._bufferService.rows||M===0)&&(M=this._bufferService.rows),M>A&&(this._activeBuffer.scrollTop=A-1,this._activeBuffer.scrollBottom=M-1,this._setCursor(0,0)),!0}windowOptions(R){if(!U(R.params[0],this._optionsService.rawOptions.windowOptions))return!0;const A=R.length>1?R.params[1]:0;switch(R.params[0]){case 14:A!==2&&this._onRequestWindowsOptionsReport.fire(F.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(F.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${p.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:A!==0&&A!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),A!==0&&A!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:A!==0&&A!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),A!==0&&A!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(R){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(R){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(R){return this._windowTitle=R,this._onTitleChange.fire(R),!0}setIconName(R){return this._iconName=R,!0}setOrReportIndexedColor(R){const A=[],M=R.split(";");for(;M.length>1;){const B=M.shift(),G=M.shift();if(/^\d+$/.exec(B)){const q=parseInt(B);if(Y(q))if(G==="?")A.push({type:0,index:q});else{const ie=(0,D.parseColor)(G);ie&&A.push({type:1,index:q,color:ie})}}}return A.length&&this._onColor.fire(A),!0}setHyperlink(R){const A=R.split(";");return!(A.length<2)&&(A[1]?this._createHyperlink(A[0],A[1]):!A[0]&&this._finishHyperlink())}_createHyperlink(R,A){this._getCurrentLinkId()&&this._finishHyperlink();const M=R.split(":");let B;const G=M.findIndex(q=>q.startsWith("id="));return G!==-1&&(B=M[G].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:B,uri:A}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(R,A){const M=R.split(";");for(let B=0;B<M.length&&!(A>=this._specialColors.length);++B,++A)if(M[B]==="?")this._onColor.fire([{type:0,index:this._specialColors[A]}]);else{const G=(0,D.parseColor)(M[B]);G&&this._onColor.fire([{type:1,index:this._specialColors[A],color:G}])}return!0}setOrReportFgColor(R){return this._setOrReportSpecialColor(R,0)}setOrReportBgColor(R){return this._setOrReportSpecialColor(R,1)}setOrReportCursorColor(R){return this._setOrReportSpecialColor(R,2)}restoreIndexedColor(R){if(!R)return this._onColor.fire([{type:2}]),!0;const A=[],M=R.split(";");for(let B=0;B<M.length;++B)if(/^\d+$/.exec(M[B])){const G=parseInt(M[B]);Y(G)&&A.push({type:2,index:G})}return A.length&&this._onColor.fire(A),!0}restoreFgColor(R){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(R){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(R){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,C.DEFAULT_CHARSET),!0}selectCharset(R){return R.length!==2?(this.selectDefaultCharset(),!0):(R[0]==="/"||this._charsetService.setgCharset(N[R[0]],C.CHARSETS[R[1]]||C.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){const R=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,R,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=c.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=c.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(R){return this._charsetService.setgLevel(R),!0}screenAlignmentPattern(){const R=new m.CellData;R.content=4194373,R.fg=this._curAttrData.fg,R.bg=this._curAttrData.bg,this._setCursor(0,0);for(let A=0;A<this._bufferService.rows;++A){const M=this._activeBuffer.ybase+this._activeBuffer.y+A,B=this._activeBuffer.lines.get(M);B&&(B.fill(R),B.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(R,A){const M=this._bufferService.buffer,B=this._optionsService.rawOptions;return(G=>(this._coreService.triggerDataEvent(`${p.C0.ESC}${G}${p.C0.ESC}\\`),!0))(R==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:R==='"p'?'P1$r61;1"p':R==="r"?`P1$r${M.scrollTop+1};${M.scrollBottom+1}r`:R==="m"?"P1$r0m":R===" q"?`P1$r${{block:2,underline:4,bar:6}[B.cursorStyle]-(B.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(R,A){this._dirtyRowTracker.markRangeDirty(R,A)}}l.InputHandler=H;let z=class{constructor(k){this._bufferService=k,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(k){k<this.start?this.start=k:k>this.end&&(this.end=k)}markRangeDirty(k,R){k>R&&($=k,k=R,R=$),k<this.start&&(this.start=k),R>this.end&&(this.end=R)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function Y(k){return 0<=k&&k<256}z=f([y(0,b.IBufferService)],z)},844:(w,l)=>{function u(f){for(const y of f)y.dispose();f.length=0}Object.defineProperty(l,"__esModule",{value:!0}),l.getDisposeArrayDisposable=l.disposeArray=l.toDisposable=l.MutableDisposable=l.Disposable=void 0,l.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const f of this._disposables)f.dispose();this._disposables.length=0}register(f){return this._disposables.push(f),f}unregister(f){const y=this._disposables.indexOf(f);y!==-1&&this._disposables.splice(y,1)}},l.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(f){var y;this._isDisposed||f===this._value||((y=this._value)===null||y===void 0||y.dispose(),this._value=f)}clear(){this.value=void 0}dispose(){var f;this._isDisposed=!0,(f=this._value)===null||f===void 0||f.dispose(),this._value=void 0}},l.toDisposable=function(f){return{dispose:f}},l.disposeArray=u,l.getDisposeArrayDisposable=function(f){return{dispose:()=>u(f)}}},1505:(w,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.FourKeyMap=l.TwoKeyMap=void 0;class u{constructor(){this._data={}}set(y,p,C){this._data[y]||(this._data[y]={}),this._data[y][p]=C}get(y,p){return this._data[y]?this._data[y][p]:void 0}clear(){this._data={}}}l.TwoKeyMap=u,l.FourKeyMap=class{constructor(){this._data=new u}set(f,y,p,C,T){this._data.get(f,y)||this._data.set(f,y,new u),this._data.get(f,y).set(p,C,T)}get(f,y,p,C){var T;return(T=this._data.get(f,y))===null||T===void 0?void 0:T.get(p,C)}clear(){this._data.clear()}}},6114:(w,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.isChromeOS=l.isLinux=l.isWindows=l.isIphone=l.isIpad=l.isMac=l.getSafariVersion=l.isSafari=l.isLegacyEdge=l.isFirefox=l.isNode=void 0,l.isNode=typeof navigator>"u";const u=l.isNode?"node":navigator.userAgent,f=l.isNode?"node":navigator.platform;l.isFirefox=u.includes("Firefox"),l.isLegacyEdge=u.includes("Edge"),l.isSafari=/^((?!chrome|android).)*safari/i.test(u),l.getSafariVersion=function(){if(!l.isSafari)return 0;const y=u.match(/Version\/(\d+)/);return y===null||y.length<2?0:parseInt(y[1])},l.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(f),l.isIpad=f==="iPad",l.isIphone=f==="iPhone",l.isWindows=["Windows","Win16","Win32","WinCE"].includes(f),l.isLinux=f.indexOf("Linux")>=0,l.isChromeOS=/\bCrOS\b/.test(u)},6106:(w,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.SortedList=void 0;let u=0;l.SortedList=class{constructor(f){this._getKey=f,this._array=[]}clear(){this._array.length=0}insert(f){this._array.length!==0?(u=this._search(this._getKey(f)),this._array.splice(u,0,f)):this._array.push(f)}delete(f){if(this._array.length===0)return!1;const y=this._getKey(f);if(y===void 0||(u=this._search(y),u===-1)||this._getKey(this._array[u])!==y)return!1;do if(this._array[u]===f)return this._array.splice(u,1),!0;while(++u<this._array.length&&this._getKey(this._array[u])===y);return!1}*getKeyIterator(f){if(this._array.length!==0&&(u=this._search(f),!(u<0||u>=this._array.length)&&this._getKey(this._array[u])===f))do yield this._array[u];while(++u<this._array.length&&this._getKey(this._array[u])===f)}forEachByKey(f,y){if(this._array.length!==0&&(u=this._search(f),!(u<0||u>=this._array.length)&&this._getKey(this._array[u])===f))do y(this._array[u]);while(++u<this._array.length&&this._getKey(this._array[u])===f)}values(){return[...this._array].values()}_search(f){let y=0,p=this._array.length-1;for(;p>=y;){let C=y+p>>1;const T=this._getKey(this._array[C]);if(T>f)p=C-1;else{if(!(T<f)){for(;C>0&&this._getKey(this._array[C-1])===f;)C--;return C}y=C+1}}return y}}},7226:(w,l,u)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.DebouncedIdleTask=l.IdleTaskQueue=l.PriorityTaskQueue=void 0;const f=u(6114);class y{constructor(){this._tasks=[],this._i=0}enqueue(T){this._tasks.push(T),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(T){this._idleCallback=void 0;let E=0,x=0,c=T.timeRemaining(),g=0;for(;this._i<this._tasks.length;){if(E=Date.now(),this._tasks[this._i]()||this._i++,E=Math.max(1,Date.now()-E),x=Math.max(E,x),g=T.timeRemaining(),1.5*x>g)return c-E<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(c-E))}ms`),void this._start();c=g}this.clear()}}class p extends y{_requestCallback(T){return setTimeout(()=>T(this._createDeadline(16)))}_cancelCallback(T){clearTimeout(T)}_createDeadline(T){const E=Date.now()+T;return{timeRemaining:()=>Math.max(0,E-Date.now())}}}l.PriorityTaskQueue=p,l.IdleTaskQueue=!f.isNode&&"requestIdleCallback"in window?class extends y{_requestCallback(C){return requestIdleCallback(C)}_cancelCallback(C){cancelIdleCallback(C)}}:p,l.DebouncedIdleTask=class{constructor(){this._queue=new l.IdleTaskQueue}set(C){this._queue.clear(),this._queue.enqueue(C)}flush(){this._queue.flush()}}},9282:(w,l,u)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.updateWindowsModeWrappedState=void 0;const f=u(643);l.updateWindowsModeWrappedState=function(y){const p=y.buffer.lines.get(y.buffer.ybase+y.buffer.y-1),C=p==null?void 0:p.get(y.cols-1),T=y.buffer.lines.get(y.buffer.ybase+y.buffer.y);T&&C&&(T.isWrapped=C[f.CHAR_DATA_CODE_INDEX]!==f.NULL_CELL_CODE&&C[f.CHAR_DATA_CODE_INDEX]!==f.WHITESPACE_CELL_CODE)}},3734:(w,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.ExtendedAttrs=l.AttributeData=void 0;class u{constructor(){this.fg=0,this.bg=0,this.extended=new f}static toColorRGB(p){return[p>>>16&255,p>>>8&255,255&p]}static fromColorRGB(p){return(255&p[0])<<16|(255&p[1])<<8|255&p[2]}clone(){const p=new u;return p.fg=this.fg,p.bg=this.bg,p.extended=this.extended.clone(),p}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}}l.AttributeData=u;class f{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(p){this._ext=p}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(p){this._ext&=-469762049,this._ext|=p<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(p){this._ext&=-67108864,this._ext|=67108863&p}get urlId(){return this._urlId}set urlId(p){this._urlId=p}constructor(p=0,C=0){this._ext=0,this._urlId=0,this._ext=p,this._urlId=C}clone(){return new f(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}l.ExtendedAttrs=f},9092:(w,l,u)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.Buffer=l.MAX_BUFFER_SIZE=void 0;const f=u(6349),y=u(7226),p=u(3734),C=u(8437),T=u(4634),E=u(511),x=u(643),c=u(4863),g=u(7116);l.MAX_BUFFER_SIZE=4294967295,l.Buffer=class{constructor(d,m,S){this._hasScrollback=d,this._optionsService=m,this._bufferService=S,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=C.DEFAULT_ATTR_DATA.clone(),this.savedCharset=g.DEFAULT_CHARSET,this.markers=[],this._nullCell=E.CellData.fromCharData([0,x.NULL_CELL_CHAR,x.NULL_CELL_WIDTH,x.NULL_CELL_CODE]),this._whitespaceCell=E.CellData.fromCharData([0,x.WHITESPACE_CELL_CHAR,x.WHITESPACE_CELL_WIDTH,x.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new y.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new f.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(d){return d?(this._nullCell.fg=d.fg,this._nullCell.bg=d.bg,this._nullCell.extended=d.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new p.ExtendedAttrs),this._nullCell}getWhitespaceCell(d){return d?(this._whitespaceCell.fg=d.fg,this._whitespaceCell.bg=d.bg,this._whitespaceCell.extended=d.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new p.ExtendedAttrs),this._whitespaceCell}getBlankLine(d,m){return new C.BufferLine(this._bufferService.cols,this.getNullCell(d),m)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const d=this.ybase+this.y-this.ydisp;return d>=0&&d<this._rows}_getCorrectBufferLength(d){if(!this._hasScrollback)return d;const m=d+this._optionsService.rawOptions.scrollback;return m>l.MAX_BUFFER_SIZE?l.MAX_BUFFER_SIZE:m}fillViewportRows(d){if(this.lines.length===0){d===void 0&&(d=C.DEFAULT_ATTR_DATA);let m=this._rows;for(;m--;)this.lines.push(this.getBlankLine(d))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new f.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(d,m){const S=this.getNullCell(C.DEFAULT_ATTR_DATA);let b=0;const P=this._getCorrectBufferLength(m);if(P>this.lines.maxLength&&(this.lines.maxLength=P),this.lines.length>0){if(this._cols<d)for(let D=0;D<this.lines.length;D++)b+=+this.lines.get(D).resize(d,S);let L=0;if(this._rows<m)for(let D=this._rows;D<m;D++)this.lines.length<m+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new C.BufferLine(d,S)):this.ybase>0&&this.lines.length<=this.ybase+this.y+L+1?(this.ybase--,L++,this.ydisp>0&&this.ydisp--):this.lines.push(new C.BufferLine(d,S)));else for(let D=this._rows;D>m;D--)this.lines.length>m+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(P<this.lines.maxLength){const D=this.lines.length-P;D>0&&(this.lines.trimStart(D),this.ybase=Math.max(this.ybase-D,0),this.ydisp=Math.max(this.ydisp-D,0),this.savedY=Math.max(this.savedY-D,0)),this.lines.maxLength=P}this.x=Math.min(this.x,d-1),this.y=Math.min(this.y,m-1),L&&(this.y+=L),this.savedX=Math.min(this.savedX,d-1),this.scrollTop=0}if(this.scrollBottom=m-1,this._isReflowEnabled&&(this._reflow(d,m),this._cols>d))for(let L=0;L<this.lines.length;L++)b+=+this.lines.get(L).resize(d,S);this._cols=d,this._rows=m,this._memoryCleanupQueue.clear(),b>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let d=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,d=!1);let m=0;for(;this._memoryCleanupPosition<this.lines.length;)if(m+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),m>100)return!0;return d}get _isReflowEnabled(){const d=this._optionsService.rawOptions.windowsPty;return d&&d.buildNumber?this._hasScrollback&&d.backend==="conpty"&&d.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(d,m){this._cols!==d&&(d>this._cols?this._reflowLarger(d,m):this._reflowSmaller(d,m))}_reflowLarger(d,m){const S=(0,T.reflowLargerGetLinesToRemove)(this.lines,this._cols,d,this.ybase+this.y,this.getNullCell(C.DEFAULT_ATTR_DATA));if(S.length>0){const b=(0,T.reflowLargerCreateNewLayout)(this.lines,S);(0,T.reflowLargerApplyNewLayout)(this.lines,b.layout),this._reflowLargerAdjustViewport(d,m,b.countRemoved)}}_reflowLargerAdjustViewport(d,m,S){const b=this.getNullCell(C.DEFAULT_ATTR_DATA);let P=S;for(;P-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<m&&this.lines.push(new C.BufferLine(d,b))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-S,0)}_reflowSmaller(d,m){const S=this.getNullCell(C.DEFAULT_ATTR_DATA),b=[];let P=0;for(let L=this.lines.length-1;L>=0;L--){let D=this.lines.get(L);if(!D||!D.isWrapped&&D.getTrimmedLength()<=d)continue;const N=[D];for(;D.isWrapped&&L>0;)D=this.lines.get(--L),N.unshift(D);const I=this.ybase+this.y;if(I>=L&&I<L+N.length)continue;const U=N[N.length-1].getTrimmedLength(),F=(0,T.reflowSmallerGetNewLineLengths)(N,this._cols,d),$=F.length-N.length;let H;H=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+$):Math.max(0,this.lines.length-this.lines.maxLength+$);const z=[];for(let B=0;B<$;B++){const G=this.getBlankLine(C.DEFAULT_ATTR_DATA,!0);z.push(G)}z.length>0&&(b.push({start:L+N.length+P,newLines:z}),P+=z.length),N.push(...z);let Y=F.length-1,k=F[Y];k===0&&(Y--,k=F[Y]);let R=N.length-$-1,A=U;for(;R>=0;){const B=Math.min(A,k);if(N[Y]===void 0)break;if(N[Y].copyCellsFrom(N[R],A-B,k-B,B,!0),k-=B,k===0&&(Y--,k=F[Y]),A-=B,A===0){R--;const G=Math.max(R,0);A=(0,T.getWrappedLineTrimmedLength)(N,G,this._cols)}}for(let B=0;B<N.length;B++)F[B]<d&&N[B].setCell(F[B],S);let M=$-H;for(;M-- >0;)this.ybase===0?this.y<m-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+P)-m&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+$,this.ybase+m-1)}if(b.length>0){const L=[],D=[];for(let Y=0;Y<this.lines.length;Y++)D.push(this.lines.get(Y));const N=this.lines.length;let I=N-1,U=0,F=b[U];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+P);let $=0;for(let Y=Math.min(this.lines.maxLength-1,N+P-1);Y>=0;Y--)if(F&&F.start>I+$){for(let k=F.newLines.length-1;k>=0;k--)this.lines.set(Y--,F.newLines[k]);Y++,L.push({index:I+1,amount:F.newLines.length}),$+=F.newLines.length,F=b[++U]}else this.lines.set(Y,D[I--]);let H=0;for(let Y=L.length-1;Y>=0;Y--)L[Y].index+=H,this.lines.onInsertEmitter.fire(L[Y]),H+=L[Y].amount;const z=Math.max(0,N+P-this.lines.maxLength);z>0&&this.lines.onTrimEmitter.fire(z)}}translateBufferLineToString(d,m,S=0,b){const P=this.lines.get(d);return P?P.translateToString(m,S,b):""}getWrappedRangeForLine(d){let m=d,S=d;for(;m>0&&this.lines.get(m).isWrapped;)m--;for(;S+1<this.lines.length&&this.lines.get(S+1).isWrapped;)S++;return{first:m,last:S}}setupTabStops(d){for(d!=null?this.tabs[d]||(d=this.prevStop(d)):(this.tabs={},d=0);d<this._cols;d+=this._optionsService.rawOptions.tabStopWidth)this.tabs[d]=!0}prevStop(d){for(d==null&&(d=this.x);!this.tabs[--d]&&d>0;);return d>=this._cols?this._cols-1:d<0?0:d}nextStop(d){for(d==null&&(d=this.x);!this.tabs[++d]&&d<this._cols;);return d>=this._cols?this._cols-1:d<0?0:d}clearMarkers(d){this._isClearing=!0;for(let m=0;m<this.markers.length;m++)this.markers[m].line===d&&(this.markers[m].dispose(),this.markers.splice(m--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let d=0;d<this.markers.length;d++)this.markers[d].dispose(),this.markers.splice(d--,1);this._isClearing=!1}addMarker(d){const m=new c.Marker(d);return this.markers.push(m),m.register(this.lines.onTrim(S=>{m.line-=S,m.line<0&&m.dispose()})),m.register(this.lines.onInsert(S=>{m.line>=S.index&&(m.line+=S.amount)})),m.register(this.lines.onDelete(S=>{m.line>=S.index&&m.line<S.index+S.amount&&m.dispose(),m.line>S.index&&(m.line-=S.amount)})),m.register(m.onDispose(()=>this._removeMarker(m))),m}_removeMarker(d){this._isClearing||this.markers.splice(this.markers.indexOf(d),1)}}},8437:(w,l,u)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.BufferLine=l.DEFAULT_ATTR_DATA=void 0;const f=u(3734),y=u(511),p=u(643),C=u(482);l.DEFAULT_ATTR_DATA=Object.freeze(new f.AttributeData);let T=0;class E{constructor(c,g,d=!1){this.isWrapped=d,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*c);const m=g||y.CellData.fromCharData([0,p.NULL_CELL_CHAR,p.NULL_CELL_WIDTH,p.NULL_CELL_CODE]);for(let S=0;S<c;++S)this.setCell(S,m);this.length=c}get(c){const g=this._data[3*c+0],d=2097151&g;return[this._data[3*c+1],2097152&g?this._combined[c]:d?(0,C.stringFromCodePoint)(d):"",g>>22,2097152&g?this._combined[c].charCodeAt(this._combined[c].length-1):d]}set(c,g){this._data[3*c+1]=g[p.CHAR_DATA_ATTR_INDEX],g[p.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[c]=g[1],this._data[3*c+0]=2097152|c|g[p.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*c+0]=g[p.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|g[p.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(c){return this._data[3*c+0]>>22}hasWidth(c){return 12582912&this._data[3*c+0]}getFg(c){return this._data[3*c+1]}getBg(c){return this._data[3*c+2]}hasContent(c){return 4194303&this._data[3*c+0]}getCodePoint(c){const g=this._data[3*c+0];return 2097152&g?this._combined[c].charCodeAt(this._combined[c].length-1):2097151&g}isCombined(c){return 2097152&this._data[3*c+0]}getString(c){const g=this._data[3*c+0];return 2097152&g?this._combined[c]:2097151&g?(0,C.stringFromCodePoint)(2097151&g):""}isProtected(c){return 536870912&this._data[3*c+2]}loadCell(c,g){return T=3*c,g.content=this._data[T+0],g.fg=this._data[T+1],g.bg=this._data[T+2],2097152&g.content&&(g.combinedData=this._combined[c]),268435456&g.bg&&(g.extended=this._extendedAttrs[c]),g}setCell(c,g){2097152&g.content&&(this._combined[c]=g.combinedData),268435456&g.bg&&(this._extendedAttrs[c]=g.extended),this._data[3*c+0]=g.content,this._data[3*c+1]=g.fg,this._data[3*c+2]=g.bg}setCellFromCodePoint(c,g,d,m,S,b){268435456&S&&(this._extendedAttrs[c]=b),this._data[3*c+0]=g|d<<22,this._data[3*c+1]=m,this._data[3*c+2]=S}addCodepointToCell(c,g){let d=this._data[3*c+0];2097152&d?this._combined[c]+=(0,C.stringFromCodePoint)(g):(2097151&d?(this._combined[c]=(0,C.stringFromCodePoint)(2097151&d)+(0,C.stringFromCodePoint)(g),d&=-2097152,d|=2097152):d=g|4194304,this._data[3*c+0]=d)}insertCells(c,g,d,m){if((c%=this.length)&&this.getWidth(c-1)===2&&this.setCellFromCodePoint(c-1,0,1,(m==null?void 0:m.fg)||0,(m==null?void 0:m.bg)||0,(m==null?void 0:m.extended)||new f.ExtendedAttrs),g<this.length-c){const S=new y.CellData;for(let b=this.length-c-g-1;b>=0;--b)this.setCell(c+g+b,this.loadCell(c+b,S));for(let b=0;b<g;++b)this.setCell(c+b,d)}else for(let S=c;S<this.length;++S)this.setCell(S,d);this.getWidth(this.length-1)===2&&this.setCellFromCodePoint(this.length-1,0,1,(m==null?void 0:m.fg)||0,(m==null?void 0:m.bg)||0,(m==null?void 0:m.extended)||new f.ExtendedAttrs)}deleteCells(c,g,d,m){if(c%=this.length,g<this.length-c){const S=new y.CellData;for(let b=0;b<this.length-c-g;++b)this.setCell(c+b,this.loadCell(c+g+b,S));for(let b=this.length-g;b<this.length;++b)this.setCell(b,d)}else for(let S=c;S<this.length;++S)this.setCell(S,d);c&&this.getWidth(c-1)===2&&this.setCellFromCodePoint(c-1,0,1,(m==null?void 0:m.fg)||0,(m==null?void 0:m.bg)||0,(m==null?void 0:m.extended)||new f.ExtendedAttrs),this.getWidth(c)!==0||this.hasContent(c)||this.setCellFromCodePoint(c,0,1,(m==null?void 0:m.fg)||0,(m==null?void 0:m.bg)||0,(m==null?void 0:m.extended)||new f.ExtendedAttrs)}replaceCells(c,g,d,m,S=!1){if(S)for(c&&this.getWidth(c-1)===2&&!this.isProtected(c-1)&&this.setCellFromCodePoint(c-1,0,1,(m==null?void 0:m.fg)||0,(m==null?void 0:m.bg)||0,(m==null?void 0:m.extended)||new f.ExtendedAttrs),g<this.length&&this.getWidth(g-1)===2&&!this.isProtected(g)&&this.setCellFromCodePoint(g,0,1,(m==null?void 0:m.fg)||0,(m==null?void 0:m.bg)||0,(m==null?void 0:m.extended)||new f.ExtendedAttrs);c<g&&c<this.length;)this.isProtected(c)||this.setCell(c,d),c++;else for(c&&this.getWidth(c-1)===2&&this.setCellFromCodePoint(c-1,0,1,(m==null?void 0:m.fg)||0,(m==null?void 0:m.bg)||0,(m==null?void 0:m.extended)||new f.ExtendedAttrs),g<this.length&&this.getWidth(g-1)===2&&this.setCellFromCodePoint(g,0,1,(m==null?void 0:m.fg)||0,(m==null?void 0:m.bg)||0,(m==null?void 0:m.extended)||new f.ExtendedAttrs);c<g&&c<this.length;)this.setCell(c++,d)}resize(c,g){if(c===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const d=3*c;if(c>this.length){if(this._data.buffer.byteLength>=4*d)this._data=new Uint32Array(this._data.buffer,0,d);else{const m=new Uint32Array(d);m.set(this._data),this._data=m}for(let m=this.length;m<c;++m)this.setCell(m,g)}else{this._data=this._data.subarray(0,d);const m=Object.keys(this._combined);for(let b=0;b<m.length;b++){const P=parseInt(m[b],10);P>=c&&delete this._combined[P]}const S=Object.keys(this._extendedAttrs);for(let b=0;b<S.length;b++){const P=parseInt(S[b],10);P>=c&&delete this._extendedAttrs[P]}}return this.length=c,4*d*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const c=new Uint32Array(this._data.length);return c.set(this._data),this._data=c,1}return 0}fill(c,g=!1){if(g)for(let d=0;d<this.length;++d)this.isProtected(d)||this.setCell(d,c);else{this._combined={},this._extendedAttrs={};for(let d=0;d<this.length;++d)this.setCell(d,c)}}copyFrom(c){this.length!==c.length?this._data=new Uint32Array(c._data):this._data.set(c._data),this.length=c.length,this._combined={};for(const g in c._combined)this._combined[g]=c._combined[g];this._extendedAttrs={};for(const g in c._extendedAttrs)this._extendedAttrs[g]=c._extendedAttrs[g];this.isWrapped=c.isWrapped}clone(){const c=new E(0);c._data=new Uint32Array(this._data),c.length=this.length;for(const g in this._combined)c._combined[g]=this._combined[g];for(const g in this._extendedAttrs)c._extendedAttrs[g]=this._extendedAttrs[g];return c.isWrapped=this.isWrapped,c}getTrimmedLength(){for(let c=this.length-1;c>=0;--c)if(4194303&this._data[3*c+0])return c+(this._data[3*c+0]>>22);return 0}getNoBgTrimmedLength(){for(let c=this.length-1;c>=0;--c)if(4194303&this._data[3*c+0]||50331648&this._data[3*c+2])return c+(this._data[3*c+0]>>22);return 0}copyCellsFrom(c,g,d,m,S){const b=c._data;if(S)for(let L=m-1;L>=0;L--){for(let D=0;D<3;D++)this._data[3*(d+L)+D]=b[3*(g+L)+D];268435456&b[3*(g+L)+2]&&(this._extendedAttrs[d+L]=c._extendedAttrs[g+L])}else for(let L=0;L<m;L++){for(let D=0;D<3;D++)this._data[3*(d+L)+D]=b[3*(g+L)+D];268435456&b[3*(g+L)+2]&&(this._extendedAttrs[d+L]=c._extendedAttrs[g+L])}const P=Object.keys(c._combined);for(let L=0;L<P.length;L++){const D=parseInt(P[L],10);D>=g&&(this._combined[D-g+d]=c._combined[D])}}translateToString(c=!1,g=0,d=this.length){c&&(d=Math.min(d,this.getTrimmedLength()));let m="";for(;g<d;){const S=this._data[3*g+0],b=2097151&S;m+=2097152&S?this._combined[g]:b?(0,C.stringFromCodePoint)(b):p.WHITESPACE_CELL_CHAR,g+=S>>22||1}return m}}l.BufferLine=E},4841:(w,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.getRangeLength=void 0,l.getRangeLength=function(u,f){if(u.start.y>u.end.y)throw new Error(`Buffer range end (${u.end.x}, ${u.end.y}) cannot be before start (${u.start.x}, ${u.start.y})`);return f*(u.end.y-u.start.y)+(u.end.x-u.start.x+1)}},4634:(w,l)=>{function u(f,y,p){if(y===f.length-1)return f[y].getTrimmedLength();const C=!f[y].hasContent(p-1)&&f[y].getWidth(p-1)===1,T=f[y+1].getWidth(0)===2;return C&&T?p-1:p}Object.defineProperty(l,"__esModule",{value:!0}),l.getWrappedLineTrimmedLength=l.reflowSmallerGetNewLineLengths=l.reflowLargerApplyNewLayout=l.reflowLargerCreateNewLayout=l.reflowLargerGetLinesToRemove=void 0,l.reflowLargerGetLinesToRemove=function(f,y,p,C,T){const E=[];for(let x=0;x<f.length-1;x++){let c=x,g=f.get(++c);if(!g.isWrapped)continue;const d=[f.get(x)];for(;c<f.length&&g.isWrapped;)d.push(g),g=f.get(++c);if(C>=x&&C<c){x+=d.length-1;continue}let m=0,S=u(d,m,y),b=1,P=0;for(;b<d.length;){const D=u(d,b,y),N=D-P,I=p-S,U=Math.min(N,I);d[m].copyCellsFrom(d[b],P,S,U,!1),S+=U,S===p&&(m++,S=0),P+=U,P===D&&(b++,P=0),S===0&&m!==0&&d[m-1].getWidth(p-1)===2&&(d[m].copyCellsFrom(d[m-1],p-1,S++,1,!1),d[m-1].setCell(p-1,T))}d[m].replaceCells(S,p,T);let L=0;for(let D=d.length-1;D>0&&(D>m||d[D].getTrimmedLength()===0);D--)L++;L>0&&(E.push(x+d.length-L),E.push(L)),x+=d.length-1}return E},l.reflowLargerCreateNewLayout=function(f,y){const p=[];let C=0,T=y[C],E=0;for(let x=0;x<f.length;x++)if(T===x){const c=y[++C];f.onDeleteEmitter.fire({index:x-E,amount:c}),x+=c-1,E+=c,T=y[++C]}else p.push(x);return{layout:p,countRemoved:E}},l.reflowLargerApplyNewLayout=function(f,y){const p=[];for(let C=0;C<y.length;C++)p.push(f.get(y[C]));for(let C=0;C<p.length;C++)f.set(C,p[C]);f.length=y.length},l.reflowSmallerGetNewLineLengths=function(f,y,p){const C=[],T=f.map((g,d)=>u(f,d,y)).reduce((g,d)=>g+d);let E=0,x=0,c=0;for(;c<T;){if(T-c<p){C.push(T-c);break}E+=p;const g=u(f,x,y);E>g&&(E-=g,x++);const d=f[x].getWidth(E-1)===2;d&&E--;const m=d?p-1:p;C.push(m),c+=m}return C},l.getWrappedLineTrimmedLength=u},5295:(w,l,u)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.BufferSet=void 0;const f=u(8460),y=u(844),p=u(9092);class C extends y.Disposable{constructor(E,x){super(),this._optionsService=E,this._bufferService=x,this._onBufferActivate=this.register(new f.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new p.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new p.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(E){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(E),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(E,x){this._normal.resize(E,x),this._alt.resize(E,x),this.setupTabStops(E)}setupTabStops(E){this._normal.setupTabStops(E),this._alt.setupTabStops(E)}}l.BufferSet=C},511:(w,l,u)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.CellData=void 0;const f=u(482),y=u(643),p=u(3734);class C extends p.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new p.ExtendedAttrs,this.combinedData=""}static fromCharData(E){const x=new C;return x.setFromCharData(E),x}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,f.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(E){this.fg=E[y.CHAR_DATA_ATTR_INDEX],this.bg=0;let x=!1;if(E[y.CHAR_DATA_CHAR_INDEX].length>2)x=!0;else if(E[y.CHAR_DATA_CHAR_INDEX].length===2){const c=E[y.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=c&&c<=56319){const g=E[y.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=g&&g<=57343?this.content=1024*(c-55296)+g-56320+65536|E[y.CHAR_DATA_WIDTH_INDEX]<<22:x=!0}else x=!0}else this.content=E[y.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|E[y.CHAR_DATA_WIDTH_INDEX]<<22;x&&(this.combinedData=E[y.CHAR_DATA_CHAR_INDEX],this.content=2097152|E[y.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}l.CellData=C},643:(w,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.WHITESPACE_CELL_CODE=l.WHITESPACE_CELL_WIDTH=l.WHITESPACE_CELL_CHAR=l.NULL_CELL_CODE=l.NULL_CELL_WIDTH=l.NULL_CELL_CHAR=l.CHAR_DATA_CODE_INDEX=l.CHAR_DATA_WIDTH_INDEX=l.CHAR_DATA_CHAR_INDEX=l.CHAR_DATA_ATTR_INDEX=l.DEFAULT_EXT=l.DEFAULT_ATTR=l.DEFAULT_COLOR=void 0,l.DEFAULT_COLOR=0,l.DEFAULT_ATTR=256|l.DEFAULT_COLOR<<9,l.DEFAULT_EXT=0,l.CHAR_DATA_ATTR_INDEX=0,l.CHAR_DATA_CHAR_INDEX=1,l.CHAR_DATA_WIDTH_INDEX=2,l.CHAR_DATA_CODE_INDEX=3,l.NULL_CELL_CHAR="",l.NULL_CELL_WIDTH=1,l.NULL_CELL_CODE=0,l.WHITESPACE_CELL_CHAR=" ",l.WHITESPACE_CELL_WIDTH=1,l.WHITESPACE_CELL_CODE=32},4863:(w,l,u)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.Marker=void 0;const f=u(8460),y=u(844);class p{get id(){return this._id}constructor(T){this.line=T,this.isDisposed=!1,this._disposables=[],this._id=p._nextId++,this._onDispose=this.register(new f.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,y.disposeArray)(this._disposables),this._disposables.length=0)}register(T){return this._disposables.push(T),T}}l.Marker=p,p._nextId=1},7116:(w,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.DEFAULT_CHARSET=l.CHARSETS=void 0,l.CHARSETS={},l.DEFAULT_CHARSET=l.CHARSETS.B,l.CHARSETS[0]={"`":"◆",a:"▒",b:"␉",c:"␌",d:"␍",e:"␊",f:"°",g:"±",h:"␤",i:"␋",j:"┘",k:"┐",l:"┌",m:"└",n:"┼",o:"⎺",p:"⎻",q:"─",r:"⎼",s:"⎽",t:"├",u:"┤",v:"┴",w:"┬",x:"│",y:"≤",z:"≥","{":"π","|":"≠","}":"£","~":"·"},l.CHARSETS.A={"#":"£"},l.CHARSETS.B=void 0,l.CHARSETS[4]={"#":"£","@":"¾","[":"ij","\\":"½","]":"|","{":"¨","|":"f","}":"¼","~":"´"},l.CHARSETS.C=l.CHARSETS[5]={"[":"Ä","\\":"Ö","]":"Å","^":"Ü","`":"é","{":"ä","|":"ö","}":"å","~":"ü"},l.CHARSETS.R={"#":"£","@":"à","[":"°","\\":"ç","]":"§","{":"é","|":"ù","}":"è","~":"¨"},l.CHARSETS.Q={"@":"à","[":"â","\\":"ç","]":"ê","^":"î","`":"ô","{":"é","|":"ù","}":"è","~":"û"},l.CHARSETS.K={"@":"§","[":"Ä","\\":"Ö","]":"Ü","{":"ä","|":"ö","}":"ü","~":"ß"},l.CHARSETS.Y={"#":"£","@":"§","[":"°","\\":"ç","]":"é","`":"ù","{":"à","|":"ò","}":"è","~":"ì"},l.CHARSETS.E=l.CHARSETS[6]={"@":"Ä","[":"Æ","\\":"Ø","]":"Å","^":"Ü","`":"ä","{":"æ","|":"ø","}":"å","~":"ü"},l.CHARSETS.Z={"#":"£","@":"§","[":"¡","\\":"Ñ","]":"¿","{":"°","|":"ñ","}":"ç"},l.CHARSETS.H=l.CHARSETS[7]={"@":"É","[":"Ä","\\":"Ö","]":"Å","^":"Ü","`":"é","{":"ä","|":"ö","}":"å","~":"ü"},l.CHARSETS["="]={"#":"ù","@":"à","[":"é","\\":"ç","]":"ê","^":"î",_:"è","`":"ô","{":"ä","|":"ö","}":"ü","~":"û"}},2584:(w,l)=>{var u,f,y;Object.defineProperty(l,"__esModule",{value:!0}),l.C1_ESCAPED=l.C1=l.C0=void 0,function(p){p.NUL="\0",p.SOH="",p.STX="",p.ETX="",p.EOT="",p.ENQ="",p.ACK="",p.BEL="\x07",p.BS="\b",p.HT="	",p.LF=`
`,p.VT="\v",p.FF="\f",p.CR="\r",p.SO="",p.SI="",p.DLE="",p.DC1="",p.DC2="",p.DC3="",p.DC4="",p.NAK="",p.SYN="",p.ETB="",p.CAN="",p.EM="",p.SUB="",p.ESC="\x1B",p.FS="",p.GS="",p.RS="",p.US="",p.SP=" ",p.DEL=""}(u||(l.C0=u={})),function(p){p.PAD="",p.HOP="",p.BPH="",p.NBH="",p.IND="",p.NEL="",p.SSA="",p.ESA="",p.HTS="",p.HTJ="",p.VTS="",p.PLD="",p.PLU="",p.RI="",p.SS2="",p.SS3="",p.DCS="",p.PU1="",p.PU2="",p.STS="",p.CCH="",p.MW="",p.SPA="",p.EPA="",p.SOS="",p.SGCI="",p.SCI="",p.CSI="",p.ST="",p.OSC="",p.PM="",p.APC=""}(f||(l.C1=f={})),function(p){p.ST=`${u.ESC}\\`}(y||(l.C1_ESCAPED=y={}))},7399:(w,l,u)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.evaluateKeyboardEvent=void 0;const f=u(2584),y={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};l.evaluateKeyboardEvent=function(p,C,T,E){const x={type:0,cancel:!1,key:void 0},c=(p.shiftKey?1:0)|(p.altKey?2:0)|(p.ctrlKey?4:0)|(p.metaKey?8:0);switch(p.keyCode){case 0:p.key==="UIKeyInputUpArrow"?x.key=C?f.C0.ESC+"OA":f.C0.ESC+"[A":p.key==="UIKeyInputLeftArrow"?x.key=C?f.C0.ESC+"OD":f.C0.ESC+"[D":p.key==="UIKeyInputRightArrow"?x.key=C?f.C0.ESC+"OC":f.C0.ESC+"[C":p.key==="UIKeyInputDownArrow"&&(x.key=C?f.C0.ESC+"OB":f.C0.ESC+"[B");break;case 8:if(p.altKey){x.key=f.C0.ESC+f.C0.DEL;break}x.key=f.C0.DEL;break;case 9:if(p.shiftKey){x.key=f.C0.ESC+"[Z";break}x.key=f.C0.HT,x.cancel=!0;break;case 13:x.key=p.altKey?f.C0.ESC+f.C0.CR:f.C0.CR,x.cancel=!0;break;case 27:x.key=f.C0.ESC,p.altKey&&(x.key=f.C0.ESC+f.C0.ESC),x.cancel=!0;break;case 37:if(p.metaKey)break;c?(x.key=f.C0.ESC+"[1;"+(c+1)+"D",x.key===f.C0.ESC+"[1;3D"&&(x.key=f.C0.ESC+(T?"b":"[1;5D"))):x.key=C?f.C0.ESC+"OD":f.C0.ESC+"[D";break;case 39:if(p.metaKey)break;c?(x.key=f.C0.ESC+"[1;"+(c+1)+"C",x.key===f.C0.ESC+"[1;3C"&&(x.key=f.C0.ESC+(T?"f":"[1;5C"))):x.key=C?f.C0.ESC+"OC":f.C0.ESC+"[C";break;case 38:if(p.metaKey)break;c?(x.key=f.C0.ESC+"[1;"+(c+1)+"A",T||x.key!==f.C0.ESC+"[1;3A"||(x.key=f.C0.ESC+"[1;5A")):x.key=C?f.C0.ESC+"OA":f.C0.ESC+"[A";break;case 40:if(p.metaKey)break;c?(x.key=f.C0.ESC+"[1;"+(c+1)+"B",T||x.key!==f.C0.ESC+"[1;3B"||(x.key=f.C0.ESC+"[1;5B")):x.key=C?f.C0.ESC+"OB":f.C0.ESC+"[B";break;case 45:p.shiftKey||p.ctrlKey||(x.key=f.C0.ESC+"[2~");break;case 46:x.key=c?f.C0.ESC+"[3;"+(c+1)+"~":f.C0.ESC+"[3~";break;case 36:x.key=c?f.C0.ESC+"[1;"+(c+1)+"H":C?f.C0.ESC+"OH":f.C0.ESC+"[H";break;case 35:x.key=c?f.C0.ESC+"[1;"+(c+1)+"F":C?f.C0.ESC+"OF":f.C0.ESC+"[F";break;case 33:p.shiftKey?x.type=2:p.ctrlKey?x.key=f.C0.ESC+"[5;"+(c+1)+"~":x.key=f.C0.ESC+"[5~";break;case 34:p.shiftKey?x.type=3:p.ctrlKey?x.key=f.C0.ESC+"[6;"+(c+1)+"~":x.key=f.C0.ESC+"[6~";break;case 112:x.key=c?f.C0.ESC+"[1;"+(c+1)+"P":f.C0.ESC+"OP";break;case 113:x.key=c?f.C0.ESC+"[1;"+(c+1)+"Q":f.C0.ESC+"OQ";break;case 114:x.key=c?f.C0.ESC+"[1;"+(c+1)+"R":f.C0.ESC+"OR";break;case 115:x.key=c?f.C0.ESC+"[1;"+(c+1)+"S":f.C0.ESC+"OS";break;case 116:x.key=c?f.C0.ESC+"[15;"+(c+1)+"~":f.C0.ESC+"[15~";break;case 117:x.key=c?f.C0.ESC+"[17;"+(c+1)+"~":f.C0.ESC+"[17~";break;case 118:x.key=c?f.C0.ESC+"[18;"+(c+1)+"~":f.C0.ESC+"[18~";break;case 119:x.key=c?f.C0.ESC+"[19;"+(c+1)+"~":f.C0.ESC+"[19~";break;case 120:x.key=c?f.C0.ESC+"[20;"+(c+1)+"~":f.C0.ESC+"[20~";break;case 121:x.key=c?f.C0.ESC+"[21;"+(c+1)+"~":f.C0.ESC+"[21~";break;case 122:x.key=c?f.C0.ESC+"[23;"+(c+1)+"~":f.C0.ESC+"[23~";break;case 123:x.key=c?f.C0.ESC+"[24;"+(c+1)+"~":f.C0.ESC+"[24~";break;default:if(!p.ctrlKey||p.shiftKey||p.altKey||p.metaKey)if(T&&!E||!p.altKey||p.metaKey)!T||p.altKey||p.ctrlKey||p.shiftKey||!p.metaKey?p.key&&!p.ctrlKey&&!p.altKey&&!p.metaKey&&p.keyCode>=48&&p.key.length===1?x.key=p.key:p.key&&p.ctrlKey&&(p.key==="_"&&(x.key=f.C0.US),p.key==="@"&&(x.key=f.C0.NUL)):p.keyCode===65&&(x.type=1);else{const g=y[p.keyCode],d=g==null?void 0:g[p.shiftKey?1:0];if(d)x.key=f.C0.ESC+d;else if(p.keyCode>=65&&p.keyCode<=90){const m=p.ctrlKey?p.keyCode-64:p.keyCode+32;let S=String.fromCharCode(m);p.shiftKey&&(S=S.toUpperCase()),x.key=f.C0.ESC+S}else if(p.keyCode===32)x.key=f.C0.ESC+(p.ctrlKey?f.C0.NUL:" ");else if(p.key==="Dead"&&p.code.startsWith("Key")){let m=p.code.slice(3,4);p.shiftKey||(m=m.toLowerCase()),x.key=f.C0.ESC+m,x.cancel=!0}}else p.keyCode>=65&&p.keyCode<=90?x.key=String.fromCharCode(p.keyCode-64):p.keyCode===32?x.key=f.C0.NUL:p.keyCode>=51&&p.keyCode<=55?x.key=String.fromCharCode(p.keyCode-51+27):p.keyCode===56?x.key=f.C0.DEL:p.keyCode===219?x.key=f.C0.ESC:p.keyCode===220?x.key=f.C0.FS:p.keyCode===221&&(x.key=f.C0.GS)}return x}},482:(w,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.Utf8ToUtf32=l.StringToUtf32=l.utf32ToString=l.stringFromCodePoint=void 0,l.stringFromCodePoint=function(u){return u>65535?(u-=65536,String.fromCharCode(55296+(u>>10))+String.fromCharCode(u%1024+56320)):String.fromCharCode(u)},l.utf32ToString=function(u,f=0,y=u.length){let p="";for(let C=f;C<y;++C){let T=u[C];T>65535?(T-=65536,p+=String.fromCharCode(55296+(T>>10))+String.fromCharCode(T%1024+56320)):p+=String.fromCharCode(T)}return p},l.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(u,f){const y=u.length;if(!y)return 0;let p=0,C=0;if(this._interim){const T=u.charCodeAt(C++);56320<=T&&T<=57343?f[p++]=1024*(this._interim-55296)+T-56320+65536:(f[p++]=this._interim,f[p++]=T),this._interim=0}for(let T=C;T<y;++T){const E=u.charCodeAt(T);if(55296<=E&&E<=56319){if(++T>=y)return this._interim=E,p;const x=u.charCodeAt(T);56320<=x&&x<=57343?f[p++]=1024*(E-55296)+x-56320+65536:(f[p++]=E,f[p++]=x)}else E!==65279&&(f[p++]=E)}return p}},l.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(u,f){const y=u.length;if(!y)return 0;let p,C,T,E,x=0,c=0,g=0;if(this.interim[0]){let S=!1,b=this.interim[0];b&=(224&b)==192?31:(240&b)==224?15:7;let P,L=0;for(;(P=63&this.interim[++L])&&L<4;)b<<=6,b|=P;const D=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,N=D-L;for(;g<N;){if(g>=y)return 0;if(P=u[g++],(192&P)!=128){g--,S=!0;break}this.interim[L++]=P,b<<=6,b|=63&P}S||(D===2?b<128?g--:f[x++]=b:D===3?b<2048||b>=55296&&b<=57343||b===65279||(f[x++]=b):b<65536||b>1114111||(f[x++]=b)),this.interim.fill(0)}const d=y-4;let m=g;for(;m<y;){for(;!(!(m<d)||128&(p=u[m])||128&(C=u[m+1])||128&(T=u[m+2])||128&(E=u[m+3]));)f[x++]=p,f[x++]=C,f[x++]=T,f[x++]=E,m+=4;if(p=u[m++],p<128)f[x++]=p;else if((224&p)==192){if(m>=y)return this.interim[0]=p,x;if(C=u[m++],(192&C)!=128){m--;continue}if(c=(31&p)<<6|63&C,c<128){m--;continue}f[x++]=c}else if((240&p)==224){if(m>=y)return this.interim[0]=p,x;if(C=u[m++],(192&C)!=128){m--;continue}if(m>=y)return this.interim[0]=p,this.interim[1]=C,x;if(T=u[m++],(192&T)!=128){m--;continue}if(c=(15&p)<<12|(63&C)<<6|63&T,c<2048||c>=55296&&c<=57343||c===65279)continue;f[x++]=c}else if((248&p)==240){if(m>=y)return this.interim[0]=p,x;if(C=u[m++],(192&C)!=128){m--;continue}if(m>=y)return this.interim[0]=p,this.interim[1]=C,x;if(T=u[m++],(192&T)!=128){m--;continue}if(m>=y)return this.interim[0]=p,this.interim[1]=C,this.interim[2]=T,x;if(E=u[m++],(192&E)!=128){m--;continue}if(c=(7&p)<<18|(63&C)<<12|(63&T)<<6|63&E,c<65536||c>1114111)continue;f[x++]=c}}return x}}},225:(w,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.UnicodeV6=void 0;const u=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],f=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let y;l.UnicodeV6=class{constructor(){if(this.version="6",!y){y=new Uint8Array(65536),y.fill(1),y[0]=0,y.fill(0,1,32),y.fill(0,127,160),y.fill(2,4352,4448),y[9001]=2,y[9002]=2,y.fill(2,11904,42192),y[12351]=1,y.fill(2,44032,55204),y.fill(2,63744,64256),y.fill(2,65040,65050),y.fill(2,65072,65136),y.fill(2,65280,65377),y.fill(2,65504,65511);for(let p=0;p<u.length;++p)y.fill(0,u[p][0],u[p][1]+1)}}wcwidth(p){return p<32?0:p<127?1:p<65536?y[p]:function(C,T){let E,x=0,c=T.length-1;if(C<T[0][0]||C>T[c][1])return!1;for(;c>=x;)if(E=x+c>>1,C>T[E][1])x=E+1;else{if(!(C<T[E][0]))return!0;c=E-1}return!1}(p,f)?0:p>=131072&&p<=196605||p>=196608&&p<=262141?2:1}}},5981:(w,l,u)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.WriteBuffer=void 0;const f=u(8460),y=u(844);class p extends y.Disposable{constructor(T){super(),this._action=T,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new f.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(T,E){if(E!==void 0&&this._syncCalls>E)return void(this._syncCalls=0);if(this._pendingData+=T.length,this._writeBuffer.push(T),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let x;for(this._isSyncWriting=!0;x=this._writeBuffer.shift();){this._action(x);const c=this._callbacks.shift();c&&c()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(T,E){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=T.length,this._writeBuffer.push(T),this._callbacks.push(E),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=T.length,this._writeBuffer.push(T),this._callbacks.push(E)}_innerWrite(T=0,E=!0){const x=T||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const c=this._writeBuffer[this._bufferOffset],g=this._action(c,E);if(g){const m=S=>Date.now()-x>=12?setTimeout(()=>this._innerWrite(0,S)):this._innerWrite(x,S);return void g.catch(S=>(queueMicrotask(()=>{throw S}),Promise.resolve(!1))).then(m)}const d=this._callbacks[this._bufferOffset];if(d&&d(),this._bufferOffset++,this._pendingData-=c.length,Date.now()-x>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}l.WriteBuffer=p},5941:(w,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.toRgbString=l.parseColor=void 0;const u=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,f=/^[\da-f]+$/;function y(p,C){const T=p.toString(16),E=T.length<2?"0"+T:T;switch(C){case 4:return T[0];case 8:return E;case 12:return(E+E).slice(0,3);default:return E+E}}l.parseColor=function(p){if(!p)return;let C=p.toLowerCase();if(C.indexOf("rgb:")===0){C=C.slice(4);const T=u.exec(C);if(T){const E=T[1]?15:T[4]?255:T[7]?4095:65535;return[Math.round(parseInt(T[1]||T[4]||T[7]||T[10],16)/E*255),Math.round(parseInt(T[2]||T[5]||T[8]||T[11],16)/E*255),Math.round(parseInt(T[3]||T[6]||T[9]||T[12],16)/E*255)]}}else if(C.indexOf("#")===0&&(C=C.slice(1),f.exec(C)&&[3,6,9,12].includes(C.length))){const T=C.length/3,E=[0,0,0];for(let x=0;x<3;++x){const c=parseInt(C.slice(T*x,T*x+T),16);E[x]=T===1?c<<4:T===2?c:T===3?c>>4:c>>8}return E}},l.toRgbString=function(p,C=16){const[T,E,x]=p;return`rgb:${y(T,C)}/${y(E,C)}/${y(x,C)}`}},5770:(w,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.PAYLOAD_LIMIT=void 0,l.PAYLOAD_LIMIT=1e7},6351:(w,l,u)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.DcsHandler=l.DcsParser=void 0;const f=u(482),y=u(8742),p=u(5770),C=[];l.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=C,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=C}registerHandler(E,x){this._handlers[E]===void 0&&(this._handlers[E]=[]);const c=this._handlers[E];return c.push(x),{dispose:()=>{const g=c.indexOf(x);g!==-1&&c.splice(g,1)}}}clearHandler(E){this._handlers[E]&&delete this._handlers[E]}setHandlerFallback(E){this._handlerFb=E}reset(){if(this._active.length)for(let E=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;E>=0;--E)this._active[E].unhook(!1);this._stack.paused=!1,this._active=C,this._ident=0}hook(E,x){if(this.reset(),this._ident=E,this._active=this._handlers[E]||C,this._active.length)for(let c=this._active.length-1;c>=0;c--)this._active[c].hook(x);else this._handlerFb(this._ident,"HOOK",x)}put(E,x,c){if(this._active.length)for(let g=this._active.length-1;g>=0;g--)this._active[g].put(E,x,c);else this._handlerFb(this._ident,"PUT",(0,f.utf32ToString)(E,x,c))}unhook(E,x=!0){if(this._active.length){let c=!1,g=this._active.length-1,d=!1;if(this._stack.paused&&(g=this._stack.loopPosition-1,c=x,d=this._stack.fallThrough,this._stack.paused=!1),!d&&c===!1){for(;g>=0&&(c=this._active[g].unhook(E),c!==!0);g--)if(c instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=g,this._stack.fallThrough=!1,c;g--}for(;g>=0;g--)if(c=this._active[g].unhook(!1),c instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=g,this._stack.fallThrough=!0,c}else this._handlerFb(this._ident,"UNHOOK",E);this._active=C,this._ident=0}};const T=new y.Params;T.addParam(0),l.DcsHandler=class{constructor(E){this._handler=E,this._data="",this._params=T,this._hitLimit=!1}hook(E){this._params=E.length>1||E.params[0]?E.clone():T,this._data="",this._hitLimit=!1}put(E,x,c){this._hitLimit||(this._data+=(0,f.utf32ToString)(E,x,c),this._data.length>p.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(E){let x=!1;if(this._hitLimit)x=!1;else if(E&&(x=this._handler(this._data,this._params),x instanceof Promise))return x.then(c=>(this._params=T,this._data="",this._hitLimit=!1,c));return this._params=T,this._data="",this._hitLimit=!1,x}}},2015:(w,l,u)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.EscapeSequenceParser=l.VT500_TRANSITION_TABLE=l.TransitionTable=void 0;const f=u(844),y=u(8742),p=u(6242),C=u(6351);class T{constructor(g){this.table=new Uint8Array(g)}setDefault(g,d){this.table.fill(g<<4|d)}add(g,d,m,S){this.table[d<<8|g]=m<<4|S}addMany(g,d,m,S){for(let b=0;b<g.length;b++)this.table[d<<8|g[b]]=m<<4|S}}l.TransitionTable=T;const E=160;l.VT500_TRANSITION_TABLE=function(){const c=new T(4095),g=Array.apply(null,Array(256)).map((L,D)=>D),d=(L,D)=>g.slice(L,D),m=d(32,127),S=d(0,24);S.push(25),S.push.apply(S,d(28,32));const b=d(0,14);let P;for(P in c.setDefault(1,0),c.addMany(m,0,2,0),b)c.addMany([24,26,153,154],P,3,0),c.addMany(d(128,144),P,3,0),c.addMany(d(144,152),P,3,0),c.add(156,P,0,0),c.add(27,P,11,1),c.add(157,P,4,8),c.addMany([152,158,159],P,0,7),c.add(155,P,11,3),c.add(144,P,11,9);return c.addMany(S,0,3,0),c.addMany(S,1,3,1),c.add(127,1,0,1),c.addMany(S,8,0,8),c.addMany(S,3,3,3),c.add(127,3,0,3),c.addMany(S,4,3,4),c.add(127,4,0,4),c.addMany(S,6,3,6),c.addMany(S,5,3,5),c.add(127,5,0,5),c.addMany(S,2,3,2),c.add(127,2,0,2),c.add(93,1,4,8),c.addMany(m,8,5,8),c.add(127,8,5,8),c.addMany([156,27,24,26,7],8,6,0),c.addMany(d(28,32),8,0,8),c.addMany([88,94,95],1,0,7),c.addMany(m,7,0,7),c.addMany(S,7,0,7),c.add(156,7,0,0),c.add(127,7,0,7),c.add(91,1,11,3),c.addMany(d(64,127),3,7,0),c.addMany(d(48,60),3,8,4),c.addMany([60,61,62,63],3,9,4),c.addMany(d(48,60),4,8,4),c.addMany(d(64,127),4,7,0),c.addMany([60,61,62,63],4,0,6),c.addMany(d(32,64),6,0,6),c.add(127,6,0,6),c.addMany(d(64,127),6,0,0),c.addMany(d(32,48),3,9,5),c.addMany(d(32,48),5,9,5),c.addMany(d(48,64),5,0,6),c.addMany(d(64,127),5,7,0),c.addMany(d(32,48),4,9,5),c.addMany(d(32,48),1,9,2),c.addMany(d(32,48),2,9,2),c.addMany(d(48,127),2,10,0),c.addMany(d(48,80),1,10,0),c.addMany(d(81,88),1,10,0),c.addMany([89,90,92],1,10,0),c.addMany(d(96,127),1,10,0),c.add(80,1,11,9),c.addMany(S,9,0,9),c.add(127,9,0,9),c.addMany(d(28,32),9,0,9),c.addMany(d(32,48),9,9,12),c.addMany(d(48,60),9,8,10),c.addMany([60,61,62,63],9,9,10),c.addMany(S,11,0,11),c.addMany(d(32,128),11,0,11),c.addMany(d(28,32),11,0,11),c.addMany(S,10,0,10),c.add(127,10,0,10),c.addMany(d(28,32),10,0,10),c.addMany(d(48,60),10,8,10),c.addMany([60,61,62,63],10,0,11),c.addMany(d(32,48),10,9,12),c.addMany(S,12,0,12),c.add(127,12,0,12),c.addMany(d(28,32),12,0,12),c.addMany(d(32,48),12,9,12),c.addMany(d(48,64),12,0,11),c.addMany(d(64,127),12,12,13),c.addMany(d(64,127),10,12,13),c.addMany(d(64,127),9,12,13),c.addMany(S,13,13,13),c.addMany(m,13,13,13),c.add(127,13,0,13),c.addMany([27,156,24,26],13,14,0),c.add(E,0,2,0),c.add(E,8,5,8),c.add(E,6,0,6),c.add(E,11,0,11),c.add(E,13,13,13),c}();class x extends f.Disposable{constructor(g=l.VT500_TRANSITION_TABLE){super(),this._transitions=g,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new y.Params,this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._printHandlerFb=(d,m,S)=>{},this._executeHandlerFb=d=>{},this._csiHandlerFb=(d,m)=>{},this._escHandlerFb=d=>{},this._errorHandlerFb=d=>d,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,f.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new p.OscParser),this._dcsParser=this.register(new C.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(g,d=[64,126]){let m=0;if(g.prefix){if(g.prefix.length>1)throw new Error("only one byte as prefix supported");if(m=g.prefix.charCodeAt(0),m&&60>m||m>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(g.intermediates){if(g.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let b=0;b<g.intermediates.length;++b){const P=g.intermediates.charCodeAt(b);if(32>P||P>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");m<<=8,m|=P}}if(g.final.length!==1)throw new Error("final must be a single byte");const S=g.final.charCodeAt(0);if(d[0]>S||S>d[1])throw new Error(`final must be in range ${d[0]} .. ${d[1]}`);return m<<=8,m|=S,m}identToString(g){const d=[];for(;g;)d.push(String.fromCharCode(255&g)),g>>=8;return d.reverse().join("")}setPrintHandler(g){this._printHandler=g}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(g,d){const m=this._identifier(g,[48,126]);this._escHandlers[m]===void 0&&(this._escHandlers[m]=[]);const S=this._escHandlers[m];return S.push(d),{dispose:()=>{const b=S.indexOf(d);b!==-1&&S.splice(b,1)}}}clearEscHandler(g){this._escHandlers[this._identifier(g,[48,126])]&&delete this._escHandlers[this._identifier(g,[48,126])]}setEscHandlerFallback(g){this._escHandlerFb=g}setExecuteHandler(g,d){this._executeHandlers[g.charCodeAt(0)]=d}clearExecuteHandler(g){this._executeHandlers[g.charCodeAt(0)]&&delete this._executeHandlers[g.charCodeAt(0)]}setExecuteHandlerFallback(g){this._executeHandlerFb=g}registerCsiHandler(g,d){const m=this._identifier(g);this._csiHandlers[m]===void 0&&(this._csiHandlers[m]=[]);const S=this._csiHandlers[m];return S.push(d),{dispose:()=>{const b=S.indexOf(d);b!==-1&&S.splice(b,1)}}}clearCsiHandler(g){this._csiHandlers[this._identifier(g)]&&delete this._csiHandlers[this._identifier(g)]}setCsiHandlerFallback(g){this._csiHandlerFb=g}registerDcsHandler(g,d){return this._dcsParser.registerHandler(this._identifier(g),d)}clearDcsHandler(g){this._dcsParser.clearHandler(this._identifier(g))}setDcsHandlerFallback(g){this._dcsParser.setHandlerFallback(g)}registerOscHandler(g,d){return this._oscParser.registerHandler(g,d)}clearOscHandler(g){this._oscParser.clearHandler(g)}setOscHandlerFallback(g){this._oscParser.setHandlerFallback(g)}setErrorHandler(g){this._errorHandler=g}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(g,d,m,S,b){this._parseStack.state=g,this._parseStack.handlers=d,this._parseStack.handlerPos=m,this._parseStack.transition=S,this._parseStack.chunkPos=b}parse(g,d,m){let S,b=0,P=0,L=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,L=this._parseStack.chunkPos+1;else{if(m===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");const D=this._parseStack.handlers;let N=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(m===!1&&N>-1){for(;N>=0&&(S=D[N](this._params),S!==!0);N--)if(S instanceof Promise)return this._parseStack.handlerPos=N,S}this._parseStack.handlers=[];break;case 4:if(m===!1&&N>-1){for(;N>=0&&(S=D[N](),S!==!0);N--)if(S instanceof Promise)return this._parseStack.handlerPos=N,S}this._parseStack.handlers=[];break;case 6:if(b=g[this._parseStack.chunkPos],S=this._dcsParser.unhook(b!==24&&b!==26,m),S)return S;b===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(b=g[this._parseStack.chunkPos],S=this._oscParser.end(b!==24&&b!==26,m),S)return S;b===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,L=this._parseStack.chunkPos+1,this.precedingCodepoint=0,this.currentState=15&this._parseStack.transition}for(let D=L;D<d;++D){switch(b=g[D],P=this._transitions.table[this.currentState<<8|(b<160?b:E)],P>>4){case 2:for(let $=D+1;;++$){if($>=d||(b=g[$])<32||b>126&&b<E){this._printHandler(g,D,$),D=$-1;break}if(++$>=d||(b=g[$])<32||b>126&&b<E){this._printHandler(g,D,$),D=$-1;break}if(++$>=d||(b=g[$])<32||b>126&&b<E){this._printHandler(g,D,$),D=$-1;break}if(++$>=d||(b=g[$])<32||b>126&&b<E){this._printHandler(g,D,$),D=$-1;break}}break;case 3:this._executeHandlers[b]?this._executeHandlers[b]():this._executeHandlerFb(b),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:D,code:b,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const N=this._csiHandlers[this._collect<<8|b];let I=N?N.length-1:-1;for(;I>=0&&(S=N[I](this._params),S!==!0);I--)if(S instanceof Promise)return this._preserveStack(3,N,I,P,D),S;I<0&&this._csiHandlerFb(this._collect<<8|b,this._params),this.precedingCodepoint=0;break;case 8:do switch(b){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(b-48)}while(++D<d&&(b=g[D])>47&&b<60);D--;break;case 9:this._collect<<=8,this._collect|=b;break;case 10:const U=this._escHandlers[this._collect<<8|b];let F=U?U.length-1:-1;for(;F>=0&&(S=U[F](),S!==!0);F--)if(S instanceof Promise)return this._preserveStack(4,U,F,P,D),S;F<0&&this._escHandlerFb(this._collect<<8|b),this.precedingCodepoint=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|b,this._params);break;case 13:for(let $=D+1;;++$)if($>=d||(b=g[$])===24||b===26||b===27||b>127&&b<E){this._dcsParser.put(g,D,$),D=$-1;break}break;case 14:if(S=this._dcsParser.unhook(b!==24&&b!==26),S)return this._preserveStack(6,[],0,P,D),S;b===27&&(P|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0;break;case 4:this._oscParser.start();break;case 5:for(let $=D+1;;$++)if($>=d||(b=g[$])<32||b>127&&b<E){this._oscParser.put(g,D,$),D=$-1;break}break;case 6:if(S=this._oscParser.end(b!==24&&b!==26),S)return this._preserveStack(5,[],0,P,D),S;b===27&&(P|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0}this.currentState=15&P}}}l.EscapeSequenceParser=x},6242:(w,l,u)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.OscHandler=l.OscParser=void 0;const f=u(5770),y=u(482),p=[];l.OscParser=class{constructor(){this._state=0,this._active=p,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(C,T){this._handlers[C]===void 0&&(this._handlers[C]=[]);const E=this._handlers[C];return E.push(T),{dispose:()=>{const x=E.indexOf(T);x!==-1&&E.splice(x,1)}}}clearHandler(C){this._handlers[C]&&delete this._handlers[C]}setHandlerFallback(C){this._handlerFb=C}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=p}reset(){if(this._state===2)for(let C=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;C>=0;--C)this._active[C].end(!1);this._stack.paused=!1,this._active=p,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||p,this._active.length)for(let C=this._active.length-1;C>=0;C--)this._active[C].start();else this._handlerFb(this._id,"START")}_put(C,T,E){if(this._active.length)for(let x=this._active.length-1;x>=0;x--)this._active[x].put(C,T,E);else this._handlerFb(this._id,"PUT",(0,y.utf32ToString)(C,T,E))}start(){this.reset(),this._state=1}put(C,T,E){if(this._state!==3){if(this._state===1)for(;T<E;){const x=C[T++];if(x===59){this._state=2,this._start();break}if(x<48||57<x)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+x-48}this._state===2&&E-T>0&&this._put(C,T,E)}}end(C,T=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let E=!1,x=this._active.length-1,c=!1;if(this._stack.paused&&(x=this._stack.loopPosition-1,E=T,c=this._stack.fallThrough,this._stack.paused=!1),!c&&E===!1){for(;x>=0&&(E=this._active[x].end(C),E!==!0);x--)if(E instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=x,this._stack.fallThrough=!1,E;x--}for(;x>=0;x--)if(E=this._active[x].end(!1),E instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=x,this._stack.fallThrough=!0,E}else this._handlerFb(this._id,"END",C);this._active=p,this._id=-1,this._state=0}}},l.OscHandler=class{constructor(C){this._handler=C,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(C,T,E){this._hitLimit||(this._data+=(0,y.utf32ToString)(C,T,E),this._data.length>f.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(C){let T=!1;if(this._hitLimit)T=!1;else if(C&&(T=this._handler(this._data),T instanceof Promise))return T.then(E=>(this._data="",this._hitLimit=!1,E));return this._data="",this._hitLimit=!1,T}}},8742:(w,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.Params=void 0;const u=2147483647;class f{static fromArray(p){const C=new f;if(!p.length)return C;for(let T=Array.isArray(p[0])?1:0;T<p.length;++T){const E=p[T];if(Array.isArray(E))for(let x=0;x<E.length;++x)C.addSubParam(E[x]);else C.addParam(E)}return C}constructor(p=32,C=32){if(this.maxLength=p,this.maxSubParamsLength=C,C>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(p),this.length=0,this._subParams=new Int32Array(C),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(p),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){const p=new f(this.maxLength,this.maxSubParamsLength);return p.params.set(this.params),p.length=this.length,p._subParams.set(this._subParams),p._subParamsLength=this._subParamsLength,p._subParamsIdx.set(this._subParamsIdx),p._rejectDigits=this._rejectDigits,p._rejectSubDigits=this._rejectSubDigits,p._digitIsSub=this._digitIsSub,p}toArray(){const p=[];for(let C=0;C<this.length;++C){p.push(this.params[C]);const T=this._subParamsIdx[C]>>8,E=255&this._subParamsIdx[C];E-T>0&&p.push(Array.prototype.slice.call(this._subParams,T,E))}return p}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(p){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(p<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=p>u?u:p}}addSubParam(p){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(p<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=p>u?u:p,this._subParamsIdx[this.length-1]++}}hasSubParams(p){return(255&this._subParamsIdx[p])-(this._subParamsIdx[p]>>8)>0}getSubParams(p){const C=this._subParamsIdx[p]>>8,T=255&this._subParamsIdx[p];return T-C>0?this._subParams.subarray(C,T):null}getSubParamsAll(){const p={};for(let C=0;C<this.length;++C){const T=this._subParamsIdx[C]>>8,E=255&this._subParamsIdx[C];E-T>0&&(p[C]=this._subParams.slice(T,E))}return p}addDigit(p){let C;if(this._rejectDigits||!(C=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const T=this._digitIsSub?this._subParams:this.params,E=T[C-1];T[C-1]=~E?Math.min(10*E+p,u):p}}l.Params=f},5741:(w,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.AddonManager=void 0,l.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let u=this._addons.length-1;u>=0;u--)this._addons[u].instance.dispose()}loadAddon(u,f){const y={instance:f,dispose:f.dispose,isDisposed:!1};this._addons.push(y),f.dispose=()=>this._wrappedAddonDispose(y),f.activate(u)}_wrappedAddonDispose(u){if(u.isDisposed)return;let f=-1;for(let y=0;y<this._addons.length;y++)if(this._addons[y]===u){f=y;break}if(f===-1)throw new Error("Could not dispose an addon that has not been loaded");u.isDisposed=!0,u.dispose.apply(u.instance),this._addons.splice(f,1)}}},8771:(w,l,u)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.BufferApiView=void 0;const f=u(3785),y=u(511);l.BufferApiView=class{constructor(p,C){this._buffer=p,this.type=C}init(p){return this._buffer=p,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(p){const C=this._buffer.lines.get(p);if(C)return new f.BufferLineApiView(C)}getNullCell(){return new y.CellData}}},3785:(w,l,u)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.BufferLineApiView=void 0;const f=u(511);l.BufferLineApiView=class{constructor(y){this._line=y}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(y,p){if(!(y<0||y>=this._line.length))return p?(this._line.loadCell(y,p),p):this._line.loadCell(y,new f.CellData)}translateToString(y,p,C){return this._line.translateToString(y,p,C)}}},8285:(w,l,u)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.BufferNamespaceApi=void 0;const f=u(8771),y=u(8460),p=u(844);class C extends p.Disposable{constructor(E){super(),this._core=E,this._onBufferChange=this.register(new y.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new f.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new f.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}l.BufferNamespaceApi=C},7975:(w,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.ParserApi=void 0,l.ParserApi=class{constructor(u){this._core=u}registerCsiHandler(u,f){return this._core.registerCsiHandler(u,y=>f(y.toArray()))}addCsiHandler(u,f){return this.registerCsiHandler(u,f)}registerDcsHandler(u,f){return this._core.registerDcsHandler(u,(y,p)=>f(y,p.toArray()))}addDcsHandler(u,f){return this.registerDcsHandler(u,f)}registerEscHandler(u,f){return this._core.registerEscHandler(u,f)}addEscHandler(u,f){return this.registerEscHandler(u,f)}registerOscHandler(u,f){return this._core.registerOscHandler(u,f)}addOscHandler(u,f){return this.registerOscHandler(u,f)}}},7090:(w,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.UnicodeApi=void 0,l.UnicodeApi=class{constructor(u){this._core=u}register(u){this._core.unicodeService.register(u)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(u){this._core.unicodeService.activeVersion=u}}},744:function(w,l,u){var f=this&&this.__decorate||function(c,g,d,m){var S,b=arguments.length,P=b<3?g:m===null?m=Object.getOwnPropertyDescriptor(g,d):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")P=Reflect.decorate(c,g,d,m);else for(var L=c.length-1;L>=0;L--)(S=c[L])&&(P=(b<3?S(P):b>3?S(g,d,P):S(g,d))||P);return b>3&&P&&Object.defineProperty(g,d,P),P},y=this&&this.__param||function(c,g){return function(d,m){g(d,m,c)}};Object.defineProperty(l,"__esModule",{value:!0}),l.BufferService=l.MINIMUM_ROWS=l.MINIMUM_COLS=void 0;const p=u(8460),C=u(844),T=u(5295),E=u(2585);l.MINIMUM_COLS=2,l.MINIMUM_ROWS=1;let x=l.BufferService=class extends C.Disposable{get buffer(){return this.buffers.active}constructor(c){super(),this.isUserScrolling=!1,this._onResize=this.register(new p.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new p.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(c.rawOptions.cols||0,l.MINIMUM_COLS),this.rows=Math.max(c.rawOptions.rows||0,l.MINIMUM_ROWS),this.buffers=this.register(new T.BufferSet(c,this))}resize(c,g){this.cols=c,this.rows=g,this.buffers.resize(c,g),this._onResize.fire({cols:c,rows:g})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(c,g=!1){const d=this.buffer;let m;m=this._cachedBlankLine,m&&m.length===this.cols&&m.getFg(0)===c.fg&&m.getBg(0)===c.bg||(m=d.getBlankLine(c,g),this._cachedBlankLine=m),m.isWrapped=g;const S=d.ybase+d.scrollTop,b=d.ybase+d.scrollBottom;if(d.scrollTop===0){const P=d.lines.isFull;b===d.lines.length-1?P?d.lines.recycle().copyFrom(m):d.lines.push(m.clone()):d.lines.splice(b+1,0,m.clone()),P?this.isUserScrolling&&(d.ydisp=Math.max(d.ydisp-1,0)):(d.ybase++,this.isUserScrolling||d.ydisp++)}else{const P=b-S+1;d.lines.shiftElements(S+1,P-1,-1),d.lines.set(b,m.clone())}this.isUserScrolling||(d.ydisp=d.ybase),this._onScroll.fire(d.ydisp)}scrollLines(c,g,d){const m=this.buffer;if(c<0){if(m.ydisp===0)return;this.isUserScrolling=!0}else c+m.ydisp>=m.ybase&&(this.isUserScrolling=!1);const S=m.ydisp;m.ydisp=Math.max(Math.min(m.ydisp+c,m.ybase),0),S!==m.ydisp&&(g||this._onScroll.fire(m.ydisp))}};l.BufferService=x=f([y(0,E.IOptionsService)],x)},7994:(w,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.CharsetService=void 0,l.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(u){this.glevel=u,this.charset=this._charsets[u]}setgCharset(u,f){this._charsets[u]=f,this.glevel===u&&(this.charset=f)}}},1753:function(w,l,u){var f=this&&this.__decorate||function(m,S,b,P){var L,D=arguments.length,N=D<3?S:P===null?P=Object.getOwnPropertyDescriptor(S,b):P;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")N=Reflect.decorate(m,S,b,P);else for(var I=m.length-1;I>=0;I--)(L=m[I])&&(N=(D<3?L(N):D>3?L(S,b,N):L(S,b))||N);return D>3&&N&&Object.defineProperty(S,b,N),N},y=this&&this.__param||function(m,S){return function(b,P){S(b,P,m)}};Object.defineProperty(l,"__esModule",{value:!0}),l.CoreMouseService=void 0;const p=u(2585),C=u(8460),T=u(844),E={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:m=>m.button!==4&&m.action===1&&(m.ctrl=!1,m.alt=!1,m.shift=!1,!0)},VT200:{events:19,restrict:m=>m.action!==32},DRAG:{events:23,restrict:m=>m.action!==32||m.button!==3},ANY:{events:31,restrict:m=>!0}};function x(m,S){let b=(m.ctrl?16:0)|(m.shift?4:0)|(m.alt?8:0);return m.button===4?(b|=64,b|=m.action):(b|=3&m.button,4&m.button&&(b|=64),8&m.button&&(b|=128),m.action===32?b|=32:m.action!==0||S||(b|=3)),b}const c=String.fromCharCode,g={DEFAULT:m=>{const S=[x(m,!1)+32,m.col+32,m.row+32];return S[0]>255||S[1]>255||S[2]>255?"":`\x1B[M${c(S[0])}${c(S[1])}${c(S[2])}`},SGR:m=>{const S=m.action===0&&m.button!==4?"m":"M";return`\x1B[<${x(m,!0)};${m.col};${m.row}${S}`},SGR_PIXELS:m=>{const S=m.action===0&&m.button!==4?"m":"M";return`\x1B[<${x(m,!0)};${m.x};${m.y}${S}`}};let d=l.CoreMouseService=class extends T.Disposable{constructor(m,S){super(),this._bufferService=m,this._coreService=S,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new C.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const b of Object.keys(E))this.addProtocol(b,E[b]);for(const b of Object.keys(g))this.addEncoding(b,g[b]);this.reset()}addProtocol(m,S){this._protocols[m]=S}addEncoding(m,S){this._encodings[m]=S}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(m){if(!this._protocols[m])throw new Error(`unknown protocol "${m}"`);this._activeProtocol=m,this._onProtocolChange.fire(this._protocols[m].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(m){if(!this._encodings[m])throw new Error(`unknown encoding "${m}"`);this._activeEncoding=m}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(m){if(m.col<0||m.col>=this._bufferService.cols||m.row<0||m.row>=this._bufferService.rows||m.button===4&&m.action===32||m.button===3&&m.action!==32||m.button!==4&&(m.action===2||m.action===3)||(m.col++,m.row++,m.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,m,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(m))return!1;const S=this._encodings[this._activeEncoding](m);return S&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(S):this._coreService.triggerDataEvent(S,!0)),this._lastEvent=m,!0}explainEvents(m){return{down:!!(1&m),up:!!(2&m),drag:!!(4&m),move:!!(8&m),wheel:!!(16&m)}}_equalEvents(m,S,b){if(b){if(m.x!==S.x||m.y!==S.y)return!1}else if(m.col!==S.col||m.row!==S.row)return!1;return m.button===S.button&&m.action===S.action&&m.ctrl===S.ctrl&&m.alt===S.alt&&m.shift===S.shift}};l.CoreMouseService=d=f([y(0,p.IBufferService),y(1,p.ICoreService)],d)},6975:function(w,l,u){var f=this&&this.__decorate||function(d,m,S,b){var P,L=arguments.length,D=L<3?m:b===null?b=Object.getOwnPropertyDescriptor(m,S):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(d,m,S,b);else for(var N=d.length-1;N>=0;N--)(P=d[N])&&(D=(L<3?P(D):L>3?P(m,S,D):P(m,S))||D);return L>3&&D&&Object.defineProperty(m,S,D),D},y=this&&this.__param||function(d,m){return function(S,b){m(S,b,d)}};Object.defineProperty(l,"__esModule",{value:!0}),l.CoreService=void 0;const p=u(1439),C=u(8460),T=u(844),E=u(2585),x=Object.freeze({insertMode:!1}),c=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let g=l.CoreService=class extends T.Disposable{constructor(d,m,S){super(),this._bufferService=d,this._logService=m,this._optionsService=S,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new C.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new C.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new C.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new C.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,p.clone)(x),this.decPrivateModes=(0,p.clone)(c)}reset(){this.modes=(0,p.clone)(x),this.decPrivateModes=(0,p.clone)(c)}triggerDataEvent(d,m=!1){if(this._optionsService.rawOptions.disableStdin)return;const S=this._bufferService.buffer;m&&this._optionsService.rawOptions.scrollOnUserInput&&S.ybase!==S.ydisp&&this._onRequestScrollToBottom.fire(),m&&this._onUserInput.fire(),this._logService.debug(`sending data "${d}"`,()=>d.split("").map(b=>b.charCodeAt(0))),this._onData.fire(d)}triggerBinaryEvent(d){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${d}"`,()=>d.split("").map(m=>m.charCodeAt(0))),this._onBinary.fire(d))}};l.CoreService=g=f([y(0,E.IBufferService),y(1,E.ILogService),y(2,E.IOptionsService)],g)},9074:(w,l,u)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.DecorationService=void 0;const f=u(8055),y=u(8460),p=u(844),C=u(6106);let T=0,E=0;class x extends p.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new C.SortedList(d=>d==null?void 0:d.marker.line),this._onDecorationRegistered=this.register(new y.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new y.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,p.toDisposable)(()=>this.reset()))}registerDecoration(d){if(d.marker.isDisposed)return;const m=new c(d);if(m){const S=m.marker.onDispose(()=>m.dispose());m.onDispose(()=>{m&&(this._decorations.delete(m)&&this._onDecorationRemoved.fire(m),S.dispose())}),this._decorations.insert(m),this._onDecorationRegistered.fire(m)}return m}reset(){for(const d of this._decorations.values())d.dispose();this._decorations.clear()}*getDecorationsAtCell(d,m,S){var b,P,L;let D=0,N=0;for(const I of this._decorations.getKeyIterator(m))D=(b=I.options.x)!==null&&b!==void 0?b:0,N=D+((P=I.options.width)!==null&&P!==void 0?P:1),d>=D&&d<N&&(!S||((L=I.options.layer)!==null&&L!==void 0?L:"bottom")===S)&&(yield I)}forEachDecorationAtCell(d,m,S,b){this._decorations.forEachByKey(m,P=>{var L,D,N;T=(L=P.options.x)!==null&&L!==void 0?L:0,E=T+((D=P.options.width)!==null&&D!==void 0?D:1),d>=T&&d<E&&(!S||((N=P.options.layer)!==null&&N!==void 0?N:"bottom")===S)&&b(P)})}}l.DecorationService=x;class c extends p.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=f.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=f.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(d){super(),this.options=d,this.onRenderEmitter=this.register(new y.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new y.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=d.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(w,l,u)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.InstantiationService=l.ServiceCollection=void 0;const f=u(2585),y=u(8343);class p{constructor(...T){this._entries=new Map;for(const[E,x]of T)this.set(E,x)}set(T,E){const x=this._entries.get(T);return this._entries.set(T,E),x}forEach(T){for(const[E,x]of this._entries.entries())T(E,x)}has(T){return this._entries.has(T)}get(T){return this._entries.get(T)}}l.ServiceCollection=p,l.InstantiationService=class{constructor(){this._services=new p,this._services.set(f.IInstantiationService,this)}setService(C,T){this._services.set(C,T)}getService(C){return this._services.get(C)}createInstance(C,...T){const E=(0,y.getServiceDependencies)(C).sort((g,d)=>g.index-d.index),x=[];for(const g of E){const d=this._services.get(g.id);if(!d)throw new Error(`[createInstance] ${C.name} depends on UNKNOWN service ${g.id}.`);x.push(d)}const c=E.length>0?E[0].index:T.length;if(T.length!==c)throw new Error(`[createInstance] First service dependency of ${C.name} at position ${c+1} conflicts with ${T.length} static arguments`);return new C(...T,...x)}}},7866:function(w,l,u){var f=this&&this.__decorate||function(c,g,d,m){var S,b=arguments.length,P=b<3?g:m===null?m=Object.getOwnPropertyDescriptor(g,d):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")P=Reflect.decorate(c,g,d,m);else for(var L=c.length-1;L>=0;L--)(S=c[L])&&(P=(b<3?S(P):b>3?S(g,d,P):S(g,d))||P);return b>3&&P&&Object.defineProperty(g,d,P),P},y=this&&this.__param||function(c,g){return function(d,m){g(d,m,c)}};Object.defineProperty(l,"__esModule",{value:!0}),l.traceCall=l.setTraceLogger=l.LogService=void 0;const p=u(844),C=u(2585),T={trace:C.LogLevelEnum.TRACE,debug:C.LogLevelEnum.DEBUG,info:C.LogLevelEnum.INFO,warn:C.LogLevelEnum.WARN,error:C.LogLevelEnum.ERROR,off:C.LogLevelEnum.OFF};let E,x=l.LogService=class extends p.Disposable{get logLevel(){return this._logLevel}constructor(c){super(),this._optionsService=c,this._logLevel=C.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),E=this}_updateLogLevel(){this._logLevel=T[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(c){for(let g=0;g<c.length;g++)typeof c[g]=="function"&&(c[g]=c[g]())}_log(c,g,d){this._evalLazyOptionalParams(d),c.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+g,...d)}trace(c,...g){var d,m;this._logLevel<=C.LogLevelEnum.TRACE&&this._log((m=(d=this._optionsService.options.logger)===null||d===void 0?void 0:d.trace.bind(this._optionsService.options.logger))!==null&&m!==void 0?m:console.log,c,g)}debug(c,...g){var d,m;this._logLevel<=C.LogLevelEnum.DEBUG&&this._log((m=(d=this._optionsService.options.logger)===null||d===void 0?void 0:d.debug.bind(this._optionsService.options.logger))!==null&&m!==void 0?m:console.log,c,g)}info(c,...g){var d,m;this._logLevel<=C.LogLevelEnum.INFO&&this._log((m=(d=this._optionsService.options.logger)===null||d===void 0?void 0:d.info.bind(this._optionsService.options.logger))!==null&&m!==void 0?m:console.info,c,g)}warn(c,...g){var d,m;this._logLevel<=C.LogLevelEnum.WARN&&this._log((m=(d=this._optionsService.options.logger)===null||d===void 0?void 0:d.warn.bind(this._optionsService.options.logger))!==null&&m!==void 0?m:console.warn,c,g)}error(c,...g){var d,m;this._logLevel<=C.LogLevelEnum.ERROR&&this._log((m=(d=this._optionsService.options.logger)===null||d===void 0?void 0:d.error.bind(this._optionsService.options.logger))!==null&&m!==void 0?m:console.error,c,g)}};l.LogService=x=f([y(0,C.IOptionsService)],x),l.setTraceLogger=function(c){E=c},l.traceCall=function(c,g,d){if(typeof d.value!="function")throw new Error("not supported");const m=d.value;d.value=function(...S){if(E.logLevel!==C.LogLevelEnum.TRACE)return m.apply(this,S);E.trace(`GlyphRenderer#${m.name}(${S.map(P=>JSON.stringify(P)).join(", ")})`);const b=m.apply(this,S);return E.trace(`GlyphRenderer#${m.name} return`,b),b}}},7302:(w,l,u)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.OptionsService=l.DEFAULT_OPTIONS=void 0;const f=u(8460),y=u(844),p=u(6114);l.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:p.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};const C=["normal","bold","100","200","300","400","500","600","700","800","900"];class T extends y.Disposable{constructor(x){super(),this._onOptionChange=this.register(new f.EventEmitter),this.onOptionChange=this._onOptionChange.event;const c=Object.assign({},l.DEFAULT_OPTIONS);for(const g in x)if(g in c)try{const d=x[g];c[g]=this._sanitizeAndValidateOption(g,d)}catch(d){console.error(d)}this.rawOptions=c,this.options=Object.assign({},c),this._setupOptions()}onSpecificOptionChange(x,c){return this.onOptionChange(g=>{g===x&&c(this.rawOptions[x])})}onMultipleOptionChange(x,c){return this.onOptionChange(g=>{x.indexOf(g)!==-1&&c()})}_setupOptions(){const x=g=>{if(!(g in l.DEFAULT_OPTIONS))throw new Error(`No option with key "${g}"`);return this.rawOptions[g]},c=(g,d)=>{if(!(g in l.DEFAULT_OPTIONS))throw new Error(`No option with key "${g}"`);d=this._sanitizeAndValidateOption(g,d),this.rawOptions[g]!==d&&(this.rawOptions[g]=d,this._onOptionChange.fire(g))};for(const g in this.rawOptions){const d={get:x.bind(this,g),set:c.bind(this,g)};Object.defineProperty(this.options,g,d)}}_sanitizeAndValidateOption(x,c){switch(x){case"cursorStyle":if(c||(c=l.DEFAULT_OPTIONS[x]),!function(g){return g==="block"||g==="underline"||g==="bar"}(c))throw new Error(`"${c}" is not a valid value for ${x}`);break;case"wordSeparator":c||(c=l.DEFAULT_OPTIONS[x]);break;case"fontWeight":case"fontWeightBold":if(typeof c=="number"&&1<=c&&c<=1e3)break;c=C.includes(c)?c:l.DEFAULT_OPTIONS[x];break;case"cursorWidth":c=Math.floor(c);case"lineHeight":case"tabStopWidth":if(c<1)throw new Error(`${x} cannot be less than 1, value: ${c}`);break;case"minimumContrastRatio":c=Math.max(1,Math.min(21,Math.round(10*c)/10));break;case"scrollback":if((c=Math.min(c,4294967295))<0)throw new Error(`${x} cannot be less than 0, value: ${c}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(c<=0)throw new Error(`${x} cannot be less than or equal to 0, value: ${c}`);break;case"rows":case"cols":if(!c&&c!==0)throw new Error(`${x} must be numeric, value: ${c}`);break;case"windowsPty":c=c??{}}return c}}l.OptionsService=T},2660:function(w,l,u){var f=this&&this.__decorate||function(T,E,x,c){var g,d=arguments.length,m=d<3?E:c===null?c=Object.getOwnPropertyDescriptor(E,x):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")m=Reflect.decorate(T,E,x,c);else for(var S=T.length-1;S>=0;S--)(g=T[S])&&(m=(d<3?g(m):d>3?g(E,x,m):g(E,x))||m);return d>3&&m&&Object.defineProperty(E,x,m),m},y=this&&this.__param||function(T,E){return function(x,c){E(x,c,T)}};Object.defineProperty(l,"__esModule",{value:!0}),l.OscLinkService=void 0;const p=u(2585);let C=l.OscLinkService=class{constructor(T){this._bufferService=T,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(T){const E=this._bufferService.buffer;if(T.id===void 0){const S=E.addMarker(E.ybase+E.y),b={data:T,id:this._nextId++,lines:[S]};return S.onDispose(()=>this._removeMarkerFromLink(b,S)),this._dataByLinkId.set(b.id,b),b.id}const x=T,c=this._getEntryIdKey(x),g=this._entriesWithId.get(c);if(g)return this.addLineToLink(g.id,E.ybase+E.y),g.id;const d=E.addMarker(E.ybase+E.y),m={id:this._nextId++,key:this._getEntryIdKey(x),data:x,lines:[d]};return d.onDispose(()=>this._removeMarkerFromLink(m,d)),this._entriesWithId.set(m.key,m),this._dataByLinkId.set(m.id,m),m.id}addLineToLink(T,E){const x=this._dataByLinkId.get(T);if(x&&x.lines.every(c=>c.line!==E)){const c=this._bufferService.buffer.addMarker(E);x.lines.push(c),c.onDispose(()=>this._removeMarkerFromLink(x,c))}}getLinkData(T){var E;return(E=this._dataByLinkId.get(T))===null||E===void 0?void 0:E.data}_getEntryIdKey(T){return`${T.id};;${T.uri}`}_removeMarkerFromLink(T,E){const x=T.lines.indexOf(E);x!==-1&&(T.lines.splice(x,1),T.lines.length===0&&(T.data.id!==void 0&&this._entriesWithId.delete(T.key),this._dataByLinkId.delete(T.id)))}};l.OscLinkService=C=f([y(0,p.IBufferService)],C)},8343:(w,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.createDecorator=l.getServiceDependencies=l.serviceRegistry=void 0;const u="di$target",f="di$dependencies";l.serviceRegistry=new Map,l.getServiceDependencies=function(y){return y[f]||[]},l.createDecorator=function(y){if(l.serviceRegistry.has(y))return l.serviceRegistry.get(y);const p=function(C,T,E){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(x,c,g){c[u]===c?c[f].push({id:x,index:g}):(c[f]=[{id:x,index:g}],c[u]=c)})(p,C,E)};return p.toString=()=>y,l.serviceRegistry.set(y,p),p}},2585:(w,l,u)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.IDecorationService=l.IUnicodeService=l.IOscLinkService=l.IOptionsService=l.ILogService=l.LogLevelEnum=l.IInstantiationService=l.ICharsetService=l.ICoreService=l.ICoreMouseService=l.IBufferService=void 0;const f=u(8343);var y;l.IBufferService=(0,f.createDecorator)("BufferService"),l.ICoreMouseService=(0,f.createDecorator)("CoreMouseService"),l.ICoreService=(0,f.createDecorator)("CoreService"),l.ICharsetService=(0,f.createDecorator)("CharsetService"),l.IInstantiationService=(0,f.createDecorator)("InstantiationService"),function(p){p[p.TRACE=0]="TRACE",p[p.DEBUG=1]="DEBUG",p[p.INFO=2]="INFO",p[p.WARN=3]="WARN",p[p.ERROR=4]="ERROR",p[p.OFF=5]="OFF"}(y||(l.LogLevelEnum=y={})),l.ILogService=(0,f.createDecorator)("LogService"),l.IOptionsService=(0,f.createDecorator)("OptionsService"),l.IOscLinkService=(0,f.createDecorator)("OscLinkService"),l.IUnicodeService=(0,f.createDecorator)("UnicodeService"),l.IDecorationService=(0,f.createDecorator)("DecorationService")},1480:(w,l,u)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.UnicodeService=void 0;const f=u(8460),y=u(225);l.UnicodeService=class{constructor(){this._providers=Object.create(null),this._active="",this._onChange=new f.EventEmitter,this.onChange=this._onChange.event;const p=new y.UnicodeV6;this.register(p),this._active=p.version,this._activeProvider=p}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(p){if(!this._providers[p])throw new Error(`unknown Unicode version "${p}"`);this._active=p,this._activeProvider=this._providers[p],this._onChange.fire(p)}register(p){this._providers[p.version]=p}wcwidth(p){return this._activeProvider.wcwidth(p)}getStringCellWidth(p){let C=0;const T=p.length;for(let E=0;E<T;++E){let x=p.charCodeAt(E);if(55296<=x&&x<=56319){if(++E>=T)return C+this.wcwidth(x);const c=p.charCodeAt(E);56320<=c&&c<=57343?x=1024*(x-55296)+c-56320+65536:C+=this.wcwidth(c)}C+=this.wcwidth(x)}return C}}}},a={};function h(w){var l=a[w];if(l!==void 0)return l.exports;var u=a[w]={exports:{}};return s[w].call(u.exports,u,u.exports,h),u.exports}var _={};return(()=>{var w=_;Object.defineProperty(w,"__esModule",{value:!0}),w.Terminal=void 0;const l=h(9042),u=h(3236),f=h(844),y=h(5741),p=h(8285),C=h(7975),T=h(7090),E=["cols","rows"];class x extends f.Disposable{constructor(g){super(),this._core=this.register(new u.Terminal(g)),this._addonManager=this.register(new y.AddonManager),this._publicOptions=Object.assign({},this._core.options);const d=S=>this._core.options[S],m=(S,b)=>{this._checkReadonlyOptions(S),this._core.options[S]=b};for(const S in this._core.options){const b={get:d.bind(this,S),set:m.bind(this,S)};Object.defineProperty(this._publicOptions,S,b)}}_checkReadonlyOptions(g){if(E.includes(g))throw new Error(`Option "${g}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new C.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new T.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new p.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const g=this._core.coreService.decPrivateModes;let d="none";switch(this._core.coreMouseService.activeProtocol){case"X10":d="x10";break;case"VT200":d="vt200";break;case"DRAG":d="drag";break;case"ANY":d="any"}return{applicationCursorKeysMode:g.applicationCursorKeys,applicationKeypadMode:g.applicationKeypad,bracketedPasteMode:g.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:d,originMode:g.origin,reverseWraparoundMode:g.reverseWraparound,sendFocusMode:g.sendFocus,wraparoundMode:g.wraparound}}get options(){return this._publicOptions}set options(g){for(const d in g)this._publicOptions[d]=g[d]}blur(){this._core.blur()}focus(){this._core.focus()}resize(g,d){this._verifyIntegers(g,d),this._core.resize(g,d)}open(g){this._core.open(g)}attachCustomKeyEventHandler(g){this._core.attachCustomKeyEventHandler(g)}registerLinkProvider(g){return this._core.registerLinkProvider(g)}registerCharacterJoiner(g){return this._checkProposedApi(),this._core.registerCharacterJoiner(g)}deregisterCharacterJoiner(g){this._checkProposedApi(),this._core.deregisterCharacterJoiner(g)}registerMarker(g=0){return this._verifyIntegers(g),this._core.registerMarker(g)}registerDecoration(g){var d,m,S;return this._checkProposedApi(),this._verifyPositiveIntegers((d=g.x)!==null&&d!==void 0?d:0,(m=g.width)!==null&&m!==void 0?m:0,(S=g.height)!==null&&S!==void 0?S:0),this._core.registerDecoration(g)}hasSelection(){return this._core.hasSelection()}select(g,d,m){this._verifyIntegers(g,d,m),this._core.select(g,d,m)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(g,d){this._verifyIntegers(g,d),this._core.selectLines(g,d)}dispose(){super.dispose()}scrollLines(g){this._verifyIntegers(g),this._core.scrollLines(g)}scrollPages(g){this._verifyIntegers(g),this._core.scrollPages(g)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(g){this._verifyIntegers(g),this._core.scrollToLine(g)}clear(){this._core.clear()}write(g,d){this._core.write(g,d)}writeln(g,d){this._core.write(g),this._core.write(`\r
`,d)}paste(g){this._core.paste(g)}refresh(g,d){this._verifyIntegers(g,d),this._core.refresh(g,d)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(g){this._addonManager.loadAddon(this,g)}static get strings(){return l}_verifyIntegers(...g){for(const d of g)if(d===1/0||isNaN(d)||d%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...g){for(const d of g)if(d&&(d===1/0||isNaN(d)||d%1!=0||d<0))throw new Error("This API only accepts positive integers")}}w.Terminal=x})(),_})())}(xterm)),xterm.exports}var xtermExports=requireXterm();const SshSession=({profile:i})=>{const n=reactExports.useRef(null),s=reactExports.useRef(null),a=reactExports.useRef(null),[h,_]=reactExports.useState("connecting"),[w,l]=reactExports.useState(null);reactExports.useEffect(()=>{if(!n.current)return;const f=new xtermExports.Terminal({fontFamily:"Fira Mono, monospace",theme:{background:"#232a39",foreground:"#e0e6f0",cursor:"#bfaaff"},cols:80,rows:24,fontSize:15,cursorBlink:!0});f.open(n.current),s.current=f,_("connecting");const y=`ws://${i.host}:${i.port}/ssh-proxy`,p=new WebSocket(y);return a.current=p,p.onopen=()=>{_("connected"),p.send(JSON.stringify({username:i.username,password:i.password,type:"auth"}))},p.onmessage=C=>{typeof C.data=="string"&&f.write(C.data)},p.onerror=C=>{_("error"),l("WebSocket error")},p.onclose=()=>{_("disconnected")},f.onData(C=>{p.send(JSON.stringify({type:"input",data:C}))}),f.attachCustomKeyEventHandler(C=>(C.ctrlKey&&C.key==="c"&&navigator.clipboard.writeText(f.getSelection()),!0)),()=>{f.dispose(),a.current&&(a.current.close(),a.current=null)}},[i.host,i.port,i.username,i.password]);const u=f=>{alert("File upload via SFTP is not implemented in this demo.")};return jsxRuntimeExports.jsxs("div",{className:"rd-session-ssh",children:[jsxRuntimeExports.jsxs("div",{className:"rd-ssh-status",children:["Status: ",jsxRuntimeExports.jsx("span",{className:`rd-status rd-status--${h}`,children:h.charAt(0).toUpperCase()+h.slice(1)}),w&&jsxRuntimeExports.jsxs("span",{className:"rd-status-error",children:["Error: ",w]})]}),jsxRuntimeExports.jsx("div",{ref:n,className:"rd-ssh-terminal",style:{width:"100%",height:"480px",background:"#232a39",borderRadius:8,marginTop:8}}),jsxRuntimeExports.jsx("div",{style:{marginTop:8},children:jsxRuntimeExports.jsx("input",{type:"file",onChange:u})})]})},TabbedSessions=({sessions:i,activeSession:n,setActiveSession:s,setSessions:a})=>jsxRuntimeExports.jsxs("div",{className:"rd-tabs",children:[jsxRuntimeExports.jsx("div",{className:"rd-tab-bar",children:i.map(h=>jsxRuntimeExports.jsxs("div",{className:`rd-tab${n===h.id?" active":""}`,onClick:()=>s(h.id),children:[h.name,jsxRuntimeExports.jsx("button",{className:"rd-tab-close",onClick:_=>{_.stopPropagation(),a(w=>w.filter(l=>l.id!==h.id))},children:"×"})]},h.id))}),jsxRuntimeExports.jsx("div",{className:"rd-session-content",children:i.map(h=>jsxRuntimeExports.jsxs("div",{style:{display:h.id===n?"block":"none",height:"100%"},children:[h.protocol==="vnc"&&jsxRuntimeExports.jsx(VncSession,{profile:h}),h.protocol==="rdp"&&jsxRuntimeExports.jsx(RdpSession,{profile:h}),h.protocol==="ssh"&&jsxRuntimeExports.jsx(SshSession,{profile:h})]},h.id))})]}),RemoteDesktopIcon=()=>jsxRuntimeExports.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[jsxRuntimeExports.jsx("rect",{x:"3",y:"7",width:"26",height:"16",rx:"3",fill:"#232a39",stroke:"#bfaaff",strokeWidth:"2"}),jsxRuntimeExports.jsx("circle",{cx:"25",cy:"21",r:"2.2",fill:"#bfaaff"}),jsxRuntimeExports.jsx("path",{d:"M6 25c4-3 16-3 20 0",stroke:"#bfaaff",strokeWidth:"1.5",strokeLinecap:"round"}),jsxRuntimeExports.jsx("path",{d:"M11 14h10M11 18h10",stroke:"#bfaaff",strokeWidth:"1.2",strokeLinecap:"round"}),jsxRuntimeExports.jsx("path",{d:"M15 11c0-2.5 5-2.5 5 0",stroke:"#bfaaff",strokeWidth:"1.2",strokeLinecap:"round"}),jsxRuntimeExports.jsx("path",{d:"M21 7c0-1.5-2-2.5-5-2.5s-5 1-5 2.5",stroke:"#bfaaff",strokeWidth:"1.2",strokeLinecap:"round"}),jsxRuntimeExports.jsx("circle",{cx:"27",cy:"5",r:"3",fill:"none",stroke:"#bfaaff",strokeWidth:"1.2"}),jsxRuntimeExports.jsx("path",{d:"M27 3v4M25 5h4",stroke:"#bfaaff",strokeWidth:"1.2",strokeLinecap:"round"})]}),RemoteDesktopApp=()=>{const[i,n]=reactExports.useState([]),[s,a]=reactExports.useState(null),[h,_]=reactExports.useState(!1);return jsxRuntimeExports.jsxs("div",{className:"remote-desktop-app plasma-ui",children:[jsxRuntimeExports.jsxs("header",{className:"rd-header",children:[jsxRuntimeExports.jsx(RemoteDesktopIcon,{}),jsxRuntimeExports.jsx("h2",{children:"Remote Desktop"}),jsxRuntimeExports.jsx("button",{className:"rd-conn-btn",onClick:()=>_(!0),children:"New Connection"})]}),jsxRuntimeExports.jsx(TabbedSessions,{sessions:i,activeSession:s,setActiveSession:a,setSessions:n}),h&&jsxRuntimeExports.jsx(ConnectionManager,{onClose:()=>_(!1),onConnect:w=>{n(l=>[...l,w]),a(w.id),_(!1)}})]})},SIDEBAR_ITEMS=[{id:"apps",label:"Apps",icon:"🧩"},{id:"games",label:"Games",icon:"🕹️"},{id:"widgets",label:"Widgets",icon:"🔲"},{id:"documents",label:"Documents",icon:"📄"},{id:"pictures",label:"Pictures",icon:"🖼️"},{id:"videos",label:"Videos",icon:"🎬"},{id:"power",label:"Power",icon:"⏻"}],StartMenu=({show:i,onClose:n,onLaunchApp:s,onClearSession:a,onLaunchWidget:h=()=>{},apps:_=[],folders:w=[],onOpenFolder:l,onOpenShortcut:u,spotlight:f=!1,doubleClickApps:y=!1})=>{const p=reactExports.useRef(null),[C,T]=reactExports.useState(i),[E,x]=reactExports.useState("apps"),[c,g]=reactExports.useState(!0),[d,m]=reactExports.useState(!0);reactExports.useEffect(()=>{i&&T(!0)},[i]),reactExports.useEffect(()=>{i||g(!1)},[i]);const S=Y=>{i||T(!1)};reactExports.useEffect(()=>{const Y=k=>{(k.key==="Escape"&&k.shiftKey||k.key==="Meta"&&document.fullscreenElement)&&n()};return window.addEventListener("keydown",Y),()=>window.removeEventListener("keydown",Y)},[n]);const b=Y=>{x(Y),g(Y==="apps")},P=Y=>{u&&u(Y)},L={id:"eos",title:"Eos Mail",icon:jsxRuntimeExports.jsx(EosIcon,{}),component:EosApp,width:900,height:650,top:120,left:420},D={id:"remote-desktop",title:"Remote Desktop",icon:jsxRuntimeExports.jsx(RemoteDesktopIcon,{}),component:RemoteDesktopApp,width:900,height:650,top:120,left:420},N={id:"glass-media-player",title:"Media Player",icon:jsxRuntimeExports.jsx(MusicPlayerIcon,{}),component:App,width:500,height:440,top:160,left:480};let I=_?[..._]:[];const U=I.findIndex(Y=>Y.id==="eos");U!==-1&&I.splice(U,1);const F=I.findIndex(Y=>Y.id==="remote-desktop");F!==-1&&I.splice(F,1);const $=I.findIndex(Y=>Y.id==="glass-media-player");$!==-1&&I.splice($,1);const H=I.findIndex(Y=>{var k;return((k=Y.title)==null?void 0:k.toLowerCase())==="terminal"}),z=I.findIndex(Y=>{var k;return(k=Y.title)==null?void 0:k.toLowerCase().includes("nyxium")});return H!==-1&&z!==-1&&H<z?I.splice(z,0,L,N):H!==-1?I.splice(H+1,0,L,N):I.push(L,N),I.push(D),C?jsxRuntimeExports.jsxs("div",{className:`startmenu-root${f?" startmenu-spotlight":""}`,children:[jsxRuntimeExports.jsx("div",{className:"startmenu-overlay",onClick:n}),jsxRuntimeExports.jsxs("div",{className:`startmenu-main glass ${i?"startmenu-open":"startmenu-close"}`,ref:p,onClick:Y=>Y.stopPropagation(),onAnimationEnd:S,tabIndex:-1,children:[jsxRuntimeExports.jsx("nav",{className:`startmenu-sidebar${d?" expanded":""}`,children:SIDEBAR_ITEMS.map(Y=>jsxRuntimeExports.jsxs("button",{className:`sidebar-item${E===Y.id?" active":""}`,onClick:()=>b(Y.id),children:[jsxRuntimeExports.jsx("span",{className:"sidebar-icon",children:Y.icon}),jsxRuntimeExports.jsx("span",{className:"sidebar-label",children:Y.label})]},Y.id))}),jsxRuntimeExports.jsxs("section",{className:"startmenu-content",children:[E==="apps"&&c&&jsxRuntimeExports.jsx("div",{className:"apps-list",children:I.map(Y=>jsxRuntimeExports.jsxs("button",{className:"app-item",onClick:()=>s(Y),children:[jsxRuntimeExports.jsx("span",{className:"app-icon",children:typeof Y.icon=="string"?/^https?:\/\//.test(Y.icon)?jsxRuntimeExports.jsx("img",{src:Y.icon,alt:Y.title?`${Y.title} icon`:"App icon",style:{width:"24px",height:"24px",objectFit:"contain"}}):jsxRuntimeExports.jsx("span",{style:{fontSize:"20px"},children:Y.icon}):Y.icon?Y.icon:jsxRuntimeExports.jsx("span",{style:{width:24,height:24,display:"inline-block",background:"#ccc",borderRadius:4}})}),jsxRuntimeExports.jsx("span",{className:"app-title",children:Y.title})]},Y.id))}),E==="games"&&jsxRuntimeExports.jsx("div",{className:"apps-list",children:[{id:"minecraft",title:"Minecraft",icon:"https://eaglercraft.q13x.com/favicon.ico",component:()=>jsxRuntimeExports.jsx("iframe",{src:"https://eaglercraft.q13x.com/1.8-wasm/?retina=true&scale=0.8",sandbox:"allow-scripts allow-same-origin allow-popups",style:{width:"100%",height:"100%",border:"none"},title:"Minecraft"}),width:900,height:600,top:120,left:420},{id:"duckstation",title:"DuckStation",icon:"🕹️",component:()=>jsxRuntimeExports.jsx(DuckStationApp,{}),width:800,height:600,top:120,left:420},{id:"ppsspp",title:"PPSSPP",icon:"🕹️",component:()=>jsxRuntimeExports.jsx(PPSSPPApp,{}),width:800,height:600,top:120,left:420}].map(Y=>jsxRuntimeExports.jsxs("button",{className:"app-item",onClick:()=>s(Y),children:[jsxRuntimeExports.jsx("span",{className:"app-icon",children:typeof Y.icon=="string"?/^https?:\/\//.test(Y.icon)?jsxRuntimeExports.jsx("img",{src:Y.icon,alt:Y.title?`${Y.title} icon`:"App icon",style:{width:"24px",height:"24px",objectFit:"contain"}}):jsxRuntimeExports.jsx("span",{style:{fontSize:"20px"},children:Y.icon}):Y.icon?Y.icon:jsxRuntimeExports.jsx("span",{style:{width:24,height:24,display:"inline-block",background:"#ccc",borderRadius:4}})}),jsxRuntimeExports.jsx("span",{className:"app-title",children:Y.title})]},Y.id))}),E==="widgets"&&jsxRuntimeExports.jsx("div",{className:"widgets-list",style:{display:"flex",flexDirection:"column",gap:8,padding:"18px 0 0 18px"},children:widgetStubs.map(Y=>jsxRuntimeExports.jsxs("button",{className:"widget-item",onClick:()=>h(Y),children:[jsxRuntimeExports.jsx("span",{style:{fontSize:20},children:Y.icon}),jsxRuntimeExports.jsx("span",{children:Y.title})]},Y.id))}),E==="documents"&&jsxRuntimeExports.jsx("div",{className:"folder-list",children:jsxRuntimeExports.jsx("button",{className:"folder-shortcut",onClick:()=>P("documents"),children:"Open Documents"})}),E==="pictures"&&jsxRuntimeExports.jsx("div",{className:"folder-list",children:jsxRuntimeExports.jsx("button",{className:"folder-shortcut",onClick:()=>P("pictures"),children:"Open Pictures"})}),E==="videos"&&jsxRuntimeExports.jsx("div",{className:"folder-list",children:jsxRuntimeExports.jsx("button",{className:"folder-shortcut",onClick:()=>P("videos"),children:"Open Videos"})}),E==="power"&&jsxRuntimeExports.jsx("div",{className:"power-list",children:jsxRuntimeExports.jsx("button",{className:"power-btn",onClick:a,children:"Power Off (Clear Session)"})})]})]})]}):null},NotificationCenter=({notifications:i})=>jsxRuntimeExports.jsx("div",{className:"notification-center-root",children:i.map((n,s)=>jsxRuntimeExports.jsxs("div",{className:"notification",children:[jsxRuntimeExports.jsx("strong",{children:n.title}),jsxRuntimeExports.jsx("div",{children:n.message})]},s))}),Toast=({title:i,message:n,type:s="info",onClose:a})=>jsxRuntimeExports.jsxs("div",{className:`toast-root toast-${s}`,children:[jsxRuntimeExports.jsx("div",{className:"toast-title",children:i}),jsxRuntimeExports.jsx("div",{className:"toast-message",children:n}),jsxRuntimeExports.jsx("button",{className:"toast-close",onClick:a,"aria-label":"Close notification",children:"✕"})]}),desktopShortcuts=[{id:"explorer",name:"File Explorer",icon:"🗂️",app:"explorer"},{id:"terminal",name:"Terminal",icon:"🖥️",app:"terminal"},{id:"nxyium",name:"Nxyium",icon:"🌐",app:"nxyium"},{id:"package-manager",name:"Package Manager",icon:"📦",app:"package-manager"},{id:"settings",name:"Settings",icon:"⚙️",app:"settings"}],Nyxwallpaper="/INyxOS/assets/Nyxwallpaper-dG7ZI5o2.png";function useRafBatch(i){const n=reactExports.useRef(null),s=reactExports.useRef([]),a=reactExports.useRef(i);return a.current=i,[(...w)=>{s.current=w,n.current==null&&(n.current=requestAnimationFrame(()=>{n.current=null,a.current(...s.current)}))},()=>{n.current!=null&&cancelAnimationFrame(n.current),n.current=null}]}function useDragResize({onMove:i,onResize:n,minWidth:s=320,minHeight:a=180,onSnapPreview:h,onSnap:_}){const w=reactExports.useRef(null),l=reactExports.useRef({dx:0,dy:0}),[u,f]=useRafBatch((x,c)=>{i(x,c)}),y=reactExports.useCallback(x=>{w.current={type:"move",startX:x.clientX,startY:x.clientY},window.addEventListener("mousemove",T),window.addEventListener("mouseup",E)},[]),p=(x,c,g,d)=>{const S=window.innerWidth,b=window.innerHeight;return x<32&&c<32?"topleft":x>S-32&&c<32?"topright":x<32&&c>b-32?"bottomleft":x>S-32&&c>b-32?"bottomright":x<32?"left":x>S-32?"right":c<32?"top":c>b-32?"bottom":null},C=reactExports.useCallback((x,c)=>{x.stopPropagation(),w.current={type:"resize",direction:c,startX:x.clientX,startY:x.clientY},window.addEventListener("mousemove",T),window.addEventListener("mouseup",E)},[]),T=reactExports.useCallback(x=>{if(!w.current)return;const c=x.clientX-w.current.startX,g=x.clientY-w.current.startY;if(w.current.type==="move"){if(l.current={dx:c,dy:g},u(c,g),w.current.startX=x.clientX,w.current.startY=x.clientY,h){const d=p(x.clientX,x.clientY);h(d)}}else w.current.type==="resize"&&(n(c,g,w.current.direction),w.current.startX=x.clientX,w.current.startY=x.clientY)},[u,n,h]),E=reactExports.useCallback(x=>{if(f(),w.current&&w.current.type==="move"&&_){const c=(x==null?void 0:x.clientX)??0,g=(x==null?void 0:x.clientY)??0,d=p(c,g);d&&_(d),h&&h(null)}w.current=null,window.removeEventListener("mousemove",T),window.removeEventListener("mouseup",E)},[T,_,h,f]);return{onDragStart:y,onResizeStart:C}}const Plasmoid=({id:i,children:n,x:s,y:a,zIndex:h=100,onRemove:_,onPositionChange:w,onFocus:l,widgetTitle:u,widgetIcon:f})=>{const y=(T,E)=>{w&&w(i,T,E)},p=()=>{},{onDragStart:C}=useDragResize({onMove:y,onResize:p});return jsxRuntimeExports.jsxs("div",{className:"plasmoid-root",style:{position:"absolute",left:s,top:a,zIndex:h,minWidth:180,minHeight:80,background:"linear-gradient(120deg, rgba(200,120,255,0.28), rgba(255,120,200,0.22)), rgba(44,18,62,0.68)",borderRadius:14,boxShadow:"0 4px 24px #232a3930",userSelect:"none",cursor:"default",pointerEvents:"auto",transition:"box-shadow 0.15s"},tabIndex:0,onMouseDown:C,onClick:()=>l&&l(i),children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 12px 0 12px",cursor:"grab",userSelect:"none"},children:[jsxRuntimeExports.jsxs("span",{style:{fontWeight:700,color:"#fff",fontSize:18,display:"flex",alignItems:"center",gap:8},children:[f&&jsxRuntimeExports.jsx("span",{style:{fontSize:20},children:f})," ",u||"Widget"]}),_&&jsxRuntimeExports.jsx("button",{onClick:()=>_(i),style:{background:"none",color:"#fff",border:"none",fontWeight:700,fontSize:18,cursor:"pointer",marginLeft:8},children:"×"})]}),jsxRuntimeExports.jsx("div",{style:{padding:12},children:n})]})},DesktopContent=()=>{const[i,n]=reactExports.useState(!1),[s]=reactExports.useState(Nyxwallpaper);React.useEffect(()=>{let I;const U=()=>{clearTimeout(I),i||(I=setTimeout(()=>n(!0),3e5))};return window.addEventListener("mousemove",U),window.addEventListener("keydown",U),U(),()=>{clearTimeout(I),window.removeEventListener("mousemove",U),window.removeEventListener("keydown",U)}},[i]),reactExports.useEffect(()=>{const I=F=>{const $=F.detail;h(H=>[...H,{id:"pwa-"+$.id+"-"+Date.now(),title:$.name,icon:$.icon||"🌐",component:function(){return jsxRuntimeExports.jsx("iframe",{src:$.url,sandbox:"allow-scripts allow-forms allow-same-origin allow-popups allow-pointer-lock",allow:"fullscreen; pointer-lock",allowFullScreen:!0,style:{width:"100%",height:"100%",border:"none",background:"#181c25"},title:$.name})},width:700,height:520,top:80+Math.random()*60,left:120+Math.random()*80,zIndex:10}])};window.addEventListener("os-open-pwa",I);const U=F=>{F.detail==="settings"&&h($=>$.filter(H=>H.id!=="settings"&&H.title!=="Settings"))};return window.addEventListener("os-close-app",U),()=>{window.removeEventListener("os-open-pwa",I),window.removeEventListener("os-close-app",U)}},[]);const[a,h]=reactExports.useState(()=>defaultWindows);reactExports.useEffect(()=>{h(I=>I.map(U=>{let F=U.component;if(!F||typeof F!="function"&&!(typeof F=="object"&&F.$$typeof)){const $=appStubs.find(H=>H.id===U.id||H.title===U.title);$&&typeof $.component=="function"&&(F=$.component)}return{...U,component:F}}))},[]);const _=reactExports.useRef(new FileSystem);reactExports.useEffect(()=>{_.current.init()},[]);const{push:w}=useNotifications(),[l,u]=reactExports.useState("medium"),[f,y]=reactExports.useState(()=>desktopShortcuts.map(I=>({id:I.id,name:I.name,icon:I.icon,app:I.app,type:"app",mtime:Date.now(),size:0})));class p extends React.Component{constructor(F){super(F);Wo(this,"resetError",()=>{this.setState({hasError:!1}),this.props.onRecover&&this.props.onRecover()});this.state={hasError:!1}}static getDerivedStateFromError(F){return{hasError:!0}}componentDidCatch(F,$){console.error("Window crashed error:",F,$)}render(){return this.state.hasError?jsxRuntimeExports.jsxs("div",{style:{color:"red",padding:24},children:["App crashed. ",jsxRuntimeExports.jsx("button",{style:{marginLeft:8},onClick:this.resetError,children:"Try Again"}),jsxRuntimeExports.jsx("button",{style:{marginLeft:8},onClick:this.props.onRecover,children:"Close Window"})]}):this.props.children}}const[C,T]=React.useState(!1),[E,x]=reactExports.useState(()=>{const I=localStorage.getItem("os_widgets");if(I)try{return JSON.parse(I)}catch{}return[]});E.reduce((I,U)=>Math.max(I,U.zIndex??100),100);const{notifications:c,remove:g}=useNotifications();React.useEffect(()=>{if(c.length>0){const I=setTimeout(()=>g(c[0].id),3500);return()=>clearTimeout(I)}},[c,g]);const[d,m]=reactExports.useState(!1),[S,b]=reactExports.useState("");reactExports.useEffect(()=>{localStorage.setItem("os_windows",JSON.stringify(a.map(({component:I,...U})=>U)))},[a]),reactExports.useEffect(()=>{localStorage.setItem("os_widgets",JSON.stringify(E))},[E]);const[P,L]=reactExports.useState(null),D=[{label:"View",submenu:[{label:"Large icons",onClick:()=>u("large")},{label:"Medium icons",onClick:()=>u("medium")},{label:"Small icons",onClick:()=>u("small")}]},{label:"Sort By",submenu:[{label:"Name",onClick:()=>y(I=>[...I].sort((U,F)=>U.name.localeCompare(F.name)))},{label:"Date modified",onClick:()=>y(I=>[...I].sort((U,F)=>F.mtime-U.mtime))},{label:"Type",onClick:()=>y(I=>[...I].sort((U,F)=>U.type.localeCompare(F.type)))},{label:"Size",onClick:()=>y(I=>[...I].sort((U,F)=>U.size-F.size))}]},{label:"New Folder",onClick:async()=>{var U;const I=(U=prompt("Folder name","New folder"))==null?void 0:U.trim();I&&(await _.current.mkdir(`/home/user/${I}`),y(F=>[...F,{id:`folder-${Date.now()}`,name:I,icon:"📁",type:"folder",mtime:Date.now(),size:0}]),w({title:"Folder created",message:`Created folder: ${I}`,type:"success"}),window.dispatchEvent(new CustomEvent("fs-change")))}},{label:"Display settings",onClick:()=>{const I=appStubs.find(U=>U.id==="settings");I&&window.dispatchEvent(new CustomEvent("os-open-pwa",{detail:I}))}}],N=I=>[{label:"Open",onClick:()=>{}},{label:"Rename",onClick:()=>{}},{label:"Delete",onClick:()=>{}},{label:"Copy",onClick:()=>{}},{label:"Paste",onClick:()=>{}},{label:"Properties",onClick:()=>{}}];return jsxRuntimeExports.jsxs("div",{className:"desktop-root",onContextMenu:I=>{I.preventDefault();const U={left:I.clientX,top:I.clientY,right:I.clientX,bottom:I.clientY,width:0,height:0};L({anchorRect:U,items:D})},onTouchStart:I=>{let U=setTimeout(()=>{const $=I.touches[0],H={left:$.clientX,top:$.clientY,right:$.clientX,bottom:$.clientY,width:0,height:0};L({anchorRect:H,items:D})},700);const F=()=>clearTimeout(U);window.addEventListener("touchend",F,{once:!0}),window.addEventListener("touchmove",F,{once:!0})},children:[jsxRuntimeExports.jsx(LockScreen,{show:i,onUnlock:()=>n(!1),wallpaperUrl:s}),jsxRuntimeExports.jsx("div",{className:"desktop-icons",children:f.map(I=>{const U=I.type==="app",F=U?appStubs.find(H=>H.id===I.app):null,$=()=>{if(U&&F)h(H=>[...H,{id:Math.random().toString(36).slice(2),title:F.title,icon:F.icon,component:F.component,width:F.width,height:F.height,top:F.top,left:F.left,zIndex:10}]);else if(I.type==="folder"){const H=appStubs.find(z=>z.id==="explorer");H&&window.dispatchEvent(new CustomEvent("os-open-pwa",{detail:H}))}};return jsxRuntimeExports.jsxs("button",{className:`desktop-icon ${l}`,onClick:$,onContextMenu:H=>{H.preventDefault();const z=H.target.getBoundingClientRect();L({anchorRect:z,items:N()})},onTouchStart:H=>{let z=setTimeout(()=>{H.touches[0];const k=H.target.getBoundingClientRect();L({anchorRect:k,items:N()})},700);const Y=()=>clearTimeout(z);window.addEventListener("touchend",Y,{once:!0}),window.addEventListener("touchmove",Y,{once:!0})},children:[jsxRuntimeExports.jsx("span",{className:"desktop-icon-img",children:I.icon}),jsxRuntimeExports.jsx("span",{className:"desktop-icon-label",children:I.name})]},I.id)})}),E.map((I,U)=>{const F=widgetStubs.find($=>$.id===I.widgetId);return F?jsxRuntimeExports.jsx(Plasmoid,{id:I.id,x:I.x??120+40*U,y:I.y??120+40*U,zIndex:I.zIndex??100+U,onRemove:$=>x(H=>H.filter(z=>z.id!==$)),onPositionChange:($,H,z)=>x(Y=>Y.map(k=>k.id===$?{...k,x:(k.x??0)+H,y:(k.y??0)+z}:k)),onFocus:$=>x(H=>{const z=H.reduce((Y,k)=>Math.max(Y,k.zIndex??100),100)+1;return H.map(Y=>Y.id===$?{...Y,zIndex:z}:Y)}),widgetTitle:F.title,widgetIcon:F.icon,children:jsxRuntimeExports.jsx(F.component,{})},I.id):null}),jsxRuntimeExports.jsx(p,{children:jsxRuntimeExports.jsx(WindowManager,{windows:a,setWindows:h})}),jsxRuntimeExports.jsx(Taskbar,{onLauncher:()=>T(I=>!I),windows:a,setWindows:h}),C&&jsxRuntimeExports.jsx(StartMenu,{show:C,onClose:()=>T(!1),onLaunchApp:I=>{h(U=>[...U,{id:Math.random().toString(36).slice(2),title:I.title,icon:I.icon,component:I.component,width:I.width,height:I.height,top:I.top,left:I.left,zIndex:10}]),T(!1)},onLaunchWidget:I=>{x(U=>[...U,{id:"widget-"+I.id+"-"+Date.now(),widgetId:I.id,x:120+30*U.length,y:120+30*U.length,zIndex:100+U.length}]),T(!1)},onClearSession:()=>{h([]),x([]),localStorage.clear(),window.location.reload()},apps:appStubs,folders:[],onOpenFolder:()=>{},onOpenShortcut:I=>{let U="";I==="documents"&&(U="Documents"),I==="pictures"&&(U="Pictures"),I==="videos"&&(U="Videos"),h(F=>[...F,{id:"explorer-"+I+"-"+Date.now(),title:U,icon:"📁",component:()=>jsxRuntimeExports.jsxs("div",{style:{padding:32,color:"#fff"},children:["Folder: ",U]}),width:700,height:520,top:120,left:420,zIndex:10}]),T(!1)},spotlight:!0,doubleClickApps:!0}),jsxRuntimeExports.jsx(NotificationCenter,{notifications:c}),jsxRuntimeExports.jsx("div",{style:{position:"fixed",bottom:60,right:24,zIndex:999},children:c.slice(-2).map(I=>jsxRuntimeExports.jsx(Toast,{title:I.title,message:I.message,type:I.type,onClose:()=>g(I.id)},I.id))}),P&&jsxRuntimeExports.jsx(ModernContextMenu,{anchorRect:P.anchorRect,items:P.items,onClose:()=>L(null)})]})},Desktop=()=>jsxRuntimeExports.jsx(NotificationProvider,{children:jsxRuntimeExports.jsx(DesktopContent,{})}),isString=i=>typeof i=="string",defer=()=>{let i,n;const s=new Promise((a,h)=>{i=a,n=h});return s.resolve=i,s.reject=n,s},makeString=i=>i==null?"":""+i,copy=(i,n,s)=>{i.forEach(a=>{n[a]&&(s[a]=n[a])})},lastOfPathSeparatorRegExp=/###/g,cleanKey=i=>i&&i.indexOf("###")>-1?i.replace(lastOfPathSeparatorRegExp,"."):i,canNotTraverseDeeper=i=>!i||isString(i),getLastOfPath=(i,n,s)=>{const a=isString(n)?n.split("."):n;let h=0;for(;h<a.length-1;){if(canNotTraverseDeeper(i))return{};const _=cleanKey(a[h]);!i[_]&&s&&(i[_]=new s),Object.prototype.hasOwnProperty.call(i,_)?i=i[_]:i={},++h}return canNotTraverseDeeper(i)?{}:{obj:i,k:cleanKey(a[h])}},setPath=(i,n,s)=>{const{obj:a,k:h}=getLastOfPath(i,n,Object);if(a!==void 0||n.length===1){a[h]=s;return}let _=n[n.length-1],w=n.slice(0,n.length-1),l=getLastOfPath(i,w,Object);for(;l.obj===void 0&&w.length;)_=`${w[w.length-1]}.${_}`,w=w.slice(0,w.length-1),l=getLastOfPath(i,w,Object),l!=null&&l.obj&&typeof l.obj[`${l.k}.${_}`]<"u"&&(l.obj=void 0);l.obj[`${l.k}.${_}`]=s},pushPath=(i,n,s,a)=>{const{obj:h,k:_}=getLastOfPath(i,n,Object);h[_]=h[_]||[],h[_].push(s)},getPath=(i,n)=>{const{obj:s,k:a}=getLastOfPath(i,n);if(s&&Object.prototype.hasOwnProperty.call(s,a))return s[a]},getPathWithDefaults=(i,n,s)=>{const a=getPath(i,s);return a!==void 0?a:getPath(n,s)},deepExtend=(i,n,s)=>{for(const a in n)a!=="__proto__"&&a!=="constructor"&&(a in i?isString(i[a])||i[a]instanceof String||isString(n[a])||n[a]instanceof String?s&&(i[a]=n[a]):deepExtend(i[a],n[a],s):i[a]=n[a]);return i},regexEscape=i=>i.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var _entityMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const escape=i=>isString(i)?i.replace(/[&<>"'\/]/g,n=>_entityMap[n]):i;class RegExpCache{constructor(n){this.capacity=n,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(n){const s=this.regExpMap.get(n);if(s!==void 0)return s;const a=new RegExp(n);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(n,a),this.regExpQueue.push(n),a}}const chars=[" ",",","?","!",";"],looksLikeObjectPathRegExpCache=new RegExpCache(20),looksLikeObjectPath=(i,n,s)=>{n=n||"",s=s||"";const a=chars.filter(w=>n.indexOf(w)<0&&s.indexOf(w)<0);if(a.length===0)return!0;const h=looksLikeObjectPathRegExpCache.getRegExp(`(${a.map(w=>w==="?"?"\\?":w).join("|")})`);let _=!h.test(i);if(!_){const w=i.indexOf(s);w>0&&!h.test(i.substring(0,w))&&(_=!0)}return _},deepFind=function(i,n){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!i)return;if(i[n])return Object.prototype.hasOwnProperty.call(i,n)?i[n]:void 0;const a=n.split(s);let h=i;for(let _=0;_<a.length;){if(!h||typeof h!="object")return;let w,l="";for(let u=_;u<a.length;++u)if(u!==_&&(l+=s),l+=a[u],w=h[l],w!==void 0){if(["string","number","boolean"].indexOf(typeof w)>-1&&u<a.length-1)continue;_+=u-_+1;break}h=w}return h},getCleanedCode=i=>i==null?void 0:i.replace("_","-"),consoleLogger={type:"logger",log(i){this.output("log",i)},warn(i){this.output("warn",i)},error(i){this.output("error",i)},output(i,n){var s,a;(a=(s=console==null?void 0:console[i])==null?void 0:s.apply)==null||a.call(s,console,n)}};class Logger{constructor(n){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(n,s)}init(n){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=s.prefix||"i18next:",this.logger=n||consoleLogger,this.options=s,this.debug=s.debug}log(){for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return this.forward(s,"log","",!0)}warn(){for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return this.forward(s,"warn","",!0)}error(){for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return this.forward(s,"error","")}deprecate(){for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return this.forward(s,"warn","WARNING DEPRECATED: ",!0)}forward(n,s,a,h){return h&&!this.debug?null:(isString(n[0])&&(n[0]=`${a}${this.prefix} ${n[0]}`),this.logger[s](n))}create(n){return new Logger(this.logger,{prefix:`${this.prefix}:${n}:`,...this.options})}clone(n){return n=n||this.options,n.prefix=n.prefix||this.prefix,new Logger(this.logger,n)}}var baseLogger=new Logger;class EventEmitter{constructor(){this.observers={}}on(n,s){return n.split(" ").forEach(a=>{this.observers[a]||(this.observers[a]=new Map);const h=this.observers[a].get(s)||0;this.observers[a].set(s,h+1)}),this}off(n,s){if(this.observers[n]){if(!s){delete this.observers[n];return}this.observers[n].delete(s)}}emit(n){for(var s=arguments.length,a=new Array(s>1?s-1:0),h=1;h<s;h++)a[h-1]=arguments[h];this.observers[n]&&Array.from(this.observers[n].entries()).forEach(w=>{let[l,u]=w;for(let f=0;f<u;f++)l(...a)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(w=>{let[l,u]=w;for(let f=0;f<u;f++)l.apply(l,[n,...a])})}}class ResourceStore extends EventEmitter{constructor(n){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=n||{},this.options=s,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(n){this.options.ns.indexOf(n)<0&&this.options.ns.push(n)}removeNamespaces(n){const s=this.options.ns.indexOf(n);s>-1&&this.options.ns.splice(s,1)}getResource(n,s,a){var f,y;let h=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const _=h.keySeparator!==void 0?h.keySeparator:this.options.keySeparator,w=h.ignoreJSONStructure!==void 0?h.ignoreJSONStructure:this.options.ignoreJSONStructure;let l;n.indexOf(".")>-1?l=n.split("."):(l=[n,s],a&&(Array.isArray(a)?l.push(...a):isString(a)&&_?l.push(...a.split(_)):l.push(a)));const u=getPath(this.data,l);return!u&&!s&&!a&&n.indexOf(".")>-1&&(n=l[0],s=l[1],a=l.slice(2).join(".")),u||!w||!isString(a)?u:deepFind((y=(f=this.data)==null?void 0:f[n])==null?void 0:y[s],a,_)}addResource(n,s,a,h){let _=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const w=_.keySeparator!==void 0?_.keySeparator:this.options.keySeparator;let l=[n,s];a&&(l=l.concat(w?a.split(w):a)),n.indexOf(".")>-1&&(l=n.split("."),h=s,s=l[1]),this.addNamespaces(s),setPath(this.data,l,h),_.silent||this.emit("added",n,s,a,h)}addResources(n,s,a){let h=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const _ in a)(isString(a[_])||Array.isArray(a[_]))&&this.addResource(n,s,_,a[_],{silent:!0});h.silent||this.emit("added",n,s,a)}addResourceBundle(n,s,a,h,_){let w=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},l=[n,s];n.indexOf(".")>-1&&(l=n.split("."),h=a,a=s,s=l[1]),this.addNamespaces(s);let u=getPath(this.data,l)||{};w.skipCopy||(a=JSON.parse(JSON.stringify(a))),h?deepExtend(u,a,_):u={...u,...a},setPath(this.data,l,u),w.silent||this.emit("added",n,s,a)}removeResourceBundle(n,s){this.hasResourceBundle(n,s)&&delete this.data[n][s],this.removeNamespaces(s),this.emit("removed",n,s)}hasResourceBundle(n,s){return this.getResource(n,s)!==void 0}getResourceBundle(n,s){return s||(s=this.options.defaultNS),this.getResource(n,s)}getDataByLanguage(n){return this.data[n]}hasLanguageSomeTranslations(n){const s=this.getDataByLanguage(n);return!!(s&&Object.keys(s)||[]).find(h=>s[h]&&Object.keys(s[h]).length>0)}toJSON(){return this.data}}var postProcessor={processors:{},addPostProcessor(i){this.processors[i.name]=i},handle(i,n,s,a,h){return i.forEach(_=>{var w;n=((w=this.processors[_])==null?void 0:w.process(n,s,a,h))??n}),n}};const checkedLoadedFor={},shouldHandleAsObject=i=>!isString(i)&&typeof i!="boolean"&&typeof i!="number";class Translator extends EventEmitter{constructor(n){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),copy(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],n,this),this.options=s,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=baseLogger.create("translator")}changeLanguage(n){n&&(this.language=n)}exists(n){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(n==null)return!1;const a=this.resolve(n,s);return(a==null?void 0:a.res)!==void 0}extractFromKey(n,s){let a=s.nsSeparator!==void 0?s.nsSeparator:this.options.nsSeparator;a===void 0&&(a=":");const h=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator;let _=s.ns||this.options.defaultNS||[];const w=a&&n.indexOf(a)>-1,l=!this.options.userDefinedKeySeparator&&!s.keySeparator&&!this.options.userDefinedNsSeparator&&!s.nsSeparator&&!looksLikeObjectPath(n,a,h);if(w&&!l){const u=n.match(this.interpolator.nestingRegexp);if(u&&u.length>0)return{key:n,namespaces:isString(_)?[_]:_};const f=n.split(a);(a!==h||a===h&&this.options.ns.indexOf(f[0])>-1)&&(_=f.shift()),n=f.join(h)}return{key:n,namespaces:isString(_)?[_]:_}}translate(n,s,a){if(typeof s!="object"&&this.options.overloadTranslationOptionHandler&&(s=this.options.overloadTranslationOptionHandler(arguments)),typeof options=="object"&&(s={...s}),s||(s={}),n==null)return"";Array.isArray(n)||(n=[String(n)]);const h=s.returnDetails!==void 0?s.returnDetails:this.options.returnDetails,_=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,{key:w,namespaces:l}=this.extractFromKey(n[n.length-1],s),u=l[l.length-1],f=s.lng||this.language,y=s.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if((f==null?void 0:f.toLowerCase())==="cimode"){if(y){const U=s.nsSeparator||this.options.nsSeparator;return h?{res:`${u}${U}${w}`,usedKey:w,exactUsedKey:w,usedLng:f,usedNS:u,usedParams:this.getUsedParamsDetails(s)}:`${u}${U}${w}`}return h?{res:w,usedKey:w,exactUsedKey:w,usedLng:f,usedNS:u,usedParams:this.getUsedParamsDetails(s)}:w}const p=this.resolve(n,s);let C=p==null?void 0:p.res;const T=(p==null?void 0:p.usedKey)||w,E=(p==null?void 0:p.exactUsedKey)||w,x=["[object Number]","[object Function]","[object RegExp]"],c=s.joinArrays!==void 0?s.joinArrays:this.options.joinArrays,g=!this.i18nFormat||this.i18nFormat.handleAsObject,d=s.count!==void 0&&!isString(s.count),m=Translator.hasDefaultValue(s),S=d?this.pluralResolver.getSuffix(f,s.count,s):"",b=s.ordinal&&d?this.pluralResolver.getSuffix(f,s.count,{ordinal:!1}):"",P=d&&!s.ordinal&&s.count===0,L=P&&s[`defaultValue${this.options.pluralSeparator}zero`]||s[`defaultValue${S}`]||s[`defaultValue${b}`]||s.defaultValue;let D=C;g&&!C&&m&&(D=L);const N=shouldHandleAsObject(D),I=Object.prototype.toString.apply(D);if(g&&D&&N&&x.indexOf(I)<0&&!(isString(c)&&Array.isArray(D))){if(!s.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const U=this.options.returnedObjectHandler?this.options.returnedObjectHandler(T,D,{...s,ns:l}):`key '${w} (${this.language})' returned an object instead of string.`;return h?(p.res=U,p.usedParams=this.getUsedParamsDetails(s),p):U}if(_){const U=Array.isArray(D),F=U?[]:{},$=U?E:T;for(const H in D)if(Object.prototype.hasOwnProperty.call(D,H)){const z=`${$}${_}${H}`;m&&!C?F[H]=this.translate(z,{...s,defaultValue:shouldHandleAsObject(L)?L[H]:void 0,joinArrays:!1,ns:l}):F[H]=this.translate(z,{...s,joinArrays:!1,ns:l}),F[H]===z&&(F[H]=D[H])}C=F}}else if(g&&isString(c)&&Array.isArray(C))C=C.join(c),C&&(C=this.extendTranslation(C,n,s,a));else{let U=!1,F=!1;!this.isValidLookup(C)&&m&&(U=!0,C=L),this.isValidLookup(C)||(F=!0,C=w);const H=(s.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&F?void 0:C,z=m&&L!==C&&this.options.updateMissing;if(F||U||z){if(this.logger.log(z?"updateKey":"missingKey",f,u,w,z?L:C),_){const A=this.resolve(w,{...s,keySeparator:!1});A&&A.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let Y=[];const k=this.languageUtils.getFallbackCodes(this.options.fallbackLng,s.lng||this.language);if(this.options.saveMissingTo==="fallback"&&k&&k[0])for(let A=0;A<k.length;A++)Y.push(k[A]);else this.options.saveMissingTo==="all"?Y=this.languageUtils.toResolveHierarchy(s.lng||this.language):Y.push(s.lng||this.language);const R=(A,M,B)=>{var q;const G=m&&B!==C?B:H;this.options.missingKeyHandler?this.options.missingKeyHandler(A,u,M,G,z,s):(q=this.backendConnector)!=null&&q.saveMissing&&this.backendConnector.saveMissing(A,u,M,G,z,s),this.emit("missingKey",A,u,M,C)};this.options.saveMissing&&(this.options.saveMissingPlurals&&d?Y.forEach(A=>{const M=this.pluralResolver.getSuffixes(A,s);P&&s[`defaultValue${this.options.pluralSeparator}zero`]&&M.indexOf(`${this.options.pluralSeparator}zero`)<0&&M.push(`${this.options.pluralSeparator}zero`),M.forEach(B=>{R([A],w+B,s[`defaultValue${B}`]||L)})}):R(Y,w,L))}C=this.extendTranslation(C,n,s,p,a),F&&C===w&&this.options.appendNamespaceToMissingKey&&(C=`${u}:${w}`),(F||U)&&this.options.parseMissingKeyHandler&&(C=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${u}:${w}`:w,U?C:void 0))}return h?(p.res=C,p.usedParams=this.getUsedParamsDetails(s),p):C}extendTranslation(n,s,a,h,_){var f,y;var w=this;if((f=this.i18nFormat)!=null&&f.parse)n=this.i18nFormat.parse(n,{...this.options.interpolation.defaultVariables,...a},a.lng||this.language||h.usedLng,h.usedNS,h.usedKey,{resolved:h});else if(!a.skipInterpolation){a.interpolation&&this.interpolator.init({...a,interpolation:{...this.options.interpolation,...a.interpolation}});const p=isString(n)&&(((y=a==null?void 0:a.interpolation)==null?void 0:y.skipOnVariables)!==void 0?a.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let C;if(p){const E=n.match(this.interpolator.nestingRegexp);C=E&&E.length}let T=a.replace&&!isString(a.replace)?a.replace:a;if(this.options.interpolation.defaultVariables&&(T={...this.options.interpolation.defaultVariables,...T}),n=this.interpolator.interpolate(n,T,a.lng||this.language||h.usedLng,a),p){const E=n.match(this.interpolator.nestingRegexp),x=E&&E.length;C<x&&(a.nest=!1)}!a.lng&&h&&h.res&&(a.lng=this.language||h.usedLng),a.nest!==!1&&(n=this.interpolator.nest(n,function(){for(var E=arguments.length,x=new Array(E),c=0;c<E;c++)x[c]=arguments[c];return(_==null?void 0:_[0])===x[0]&&!a.context?(w.logger.warn(`It seems you are nesting recursively key: ${x[0]} in key: ${s[0]}`),null):w.translate(...x,s)},a)),a.interpolation&&this.interpolator.reset()}const l=a.postProcess||this.options.postProcess,u=isString(l)?[l]:l;return n!=null&&(u!=null&&u.length)&&a.applyPostProcessor!==!1&&(n=postProcessor.handle(u,n,s,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...h,usedParams:this.getUsedParamsDetails(a)},...a}:a,this)),n}resolve(n){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a,h,_,w,l;return isString(n)&&(n=[n]),n.forEach(u=>{if(this.isValidLookup(a))return;const f=this.extractFromKey(u,s),y=f.key;h=y;let p=f.namespaces;this.options.fallbackNS&&(p=p.concat(this.options.fallbackNS));const C=s.count!==void 0&&!isString(s.count),T=C&&!s.ordinal&&s.count===0,E=s.context!==void 0&&(isString(s.context)||typeof s.context=="number")&&s.context!=="",x=s.lngs?s.lngs:this.languageUtils.toResolveHierarchy(s.lng||this.language,s.fallbackLng);p.forEach(c=>{var g,d;this.isValidLookup(a)||(l=c,!checkedLoadedFor[`${x[0]}-${c}`]&&((g=this.utils)!=null&&g.hasLoadedNamespace)&&!((d=this.utils)!=null&&d.hasLoadedNamespace(l))&&(checkedLoadedFor[`${x[0]}-${c}`]=!0,this.logger.warn(`key "${h}" for languages "${x.join(", ")}" won't get resolved as namespace "${l}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),x.forEach(m=>{var P;if(this.isValidLookup(a))return;w=m;const S=[y];if((P=this.i18nFormat)!=null&&P.addLookupKeys)this.i18nFormat.addLookupKeys(S,y,m,c,s);else{let L;C&&(L=this.pluralResolver.getSuffix(m,s.count,s));const D=`${this.options.pluralSeparator}zero`,N=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(C&&(S.push(y+L),s.ordinal&&L.indexOf(N)===0&&S.push(y+L.replace(N,this.options.pluralSeparator)),T&&S.push(y+D)),E){const I=`${y}${this.options.contextSeparator}${s.context}`;S.push(I),C&&(S.push(I+L),s.ordinal&&L.indexOf(N)===0&&S.push(I+L.replace(N,this.options.pluralSeparator)),T&&S.push(I+D))}}let b;for(;b=S.pop();)this.isValidLookup(a)||(_=b,a=this.getResource(m,c,b,s))}))})}),{res:a,usedKey:h,exactUsedKey:_,usedLng:w,usedNS:l}}isValidLookup(n){return n!==void 0&&!(!this.options.returnNull&&n===null)&&!(!this.options.returnEmptyString&&n==="")}getResource(n,s,a){var _;let h=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return(_=this.i18nFormat)!=null&&_.getResource?this.i18nFormat.getResource(n,s,a,h):this.resourceStore.getResource(n,s,a,h)}getUsedParamsDetails(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const s=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],a=n.replace&&!isString(n.replace);let h=a?n.replace:n;if(a&&typeof n.count<"u"&&(h.count=n.count),this.options.interpolation.defaultVariables&&(h={...this.options.interpolation.defaultVariables,...h}),!a){h={...h};for(const _ of s)delete h[_]}return h}static hasDefaultValue(n){const s="defaultValue";for(const a in n)if(Object.prototype.hasOwnProperty.call(n,a)&&s===a.substring(0,s.length)&&n[a]!==void 0)return!0;return!1}}class LanguageUtil{constructor(n){this.options=n,this.supportedLngs=this.options.supportedLngs||!1,this.logger=baseLogger.create("languageUtils")}getScriptPartFromCode(n){if(n=getCleanedCode(n),!n||n.indexOf("-")<0)return null;const s=n.split("-");return s.length===2||(s.pop(),s[s.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(s.join("-"))}getLanguagePartFromCode(n){if(n=getCleanedCode(n),!n||n.indexOf("-")<0)return n;const s=n.split("-");return this.formatLanguageCode(s[0])}formatLanguageCode(n){if(isString(n)&&n.indexOf("-")>-1){let s;try{s=Intl.getCanonicalLocales(n)[0]}catch{}return s&&this.options.lowerCaseLng&&(s=s.toLowerCase()),s||(this.options.lowerCaseLng?n.toLowerCase():n)}return this.options.cleanCode||this.options.lowerCaseLng?n.toLowerCase():n}isSupportedCode(n){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(n=this.getLanguagePartFromCode(n)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(n)>-1}getBestMatchFromCodes(n){if(!n)return null;let s;return n.forEach(a=>{if(s)return;const h=this.formatLanguageCode(a);(!this.options.supportedLngs||this.isSupportedCode(h))&&(s=h)}),!s&&this.options.supportedLngs&&n.forEach(a=>{if(s)return;const h=this.getScriptPartFromCode(a);if(this.isSupportedCode(h))return s=h;const _=this.getLanguagePartFromCode(a);if(this.isSupportedCode(_))return s=_;s=this.options.supportedLngs.find(w=>{if(w===_)return w;if(!(w.indexOf("-")<0&&_.indexOf("-")<0)&&(w.indexOf("-")>0&&_.indexOf("-")<0&&w.substring(0,w.indexOf("-"))===_||w.indexOf(_)===0&&_.length>1))return w})}),s||(s=this.getFallbackCodes(this.options.fallbackLng)[0]),s}getFallbackCodes(n,s){if(!n)return[];if(typeof n=="function"&&(n=n(s)),isString(n)&&(n=[n]),Array.isArray(n))return n;if(!s)return n.default||[];let a=n[s];return a||(a=n[this.getScriptPartFromCode(s)]),a||(a=n[this.formatLanguageCode(s)]),a||(a=n[this.getLanguagePartFromCode(s)]),a||(a=n.default),a||[]}toResolveHierarchy(n,s){const a=this.getFallbackCodes(s||this.options.fallbackLng||[],n),h=[],_=w=>{w&&(this.isSupportedCode(w)?h.push(w):this.logger.warn(`rejecting language code not found in supportedLngs: ${w}`))};return isString(n)&&(n.indexOf("-")>-1||n.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&_(this.formatLanguageCode(n)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&_(this.getScriptPartFromCode(n)),this.options.load!=="currentOnly"&&_(this.getLanguagePartFromCode(n))):isString(n)&&_(this.formatLanguageCode(n)),a.forEach(w=>{h.indexOf(w)<0&&_(this.formatLanguageCode(w))}),h}}const suffixesOrder={zero:0,one:1,two:2,few:3,many:4,other:5},dummyRule={select:i=>i===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class PluralResolver{constructor(n){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=n,this.options=s,this.logger=baseLogger.create("pluralResolver"),this.pluralRulesCache={}}addRule(n,s){this.rules[n]=s}clearCache(){this.pluralRulesCache={}}getRule(n){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const a=getCleanedCode(n==="dev"?"en":n),h=s.ordinal?"ordinal":"cardinal",_=JSON.stringify({cleanedCode:a,type:h});if(_ in this.pluralRulesCache)return this.pluralRulesCache[_];let w;try{w=new Intl.PluralRules(a,{type:h})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),dummyRule;if(!n.match(/-|_/))return dummyRule;const u=this.languageUtils.getLanguagePartFromCode(n);w=this.getRule(u,s)}return this.pluralRulesCache[_]=w,w}needsPlural(n){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=this.getRule(n,s);return a||(a=this.getRule("dev",s)),(a==null?void 0:a.resolvedOptions().pluralCategories.length)>1}getPluralFormsOfKey(n,s){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(n,a).map(h=>`${s}${h}`)}getSuffixes(n){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=this.getRule(n,s);return a||(a=this.getRule("dev",s)),a?a.resolvedOptions().pluralCategories.sort((h,_)=>suffixesOrder[h]-suffixesOrder[_]).map(h=>`${this.options.prepend}${s.ordinal?`ordinal${this.options.prepend}`:""}${h}`):[]}getSuffix(n,s){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const h=this.getRule(n,a);return h?`${this.options.prepend}${a.ordinal?`ordinal${this.options.prepend}`:""}${h.select(s)}`:(this.logger.warn(`no plural rule found for: ${n}`),this.getSuffix("dev",s,a))}}const deepFindWithDefaults=function(i,n,s){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",h=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,_=getPathWithDefaults(i,n,s);return!_&&h&&isString(s)&&(_=deepFind(i,s,a),_===void 0&&(_=deepFind(n,s,a))),_},regexSafe=i=>i.replace(/\$/g,"$$$$");class Interpolator{constructor(){var s;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=baseLogger.create("interpolator"),this.options=n,this.format=((s=n==null?void 0:n.interpolation)==null?void 0:s.format)||(a=>a),this.init(n)}init(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};n.interpolation||(n.interpolation={escapeValue:!0});const{escape:s,escapeValue:a,useRawValueToEscape:h,prefix:_,prefixEscaped:w,suffix:l,suffixEscaped:u,formatSeparator:f,unescapeSuffix:y,unescapePrefix:p,nestingPrefix:C,nestingPrefixEscaped:T,nestingSuffix:E,nestingSuffixEscaped:x,nestingOptionsSeparator:c,maxReplaces:g,alwaysFormat:d}=n.interpolation;this.escape=s!==void 0?s:escape,this.escapeValue=a!==void 0?a:!0,this.useRawValueToEscape=h!==void 0?h:!1,this.prefix=_?regexEscape(_):w||"{{",this.suffix=l?regexEscape(l):u||"}}",this.formatSeparator=f||",",this.unescapePrefix=y?"":p||"-",this.unescapeSuffix=this.unescapePrefix?"":y||"",this.nestingPrefix=C?regexEscape(C):T||regexEscape("$t("),this.nestingSuffix=E?regexEscape(E):x||regexEscape(")"),this.nestingOptionsSeparator=c||",",this.maxReplaces=g||1e3,this.alwaysFormat=d!==void 0?d:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const n=(s,a)=>(s==null?void 0:s.source)===a?(s.lastIndex=0,s):new RegExp(a,"g");this.regexp=n(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=n(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=n(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(n,s,a,h){var T;let _,w,l;const u=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},f=E=>{if(E.indexOf(this.formatSeparator)<0){const d=deepFindWithDefaults(s,u,E,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(d,void 0,a,{...h,...s,interpolationkey:E}):d}const x=E.split(this.formatSeparator),c=x.shift().trim(),g=x.join(this.formatSeparator).trim();return this.format(deepFindWithDefaults(s,u,c,this.options.keySeparator,this.options.ignoreJSONStructure),g,a,{...h,...s,interpolationkey:c})};this.resetRegExp();const y=(h==null?void 0:h.missingInterpolationHandler)||this.options.missingInterpolationHandler,p=((T=h==null?void 0:h.interpolation)==null?void 0:T.skipOnVariables)!==void 0?h.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:E=>regexSafe(E)},{regex:this.regexp,safeValue:E=>this.escapeValue?regexSafe(this.escape(E)):regexSafe(E)}].forEach(E=>{for(l=0;_=E.regex.exec(n);){const x=_[1].trim();if(w=f(x),w===void 0)if(typeof y=="function"){const g=y(n,_,h);w=isString(g)?g:""}else if(h&&Object.prototype.hasOwnProperty.call(h,x))w="";else if(p){w=_[0];continue}else this.logger.warn(`missed to pass in variable ${x} for interpolating ${n}`),w="";else!isString(w)&&!this.useRawValueToEscape&&(w=makeString(w));const c=E.safeValue(w);if(n=n.replace(_[0],c),p?(E.regex.lastIndex+=w.length,E.regex.lastIndex-=_[0].length):E.regex.lastIndex=0,l++,l>=this.maxReplaces)break}}),n}nest(n,s){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},h,_,w;const l=(u,f)=>{const y=this.nestingOptionsSeparator;if(u.indexOf(y)<0)return u;const p=u.split(new RegExp(`${y}[ ]*{`));let C=`{${p[1]}`;u=p[0],C=this.interpolate(C,w);const T=C.match(/'/g),E=C.match(/"/g);(((T==null?void 0:T.length)??0)%2===0&&!E||E.length%2!==0)&&(C=C.replace(/'/g,'"'));try{w=JSON.parse(C),f&&(w={...f,...w})}catch(x){return this.logger.warn(`failed parsing options string in nesting for key ${u}`,x),`${u}${y}${C}`}return w.defaultValue&&w.defaultValue.indexOf(this.prefix)>-1&&delete w.defaultValue,u};for(;h=this.nestingRegexp.exec(n);){let u=[];w={...a},w=w.replace&&!isString(w.replace)?w.replace:w,w.applyPostProcessor=!1,delete w.defaultValue;let f=!1;if(h[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(h[1])){const y=h[1].split(this.formatSeparator).map(p=>p.trim());h[1]=y.shift(),u=y,f=!0}if(_=s(l.call(this,h[1].trim(),w),w),_&&h[0]===n&&!isString(_))return _;isString(_)||(_=makeString(_)),_||(this.logger.warn(`missed to resolve ${h[1]} for nesting ${n}`),_=""),f&&(_=u.reduce((y,p)=>this.format(y,p,a.lng,{...a,interpolationkey:h[1].trim()}),_.trim())),n=n.replace(h[0],_),this.regexp.lastIndex=0}return n}}const parseFormatStr=i=>{let n=i.toLowerCase().trim();const s={};if(i.indexOf("(")>-1){const a=i.split("(");n=a[0].toLowerCase().trim();const h=a[1].substring(0,a[1].length-1);n==="currency"&&h.indexOf(":")<0?s.currency||(s.currency=h.trim()):n==="relativetime"&&h.indexOf(":")<0?s.range||(s.range=h.trim()):h.split(";").forEach(w=>{if(w){const[l,...u]=w.split(":"),f=u.join(":").trim().replace(/^'+|'+$/g,""),y=l.trim();s[y]||(s[y]=f),f==="false"&&(s[y]=!1),f==="true"&&(s[y]=!0),isNaN(f)||(s[y]=parseInt(f,10))}})}return{formatName:n,formatOptions:s}},createCachedFormatter=i=>{const n={};return(s,a,h)=>{let _=h;h&&h.interpolationkey&&h.formatParams&&h.formatParams[h.interpolationkey]&&h[h.interpolationkey]&&(_={..._,[h.interpolationkey]:void 0});const w=a+JSON.stringify(_);let l=n[w];return l||(l=i(getCleanedCode(a),h),n[w]=l),l(s)}};class Formatter{constructor(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=baseLogger.create("formatter"),this.options=n,this.formats={number:createCachedFormatter((s,a)=>{const h=new Intl.NumberFormat(s,{...a});return _=>h.format(_)}),currency:createCachedFormatter((s,a)=>{const h=new Intl.NumberFormat(s,{...a,style:"currency"});return _=>h.format(_)}),datetime:createCachedFormatter((s,a)=>{const h=new Intl.DateTimeFormat(s,{...a});return _=>h.format(_)}),relativetime:createCachedFormatter((s,a)=>{const h=new Intl.RelativeTimeFormat(s,{...a});return _=>h.format(_,a.range||"day")}),list:createCachedFormatter((s,a)=>{const h=new Intl.ListFormat(s,{...a});return _=>h.format(_)})},this.init(n)}init(n){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};this.formatSeparator=s.interpolation.formatSeparator||","}add(n,s){this.formats[n.toLowerCase().trim()]=s}addCached(n,s){this.formats[n.toLowerCase().trim()]=createCachedFormatter(s)}format(n,s,a){let h=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const _=s.split(this.formatSeparator);if(_.length>1&&_[0].indexOf("(")>1&&_[0].indexOf(")")<0&&_.find(l=>l.indexOf(")")>-1)){const l=_.findIndex(u=>u.indexOf(")")>-1);_[0]=[_[0],..._.splice(1,l)].join(this.formatSeparator)}return _.reduce((l,u)=>{var p;const{formatName:f,formatOptions:y}=parseFormatStr(u);if(this.formats[f]){let C=l;try{const T=((p=h==null?void 0:h.formatParams)==null?void 0:p[h.interpolationkey])||{},E=T.locale||T.lng||h.locale||h.lng||a;C=this.formats[f](l,E,{...y,...h,...T})}catch(T){this.logger.warn(T)}return C}else this.logger.warn(`there was no format function for ${f}`);return l},n)}}const removePending=(i,n)=>{i.pending[n]!==void 0&&(delete i.pending[n],i.pendingCount--)};class Connector extends EventEmitter{constructor(n,s,a){var _,w;let h=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=n,this.store=s,this.services=a,this.languageUtils=a.languageUtils,this.options=h,this.logger=baseLogger.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=h.maxParallelReads||10,this.readingCalls=0,this.maxRetries=h.maxRetries>=0?h.maxRetries:5,this.retryTimeout=h.retryTimeout>=1?h.retryTimeout:350,this.state={},this.queue=[],(w=(_=this.backend)==null?void 0:_.init)==null||w.call(_,a,h.backend,h)}queueLoad(n,s,a,h){const _={},w={},l={},u={};return n.forEach(f=>{let y=!0;s.forEach(p=>{const C=`${f}|${p}`;!a.reload&&this.store.hasResourceBundle(f,p)?this.state[C]=2:this.state[C]<0||(this.state[C]===1?w[C]===void 0&&(w[C]=!0):(this.state[C]=1,y=!1,w[C]===void 0&&(w[C]=!0),_[C]===void 0&&(_[C]=!0),u[p]===void 0&&(u[p]=!0)))}),y||(l[f]=!0)}),(Object.keys(_).length||Object.keys(w).length)&&this.queue.push({pending:w,pendingCount:Object.keys(w).length,loaded:{},errors:[],callback:h}),{toLoad:Object.keys(_),pending:Object.keys(w),toLoadLanguages:Object.keys(l),toLoadNamespaces:Object.keys(u)}}loaded(n,s,a){const h=n.split("|"),_=h[0],w=h[1];s&&this.emit("failedLoading",_,w,s),!s&&a&&this.store.addResourceBundle(_,w,a,void 0,void 0,{skipCopy:!0}),this.state[n]=s?-1:2,s&&a&&(this.state[n]=0);const l={};this.queue.forEach(u=>{pushPath(u.loaded,[_],w),removePending(u,n),s&&u.errors.push(s),u.pendingCount===0&&!u.done&&(Object.keys(u.loaded).forEach(f=>{l[f]||(l[f]={});const y=u.loaded[f];y.length&&y.forEach(p=>{l[f][p]===void 0&&(l[f][p]=!0)})}),u.done=!0,u.errors.length?u.callback(u.errors):u.callback())}),this.emit("loaded",l),this.queue=this.queue.filter(u=>!u.done)}read(n,s,a){let h=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,_=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,w=arguments.length>5?arguments[5]:void 0;if(!n.length)return w(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:n,ns:s,fcName:a,tried:h,wait:_,callback:w});return}this.readingCalls++;const l=(f,y)=>{if(this.readingCalls--,this.waitingReads.length>0){const p=this.waitingReads.shift();this.read(p.lng,p.ns,p.fcName,p.tried,p.wait,p.callback)}if(f&&y&&h<this.maxRetries){setTimeout(()=>{this.read.call(this,n,s,a,h+1,_*2,w)},_);return}w(f,y)},u=this.backend[a].bind(this.backend);if(u.length===2){try{const f=u(n,s);f&&typeof f.then=="function"?f.then(y=>l(null,y)).catch(l):l(null,f)}catch(f){l(f)}return}return u(n,s,l)}prepareLoading(n,s){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},h=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),h&&h();isString(n)&&(n=this.languageUtils.toResolveHierarchy(n)),isString(s)&&(s=[s]);const _=this.queueLoad(n,s,a,h);if(!_.toLoad.length)return _.pending.length||h(),null;_.toLoad.forEach(w=>{this.loadOne(w)})}load(n,s,a){this.prepareLoading(n,s,{},a)}reload(n,s,a){this.prepareLoading(n,s,{reload:!0},a)}loadOne(n){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const a=n.split("|"),h=a[0],_=a[1];this.read(h,_,"read",void 0,void 0,(w,l)=>{w&&this.logger.warn(`${s}loading namespace ${_} for language ${h} failed`,w),!w&&l&&this.logger.log(`${s}loaded namespace ${_} for language ${h}`,l),this.loaded(n,w,l)})}saveMissing(n,s,a,h,_){var u,f,y,p,C;let w=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},l=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if((f=(u=this.services)==null?void 0:u.utils)!=null&&f.hasLoadedNamespace&&!((p=(y=this.services)==null?void 0:y.utils)!=null&&p.hasLoadedNamespace(s))){this.logger.warn(`did not save key "${a}" as the namespace "${s}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(a==null||a==="")){if((C=this.backend)!=null&&C.create){const T={...w,isUpdate:_},E=this.backend.create.bind(this.backend);if(E.length<6)try{let x;E.length===5?x=E(n,s,a,h,T):x=E(n,s,a,h),x&&typeof x.then=="function"?x.then(c=>l(null,c)).catch(l):l(null,x)}catch(x){l(x)}else E(n,s,a,h,l,T)}!n||!n[0]||this.store.addResource(n[0],s,a,h)}}}const get=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:i=>{let n={};if(typeof i[1]=="object"&&(n=i[1]),isString(i[1])&&(n.defaultValue=i[1]),isString(i[2])&&(n.tDescription=i[2]),typeof i[2]=="object"||typeof i[3]=="object"){const s=i[3]||i[2];Object.keys(s).forEach(a=>{n[a]=s[a]})}return n},interpolation:{escapeValue:!0,format:i=>i,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),transformOptions=i=>{var n,s;return isString(i.ns)&&(i.ns=[i.ns]),isString(i.fallbackLng)&&(i.fallbackLng=[i.fallbackLng]),isString(i.fallbackNS)&&(i.fallbackNS=[i.fallbackNS]),((s=(n=i.supportedLngs)==null?void 0:n.indexOf)==null?void 0:s.call(n,"cimode"))<0&&(i.supportedLngs=i.supportedLngs.concat(["cimode"])),typeof i.initImmediate=="boolean"&&(i.initAsync=i.initImmediate),i},noop=()=>{},bindMemberFunctions=i=>{Object.getOwnPropertyNames(Object.getPrototypeOf(i)).forEach(s=>{typeof i[s]=="function"&&(i[s]=i[s].bind(i))})};class I18n extends EventEmitter{constructor(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=arguments.length>1?arguments[1]:void 0;if(super(),this.options=transformOptions(n),this.services={},this.logger=baseLogger,this.modules={external:[]},bindMemberFunctions(this),s&&!this.isInitialized&&!n.isClone){if(!this.options.initAsync)return this.init(n,s),this;setTimeout(()=>{this.init(n,s)},0)}}init(){var n=this;let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof s=="function"&&(a=s,s={}),s.defaultNS==null&&s.ns&&(isString(s.ns)?s.defaultNS=s.ns:s.ns.indexOf("translation")<0&&(s.defaultNS=s.ns[0]));const h=get();this.options={...h,...this.options,...transformOptions(s)},this.options.interpolation={...h.interpolation,...this.options.interpolation},s.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=s.keySeparator),s.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=s.nsSeparator);const _=y=>y?typeof y=="function"?new y:y:null;if(!this.options.isClone){this.modules.logger?baseLogger.init(_(this.modules.logger),this.options):baseLogger.init(null,this.options);let y;this.modules.formatter?y=this.modules.formatter:y=Formatter;const p=new LanguageUtil(this.options);this.store=new ResourceStore(this.options.resources,this.options);const C=this.services;C.logger=baseLogger,C.resourceStore=this.store,C.languageUtils=p,C.pluralResolver=new PluralResolver(p,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),y&&(!this.options.interpolation.format||this.options.interpolation.format===h.interpolation.format)&&(C.formatter=_(y),C.formatter.init(C,this.options),this.options.interpolation.format=C.formatter.format.bind(C.formatter)),C.interpolator=new Interpolator(this.options),C.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},C.backendConnector=new Connector(_(this.modules.backend),C.resourceStore,C,this.options),C.backendConnector.on("*",function(T){for(var E=arguments.length,x=new Array(E>1?E-1:0),c=1;c<E;c++)x[c-1]=arguments[c];n.emit(T,...x)}),this.modules.languageDetector&&(C.languageDetector=_(this.modules.languageDetector),C.languageDetector.init&&C.languageDetector.init(C,this.options.detection,this.options)),this.modules.i18nFormat&&(C.i18nFormat=_(this.modules.i18nFormat),C.i18nFormat.init&&C.i18nFormat.init(this)),this.translator=new Translator(this.services,this.options),this.translator.on("*",function(T){for(var E=arguments.length,x=new Array(E>1?E-1:0),c=1;c<E;c++)x[c-1]=arguments[c];n.emit(T,...x)}),this.modules.external.forEach(T=>{T.init&&T.init(this)})}if(this.format=this.options.interpolation.format,a||(a=noop),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const y=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);y.length>0&&y[0]!=="dev"&&(this.options.lng=y[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(y=>{this[y]=function(){return n.store[y](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(y=>{this[y]=function(){return n.store[y](...arguments),n}});const u=defer(),f=()=>{const y=(p,C)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),u.resolve(C),a(p,C)};if(this.languages&&!this.isInitialized)return y(null,this.t.bind(this));this.changeLanguage(this.options.lng,y)};return this.options.resources||!this.options.initAsync?f():setTimeout(f,0),u}loadResources(n){var _,w;let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:noop;const h=isString(n)?n:this.language;if(typeof n=="function"&&(a=n),!this.options.resources||this.options.partialBundledLanguages){if((h==null?void 0:h.toLowerCase())==="cimode"&&(!this.options.preload||this.options.preload.length===0))return a();const l=[],u=f=>{if(!f||f==="cimode")return;this.services.languageUtils.toResolveHierarchy(f).forEach(p=>{p!=="cimode"&&l.indexOf(p)<0&&l.push(p)})};h?u(h):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(y=>u(y)),(w=(_=this.options.preload)==null?void 0:_.forEach)==null||w.call(_,f=>u(f)),this.services.backendConnector.load(l,this.options.ns,f=>{!f&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),a(f)})}else a(null)}reloadResources(n,s,a){const h=defer();return typeof n=="function"&&(a=n,n=void 0),typeof s=="function"&&(a=s,s=void 0),n||(n=this.languages),s||(s=this.options.ns),a||(a=noop),this.services.backendConnector.reload(n,s,_=>{h.resolve(),a(_)}),h}use(n){if(!n)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!n.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return n.type==="backend"&&(this.modules.backend=n),(n.type==="logger"||n.log&&n.warn&&n.error)&&(this.modules.logger=n),n.type==="languageDetector"&&(this.modules.languageDetector=n),n.type==="i18nFormat"&&(this.modules.i18nFormat=n),n.type==="postProcessor"&&postProcessor.addPostProcessor(n),n.type==="formatter"&&(this.modules.formatter=n),n.type==="3rdParty"&&this.modules.external.push(n),this}setResolvedLanguage(n){if(!(!n||!this.languages)&&!(["cimode","dev"].indexOf(n)>-1)){for(let s=0;s<this.languages.length;s++){const a=this.languages[s];if(!(["cimode","dev"].indexOf(a)>-1)&&this.store.hasLanguageSomeTranslations(a)){this.resolvedLanguage=a;break}}!this.resolvedLanguage&&this.languages.indexOf(n)<0&&this.store.hasLanguageSomeTranslations(n)&&(this.resolvedLanguage=n,this.languages.indexOf(n)<0&&this.languages.unshift(n))}}changeLanguage(n,s){var a=this;this.isLanguageChangingTo=n;const h=defer();this.emit("languageChanging",n);const _=u=>{this.language=u,this.languages=this.services.languageUtils.toResolveHierarchy(u),this.resolvedLanguage=void 0,this.setResolvedLanguage(u)},w=(u,f)=>{f?this.isLanguageChangingTo===n&&(_(f),this.translator.changeLanguage(f),this.isLanguageChangingTo=void 0,this.emit("languageChanged",f),this.logger.log("languageChanged",f)):this.isLanguageChangingTo=void 0,h.resolve(function(){return a.t(...arguments)}),s&&s(u,function(){return a.t(...arguments)})},l=u=>{var p,C;!n&&!u&&this.services.languageDetector&&(u=[]);const f=isString(u)?u:u&&u[0],y=this.store.hasLanguageSomeTranslations(f)?f:this.services.languageUtils.getBestMatchFromCodes(isString(u)?[u]:u);y&&(this.language||_(y),this.translator.language||this.translator.changeLanguage(y),(C=(p=this.services.languageDetector)==null?void 0:p.cacheUserLanguage)==null||C.call(p,y)),this.loadResources(y,T=>{w(T,y)})};return!n&&this.services.languageDetector&&!this.services.languageDetector.async?l(this.services.languageDetector.detect()):!n&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(l):this.services.languageDetector.detect(l):l(n),h}getFixedT(n,s,a){var h=this;const _=function(w,l){let u;if(typeof l!="object"){for(var f=arguments.length,y=new Array(f>2?f-2:0),p=2;p<f;p++)y[p-2]=arguments[p];u=h.options.overloadTranslationOptionHandler([w,l].concat(y))}else u={...l};u.lng=u.lng||_.lng,u.lngs=u.lngs||_.lngs,u.ns=u.ns||_.ns,u.keyPrefix!==""&&(u.keyPrefix=u.keyPrefix||a||_.keyPrefix);const C=h.options.keySeparator||".";let T;return u.keyPrefix&&Array.isArray(w)?T=w.map(E=>`${u.keyPrefix}${C}${E}`):T=u.keyPrefix?`${u.keyPrefix}${C}${w}`:w,h.t(T,u)};return isString(n)?_.lng=n:_.lngs=n,_.ns=s,_.keyPrefix=a,_}t(){var h;for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return(h=this.translator)==null?void 0:h.translate(...s)}exists(){var h;for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return(h=this.translator)==null?void 0:h.exists(...s)}setDefaultNamespace(n){this.options.defaultNS=n}hasLoadedNamespace(n){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const a=s.lng||this.resolvedLanguage||this.languages[0],h=this.options?this.options.fallbackLng:!1,_=this.languages[this.languages.length-1];if(a.toLowerCase()==="cimode")return!0;const w=(l,u)=>{const f=this.services.backendConnector.state[`${l}|${u}`];return f===-1||f===0||f===2};if(s.precheck){const l=s.precheck(this,w);if(l!==void 0)return l}return!!(this.hasResourceBundle(a,n)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||w(a,n)&&(!h||w(_,n)))}loadNamespaces(n,s){const a=defer();return this.options.ns?(isString(n)&&(n=[n]),n.forEach(h=>{this.options.ns.indexOf(h)<0&&this.options.ns.push(h)}),this.loadResources(h=>{a.resolve(),s&&s(h)}),a):(s&&s(),Promise.resolve())}loadLanguages(n,s){const a=defer();isString(n)&&(n=[n]);const h=this.options.preload||[],_=n.filter(w=>h.indexOf(w)<0&&this.services.languageUtils.isSupportedCode(w));return _.length?(this.options.preload=h.concat(_),this.loadResources(w=>{a.resolve(),s&&s(w)}),a):(s&&s(),Promise.resolve())}dir(n){var h,_;if(n||(n=this.resolvedLanguage||(((h=this.languages)==null?void 0:h.length)>0?this.languages[0]:this.language)),!n)return"rtl";const s=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],a=((_=this.services)==null?void 0:_.languageUtils)||new LanguageUtil(get());return s.indexOf(a.getLanguagePartFromCode(n))>-1||n.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=arguments.length>1?arguments[1]:void 0;return new I18n(n,s)}cloneInstance(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:noop;const a=n.forkResourceStore;a&&delete n.forkResourceStore;const h={...this.options,...n,isClone:!0},_=new I18n(h);if((n.debug!==void 0||n.prefix!==void 0)&&(_.logger=_.logger.clone(n)),["store","services","language"].forEach(l=>{_[l]=this[l]}),_.services={...this.services},_.services.utils={hasLoadedNamespace:_.hasLoadedNamespace.bind(_)},a){const l=Object.keys(this.store.data).reduce((u,f)=>(u[f]={...this.store.data[f]},Object.keys(u[f]).reduce((y,p)=>(y[p]={...u[f][p]},y),{})),{});_.store=new ResourceStore(l,h),_.services.resourceStore=_.store}return _.translator=new Translator(_.services,h),_.translator.on("*",function(l){for(var u=arguments.length,f=new Array(u>1?u-1:0),y=1;y<u;y++)f[y-1]=arguments[y];_.emit(l,...f)}),_.init(h,s),_.translator.options=h,_.translator.backendConnector.services.utils={hasLoadedNamespace:_.hasLoadedNamespace.bind(_)},_}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const instance=I18n.createInstance();instance.createInstance=I18n.createInstance;instance.createInstance;instance.dir;instance.init;instance.loadResources;instance.reloadResources;instance.use;instance.changeLanguage;instance.getFixedT;instance.t;instance.exists;instance.setDefaultNamespace;instance.hasLoadedNamespace;instance.loadNamespaces;instance.loadLanguages;const settings$4={title:"Settings",tabs:{appearance:"Appearance",accessibility:"Accessibility",privacy:"Privacy",updates:"Updates",nexa:"Nexa Assistant",language:"Language",about:"About"},appearance:{theme:"Theme",fontFamily:"Font Family",fontSize:"Font Size",cursorAcceleration:"Cursor Acceleration",touchSwipe:"Two-finger swipe",touchPinch:"Pinch-zoom",vsync:"VSync",customFontsInfo:"Place custom fonts (.ttf/.otf) in /assets/fonts/",systemUi:"System UI",custom:"Custom..."},accessibility:{highContrast:"High Contrast",screenReader:"Screen Reader",windowMagnifier:"Window Magnifier",colorBlind:"Color Blind Mode",reduceMotion:"Reduce Motion"},privacy:{location:"Location Services",telemetry:"Telemetry",animations:"Desktop Animations",sounds:"Sound Effects",nightLight:"Night Light",dnd:"Do Not Disturb"},updates:{autoUpdate:"Auto Update",checkNow:"Check Now"},language:{language:"Language",keymap:"Keymap",dateFormat:"Date Format",timeZone:"Time Zone",qwerty:"QWERTY",colemak:"Colemak",dvorak:"Dvorak",mmddyyyy:"MM/DD/YYYY",ddmmyyyy:"DD/MM/YYYY",yyyymmdd:"YYYY-MM-DD"},nexa:{selectModel:"Select model",testingModel:"Testing model...",testSuccessful:"Test successful:",testFailed:"Test failed:",currentModel:"Current Model:",gpuWorkers:"GPU Workers",usageDashboard:"Usage Dashboard",totalCalls:"Total Calls:",totalTokens:"Total Tokens:",lastLatency:"Last Latency:",estimatedCost:"Estimated Cost:"},about:{text:"NyxOS is a fast, lightweight OS running locally in your browser."}},taskbar={openLauncher:"Open Launcher",notifications:"Notifications",showHiddenIcons:"Show hidden icons",hideHiddenIcons:"Hide hidden icons",actionCenter:"Action Center",startMenu:"Start Menu",nexaAi:"Nexa AI"},startMenu={apps:"Apps",games:"Games",widgets:"Widgets",documents:"Documents",pictures:"Pictures",videos:"Videos",power:"Power",openDocuments:"Open Documents",openPictures:"Open Pictures",openVideos:"Open Videos",powerOff:"Power Off (Clear Session)"},notificationPopover={title:"Notifications",empty:"No notifications",ariaLabel:"Notifications",dismiss:"Dismiss notification"},toast={closeAriaLabel:"Close notification"},optionsCenter={nightLight:"Night Light",on:"On",off:"Off",perAppVolume:"Per-app Volume",noAudioApps:"No audio or video apps running"},aiAssistant$3={greeting:"Nexa: Hello! I'm Nexa, your assistant. How can I help you today?",placeholder:"Ask me anything...",send:"Send",research:"Research",you:"You",nexa:"Nexa",nexaThinking:"Nexa (Thinking)",error:"Sorry, something went wrong."},en={settings:settings$4,taskbar,startMenu,notificationPopover,toast,optionsCenter,aiAssistant:aiAssistant$3},settings$3={title:"Configuración",tabs:{appearance:"Apariencia",accessibility:"Accesibilidad",privacy:"Privacidad",updates:"Actualizaciones",nexa:"Asistente Nexa",language:"Idioma",about:"Acerca de"},appearance:{theme:"Tema",fontFamily:"Fuente",fontSize:"Tamaño de fuente",cursorAcceleration:"Aceleración del cursor",touchSwipe:"Deslizar con dos dedos",touchPinch:"Acercar con pellizco",vsync:"VSync",customFontsInfo:"Coloque fuentes personalizadas (.ttf/.otf) en /assets/fonts/",systemUi:"Interfaz del sistema",custom:"Personalizado..."},accessibility:{highContrast:"Alto contraste",screenReader:"Lector de pantalla",windowMagnifier:"Lupa de ventana",colorBlind:"Modo daltónico",reduceMotion:"Reducir movimiento"},privacy:{location:"Servicios de ubicación",telemetry:"Telemetría",animations:"Animaciones de escritorio",sounds:"Efectos de sonido",nightLight:"Luz nocturna",dnd:"No molestar"},updates:{autoUpdate:"Actualización automática",checkNow:"Buscar ahora"},language:{language:"Idioma",keymap:"Distribución",dateFormat:"Formato de fecha",timeZone:"Zona horaria",qwerty:"QWERTY",colemak:"Colemak",dvorak:"Dvorak",mmddyyyy:"MM/DD/YYYY",ddmmyyyy:"DD/MM/YYYY",yyyymmdd:"YYYY-MM-DD"},nexa:{selectModel:"Seleccionar modelo",testingModel:"Probando modelo...",testSuccessful:"Prueba exitosa:",testFailed:"Prueba fallida:",currentModel:"Modelo actual:",gpuWorkers:"Trabajadores de GPU",usageDashboard:"Panel de uso",totalCalls:"Llamadas totales:",totalTokens:"Tokens totales:",lastLatency:"Última latencia:",estimatedCost:"Costo estimado:"},about:{text:"NyxOS es un sistema operativo rápido y ligero que se ejecuta localmente en tu navegador."},aiAssistant:{greeting:"Nexa: ¡Hola! Soy Nexa, tu asistente. ¿Cómo puedo ayudarte hoy?",placeholder:"Pregúntame lo que sea...",send:"Enviar",research:"Investigar",you:"Tú",nexa:"Nexa",nexaThinking:"Nexa (Pensando)",error:"Lo siento, algo salió mal."}},es={settings:settings$3},settings$2={title:"Paramètres",tabs:{appearance:"Apparence",accessibility:"Accessibilité",privacy:"Confidentialité",updates:"Mises à jour",nexa:"Assistant Nexa",language:"Langue",about:"À propos"},appearance:{theme:"Thème",fontFamily:"Police",fontSize:"Taille de police",cursorAcceleration:"Accélération du curseur",touchSwipe:"Glisser à deux doigts",touchPinch:"Zoom par pincement",vsync:"VSync",customFontsInfo:"Placez des polices personnalisées (.ttf/.otf) dans /assets/fonts/",systemUi:"Interface système",custom:"Personnalisé..."},accessibility:{highContrast:"Contraste élevé",screenReader:"Lecteur d'écran",windowMagnifier:"Loupe de fenêtre",colorBlind:"Mode daltonien",reduceMotion:"Réduire le mouvement"},privacy:{location:"Services de localisation",telemetry:"Télémétrie",animations:"Animations du bureau",sounds:"Effets sonores",nightLight:"Lumière nocturne",dnd:"Ne pas déranger"},updates:{autoUpdate:"Mise à jour automatique",checkNow:"Vérifier maintenant"},language:{language:"Langue",keymap:"Configuration du clavier",dateFormat:"Format de date",timeZone:"Fuseau horaire",qwerty:"QWERTY",colemak:"Colemak",dvorak:"Dvorak",mmddyyyy:"MM/DD/YYYY",ddmmyyyy:"DD/MM/YYYY",yyyymmdd:"YYYY-MM-DD"},nexa:{selectModel:"Sélectionner le modèle",testingModel:"Test du modèle...",testSuccessful:"Test réussi :",testFailed:"Échec du test :",currentModel:"Modèle actuel :",gpuWorkers:"Workers GPU",usageDashboard:"Tableau de bord d'utilisation",totalCalls:"Nombre total d'appels :",totalTokens:"Nombre total de jetons :",lastLatency:"Dernière latence :",estimatedCost:"Coût estimé :"},about:{text:"NyxOS est un système d'exploitation rapide et léger fonctionnant localement dans votre navigateur."}},aiAssistant$2={greeting:"Nexa : Bonjour ! Je suis Nexa, votre assistant. Comment puis-je vous aider aujourd'hui ?",placeholder:"Posez-moi une question...",send:"Envoyer",research:"Rechercher",you:"Vous",nexa:"Nexa",nexaThinking:"Nexa (Réflexion)",error:"Désolé, une erreur est survenue."},fr={settings:settings$2,aiAssistant:aiAssistant$2},settings$1={title:"Einstellungen",tabs:{appearance:"Aussehen",accessibility:"Barrierefreiheit",privacy:"Datenschutz",updates:"Updates",nexa:"Nexa Assistent",language:"Sprache",about:"Über"},appearance:{theme:"Thema",fontFamily:"Schriftart",fontSize:"Schriftgröße",cursorAcceleration:"Cursorbeschleunigung",touchSwipe:"Zweifinger-Wischen",touchPinch:"Pinch-Zoom",vsync:"VSync",customFontsInfo:"Lege benutzerdefinierte Schriftarten (.ttf/.otf) in /assets/fonts/ ab",systemUi:"System-Benutzeroberfläche",custom:"Benutzerdefiniert..."},accessibility:{highContrast:"Hoher Kontrast",screenReader:"Bildschirmleser",windowMagnifier:"Fenster-Lupe",colorBlind:"Farbblindmodus",reduceMotion:"Bewegung reduzieren"},privacy:{location:"Standortdienste",telemetry:"Telemetrie",animations:"Desktop-Animationen",sounds:"Soundeffekte",nightLight:"Nachtlicht",dnd:"Bitte nicht stören"},updates:{autoUpdate:"Automatisches Update",checkNow:"Jetzt prüfen"},language:{language:"Sprache",keymap:"Tastaturbelegung",qwerty:"QWERTY",colemak:"Colemak",dvorak:"Dvorak",dateFormat:"Datumsformat",mmddyyyy:"MM/DD/YYYY",ddmmyyyy:"DD/MM/YYYY",yyyymmdd:"YYYY-MM-DD",timeZone:"Zeitzone"},nexa:{selectModel:"Modell auswählen",testingModel:"Modell wird getestet...",testSuccessful:"Test erfolgreich:",testFailed:"Test fehlgeschlagen:",currentModel:"Aktuelles Modell:",gpuWorkers:"GPU-Arbeiter",usageDashboard:"Nutzungsübersicht",totalCalls:"Gesamtaufrufe:",totalTokens:"Gesamttoken:",lastLatency:"Letzte Latenz:",estimatedCost:"Geschätzte Kosten:"},about:{text:"NyxOS ist ein schnelles, leichtgewichtiges Betriebssystem, das lokal in Ihrem Browser läuft."}},aiAssistant$1={greeting:"Nexa: Hallo! Ich bin Nexa, dein Assistent. Wie kann ich dir heute helfen?",placeholder:"Frag mich etwas...",send:"Senden",research:"Forschung",you:"Du",nexa:"Nexa",nexaThinking:"Nexa (Denkt)",error:"Entschuldigung, es ist ein Fehler aufgetreten."},de={settings:settings$1,aiAssistant:aiAssistant$1},settings={title:"Налаштування",tabs:{appearance:"Зовнішній вигляд",accessibility:"Доступність",privacy:"Конфіденційність",updates:"Оновлення",nexa:"Асистент Nexa",language:"Мова",about:"Про програму"},appearance:{theme:"Тема",fontFamily:"Шрифт",fontSize:"Розмір шрифту",cursorAcceleration:"Прискорення курсору",touchSwipe:"Свайп двома пальцями",touchPinch:"Зум щипком",vsync:"VSync",customFontsInfo:"Розмістіть власні шрифти (.ttf/.otf) у /assets/fonts/",systemUi:"Системний інтерфейс",custom:"Власні..."},accessibility:{highContrast:"Висока контрастність",screenReader:"Зчитувач екрану",windowMagnifier:"Лупа вікна",colorBlind:"Режим дальтоніка",reduceMotion:"Зменшити рух"},privacy:{location:"Служби локації",telemetry:"Телеметрія",animations:"Анімація робочого столу",sounds:"Звукові ефекти",nightLight:"Нічне світло",dnd:"Не турбувати"},updates:{autoUpdate:"Автоматичне оновлення",checkNow:"Перевірити зараз"},language:{language:"Мова",keymap:"Розкладка клавіатури",dateFormat:"Формат дати",timeZone:"Часовий пояс",qwerty:"QWERTY",colemak:"Colemak",dvorak:"Dvorak",mmddyyyy:"MM/DD/YYYY",ddmmyyyy:"DD/MM/YYYY",yyyymmdd:"YYYY-MM-DD"},nexa:{selectModel:"Вибрати модель",testingModel:"Тестування моделі...",testSuccessful:"Тест успішний:",testFailed:"Тест не вдався:",currentModel:"Поточна модель:",gpuWorkers:"GPU працівники",usageDashboard:"Панель використання",totalCalls:"Загальні виклики:",totalTokens:"Загальні токени:",lastLatency:"Остання затримка:",estimatedCost:"Оцінена вартість:"},about:{text:"NyxOS — швидка, легка операційна система, що працює локально у вашому браузері."}},aiAssistant={greeting:"Nexa: Привіт! Я Nexa, твій асистент. Як я можу допомогти тобі сьогодні?",placeholder:"Запитай мене про що завгодно...",send:"Відправити",research:"Дослідити",you:"Ти",nexa:"Nexa",nexaThinking:"Nexa (Думає)",error:"Вибач, щось пішло не так."},uk={settings,aiAssistant};instance.use(initReactI18next).init({resources:{en:{translation:en},es:{translation:es},fr:{translation:fr},de:{translation:de},uk:{translation:uk}},lng:localStorage.getItem("nyxos_language")||"en",fallbackLng:"en",interpolation:{escapeValue:!1}});const root=clientExports.createRoot(document.getElementById("root"));"serviceWorker"in navigator&&navigator.serviceWorker.register("/INyxOS/sw.js");root.render(jsxRuntimeExports.jsx(NotificationProvider,{children:jsxRuntimeExports.jsx(Desktop,{})}));export{__vitePreload as _,requireUtils as a,requirePatterns as b,getDefaultExportFromCjs as g,requireReact as r};
